    
    

<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8" />
  <title>eim:colocvii:colocviu01</title>
<meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="date" content="2016-03-26T22:16:19+0200"/>
<meta name="keywords" content="eim,colocvii,colocviu01"/>
<link rel="search" type="application/opensearchdescription+xml" href="../../../../lib/exe/opensearch.php" title="CS Open CourseWare"/>
<link rel="start" href="../../../../../courses.1.html"/>
<link rel="alternate" type="application/rss+xml" title="Recent Changes" href="../../../../feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current Namespace" href="../../../../feed.php%3Fmode=list&amp;ns=eim:colocvii"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="colocviu01.html"/>
<link rel="canonical" href="../../../../eim/colocvii/colocviu01.html"/>
<link rel="stylesheet" type="text/css" href="../../../../lib/exe/css.php%3Ft=arctic&amp;tseed=1479898000.css"/>
<script type="text/javascript">/*<![CDATA[*/var NS='eim:colocvii';var JSINFO = {"id":"eim:colocvii:colocviu01","namespace":"eim:colocvii","isadmin":0,"isauth":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="../../../../lib/exe/js.php%3Ftseed=1479898000"></script>
<script type="text/x-mathjax-config">/*<![CDATA[*/MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ["$","$"], ["\\(","\\)"] ],
        displayMath: [ ["$$","$$"], ["\\[","\\]"] ],
        processEscapes: true
    }
});
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
<script type="text/javascript">/*<![CDATA[*/
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
		  
/*!]]>*/</script>
<script type="text/javascript">/*<![CDATA[*/
var pageTracker = _gat._getTracker("UA-38383934-1");
pageTracker._initData();
pageTracker._trackPageview();
		  
/*!]]>*/</script>
</head>
<body>
<div class="dokuwiki export">
<!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="colocviu01.html#colocviu_1">Colocviu 1</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="colocviu01.html#model_de_subiect">Model de Subiect</a></div></li>
<li class="level2"><div class="li"><a href="colocviu01.html#observatii_generale">Observații Generale</a></div></li>
<li class="level2"><div class="li"><a href="colocviu01.html#rezolvari">Rezolvări</a></div></li>
</ul></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="colocviu_1">Colocviu 1</h1>
<div class="level1">

</div>
<!-- EDIT1 SECTION "Colocviu 1" [1-26] -->
<h2 class="sectionedit2" id="model_de_subiect">Model de Subiect</h2>
<div class="level2">

<center>

<p>
<iframe title="" src="../../../../_media/eim/colocvii/colocviu01/eim2016-tp01-varsim.pdf" style="width:90%; height:800px"></iframe>
</p>

</center>

<p>
<a href="../../../../_media/eim/colocvii/colocviu01/eim2016-tp01-varsim.pdf" class="media mediafile mf_pdf" title="eim:colocvii:colocviu01:eim2016-tp01-varsim.pdf (366.8 KB)">eim2016-tp01-varsim.pdf</a>
</p>

</div>
<!-- EDIT2 SECTION "Model de Subiect" [27-266] -->
<h2 class="sectionedit3" id="observatii_generale">Observații Generale</h2>
<div class="level2">

<p>
Pentru rezolvarea subiectelor propuse în cadrul colocviului 1, sunt necesare:
</p>
<ul>
<li class="level1"><div class="li"> un cont Github personal, pe care să existe drepturi de citire și de scriere;</div>
</li>
<li class="level1"><div class="li"> SDK-ul de Android (cu o imagine pentru nivelul de <abbr title="Application Programming Interface">API</abbr> 16 - Jelly Bean 4.1);</div>
</li>
<li class="level1"><div class="li"> mediul de dezvoltare integrat (Eclipse împreună cu plugin-ul Android Developer Tools sau Android Studio);</div>
</li>
<li class="level1"><div class="li"> un dispozitiv mobil:</div>
<ul>
<li class="level2"><div class="li"> fizic (bring your own device);</div>
</li>
<li class="level2"><div class="li"> virtual: Genymotion, AVD.</div>
</li>
</ul>
</li>
</ul>

</div>
<!-- EDIT3 SECTION "Observații Generale" [267-1245] -->
<h2 class="sectionedit4" id="rezolvari">Rezolvări</h2>
<div class="level2">

<p>
Proiectele Eclipse / Android Studio corespunzătoare aplicației Android ce conține rezolvările complete ale cerințelor colocviului sunt disponibile pe <a href="https://github.com/eim2016/PracticalTest01" class="urlextern" title="https://github.com/eim2016/PracticalTest01"  rel="nofollow">contul de Github al disciplinei</a>.
</p>

<p>
<strong>A.1.</strong> Se accesează <a href="https://www.github.com" class="urlextern" title="https://www.github.com"  rel="nofollow">Github</a> și se realizează autentificarea în contul personal, prin intermediul butonului <em>Sign in</em>.
</p>

<p>
<img src="../../../../_media/eim/colocvii/colocviu01/github_authentication.png%3Fw=700&amp;tok=e14534" class="mediacenter" alt="" width="700" />
</p>

<p>
Se creează o zonă de lucru corespunzătoare unui proiect prin intermediului butonului <em>New Repository</em>.
</p>

<p>
<img src="../../../../_media/eim/colocvii/colocviu01/github_new_repository.png" class="mediacenter" alt="" />
</p>

<p>
Configurarea depozitului la distanță presupune specificarea:
</p>
<ul>
<li class="level1"><div class="li"> unei denumiri;</div>
</li>
<li class="level1"><div class="li"> unei descrieri (opțional);</div>
</li>
<li class="level1"><div class="li"> tipului de director (public sau privat - doar contra cost!!!);</div>
</li>
<li class="level1"><div class="li"> modului de inițializare:</div>
<ul>
<li class="level2"><div class="li"> local, prin <code>git init</code>;</div>
</li>
<li class="level2"><div class="li"> la distanță, prin <code>git clone</code> - depozitul la distanță nu trebuie să fie vid, în această situațoe </div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> unui fișier <code>README</code> (opțional);</div>
</li>
<li class="level1"><div class="li"> extensiilor ignorate (corespunzătoare limbajului de programare folosit, în cazul de față - Android) - incluse în fișierul <code>.gitignore</code>;</div>
</li>
<li class="level1"><div class="li"> tipului de licență sub care este publicat codul sursă.</div>
</li>
</ul>

<p>
<img src="../../../../_media/eim/colocvii/colocviu01/github_repository_configuration.png" class="mediacenter" alt="" />
</p>

<p>
<strong>A.2.</strong> Prin intermediul comenzii <code>git clone</code> se poate descărca întregul conținut în directorul curent (de pe discul local), inclusiv istoricul complet al versiunilor anterioare (care poate fi ulterior reconstituit după această copie, în cazul coruperii informațiilor stocate pe serverul la distanță).
</p>

<p>
<p><div class="noteclassic">În situația în care se dorește clonarea conținutului din depozitul la distanță în alt director decât cel curent, acesta poate fi transmis ca parametru al comenzii, după <abbr title="Uniform Resource Locator">URL</abbr>-ul la care poate fi accesat proiectul în Github.
</div></p>
</p>
<pre class="code">student@eim2016:~$ git clone https://www.github.com/perfectstudent/PracticalTest01</pre>

<p>
<strong>A.3.</strong> Se urmăresc indicațiile disponibile în secțiunea <a href="../../../../eim/laboratoare/laborator01.html#crearea_unei_aplicatii_android_in_eclipse_mars_1_451_-_obligatoriu" class="wikilink1" title="eim:laboratoare:laborator01">Crearea unei aplicații Android în Eclipse Mars 1 (4.5.1)</a> sau <a href="../../../../eim/laboratoare/laborator01.html#crearea_unei_aplicatii_android_in_android_studio_151_-_obligatoriu" class="wikilink1" title="eim:laboratoare:laborator01">Crearea unei aplicații Android în Android Studio 1.5.1</a>.
</p>

<p>
<strong>A.4.</strong> Implementarea interfeței grafice va fi realizată prin intermediul unui fișier <code>.xml</code> care va fi plasat în directorul <code>/res/layout</code> al proiectului.
</p>

<p>
De cele mai multe ori, interfața grafică poate fi realizată în două moduri:
</p>
<ul>
<li class="level1"><div class="li"> prin folosirea unui singur container de tip <code>RelativeLayout</code> în care vor fi plasate toate controalele, având poziția definită relativ unele la celelalte sau la marginile părintelui în care sunt incluse;</div>
</li>
<li class="level1"><div class="li"> prin folosirea mai multor containere de tip <code>LinearLayout</code>, imbricate, având orientări diferite (orizontal - implicit, sau vertical).</div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> Varianta 1 - un singur container de tip <code>RelativeLayout</code></div>
</li>
</ul>

<p>
<p><div class="notetip">Dacă se dorește ca un anumit control să fie aliniat cu un control care se găsește deasupra sa (aliniere pe orizontală), acesta va fi indicat ca valoare pentru proprietățile <code>android:layout_alignLeft</code> și <code>android:layout_alignRight</code> (proprietatea <code>android:layout_width</code> fiind ignorată în acest caz). În mod similar, dacă se dorește alinierea cu un control aflat la stânga (aliniere pe verticală), acesta va fi precizat ca valoare pentru proprietățile <code>android:layout_alignTop</code> și <code>android:layout_alignBottom</code> (proprietatea <code>android:layout_height</code> fiind ignorată în acest caz). 
</div></p> 
</p>
<dl class="file">
<dt><a href="../../../code/eim/colocvii/colocviu01%3Fcodeblock=1" title="Download Snippet" class="mediafile mf_xml">activity_practical_test01_main.xml</a></dt>
<dd><pre class="code file xml"><span class="sc3"><span class="re1">&lt;RelativeLayout</span> <span class="re0">xmlns:android</span>=<span class="st0">&quot;http://schemas.android.com/apk/res/android&quot;</span></span>
<span class="sc3">  <span class="re0">xmlns:tools</span>=<span class="st0">&quot;http://schemas.android.com/tools&quot;</span></span>
<span class="sc3">  <span class="re0">android:layout_width</span>=<span class="st0">&quot;match_parent&quot;</span></span>
<span class="sc3">  <span class="re0">android:layout_height</span>=<span class="st0">&quot;wrap_content&quot;</span></span>
<span class="sc3">  <span class="re0">tools:context</span>=<span class="st0">&quot;ro.pub.cs.systems.eim.practicaltest01.PracticalTest01MainActivity&quot;</span> <span class="re2">&gt;</span></span>
&nbsp;
  <span class="sc3"><span class="re1">&lt;Button</span></span>
<span class="sc3">    <span class="re0">android:id</span>=<span class="st0">&quot;@+id/navigate_to_secondary_activity_button&quot;</span></span>
<span class="sc3">    <span class="re0">android:layout_width</span>=<span class="st0">&quot;wrap_content&quot;</span></span>
<span class="sc3">    <span class="re0">android:layout_height</span>=<span class="st0">&quot;wrap_content&quot;</span></span>
<span class="sc3">    <span class="re0">android:layout_alignParentTop</span>=<span class="st0">&quot;true&quot;</span></span>
<span class="sc3">    <span class="re0">android:layout_alignParentRight</span>=<span class="st0">&quot;true&quot;</span></span>
<span class="sc3">    <span class="re0">android:text</span>=<span class="st0">&quot;@string/navigate_to_secondary_activity&quot;</span> <span class="re2">/&gt;</span></span>
&nbsp;
  <span class="sc3"><span class="re1">&lt;EditText</span></span>
<span class="sc3">    <span class="re0">android:id</span>=<span class="st0">&quot;@+id/left_edit_text&quot;</span></span>
<span class="sc3">    <span class="re0">android:layout_width</span>=<span class="st0">&quot;wrap_content&quot;</span></span>
<span class="sc3">    <span class="re0">android:layout_height</span>=<span class="st0">&quot;wrap_content&quot;</span></span>
<span class="sc3">    <span class="re0">android:saveEnabled</span>=<span class="st0">&quot;false&quot;</span></span>
<span class="sc3">    <span class="re0">android:enabled</span>=<span class="st0">&quot;false&quot;</span></span>
<span class="sc3">    <span class="re0">android:inputType</span>=<span class="st0">&quot;number&quot;</span></span>
<span class="sc3">    <span class="re0">android:ems</span>=<span class="st0">&quot;7&quot;</span></span>
<span class="sc3">    <span class="re0">android:layout_alignParentLeft</span>=<span class="st0">&quot;true&quot;</span></span>
<span class="sc3">    <span class="re0">android:layout_below</span>=<span class="st0">&quot;@id/navigate_to_secondary_activity_button&quot;</span></span>
<span class="sc3">    <span class="re0">android:gravity</span>=<span class="st0">&quot;center&quot;</span> <span class="re2">/&gt;</span></span>
&nbsp;
  <span class="sc3"><span class="re1">&lt;EditText</span></span>
<span class="sc3">    <span class="re0">android:id</span>=<span class="st0">&quot;@+id/right_edit_text&quot;</span></span>
<span class="sc3">    <span class="re0">android:layout_width</span>=<span class="st0">&quot;wrap_content&quot;</span></span>
<span class="sc3">    <span class="re0">android:layout_height</span>=<span class="st0">&quot;wrap_content&quot;</span></span>
<span class="sc3">    <span class="re0">android:saveEnabled</span>=<span class="st0">&quot;false&quot;</span></span>
<span class="sc3">    <span class="re0">android:enabled</span>=<span class="st0">&quot;false&quot;</span>   </span>
<span class="sc3">    <span class="re0">android:inputType</span>=<span class="st0">&quot;number&quot;</span></span>
<span class="sc3">    <span class="re0">android:ems</span>=<span class="st0">&quot;7&quot;</span></span>
<span class="sc3">    <span class="re0">android:layout_alignParentRight</span>=<span class="st0">&quot;true&quot;</span></span>
<span class="sc3">    <span class="re0">android:layout_below</span>=<span class="st0">&quot;@id/navigate_to_secondary_activity_button&quot;</span>	        </span>
<span class="sc3">    <span class="re0">android:gravity</span>=<span class="st0">&quot;center&quot;</span> <span class="re2">/&gt;</span></span>
&nbsp;
  <span class="sc3"><span class="re1">&lt;Button</span></span>
<span class="sc3">    <span class="re0">android:id</span>=<span class="st0">&quot;@+id/left_button&quot;</span></span>
<span class="sc3">    <span class="re0">android:layout_width</span>=<span class="st0">&quot;wrap_content&quot;</span></span>
<span class="sc3">    <span class="re0">android:layout_height</span>=<span class="st0">&quot;wrap_content&quot;</span></span>
<span class="sc3">    <span class="re0">android:layout_alignLeft</span>=<span class="st0">&quot;@id/left_edit_text&quot;</span></span>
<span class="sc3">    <span class="re0">android:layout_below</span>=<span class="st0">&quot;@id/left_edit_text&quot;</span></span>
<span class="sc3">    <span class="re0">android:layout_alignRight</span>=<span class="st0">&quot;@id/left_edit_text&quot;</span></span>
<span class="sc3">    <span class="re0">android:text</span>=<span class="st0">&quot;@string/press_me&quot;</span> <span class="re2">/&gt;</span></span>
&nbsp;
  <span class="sc3"><span class="re1">&lt;Button</span></span>
<span class="sc3">    <span class="re0">android:id</span>=<span class="st0">&quot;@+id/right_button&quot;</span></span>
<span class="sc3">    <span class="re0">android:layout_width</span>=<span class="st0">&quot;wrap_content&quot;</span></span>
<span class="sc3">    <span class="re0">android:layout_height</span>=<span class="st0">&quot;wrap_content&quot;</span></span>
<span class="sc3">    <span class="re0">android:layout_alignLeft</span>=<span class="st0">&quot;@id/right_edit_text&quot;</span></span>
<span class="sc3">    <span class="re0">android:layout_alignRight</span>=<span class="st0">&quot;@id/right_edit_text&quot;</span></span>
<span class="sc3">    <span class="re0">android:layout_below</span>=<span class="st0">&quot;@id/right_edit_text&quot;</span>		      </span>
<span class="sc3">    <span class="re0">android:text</span>=<span class="st0">&quot;@string/press_me_too&quot;</span> <span class="re2">/&gt;</span></span>
&nbsp;
<span class="sc3"><span class="re1">&lt;/RelativeLayout<span class="re2">&gt;</span></span></span></pre>
</dd></dl>
<ul>
<li class="level1"><div class="li"> Varianta 2 - mai multe containere de tip <code>LinearLayout</code> imbricate</div>
</li>
</ul>

<p>
<p><div class="notetip">Dacă se dorește ca un anumit control să ocupe o anumită proporție în cadrul continerului, se va utiliza proprietatea <code>android:layout_weight</code>, însă pentru a fi luată în considerare, atributul <code>android:layout_width</code>, respectiv <code>android:layout_height</code> (în funcție de coordonata pe care se dorește obținerea unei astfel de funcționalități) trebuie să aibă valoarea <code>0dp</code>.
</div></p>
</p>
<dl class="file">
<dt><a href="../../../code/eim/colocvii/colocviu01%3Fcodeblock=2" title="Download Snippet" class="mediafile mf_xml">activity_practical_test01_main.xml</a></dt>
<dd><pre class="code file xml"><span class="sc3"><span class="re1">&lt;LinearLayout</span> <span class="re0">xmlns:android</span>=<span class="st0">&quot;http://schemas.android.com/apk/res/android&quot;</span></span>
<span class="sc3">  <span class="re0">xmlns:tools</span>=<span class="st0">&quot;http://schemas.android.com/tools&quot;</span></span>
<span class="sc3">  <span class="re0">android:layout_width</span>=<span class="st0">&quot;match_parent&quot;</span></span>
<span class="sc3">  <span class="re0">android:layout_height</span>=<span class="st0">&quot;wrap_content&quot;</span></span>
<span class="sc3">  <span class="re0">android:orientation</span>=<span class="st0">&quot;vertical&quot;</span></span>
<span class="sc3">  <span class="re0">tools:context</span>=<span class="st0">&quot;ro.pub.cs.systems.eim.practicaltest01.PracticalTest01MainActivity&quot;</span> <span class="re2">&gt;</span></span>
&nbsp;
  <span class="sc3"><span class="re1">&lt;LinearLayout</span></span>
<span class="sc3">    <span class="re0">android:layout_width</span>=<span class="st0">&quot;match_parent&quot;</span></span>
<span class="sc3">    <span class="re0">android:layout_height</span>=<span class="st0">&quot;wrap_content&quot;</span> <span class="re2">&gt;</span></span>
&nbsp;
    <span class="sc3"><span class="re1">&lt;EditText</span></span>
<span class="sc3">      <span class="re0">android:id</span>=<span class="st0">&quot;@+id/left_edit_text&quot;</span></span>
<span class="sc3">      <span class="re0">android:layout_width</span>=<span class="st0">&quot;0dp&quot;</span></span>
<span class="sc3">      <span class="re0">android:layout_height</span>=<span class="st0">&quot;wrap_content&quot;</span></span>
<span class="sc3">      <span class="re0">android:layout_weight</span>=<span class="st0">&quot;1&quot;</span></span>
<span class="sc3">      <span class="re0">android:enabled</span>=<span class="st0">&quot;false&quot;</span></span>
<span class="sc3">      <span class="re0">android:inputType</span>=<span class="st0">&quot;number&quot;</span></span>
<span class="sc3">      <span class="re0">android:gravity</span>=<span class="st0">&quot;center&quot;</span> <span class="re2">/&gt;</span></span>
&nbsp;
    <span class="sc3"><span class="re1">&lt;EditText</span></span>
<span class="sc3">      <span class="re0">android:id</span>=<span class="st0">&quot;@+id/right_edit_text&quot;</span></span>
<span class="sc3">      <span class="re0">android:layout_width</span>=<span class="st0">&quot;0dp&quot;</span></span>
<span class="sc3">      <span class="re0">android:layout_height</span>=<span class="st0">&quot;wrap_content&quot;</span></span>
<span class="sc3">      <span class="re0">android:layout_weight</span>=<span class="st0">&quot;1&quot;</span></span>
<span class="sc3">      <span class="re0">android:enabled</span>=<span class="st0">&quot;false&quot;</span>  </span>
<span class="sc3">      <span class="re0">android:inputType</span>=<span class="st0">&quot;number&quot;</span></span>
<span class="sc3">      <span class="re0">android:gravity</span>=<span class="st0">&quot;center&quot;</span> <span class="re2">/&gt;</span></span>
&nbsp;
  <span class="sc3"><span class="re1">&lt;/LinearLayout<span class="re2">&gt;</span></span></span>
&nbsp;
  <span class="sc3"><span class="re1">&lt;LinearLayout</span></span>
<span class="sc3">    <span class="re0">android:layout_width</span>=<span class="st0">&quot;match_parent&quot;</span></span>
<span class="sc3">    <span class="re0">android:layout_height</span>=<span class="st0">&quot;wrap_content&quot;</span></span>
<span class="sc3">    <span class="re0">android:baselineAligned</span>=<span class="st0">&quot;false&quot;</span> <span class="re2">&gt;</span></span>
&nbsp;
    <span class="sc3"><span class="re1">&lt;ScrollView</span></span>
<span class="sc3">      <span class="re0">android:layout_width</span>=<span class="st0">&quot;0dp&quot;</span></span>
<span class="sc3">      <span class="re0">android:layout_height</span>=<span class="st0">&quot;wrap_content&quot;</span></span>
<span class="sc3">      <span class="re0">android:layout_weight</span>=<span class="st0">&quot;1&quot;</span><span class="re2">&gt;</span></span>
&nbsp;
      <span class="sc3"><span class="re1">&lt;Button</span></span>
<span class="sc3">        <span class="re0">android:id</span>=<span class="st0">&quot;@+id/left_button&quot;</span></span>
<span class="sc3">        <span class="re0">android:layout_width</span>=<span class="st0">&quot;wrap_content&quot;</span></span>
<span class="sc3">        <span class="re0">android:layout_height</span>=<span class="st0">&quot;wrap_content&quot;</span></span>
<span class="sc3">        <span class="re0">android:layout_gravity</span>=<span class="st0">&quot;center&quot;</span></span>
<span class="sc3">        <span class="re0">android:text</span>=<span class="st0">&quot;@string/press_me&quot;</span> <span class="re2">/&gt;</span></span>
&nbsp;
    <span class="sc3"><span class="re1">&lt;/ScrollView<span class="re2">&gt;</span></span></span>
&nbsp;
    <span class="sc3"><span class="re1">&lt;ScrollView</span></span>
<span class="sc3">      <span class="re0">android:layout_width</span>=<span class="st0">&quot;0dp&quot;</span></span>
<span class="sc3">      <span class="re0">android:layout_height</span>=<span class="st0">&quot;wrap_content&quot;</span></span>
<span class="sc3">      <span class="re0">android:layout_weight</span>=<span class="st0">&quot;1&quot;</span><span class="re2">&gt;</span></span>
&nbsp;
      <span class="sc3"><span class="re1">&lt;Button</span></span>
<span class="sc3">        <span class="re0">android:id</span>=<span class="st0">&quot;@+id/right_button&quot;</span></span>
<span class="sc3">        <span class="re0">android:layout_width</span>=<span class="st0">&quot;wrap_content&quot;</span></span>
<span class="sc3">        <span class="re0">android:layout_height</span>=<span class="st0">&quot;wrap_content&quot;</span></span>
<span class="sc3">        <span class="re0">android:layout_gravity</span>=<span class="st0">&quot;center&quot;</span></span>
<span class="sc3">        <span class="re0">android:text</span>=<span class="st0">&quot;@string/press_me_too&quot;</span> <span class="re2">/&gt;</span></span>
&nbsp;
    <span class="sc3"><span class="re1">&lt;/ScrollView<span class="re2">&gt;</span></span></span>
&nbsp;
  <span class="sc3"><span class="re1">&lt;/LinearLayout<span class="re2">&gt;</span></span></span>
&nbsp;
<span class="sc3"><span class="re1">&lt;/LinearLayout<span class="re2">&gt;</span></span></span></pre>
</dd></dl>
<ul>
<li class="level1"><div class="li"> Varianta 3 - un container de tip <code>LinearLayout</code> vertical care include un control grafic de tip <code>Button</code> și un container <code>GridLayout</code>, cu 2 linii și 2 coloane; pe linia 0 se vor găsi cele 2 câmpuri text editabile, a căror lungime trebuie să fie specificată explicit iar pe linia 1 cele două butoane, a căror aliniere (centrată pe orizontală raportat la celula din care fac parte) trebuie să fie precizată</div>
</li>
</ul>
<dl class="file">
<dt><a href="../../../code/eim/colocvii/colocviu01%3Fcodeblock=3" title="Download Snippet" class="mediafile mf_xml">activity_practical_test01_main.xml</a></dt>
<dd><pre class="code file xml"><span class="sc3"><span class="re1">&lt;LinearLayout</span> <span class="re0">xmlns:android</span>=<span class="st0">&quot;http://schemas.android.com/apk/res/android&quot;</span></span>
<span class="sc3">  <span class="re0">xmlns:tools</span>=<span class="st0">&quot;http://schemas.android.com/tools&quot;</span></span>
<span class="sc3">  <span class="re0">android:layout_width</span>=<span class="st0">&quot;match_parent&quot;</span></span>
<span class="sc3">  <span class="re0">android:layout_height</span>=<span class="st0">&quot;match_parent&quot;</span></span>
<span class="sc3">  <span class="re0">android:paddingBottom</span>=<span class="st0">&quot;@dimen/activity_vertical_margin&quot;</span></span>
<span class="sc3">  <span class="re0">android:paddingLeft</span>=<span class="st0">&quot;@dimen/activity_horizontal_margin&quot;</span></span>
<span class="sc3">  <span class="re0">android:paddingRight</span>=<span class="st0">&quot;@dimen/activity_horizontal_margin&quot;</span></span>
<span class="sc3">  <span class="re0">android:paddingTop</span>=<span class="st0">&quot;@dimen/activity_vertical_margin&quot;</span></span>
<span class="sc3">  <span class="re0">android:orientation</span>=<span class="st0">&quot;vertical&quot;</span></span>
<span class="sc3">  <span class="re0">tools:context</span>=<span class="st0">&quot;ro.pub.cs.systems.eim.practicaltest01.PracticalTest01MainActivity&quot;</span> <span class="re2">&gt;</span></span>
&nbsp;
  <span class="sc3"><span class="re1">&lt;Button</span></span>
<span class="sc3">    <span class="re0">android:id</span>=<span class="st0">&quot;@+id/navigate_to_secondary_activity_button&quot;</span></span>
<span class="sc3">    <span class="re0">android:layout_width</span>=<span class="st0">&quot;wrap_content&quot;</span></span>
<span class="sc3">    <span class="re0">android:layout_height</span>=<span class="st0">&quot;wrap_content&quot;</span></span>
<span class="sc3">    <span class="re0">android:text</span>=<span class="st0">&quot;@string/navigate_to_secondary_activity&quot;</span><span class="re2">/&gt;</span></span>
&nbsp;
    <span class="sc3"><span class="re1">&lt;GridLayout</span></span>
<span class="sc3">      <span class="re0">android:layout_width</span>=<span class="st0">&quot;match_parent&quot;</span></span>
<span class="sc3">      <span class="re0">android:layout_height</span>=<span class="st0">&quot;wrap_content&quot;</span></span>
<span class="sc3">      <span class="re0">android:rowCount</span>=<span class="st0">&quot;2&quot;</span></span>
<span class="sc3">      <span class="re0">android:columnCount</span>=<span class="st0">&quot;2&quot;</span><span class="re2">&gt;</span></span>
&nbsp;
      <span class="sc3"><span class="re1">&lt;EditText</span></span>
<span class="sc3">        <span class="re0">android:id</span>=<span class="st0">&quot;@+id/left_edit_text&quot;</span></span>
<span class="sc3">	<span class="re0">android:layout_width</span>=<span class="st0">&quot;wrap_content&quot;</span></span>
<span class="sc3">	<span class="re0">android:layout_height</span>=<span class="st0">&quot;wrap_content&quot;</span></span>
<span class="sc3">	<span class="re0">android:saveEnabled</span>=<span class="st0">&quot;false&quot;</span></span>
<span class="sc3">	<span class="re0">android:enabled</span>=<span class="st0">&quot;false&quot;</span></span>
<span class="sc3">	<span class="re0">android:inputType</span>=<span class="st0">&quot;number&quot;</span></span>
<span class="sc3">	<span class="re0">android:ems</span>=<span class="st0">&quot;6&quot;</span></span>
<span class="sc3">	<span class="re0">android:layout_row</span>=<span class="st0">&quot;0&quot;</span></span>
<span class="sc3">	<span class="re0">android:layout_column</span>=<span class="st0">&quot;0&quot;</span></span>
<span class="sc3">	<span class="re0">android:layout_gravity</span>=<span class="st0">&quot;center&quot;</span></span>
<span class="sc3">	<span class="re0">android:gravity</span>=<span class="st0">&quot;center&quot;</span><span class="re2">/&gt;</span></span>
&nbsp;
      <span class="sc3"><span class="re1">&lt;EditText</span></span>
<span class="sc3">	<span class="re0">android:id</span>=<span class="st0">&quot;@+id/right_edit_text&quot;</span></span>
<span class="sc3">	<span class="re0">android:layout_width</span>=<span class="st0">&quot;wrap_content&quot;</span></span>
<span class="sc3">	<span class="re0">android:layout_height</span>=<span class="st0">&quot;wrap_content&quot;</span></span>
<span class="sc3">	<span class="re0">android:saveEnabled</span>=<span class="st0">&quot;false&quot;</span></span>
<span class="sc3">	<span class="re0">android:enabled</span>=<span class="st0">&quot;false&quot;</span></span>
<span class="sc3">	<span class="re0">android:inputType</span>=<span class="st0">&quot;number&quot;</span></span>
<span class="sc3">	<span class="re0">android:ems</span>=<span class="st0">&quot;6&quot;</span></span>
<span class="sc3">	<span class="re0">android:layout_row</span>=<span class="st0">&quot;0&quot;</span></span>
<span class="sc3">	<span class="re0">android:layout_column</span>=<span class="st0">&quot;1&quot;</span></span>
<span class="sc3">	<span class="re0">android:layout_gravity</span>=<span class="st0">&quot;center&quot;</span></span>
<span class="sc3">	<span class="re0">android:gravity</span>=<span class="st0">&quot;center&quot;</span> <span class="re2">/&gt;</span></span>
&nbsp;
      <span class="sc3"><span class="re1">&lt;Button</span></span>
<span class="sc3">	<span class="re0">android:id</span>=<span class="st0">&quot;@+id/left_button&quot;</span></span>
<span class="sc3">	<span class="re0">android:layout_width</span>=<span class="st0">&quot;wrap_content&quot;</span></span>
<span class="sc3">	<span class="re0">android:layout_height</span>=<span class="st0">&quot;wrap_content&quot;</span></span>
<span class="sc3">	<span class="re0">android:layout_row</span>=<span class="st0">&quot;1&quot;</span></span>
<span class="sc3">	<span class="re0">android:layout_column</span>=<span class="st0">&quot;0&quot;</span></span>
<span class="sc3">	<span class="re0">android:layout_gravity</span>=<span class="st0">&quot;center&quot;</span></span>
<span class="sc3">	<span class="re0">android:text</span>=<span class="st0">&quot;@string/press_me&quot;</span> <span class="re2">/&gt;</span></span>
&nbsp;
      <span class="sc3"><span class="re1">&lt;Button</span></span>
<span class="sc3">	<span class="re0">android:id</span>=<span class="st0">&quot;@+id/right_button&quot;</span></span>
<span class="sc3">	<span class="re0">android:layout_width</span>=<span class="st0">&quot;wrap_content&quot;</span></span>
<span class="sc3">	<span class="re0">android:layout_height</span>=<span class="st0">&quot;wrap_content&quot;</span></span>
<span class="sc3">	<span class="re0">android:layout_row</span>=<span class="st0">&quot;1&quot;</span></span>
<span class="sc3">	<span class="re0">android:layout_column</span>=<span class="st0">&quot;1&quot;</span></span>
<span class="sc3">	<span class="re0">android:layout_gravity</span>=<span class="st0">&quot;center&quot;</span></span>
<span class="sc3">	<span class="re0">android:text</span>=<span class="st0">&quot;@string/press_me_too&quot;</span> <span class="re2">/&gt;</span></span>
&nbsp;
  <span class="sc3"><span class="re1">&lt;/GridLayout<span class="re2">&gt;</span></span></span>
&nbsp;
<span class="sc3"><span class="re1">&lt;/LinearLayout<span class="re2">&gt;</span></span></span></pre>
</dd></dl>

<p>
În activitatea corespunzătoare, interfața grafică definită în fișierul <code>.xml</code> trebuie încărcată pe metoda <code>onCreate()</code> prin intermediul <code>setContentView()</code>, căreia i se transmite ca parametru identificatorul (referința) către această resursă (așa cum a fost generată în clasa abstractă <code>R.layout</code>). În situația în care este necesar să se realizeze anumite operații pe controalele grafice componente (spre exemplu, să se încarce conținutul acestora), trebuie inițial să se obțină o referință către aceasta printr-un apel al metodei <code>findViewById()</code>, care primește de asemenea ca parametru identificatorul (referința) către această resursă (așa cum a fost generată în clasa abstractă <code>R.id</code>).
</p>

<p>
<p><div class="noteclassic">Nu este necesar să se implementeze metodele <code>onCreateOptionsMenu()</code>, respectiv <code>onOptionsItemSelected()</code>, acestea fiind de regulă generate în mod automat de mediul integrat de dezvoltare Eclipse.
</div></p>
</p>
<dl class="file">
<dt><a href="../../../code/eim/colocvii/colocviu01%3Fcodeblock=4" title="Download Snippet" class="mediafile mf_java">PracticalTest01Activity.java</a></dt>
<dd><pre class="code file java"><span class="kw1">package</span> <span class="co2">ro.pub.cs.systems.eim.practicaltest01</span><span class="sy0">;</span>
&nbsp;
<span class="kw1">import</span> <span class="co2">android.app.Activity</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">android.content.Intent</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">android.os.Bundle</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">android.view.Menu</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">android.view.MenuItem</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">android.view.View</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">android.widget.Button</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">android.widget.EditText</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">android.widget.Toast</span><span class="sy0">;</span>
&nbsp;
<span class="kw1">public</span> <span class="kw1">class</span> PracticalTest01MainActivity <span class="kw1">extends</span> Activity <span class="br0">&#123;</span>
&nbsp;
  <span class="kw1">private</span> EditText leftEditText <span class="sy0">=</span> <span class="kw2">null</span><span class="sy0">;</span>
  <span class="kw1">private</span> EditText rightEditText <span class="sy0">=</span> <span class="kw2">null</span><span class="sy0">;</span>
  <span class="kw1">private</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+button"><span class="kw3">Button</span></a> leftButton <span class="sy0">=</span> <span class="kw2">null</span><span class="sy0">;</span>
  <span class="kw1">private</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+button"><span class="kw3">Button</span></a> rightButton <span class="sy0">=</span> <span class="kw2">null</span><span class="sy0">;</span>
&nbsp;
  @Override
  <span class="kw1">protected</span> <span class="kw4">void</span> onCreate<span class="br0">&#40;</span>Bundle savedInstanceState<span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">super</span>.<span class="me1">onCreate</span><span class="br0">&#40;</span>savedInstanceState<span class="br0">&#41;</span><span class="sy0">;</span>
    setContentView<span class="br0">&#40;</span>R.<span class="me1">layout</span>.<span class="me1">activity_practical_test01_main</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
    leftEditText <span class="sy0">=</span> <span class="br0">&#40;</span>EditText<span class="br0">&#41;</span>findViewById<span class="br0">&#40;</span>R.<span class="me1">id</span>.<span class="me1">left_edit_text</span><span class="br0">&#41;</span><span class="sy0">;</span>
    rightEditText <span class="sy0">=</span> <span class="br0">&#40;</span>EditText<span class="br0">&#41;</span>findViewById<span class="br0">&#40;</span>R.<span class="me1">id</span>.<span class="me1">right_edit_text</span><span class="br0">&#41;</span><span class="sy0">;</span>
    leftEditText.<span class="me1">setText</span><span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a>.<span class="me1">valueOf</span><span class="br0">&#40;</span><span class="nu0">0</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    rightEditText.<span class="me1">setText</span><span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a>.<span class="me1">valueOf</span><span class="br0">&#40;</span><span class="nu0">0</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
    leftButton <span class="sy0">=</span> <span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+button"><span class="kw3">Button</span></a><span class="br0">&#41;</span>findViewById<span class="br0">&#40;</span>R.<span class="me1">id</span>.<span class="me1">left_button</span><span class="br0">&#41;</span><span class="sy0">;</span>
    rightButton <span class="sy0">=</span> <span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+button"><span class="kw3">Button</span></a><span class="br0">&#41;</span>findViewById<span class="br0">&#40;</span>R.<span class="me1">id</span>.<span class="me1">right_button</span><span class="br0">&#41;</span><span class="sy0">;</span>
  <span class="br0">&#125;</span>
&nbsp;
  @Override
  <span class="kw1">public</span> <span class="kw4">boolean</span> onCreateOptionsMenu<span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+menu"><span class="kw3">Menu</span></a> menu<span class="br0">&#41;</span> <span class="br0">&#123;</span>
    getMenuInflater<span class="br0">&#40;</span><span class="br0">&#41;</span>.<span class="me1">inflate</span><span class="br0">&#40;</span>R.<span class="me1">menu</span>.<span class="me1">practical_test01</span>, menu<span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="kw1">return</span> <span class="kw2">true</span><span class="sy0">;</span>
  <span class="br0">&#125;</span>
&nbsp;
  @Override
  <span class="kw1">public</span> <span class="kw4">boolean</span> onOptionsItemSelected<span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+menuitem"><span class="kw3">MenuItem</span></a> item<span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw4">int</span> id <span class="sy0">=</span> item.<span class="me1">getItemId</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="kw1">if</span> <span class="br0">&#40;</span>id <span class="sy0">==</span> R.<span class="me1">id</span>.<span class="me1">action_settings</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
      <span class="kw1">return</span> <span class="kw2">true</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
    <span class="kw1">return</span> <span class="kw1">super</span>.<span class="me1">onOptionsItemSelected</span><span class="br0">&#40;</span>item<span class="br0">&#41;</span><span class="sy0">;</span>
  <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre>
</dd></dl>

<p>
În mediul integrat de dezvoltare Eclipse, completarea automată a import-urilor necesare este realizată prin <em>Ctrl+Shift+O</em>.
</p>

<p>
În mediul integrat de dezvoltare Android Studio, completarea automată a import-urilor necesare este realizată prin <em>Alt+Enter</em>.
</p>

<p>
<strong>B.1.</strong> Pentru procesarea evenimentelor legate de interacțiunea de utilizator este necesară:
</p>
<ul>
<li class="level1"><div class="li"> implementarea unei clase ascultător pentru tipul de eveniment respectiv (se recomandă se se folosească o clasă internă - în cadrul activității -, cu nume);</div>
</li>
<li class="level1"><div class="li"> înregistrarea unui obiect - instanță a clasei - ca ascultător al controlului grafic, pentru tipul de eveniment respectiv.</div>
</li>
</ul>

<p>
<p><div class="noteclassic">Se recomandă să se utilizeze aceeași clasă / același obiect pentru tratarea evenimentelor de același tip, chiar dacă acestea vor fi asociate unor controale grafice diferite. În cazul în care este necesar să se realizeze procesări specifice pentru obiecte de același tip, se va realiza distincția dintre acestea prin intermediul identificatorului controlului grafic care le este asociat.
</div></p>
</p>

<p>
Pe metoda <code>onCreate()</code> a activității se obțin referințe ale controlului grafic (prin metoda <code>findViewById()</code>) și se înregistrează obiectul ascultător respectiv.
</p>

<p>
<p><div class="notetip">În situația în care în interfața grafică există mai multe obiecte de același tip, având în vedere că operațiile ce trebuie realizate pentru fiecare în parte sunt aceleași, acestea se pot grupa prin procesarea iterativă unui tablou de identificatori (referințe) ale controalelor grafice respective.
</div></p>
</p>
<pre class="code java"><span class="kw1">public</span> <span class="kw1">class</span> PracticalTest01MainActivity <span class="kw1">extends</span> Activity <span class="br0">&#123;</span>
&nbsp;
  <span class="kw1">private</span> ButtonClickListener buttonClickListener <span class="sy0">=</span> <span class="kw1">new</span> ButtonClickListener<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
  <span class="kw1">private</span> <span class="kw1">class</span> ButtonClickListener <span class="kw1">implements</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+view"><span class="kw3">View</span></a>.<span class="me1">OnClickListener</span> <span class="br0">&#123;</span>
    @Override
    <span class="kw1">public</span> <span class="kw4">void</span> onClick<span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+view"><span class="kw3">View</span></a> view<span class="br0">&#41;</span> <span class="br0">&#123;</span>
      <span class="kw1">switch</span><span class="br0">&#40;</span>view.<span class="me1">getId</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="kw1">case</span> R.<span class="me1">id</span>.<span class="me1">left_button</span><span class="sy0">:</span>
          <span class="kw4">int</span> leftNumberOfClicks <span class="sy0">=</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+integer"><span class="kw3">Integer</span></a>.<span class="me1">parseInt</span><span class="br0">&#40;</span>leftEditText.<span class="me1">getText</span><span class="br0">&#40;</span><span class="br0">&#41;</span>.<span class="me1">toString</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
          leftNumberOfClicks<span class="sy0">++;</span>
          leftEditText.<span class="me1">setText</span><span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a>.<span class="me1">valueOf</span><span class="br0">&#40;</span>leftNumberOfClicks<span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
          <span class="kw1">break</span><span class="sy0">;</span>
        <span class="kw1">case</span> R.<span class="me1">id</span>.<span class="me1">right_button</span><span class="sy0">:</span>
          <span class="kw4">int</span> rightNumberOfClicks <span class="sy0">=</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+integer"><span class="kw3">Integer</span></a>.<span class="me1">parseInt</span><span class="br0">&#40;</span>rightEditText.<span class="me1">getText</span><span class="br0">&#40;</span><span class="br0">&#41;</span>.<span class="me1">toString</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
          rightNumberOfClicks<span class="sy0">++;</span>
          rightEditText.<span class="me1">setText</span><span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a>.<span class="me1">valueOf</span><span class="br0">&#40;</span>rightNumberOfClicks<span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
          <span class="kw1">break</span><span class="sy0">;</span>
      <span class="br0">&#125;</span>
    <span class="br0">&#125;</span>
  <span class="br0">&#125;</span>
&nbsp;
  @Override
  <span class="kw1">protected</span> <span class="kw4">void</span> onCreate<span class="br0">&#40;</span>Bundle savedInstanceState<span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">super</span>.<span class="me1">onCreate</span><span class="br0">&#40;</span>savedInstanceState<span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
    <span class="co1">// ...</span>
&nbsp;
    leftButton.<span class="me1">setOnClickListener</span><span class="br0">&#40;</span>buttonClickListener<span class="br0">&#41;</span><span class="sy0">;</span>
    rightButton.<span class="me1">setOnClickListener</span><span class="br0">&#40;</span>buttonClickListener<span class="br0">&#41;</span><span class="sy0">;</span>       
  <span class="br0">&#125;</span>
&nbsp;
  <span class="co1">// ...</span>
&nbsp;
<span class="br0">&#125;</span></pre>

<p>
<strong>B.2.</strong>
</p>

<p>
<strong>a)</strong> Pentru majoritatea controalelor grafice, sistemul de operare Android realizează în mod automat salvarea / restaurarea stării în situația în care o activitate este distrusă pentru asigurarea necesarului de memorie. Dacă se dorește ca această operație să fie tratată în alt mod, dezactivarea acestui mecanism se realizează prin specificarea atributului <code>android:saveEnabled</code> corespunzător controlului grafic respectiv având valoarea <code>false</code>.
</p>
<pre class="code xml"><span class="sc3"><span class="re1">&lt;LinearLayout</span> ... <span class="re2">&gt;</span></span>
  <span class="sc3"><span class="re1">&lt;EditText</span></span>
<span class="sc3">    <span class="re0">android:id</span>=<span class="st0">&quot;@+id/left_edit_text&quot;</span></span>
<span class="sc3">    <span class="re0">android:saveEnabled</span>=<span class="st0">&quot;false&quot;</span></span>
<span class="sc3">    ... <span class="re2">/&gt;</span></span>
&nbsp;
  <span class="sc3"><span class="re1">&lt;EditText</span></span>
<span class="sc3">    <span class="re0">android:id</span>=<span class="st0">&quot;@+id/right_edit_text&quot;</span></span>
<span class="sc3">    <span class="re0">android:saveEnabled</span>=<span class="st0">&quot;false&quot;</span></span>
<span class="sc3">    ... <span class="re2">/&gt;</span></span>
&nbsp;
  <span class="sc-1">&lt;!-- other nested layouts or widgets --&gt;</span>
&nbsp;
<span class="sc3"><span class="re1">&lt;/LinearLayout<span class="re2">&gt;</span></span></span></pre>

<p>
<strong>b)</strong> În situația în care sistemul de operare Android distruge activitatea pentru asigurarea resurselor necesare, este necesară asigurarea unui comportament consistent / persistenței aplicației:
</p>
<ul>
<li class="level1"><div class="li"> salvarea stării se realizează pe metoda <code>onSaveInstanceState()</code> care primește un parametru de tip <code>Bundle</code> în care vor fi stocate informațiile respective, identificarea lor realizându-se prin intermediul unei chei de tip șir de caractere; metoda este invocată înainte de <code>onStop()</code> deși pot exista situații în care aceasta este apelată chiar înainte de <code>onPause()</code>;</div>
</li>
<li class="level1"><div class="li"> restaurarea stării se realizează:</div>
<ul>
<li class="level2"><div class="li"> pe metoda <code>onCreate()</code> pentru care parametrul de tip <code>Bundle</code> este nenul în situația în care există o stare anterioară;</div>
</li>
<li class="level2"><div class="li"> pe metoda <code>onRestoreInstanceState()</code> care este invocată în mod automat - primind un parametru de tip <code>Bundle</code> numai în situația în care există o stare anterioară; metoda se apelează între metodele <code>onStart()</code> și <code>onRestore()</code>.</div>
</li>
</ul>
</li>
</ul>

<p>
<p><div class="noteclassic">În parametrul de tip <code>Bundle</code> nu pot fi stocate decât obiecte care implementează <code>android.os.Parcelable</code>.
</div></p>
</p>

<p>
Salvarea stării implică plasarea în obiectul de tip <code>Bundle</code> a unei valori, prin metode de tip <code>put&lt;type&gt;()</code>, folosind un șir de caractere definit de utilizator (o convenție de nume).
</p>

<p>
Restaurarea stării implică preluarea în obiectul de tip <code>Bundle</code> a valorii, prin metode de tip <code>get&lt;type&gt;()</code>, folosind șirul de caractere corespunzător (convenția de nume). Se recomandă să se verifice faptul că valoarea respectivă este nenulă (respectiv nu a fost furnizată valoarea implicită).
</p>

<p>
<p><div class="notetip">Se recomandă ca restaurarea stării să fie realizată pe metoda <code>onRestoreInstanceState()</code> în detrimentul metodei <code>onCreate()</code> pentru că în acest fel nu trebuie să se verifice starea obiectului de tip <code>Bundle</code>, iar procesările în urma cărora este creată o instanță a activității sunt mai rapide.
</div></p>
</p>
<pre class="code java"><span class="kw1">public</span> <span class="kw1">class</span> PracticalTest01MainActivity <span class="kw1">extends</span> Activity <span class="br0">&#123;</span>
&nbsp;
  @Override
  <span class="kw1">protected</span> <span class="kw4">void</span> onCreate<span class="br0">&#40;</span>Bundle savedInstanceState<span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">super</span>.<span class="me1">onCreate</span><span class="br0">&#40;</span>savedInstanceState<span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
    <span class="co1">// ...</span>
&nbsp;
    <span class="kw1">if</span> <span class="br0">&#40;</span>savedInstanceState <span class="sy0">!=</span> <span class="kw2">null</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
      <span class="kw1">if</span> <span class="br0">&#40;</span>savedInstanceState.<span class="me1">containsKey</span><span class="br0">&#40;</span><span class="st0">&quot;leftCount&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        leftEditText.<span class="me1">setText</span><span class="br0">&#40;</span>savedInstanceState.<span class="me1">getString</span><span class="br0">&#40;</span><span class="st0">&quot;leftCount&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
      <span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span>
        leftEditText.<span class="me1">setText</span><span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a>.<span class="me1">valueOf</span><span class="br0">&#40;</span><span class="nu0">0</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
      <span class="br0">&#125;</span>
      <span class="kw1">if</span> <span class="br0">&#40;</span>savedInstanceState.<span class="me1">containsKey</span><span class="br0">&#40;</span><span class="st0">&quot;rightCount&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        rightEditText.<span class="me1">setText</span><span class="br0">&#40;</span>savedInstanceState.<span class="me1">getString</span><span class="br0">&#40;</span><span class="st0">&quot;rightCount&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
      <span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span>
        rightEditText.<span class="me1">setText</span><span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a>.<span class="me1">valueOf</span><span class="br0">&#40;</span><span class="nu0">0</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
      <span class="br0">&#125;</span>
    <span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span>
      leftEditText.<span class="me1">setText</span><span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a>.<span class="me1">valueOf</span><span class="br0">&#40;</span><span class="nu0">0</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
      rightEditText.<span class="me1">setText</span><span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a>.<span class="me1">valueOf</span><span class="br0">&#40;</span><span class="nu0">0</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
  <span class="br0">&#125;</span>
&nbsp;
  @Override
  <span class="kw1">protected</span> <span class="kw4">void</span> onSaveInstanceState<span class="br0">&#40;</span>Bundle savedInstanceState<span class="br0">&#41;</span> <span class="br0">&#123;</span>
    savedInstanceState.<span class="me1">putString</span><span class="br0">&#40;</span><span class="st0">&quot;leftCount&quot;</span>, leftEditText.<span class="me1">getText</span><span class="br0">&#40;</span><span class="br0">&#41;</span>.<span class="me1">toString</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    savedInstanceState.<span class="me1">putString</span><span class="br0">&#40;</span><span class="st0">&quot;rightCount&quot;</span>, rightEditText.<span class="me1">getText</span><span class="br0">&#40;</span><span class="br0">&#41;</span>.<span class="me1">toString</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
  <span class="br0">&#125;</span>
&nbsp;
  @Override
  <span class="kw1">protected</span> <span class="kw4">void</span> onRestoreInstanceState<span class="br0">&#40;</span>Bundle savedInstanceState<span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">if</span> <span class="br0">&#40;</span>savedInstanceState.<span class="me1">containsKey</span><span class="br0">&#40;</span><span class="st0">&quot;leftCount&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
      leftEditText.<span class="me1">setText</span><span class="br0">&#40;</span>savedInstanceState.<span class="me1">getString</span><span class="br0">&#40;</span><span class="st0">&quot;leftCount&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span>
      leftEditText.<span class="me1">setText</span><span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a>.<span class="me1">valueOf</span><span class="br0">&#40;</span><span class="nu0">0</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
    <span class="kw1">if</span> <span class="br0">&#40;</span>savedInstanceState.<span class="me1">containsKey</span><span class="br0">&#40;</span><span class="st0">&quot;rightCount&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
      rightEditText.<span class="me1">setText</span><span class="br0">&#40;</span>savedInstanceState.<span class="me1">getString</span><span class="br0">&#40;</span><span class="st0">&quot;rightCount&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span>
      rightEditText.<span class="me1">setText</span><span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a>.<span class="me1">valueOf</span><span class="br0">&#40;</span><span class="nu0">0</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
  <span class="br0">&#125;</span>
&nbsp;
  <span class="co1">// ...</span>
<span class="br0">&#125;</span>  </pre>

<p>
<strong>c)</strong> Pentru a simula faptul că sistemul de operare Android distruge activitatea pentru asigurarea necesarului de resurse, se poate proceda astfel:
</p>
<ol>
<li class="level1"><div class="li"> se oprește activitatea prin accesarea butonului <em>Menu</em>, astfel încât activitatea să rămână în memorie, fără a fi însă vizibilă, asigurându-se totodată apelarea metodelor <code>onPause()</code> și <code>onStop()</code> și implicit a metodei <code>onSaveInstanceState()</code>;</div>
</li>
<li class="level1"><div class="li"> în Eclipse, se deschide Dalvik Debug Monitor System (DDMS), se identifică procesul corespunzător activății respective și se oprește forțat (prin intermediul butonului <em>Stop</em>);<br/>
<img src="../../../../_media/eim/colocvii/colocviu01/dalvik_debug_monitor_system.png%3Fw=700&amp;tok=932cbc" class="mediacenter" alt="" width="700" /></div>
</li>
<li class="level1"><div class="li"> în Android Studio, în secțiunea <em>AndroidMonitor</em>, se oprește aplicația Android prin intermediul butonului <em>Terminate Application</em>: <br/>
<img src="../../../../_media/eim/colocvii/colocviu01/android_monitor.png%3Fw=900&amp;tok=cda131" class="mediacenter" alt="" width="900" /></div>
</li>
<li class="level1"><div class="li"> se (re)pornește activitatea din meniul dispozitivului mobil, astfel încât să  se apeleze metodele <code>onCreate()</code>, respectiv <code>onStart()</code> și <code>onResume()</code> (și, implicit, <code>onRestoreInstanceState()</code>).</div>
</li>
</ol>

<p>
<p><div class="notetip">
În mediul integrat de dezvoltare Eclipse, DDMS (Dalvik Debug Monitor System) este pornit din <em>Window</em> → <em>Open Perspective</em> → <em>Other</em> → <em>DDMS</em>.
</p>

<p>
În mediul integrat de dezvoltare Android Studio, AMS (Android Device Monitor) este pornit din <em>Tools</em> → <em>Android</em> → <em>Android Device Monitor</em>.

</div></p>
</p>

<p>
<strong>d)</strong> În situația în care utilizatorul apasă butonul <em>Back</em>, se apelează metodele <code>onPause()</code>, <code>onStop()</code> și <code>onDestroy()</code>, fără a se invoca însă și metoda <code>onSaveInstanceState()</code> întrucât se consideră că în această situație utilizatorul nu își dorește să revină la starea curentă a activității. Din acest motiv, starea nu este salvată în obiectul de tip <code>Bundle</code> și acesta nu va conține informațiile respective care să poată fi astfel restaurate.
</p>

<p>
Dacă se dorește salvarea / restaurarea stării în situația în care utilizatorul apasă tasta <em>Back</em>, se recomandă să se utilizeze un alt mecanism pentru asigurarea persistenței, cum ar fi baza de date SQLite sau un obiect de tipul <code>android.content.SharedPreferences</code>.
</p>

<p>
<strong>C.1.</strong> Într-o aplicație Android, o activitate trebuie să fie precizată prin următoarele elemente:
</p>
<ul>
<li class="level1"><div class="li"> o etichetă de tip <code>&lt;activity&gt;</code> în fișiserul <code>AndroidManifest.xml</code>, având asociată și un filtru de intenții (etichetă de tip <code>&lt;intent-filter&gt;</code>);</div>
</li>
<li class="level1"><div class="li"> o interfață grafică, definită în cadrul unui fișier <code>.xml</code> în directorul <code>/res/layout</code>;</div>
</li>
<li class="level1"><div class="li"> o clasă derivată din <code>Activity</code>, în care să se implementeze cel puțin metoda <code>onCreate()</code>, pe care să se încarce interfața grafică definită anterior.</div>
</li>
</ul>

<p>
În mediul integrat de dezvoltare Eclipse, crearea acestor resurse este realizată în mod automat în momentul în care se solicită definirea unei resurse de tip <em>Android Activity</em> (<em>File</em> → <em>New</em> → <em>Other</em> → <em>Android</em> → <em>Android Activity</em>).
</p>

<p>
<img src="../../../../_media/eim/colocvii/colocviu01/eclipse_activity01.png%3Fw=500&amp;tok=24109d" class="mediacenter" alt="" width="500" />
</p>

<p>
<img src="../../../../_media/eim/colocvii/colocviu01/eclipse_activity02.png%3Fw=500&amp;tok=5aaf7e" class="mediacenter" alt="" width="500" />
</p>

<p>
<img src="../../../../_media/eim/colocvii/colocviu01/eclipse_activity03.png%3Fw=500&amp;tok=86756b" class="mediacenter" alt="" width="500" />
</p>

<p>
<img src="../../../../_media/eim/colocvii/colocviu01/eclipse_activity04.png%3Fw=500&amp;tok=8b88ca" class="mediacenter" alt="" width="500" />
</p>

<p>
În mediul integrat de dezvoltare Android Studio, crearea acestor resurse este realizată în mod automat în momentul în care se solicită definirea unei resurse de tip <em>Android Activity</em> (<em>File</em> → <em>New</em> → <em>Activity</em> → <em>Blank Activity</em>).
</p>

<p>
<img src="../../../../_media/eim/colocvii/colocviu01/androidstudio_activity.png%3Fw=600&amp;tok=b99ca5" class="mediacenter" alt="" width="600" />
</p>

<p>
<strong>a)</strong> În fișierul <code>AndroidManifest.xml</code> se specifică activitatea printr-o element de tip <code>&lt;activity&gt;</code> în cadrul etichetei <code>&lt;application&gt;</code> pentru care se definesc:
</p>
<ul>
<li class="level1"><div class="li"> atributul <code>android:name</code> în care se indică denumirea clasei de tip <code>Activity</code> care va gestiona activitatea (afișarea interfeței grafice și tratarea interacțiunii cu utilizatorul);</div>
</li>
<li class="level1"><div class="li"> atributul <code>android:label</code> precizează o etichetă care va fi asociată activității;</div>
</li>
<li class="level1"><div class="li"> un filtru de intenții, prin care se controlează modul în care va putea fi lansată în execuție prin intermediul unei alte intenții:  </div>
<ul>
<li class="level2"><div class="li"> eticheta <code>&lt;action&gt;</code> stabilește acțiunea pe care o poate realiza activitatea; va avea o valoare definită de utilizator, reprezentând o convenție;</div>
</li>
<li class="level2"><div class="li"> eticheta <code>&lt;category&gt;</code> clasifică activitatea, impunându-se să fie folosită valoarea <code>android.intent.category.DEFAULT</code> pentru ca activitatea să poată fi invocată prin intermediul unei intenții.</div>
</li>
</ul>
</li>
</ul>

<p>
<p><div class="notetip">În cazul în care activitatea este generată folosind mediul integrat de dezvoltare Eclipse, în fișierul <code>AndroidManifest.xml</code> nu se completează în mod automat și filtrul de intenții, fiind necesar ca acesta să fie menționat de utilizator, manual.
</div></p>
</p>
<dl class="file">
<dt><a href="../../../code/eim/colocvii/colocviu01%3Fcodeblock=8" title="Download Snippet" class="mediafile mf_xml">AndroidManifest.xml</a></dt>
<dd><pre class="code file xml"><span class="sc3"><span class="re1">&lt;manifest</span> ... <span class="re2">&gt;</span></span>
  <span class="sc3"><span class="re1">&lt;application</span> ... <span class="re2">&gt;</span></span>
    <span class="sc3"><span class="re1">&lt;activity</span></span>
<span class="sc3">      <span class="re0">android:name</span>=<span class="st0">&quot;.PracticalTest01SecondaryActivity&quot;</span></span>
<span class="sc3">      <span class="re0">android:label</span>=<span class="st0">&quot;@string/title_activity_practical_test01_secondary&quot;</span> <span class="re2">&gt;</span></span>
      <span class="sc3"><span class="re1">&lt;intent-filter<span class="re2">&gt;</span></span></span>
        <span class="sc3"><span class="re1">&lt;action</span> <span class="re0">android:name</span>=<span class="st0">&quot;ro.pub.cs.systems.eim.intent.action.PracticalTest01SecondaryActivity&quot;</span> <span class="re2">/&gt;</span></span>
        <span class="sc3"><span class="re1">&lt;category</span> <span class="re0">android:name</span>=<span class="st0">&quot;android.intent.category.DEFAULT&quot;</span> <span class="re2">/&gt;</span></span>
      <span class="sc3"><span class="re1">&lt;/intent-filter<span class="re2">&gt;</span></span></span>
    <span class="sc3"><span class="re1">&lt;/activity<span class="re2">&gt;</span></span></span>
  <span class="sc3"><span class="re1">&lt;/application<span class="re2">&gt;</span></span></span>
<span class="sc3"><span class="re1">&lt;/manifest<span class="re2">&gt;</span></span></span></pre>
</dd></dl>

<p>
<strong>b)</strong> O interfață grafică este definită în mod obișnuit, prin intermediul unui fișier <code>.xml</code> plasat în directorul <code>/res/layout</code> în care sunt precizate controalele grafice cu atributele și valorile lor, sub formă de componente în cadrul unor mecanisme de dispunere.
</p>
<dl class="file">
<dt><a href="../../../code/eim/colocvii/colocviu01%3Fcodeblock=9" title="Download Snippet" class="mediafile mf_xml">activity_practical_test01_secondary.xml</a></dt>
<dd><pre class="code file xml"><span class="sc3"><span class="re1">&lt;LinearLayout</span> <span class="re0">xmlns:android</span>=<span class="st0">&quot;http://schemas.android.com/apk/res/android&quot;</span></span>
<span class="sc3">  <span class="re0">xmlns:tools</span>=<span class="st0">&quot;http://schemas.android.com/tools&quot;</span></span>
<span class="sc3">  <span class="re0">android:layout_width</span>=<span class="st0">&quot;match_parent&quot;</span></span>
<span class="sc3">  <span class="re0">android:layout_height</span>=<span class="st0">&quot;match_parent&quot;</span></span>
<span class="sc3">  <span class="re0">android:orientation</span>=<span class="st0">&quot;vertical&quot;</span></span>
<span class="sc3">  <span class="re0">tools:context</span>=<span class="st0">&quot;ro.pub.cs.systems.eim.practicaltest01.PracticalTest01SecondaryActivity&quot;</span> <span class="re2">&gt;</span></span>
&nbsp;
  <span class="sc3"><span class="re1">&lt;TextView</span></span>
<span class="sc3">    <span class="re0">android:id</span>=<span class="st0">&quot;@+id/number_of_clicks_text_view&quot;</span></span>
<span class="sc3">    <span class="re0">android:layout_width</span>=<span class="st0">&quot;match_parent&quot;</span></span>
<span class="sc3">    <span class="re0">android:layout_height</span>=<span class="st0">&quot;wrap_content&quot;</span></span>
<span class="sc3">    <span class="re0">android:gravity</span>=<span class="st0">&quot;center&quot;</span> <span class="re2">/&gt;</span></span>
&nbsp;
  <span class="sc3"><span class="re1">&lt;LinearLayout</span></span>
<span class="sc3">    <span class="re0">android:layout_width</span>=<span class="st0">&quot;wrap_content&quot;</span></span>
<span class="sc3">    <span class="re0">android:layout_height</span>=<span class="st0">&quot;wrap_content&quot;</span></span>
<span class="sc3">    <span class="re0">android:layout_gravity</span>=<span class="st0">&quot;center&quot;</span> <span class="re2">&gt;</span></span>
&nbsp;
    <span class="sc3"><span class="re1">&lt;Button</span></span>
<span class="sc3">      <span class="re0">android:id</span>=<span class="st0">&quot;@+id/ok_button&quot;</span></span>
<span class="sc3">      <span class="re0">android:layout_width</span>=<span class="st0">&quot;wrap_content&quot;</span></span>
<span class="sc3">      <span class="re0">android:layout_height</span>=<span class="st0">&quot;wrap_content&quot;</span></span>
<span class="sc3">      <span class="re0">android:text</span>=<span class="st0">&quot;@string/ok&quot;</span> <span class="re2">/&gt;</span></span>
&nbsp;
    <span class="sc3"><span class="re1">&lt;Button</span></span>
<span class="sc3">      <span class="re0">android:id</span>=<span class="st0">&quot;@+id/cancel_button&quot;</span></span>
<span class="sc3">      <span class="re0">android:layout_width</span>=<span class="st0">&quot;wrap_content&quot;</span></span>
<span class="sc3">      <span class="re0">android:layout_height</span>=<span class="st0">&quot;wrap_content&quot;</span></span>
<span class="sc3">      <span class="re0">android:text</span>=<span class="st0">&quot;@string/cancel&quot;</span> <span class="re2">/&gt;</span></span>
&nbsp;
  <span class="sc3"><span class="re1">&lt;/LinearLayout<span class="re2">&gt;</span></span></span>
&nbsp;
<span class="sc3"><span class="re1">&lt;/LinearLayout<span class="re2">&gt;</span></span></span></pre>
</dd></dl>

<p>
<strong>c)</strong> În clasa care gestionează comportamentul activității, pe metoda <code>onCreate()</code>, în mod obișnuit, se încarcă interfața grafică (prin metoda <code>setContentView()</code>), se obțin referințe către controalele grafice (printr-un apel al metodei <code>findViewById()</code>) și se stabilește conținutul acestora, respectiv se înregistrează obiecte ascultător pentru anumite tipuri de evenimente (după ce în prealabil a fost implementată și clasa corespunzătoare).
</p>

<p>
Pentru activitățile care sunt invocate prin intermediul unei intenții:
</p>
<ul>
<li class="level1"><div class="li"> se poate obține o referință către intenție, din contextul căruia pot fi obținute informațiile atașate în secțiunea <code>extra</code> prin intermediul metodelor <code>getExtras()</code> sau <code>get&lt;type&gt;Extra()</code> care primesc ca parametru cheia sub care au fost stocate datele respective;</div>
</li>
<li class="level1"><div class="li"> se poate transmite un rezultat înapoi către activitatea din care au fost invocate prin intermediul metodei <code>setResult()</code> care primește ca parametri:</div>
<ul>
<li class="level2"><div class="li"> un cod de rezultat întreg (frecvent, sunt folosite valorile RESULT_OK și RESULT_CANCELED, dar poate fi folosită și o valoare definită de utilizator);</div>
</li>
<li class="level2"><div class="li"> o intenție, în care pot fi plasate informații suplimentare. </div>
</li>
</ul>
</li>
</ul>

<p>
Metoda <code>finish()</code> poate fi folosită pentru a finaliza activitatea în mod forțat (semnalând faptul că procesările corespunzătoare activității au fost terminate).
</p>
<dl class="file">
<dt><a href="../../../code/eim/colocvii/colocviu01%3Fcodeblock=10" title="Download Snippet" class="mediafile mf_java">PracticalTest01SecondaryActivity.java</a></dt>
<dd><pre class="code file java"><span class="kw1">package</span> <span class="co2">ro.pub.cs.systems.eim.practicaltest01</span><span class="sy0">;</span>
&nbsp;
<span class="kw1">import</span> <span class="co2">android.app.Activity</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">android.content.Intent</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">android.os.Bundle</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">android.view.Menu</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">android.view.MenuItem</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">android.view.View</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">android.widget.Button</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">android.widget.TextView</span><span class="sy0">;</span>
&nbsp;
<span class="kw1">public</span> <span class="kw1">class</span> PracticalTest01SecondaryActivity <span class="kw1">extends</span> Activity <span class="br0">&#123;</span>
&nbsp;
  <span class="kw1">private</span> TextView numberOfClicksTextView <span class="sy0">=</span> <span class="kw2">null</span><span class="sy0">;</span>
  <span class="kw1">private</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+button"><span class="kw3">Button</span></a> okButton <span class="sy0">=</span> <span class="kw2">null</span><span class="sy0">;</span>
  <span class="kw1">private</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+button"><span class="kw3">Button</span></a> cancelButton <span class="sy0">=</span> <span class="kw2">null</span><span class="sy0">;</span>
&nbsp;
  <span class="kw1">private</span> ButtonClickListener buttonClickListener <span class="sy0">=</span> <span class="kw1">new</span> ButtonClickListener<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
  <span class="kw1">private</span> <span class="kw1">class</span> ButtonClickListener <span class="kw1">implements</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+view"><span class="kw3">View</span></a>.<span class="me1">OnClickListener</span> <span class="br0">&#123;</span>
    @Override
    <span class="kw1">public</span> <span class="kw4">void</span> onClick<span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+view"><span class="kw3">View</span></a> view<span class="br0">&#41;</span> <span class="br0">&#123;</span>
      <span class="kw1">switch</span><span class="br0">&#40;</span>view.<span class="me1">getId</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="kw1">case</span> R.<span class="me1">id</span>.<span class="me1">ok_button</span><span class="sy0">:</span>
          setResult<span class="br0">&#40;</span>RESULT_OK, <span class="kw2">null</span><span class="br0">&#41;</span><span class="sy0">;</span>
          <span class="kw1">break</span><span class="sy0">;</span>
        <span class="kw1">case</span> R.<span class="me1">id</span>.<span class="me1">cancel_button</span><span class="sy0">:</span>
          setResult<span class="br0">&#40;</span>RESULT_CANCELED, <span class="kw2">null</span><span class="br0">&#41;</span><span class="sy0">;</span>
          <span class="kw1">break</span><span class="sy0">;</span>
      <span class="br0">&#125;</span>
      finish<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
  <span class="br0">&#125;</span>
&nbsp;
  @Override
  <span class="kw1">protected</span> <span class="kw4">void</span> onCreate<span class="br0">&#40;</span>Bundle savedInstanceState<span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">super</span>.<span class="me1">onCreate</span><span class="br0">&#40;</span>savedInstanceState<span class="br0">&#41;</span><span class="sy0">;</span>
    setContentView<span class="br0">&#40;</span>R.<span class="me1">layout</span>.<span class="me1">activity_practical_test01_secondary</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
    numberOfClicksTextView <span class="sy0">=</span> <span class="br0">&#40;</span>TextView<span class="br0">&#41;</span>findViewById<span class="br0">&#40;</span>R.<span class="me1">id</span>.<span class="me1">number_of_clicks_text_view</span><span class="br0">&#41;</span><span class="sy0">;</span>
    Intent intent <span class="sy0">=</span> getIntent<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="kw1">if</span> <span class="br0">&#40;</span>intent <span class="sy0">!=</span> <span class="kw2">null</span> <span class="sy0">&amp;&amp;</span> intent.<span class="me1">getExtras</span><span class="br0">&#40;</span><span class="br0">&#41;</span>.<span class="me1">containsKey</span><span class="br0">&#40;</span><span class="st0">&quot;numberOfClicks&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
      <span class="kw4">int</span> numberOfClicks <span class="sy0">=</span> intent.<span class="me1">getIntExtra</span><span class="br0">&#40;</span><span class="st0">&quot;numberOfClicks&quot;</span>, <span class="sy0">-</span><span class="nu0">1</span><span class="br0">&#41;</span><span class="sy0">;</span>
      numberOfClicksTextView.<span class="me1">setText</span><span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a>.<span class="me1">valueOf</span><span class="br0">&#40;</span>numberOfClicks<span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
&nbsp;
    okButton <span class="sy0">=</span> <span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+button"><span class="kw3">Button</span></a><span class="br0">&#41;</span>findViewById<span class="br0">&#40;</span>R.<span class="me1">id</span>.<span class="me1">ok_button</span><span class="br0">&#41;</span><span class="sy0">;</span>
    okButton.<span class="me1">setOnClickListener</span><span class="br0">&#40;</span>buttonClickListener<span class="br0">&#41;</span><span class="sy0">;</span>
    cancelButton <span class="sy0">=</span> <span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+button"><span class="kw3">Button</span></a><span class="br0">&#41;</span>findViewById<span class="br0">&#40;</span>R.<span class="me1">id</span>.<span class="me1">cancel_button</span><span class="br0">&#41;</span><span class="sy0">;</span>
    cancelButton.<span class="me1">setOnClickListener</span><span class="br0">&#40;</span>buttonClickListener<span class="br0">&#41;</span><span class="sy0">;</span>
  <span class="br0">&#125;</span>
&nbsp;
  @Override
  <span class="kw1">public</span> <span class="kw4">boolean</span> onCreateOptionsMenu<span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+menu"><span class="kw3">Menu</span></a> menu<span class="br0">&#41;</span> <span class="br0">&#123;</span>
    getMenuInflater<span class="br0">&#40;</span><span class="br0">&#41;</span>.<span class="me1">inflate</span><span class="br0">&#40;</span>R.<span class="me1">menu</span>.<span class="me1">practical_test01_secondary</span>, menu<span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="kw1">return</span> <span class="kw2">true</span><span class="sy0">;</span>
  <span class="br0">&#125;</span>
&nbsp;
  @Override
  <span class="kw1">public</span> <span class="kw4">boolean</span> onOptionsItemSelected<span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+menuitem"><span class="kw3">MenuItem</span></a> item<span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw4">int</span> id <span class="sy0">=</span> item.<span class="me1">getItemId</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="kw1">if</span> <span class="br0">&#40;</span>id <span class="sy0">==</span> R.<span class="me1">id</span>.<span class="me1">action_settings</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
      <span class="kw1">return</span> <span class="kw2">true</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
    <span class="kw1">return</span> <span class="kw1">super</span>.<span class="me1">onOptionsItemSelected</span><span class="br0">&#40;</span>item<span class="br0">&#41;</span><span class="sy0">;</span>
  <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre>
</dd></dl>

<p>
<strong>C.2.</strong> Pentru a invoca o altă activitate prin intermediul unei intenții, o activitate trebuie:
</p>
<ul>
<li class="level1"><div class="li"> să definească în interfața grafică un control prin intermediul căruia va fi lansată în execuție activitatea respectivă (în fișierul <code>.xml</code> din directorul <code>/res/layout</code>);</div>
</li>
</ul>
<pre class="code xml"><span class="sc3"><span class="re1">&lt;LinearLayout</span> <span class="re0">xmlns:android</span>=<span class="st0">&quot;http://schemas.android.com/apk/res/android&quot;</span></span>
<span class="sc3">  <span class="re0">xmlns:tools</span>=<span class="st0">&quot;http://schemas.android.com/tools&quot;</span></span>
<span class="sc3">  <span class="re0">android:layout_width</span>=<span class="st0">&quot;match_parent&quot;</span></span>
<span class="sc3">  <span class="re0">android:layout_height</span>=<span class="st0">&quot;wrap_content&quot;</span></span>
<span class="sc3">  <span class="re0">android:orientation</span>=<span class="st0">&quot;vertical&quot;</span></span>
<span class="sc3">  <span class="re0">tools:context</span>=<span class="st0">&quot;ro.pub.cs.systems.eim.practicaltest01.PracticalTest01MainActivity&quot;</span> <span class="re2">&gt;</span></span>
&nbsp;
  <span class="sc3"><span class="re1">&lt;Button</span></span>
<span class="sc3">    <span class="re0">android:id</span>=<span class="st0">&quot;@+id/navigate_to_secondary_activity_button&quot;</span></span>
<span class="sc3">    <span class="re0">android:layout_width</span>=<span class="st0">&quot;wrap_content&quot;</span></span>
<span class="sc3">    <span class="re0">android:layout_height</span>=<span class="st0">&quot;wrap_content&quot;</span></span>
<span class="sc3">    <span class="re0">android:layout_gravity</span>=<span class="st0">&quot;right&quot;</span></span>
<span class="sc3">    <span class="re0">android:text</span>=<span class="st0">&quot;@string/navigate_to_secondary_activity&quot;</span> <span class="re2">/&gt;</span></span>
&nbsp;
  <span class="sc-1">&lt;!-- other nested layouts or widgets --&gt;</span>
&nbsp;
<span class="sc3"><span class="re1">&lt;/LinearLayout<span class="re2">&gt;</span></span></span></pre>
<ul>
<li class="level1"><div class="li"> în codul sursă corespunzător clasei care gestionează activitatea respectivă:</div>
<ol>
<li class="level2"><div class="li"> pe metoda <code>onCreate()</code>:</div>
<ol>
<li class="level3"><div class="li"> să obțină o referință către controlul grafic prin intermediul căruia va fi lansată în execuție o altă activitate;</div>
</li>
<li class="level3"><div class="li"> să înregistreze un obiect ascultător care va trata evenimentul legat de controlul grafic respectiv;</div>
</li>
</ol>
</li>
<li class="level2"><div class="li"> să definească o clasă ascultător (internă, cu nume) pentru tipul de eveniment respectiv, iar pe metoda de tratare se vor realiza următoarele operații:</div>
<ol>
<li class="level3"><div class="li"> se va instanția un obiect de tip <code>Intent</code>, care poate primi ca parametru:</div>
<ol>
<li class="level4"><div class="li"> contextul curent (obiectul <code>this</code>) și clasa care deservește activitatea (obiect de tip <code>.class</code>) - adecvată situației în care activitatea invocată se găsește în aceeași aplicație ca și activitatea care invocă;</div>
</li>
<li class="level4"><div class="li"> acțiunea asociată activității în filtrul de intenții - adecvată situației în care activitatea invocată se găsește în altă aplicație decât activitatea care o invocă;</div>
</li>
</ol>
</li>
<li class="level3"><div class="li"> se asociază un set de informații care vor fi transmise celeilalte activități (în secțiunea <code>extra</code> a intenției) prin intermediul metodei <code>putExtra()</code>, fiecare valoare (de tip <code>android.os.Parcelable</code>) având asociat un atribut prin care va fi identificat ulterior, de tip șir de caractere;</div>
</li>
<li class="level3"><div class="li"> se lansează în execuție activitatea prin intermediul metodei <code>startActivityForResult()</code> care primește ca parametru intenția și un cod de cerere, având rolul de a identifica ulterior instanța activității din care se revine.</div>
</li>
</ol>
</li>
<li class="level2"><div class="li"> să implementeze metoda <code>onActivityResult()</code>, apelată în mod automat la revenirea din activitatea invocată, aceasta primind ca parametrii:</div>
<ol>
<li class="level3"><div class="li"> codul de cerere trimis în momentul în care activitatea a fost lansată în execuție;</div>
</li>
<li class="level3"><div class="li"> rezultatul furnizat de activitatea invocată;</div>
</li>
<li class="level3"><div class="li"> intenția generată de activitatea invocată.</div>
</li>
</ol>
</li>
</ol>
</li>
</ul>
<pre class="code java"><span class="kw1">public</span> <span class="kw1">class</span> PracticalTest01MainActivity <span class="kw1">extends</span> Activity <span class="br0">&#123;</span>
&nbsp;
  <span class="kw1">private</span> <span class="kw1">final</span> <span class="kw1">static</span> <span class="kw4">int</span> SECONDARY_ACTIVITY_REQUEST_CODE <span class="sy0">=</span> <span class="nu0">1</span><span class="sy0">;</span>
&nbsp;
  <span class="kw1">private</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+button"><span class="kw3">Button</span></a> navigateToSecondaryActivityButton <span class="sy0">=</span> <span class="kw2">null</span><span class="sy0">;</span>
&nbsp;
  <span class="kw1">private</span> ButtonClickListener buttonClickListener <span class="sy0">=</span> <span class="kw1">new</span> ButtonClickListener<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
  <span class="kw1">private</span> <span class="kw1">class</span> ButtonClickListener <span class="kw1">implements</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+button"><span class="kw3">Button</span></a>.<span class="me1">OnClickListener</span> <span class="br0">&#123;</span>
&nbsp;
    @Override
    <span class="kw1">public</span> <span class="kw4">void</span> onClick<span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+view"><span class="kw3">View</span></a> view<span class="br0">&#41;</span> <span class="br0">&#123;</span>
      <span class="kw1">switch</span><span class="br0">&#40;</span>view.<span class="me1">getId</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="kw1">case</span> R.<span class="me1">id</span>.<span class="me1">navigate_to_secondary_activity_button</span><span class="sy0">:</span>
          Intent intent <span class="sy0">=</span> <span class="kw1">new</span> Intent<span class="br0">&#40;</span>getApplicationContext<span class="br0">&#40;</span><span class="br0">&#41;</span>, PracticalTest01SecondaryActivity.<span class="kw1">class</span><span class="br0">&#41;</span><span class="sy0">;</span>
	  <span class="kw4">int</span> numberOfClicks <span class="sy0">=</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+integer"><span class="kw3">Integer</span></a>.<span class="me1">parseInt</span><span class="br0">&#40;</span>leftEditText.<span class="me1">getText</span><span class="br0">&#40;</span><span class="br0">&#41;</span>.<span class="me1">toString</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="sy0">+</span> 
                               <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+integer"><span class="kw3">Integer</span></a>.<span class="me1">parseInt</span><span class="br0">&#40;</span>rightEditText.<span class="me1">getText</span><span class="br0">&#40;</span><span class="br0">&#41;</span>.<span class="me1">toString</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
          intent.<span class="me1">putExtra</span><span class="br0">&#40;</span><span class="st0">&quot;numberOfClicks&quot;</span>, numberOfClicks<span class="br0">&#41;</span><span class="sy0">;</span>
          startActivityForResult<span class="br0">&#40;</span>intent, SECONDARY_ACTIVITY_REQUEST_CODE<span class="br0">&#41;</span><span class="sy0">;</span>
          <span class="kw1">break</span><span class="sy0">;</span>
        <span class="co1">// ...</span>
      <span class="br0">&#125;</span>
    <span class="br0">&#125;</span>
&nbsp;
  <span class="br0">&#125;</span>
&nbsp;
  @Override
  <span class="kw1">protected</span> <span class="kw4">void</span> onCreate<span class="br0">&#40;</span>Bundle savedInstanceState<span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">super</span>.<span class="me1">onCreate</span><span class="br0">&#40;</span>savedInstanceState<span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="co1">// ...</span>
&nbsp;
    navigateToSecondaryActivityButton <span class="sy0">=</span> <span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+button"><span class="kw3">Button</span></a><span class="br0">&#41;</span>findViewById<span class="br0">&#40;</span>R.<span class="me1">id</span>.<span class="me1">navigate_to_secondary_activity_button</span><span class="br0">&#41;</span><span class="sy0">;</span>
    navigateToSecondaryActivityButton.<span class="me1">setOnClickListener</span><span class="br0">&#40;</span>buttonClickListener<span class="br0">&#41;</span><span class="sy0">;</span>     
  <span class="br0">&#125;</span>
&nbsp;
  @Override
  <span class="kw1">protected</span> <span class="kw4">void</span> onActivityResult<span class="br0">&#40;</span><span class="kw4">int</span> requestCode, <span class="kw4">int</span> resultCode, Intent intent<span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">if</span> <span class="br0">&#40;</span>requestCode <span class="sy0">==</span> SECONDARY_ACTIVITY_REQUEST_CODE<span class="br0">&#41;</span> <span class="br0">&#123;</span>
      Toast.<span class="me1">makeText</span><span class="br0">&#40;</span><span class="kw1">this</span>, <span class="st0">&quot;The activity returned with result &quot;</span> <span class="sy0">+</span> resultCode, Toast.<span class="me1">LENGTH_LONG</span><span class="br0">&#41;</span>.<span class="me1">show</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
  <span class="br0">&#125;</span>
&nbsp;
  <span class="co1">// ...</span>
&nbsp;
<span class="br0">&#125;</span></pre>

<p>
<strong>D.1.</strong> <strong>a)</strong> Pentru a putea fi utilizat, serviciul trebuie să fie declarat în fișierul <code>AndroidManifest.xml</code>. Este obligatoriu să se definească proprietatea <code>android:name</code> care desemnează clasa care gestionează serviciul.
</p>

<p>
Opțional, pot fi precizate și atributele:
</p>
<ul>
<li class="level1"><div class="li"> <code>android:enabled</code>, care indică posibilitatea ca sistemul de operare Android să instanțieze serviciul;</div>
</li>
<li class="level1"><div class="li"> <code>android:exported</code>, prin care se oferă posibilitatea ca serviciul să poată fi invocat și din contextul altei aplicații Android decât cea din care face parte acesta;</div>
</li>
<li class="level1"><div class="li"> <code>android:permission</code>, care limitează posibilitatea ca serviciul respectiv să fie lansat în execuție exclusiv de componentele care dețin permisiunea specificată.</div>
</li>
</ul>
<dl class="file">
<dt><a href="../../../code/eim/colocvii/colocviu01%3Fcodeblock=13" title="Download Snippet" class="mediafile mf_xml">AndroidManifest.xml</a></dt>
<dd><pre class="code file xml"><span class="sc3"><span class="re1">&lt;?xml</span> <span class="re0">version</span>=<span class="st0">&quot;1.0&quot;</span> <span class="re0">encoding</span>=<span class="st0">&quot;utf-8&quot;</span><span class="re2">?&gt;</span></span>
<span class="sc3"><span class="re1">&lt;manifest</span> ... <span class="re2">&gt;</span></span>
  <span class="sc3"><span class="re1">&lt;application</span> ...<span class="re2">&gt;</span></span>
    <span class="sc-1">&lt;!-- other components --&gt;</span>
    <span class="sc3"><span class="re1">&lt;service</span> </span>
<span class="sc3">      <span class="re0">android:name</span>=<span class="st0">&quot;ro.pub.cs.systems.eim.PracticalTest01Service&quot;</span></span>
<span class="sc3">      <span class="re0">android:enabled</span>=<span class="st0">&quot;true&quot;</span></span>
<span class="sc3">      <span class="re0">android:exported</span>=<span class="st0">&quot;false&quot;</span> <span class="re2">/&gt;</span></span>
  <span class="sc3"><span class="re1">&lt;/application<span class="re2">&gt;</span></span></span>
<span class="sc3"><span class="re1">&lt;/manifest<span class="re2">&gt;</span></span></span></pre>
</dd></dl>

<p>
Clasa Java care gestionează serviciul trebuie să fie derivată din clasa <code>android.app.Service</code>.
</p>

<p>
Fiind un serviciu de tip started, trebuie supraîncărcate metodele de callback:
</p>
<ul>
<li class="level1"><div class="li"> <code>onStartCommand(intent, flags, id)</code>, apelat în mod automat în momentul în care componenta Android lansează serviciul în execuție printr-o invocare a metodei <code>startService()</code>;</div>
</li>
<li class="level1"><div class="li"> <code>onBind(intent)</code> care va furniza un rezultat <code>null</code>, întrucât nu este necesară o interfață prin care componenta Android să interacționeze cu serviciul.</div>
</li>
</ul>
<dl class="file">
<dt><a href="../../../code/eim/colocvii/colocviu01%3Fcodeblock=14" title="Download Snippet" class="mediafile mf_java">PracticalTest01Service.java</a></dt>
<dd><pre class="code file java"><span class="kw1">import</span> <span class="co2">android.app.Service</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">android.content.Intent</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">android.os.IBinder</span><span class="sy0">;</span>
&nbsp;
<span class="kw1">public</span> <span class="kw1">class</span> PracticalTest01Service <span class="kw1">extends</span> Service <span class="br0">&#123;</span>
&nbsp;
  <span class="kw1">private</span> ProcessingThread processingThread <span class="sy0">=</span> <span class="kw2">null</span><span class="sy0">;</span>
&nbsp;
  @Override
  <span class="kw1">public</span> <span class="kw4">int</span> onStartCommand<span class="br0">&#40;</span>Intent intent, <span class="kw4">int</span> flags, <span class="kw4">int</span> startId<span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw4">int</span> firstNumber <span class="sy0">=</span> intent.<span class="me1">getIntExtra</span><span class="br0">&#40;</span><span class="st0">&quot;firstNumber&quot;</span>, <span class="sy0">-</span><span class="nu0">1</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="kw4">int</span> secondNumber <span class="sy0">=</span> intent.<span class="me1">getIntExtra</span><span class="br0">&#40;</span><span class="st0">&quot;secondNumber&quot;</span>, <span class="sy0">-</span><span class="nu0">1</span><span class="br0">&#41;</span><span class="sy0">;</span>
    processingThread <span class="sy0">=</span> <span class="kw1">new</span> ProcessingThread<span class="br0">&#40;</span><span class="kw1">this</span>, firstNumber, secondNumber<span class="br0">&#41;</span><span class="sy0">;</span>
    processingThread.<span class="me1">start</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="kw1">return</span> Service.<span class="me1">START_REDELIVER_INTENT</span><span class="sy0">;</span>
  <span class="br0">&#125;</span>
&nbsp;
  @Override
  <span class="kw1">public</span> IBinder onBind<span class="br0">&#40;</span>Intent intent<span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">return</span> <span class="kw2">null</span><span class="sy0">;</span>
  <span class="br0">&#125;</span>
&nbsp;
  @Override
  <span class="kw1">public</span> <span class="kw4">void</span> onDestroy<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    processingThread.<span class="me1">stopThread</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
  <span class="br0">&#125;</span>
&nbsp;
<span class="br0">&#125;</span></pre>
</dd></dl>

<p>
Întrucât procesarea realizată în cadrul serviciului ar ocupa timp de procesor, putând avea un impact asupra responsivității aplicației Android în privința interacțiunii cu utilizatorul, operațiile respective vor fi realizate pe un fir de execuție dedicat. Argumentele care vor fi transmise firului de execuție dedicat sunt <strong>contextul</strong>, întrucât pe baza acestuia se vor transmite intențiile cu difuzare, precum și cele două numere din cadrul interfeței grafice, transmise prin intermediul intenției, ca valori asociate cheilor <code>firstNumber</code>, respectiv <code>secondNumber</code>. Valoarea pe care o furnizează metoda <code>onStartCommand()</code> este <code>Service.START_REDELIVER_INTENT</code>, ceea ce indică sistemului de operare Android faptul că serviciul trebuie repornit în situația în care este distrus pentru a se recupera resursele pe care acesta le utilizează, în caz de nevoie. De asemenea, va fi retransmisă și intenția utilizată pentru a invoca serviciul respectiv.
</p>
<dl class="file">
<dt><a href="../../../code/eim/colocvii/colocviu01%3Fcodeblock=15" title="Download Snippet" class="mediafile mf_java">ProcessingThread.java</a></dt>
<dd><pre class="code file java"><span class="kw1">import</span> <span class="co2">java.util.Date</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">java.util.Random</span><span class="sy0">;</span>
&nbsp;
<span class="kw1">import</span> <span class="co2">android.content.Context</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">android.content.Intent</span><span class="sy0">;</span>
<span class="kw1">import</span> <span class="co2">android.util.Log</span><span class="sy0">;</span>
&nbsp;
<span class="kw1">public</span> <span class="kw1">class</span> ProcessingThread <span class="kw1">extends</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+thread"><span class="kw3">Thread</span></a> <span class="br0">&#123;</span>
&nbsp;
  <span class="kw1">private</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+context"><span class="kw3">Context</span></a> context <span class="sy0">=</span> <span class="kw2">null</span><span class="sy0">;</span>
  <span class="kw1">private</span> <span class="kw4">boolean</span> isRunning <span class="sy0">=</span> <span class="kw2">true</span><span class="sy0">;</span>
&nbsp;
  <span class="kw1">private</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+random"><span class="kw3">Random</span></a> random <span class="sy0">=</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+random"><span class="kw3">Random</span></a><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
  <span class="kw1">private</span> <span class="kw4">double</span> arithmeticMean<span class="sy0">;</span>
  <span class="kw1">private</span> <span class="kw4">double</span> geometricMean<span class="sy0">;</span>
&nbsp;
  <span class="kw1">public</span> ProcessingThread<span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+context"><span class="kw3">Context</span></a> context, <span class="kw4">int</span> firstNumber, <span class="kw4">int</span> secondNumber<span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">this</span>.<span class="me1">context</span> <span class="sy0">=</span> context<span class="sy0">;</span>
&nbsp;
    arithmeticMean <span class="sy0">=</span> <span class="br0">&#40;</span>firstNumber <span class="sy0">+</span> secondNumber<span class="br0">&#41;</span> <span class="sy0">/</span> <span class="nu0">2</span><span class="sy0">;</span>
    geometricMean <span class="sy0">=</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+math"><span class="kw3">Math</span></a>.<span class="me1">sqrt</span><span class="br0">&#40;</span>firstNumber <span class="sy0">*</span> secondNumber<span class="br0">&#41;</span><span class="sy0">;</span>
  <span class="br0">&#125;</span>
&nbsp;
  @Override
  <span class="kw1">public</span> <span class="kw4">void</span> run<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    Log.<span class="me1">d</span><span class="br0">&#40;</span><span class="st0">&quot;[ProcessingThread]&quot;</span>, <span class="st0">&quot;Thread has started!&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="kw1">while</span> <span class="br0">&#40;</span>isRunning<span class="br0">&#41;</span> <span class="br0">&#123;</span>
      sendMessage<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
      sleep<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
    Log.<span class="me1">d</span><span class="br0">&#40;</span><span class="st0">&quot;[ProcessingThread]&quot;</span>, <span class="st0">&quot;Thread has stopped!&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
  <span class="br0">&#125;</span>
&nbsp;
  <span class="kw1">private</span> <span class="kw4">void</span> sendMessage<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    Intent intent <span class="sy0">=</span> <span class="kw1">new</span> Intent<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    intent.<span class="me1">setAction</span><span class="br0">&#40;</span>Constants.<span class="me1">actionTypes</span><span class="br0">&#91;</span>random.<span class="me1">nextInt</span><span class="br0">&#40;</span>Constants.<span class="me1">actionTypes</span>.<span class="me1">length</span><span class="br0">&#41;</span><span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    intent.<span class="me1">putExtra</span><span class="br0">&#40;</span><span class="st0">&quot;message&quot;</span>, <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+date"><span class="kw3">Date</span></a><span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+system"><span class="kw3">System</span></a>.<span class="me1">currentTimeMillis</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="sy0">+</span> <span class="st0">&quot; &quot;</span> <span class="sy0">+</span> arithmeticMean <span class="sy0">+</span> <span class="st0">&quot; &quot;</span> <span class="sy0">+</span> geometricMean<span class="br0">&#41;</span><span class="sy0">;</span>
    context.<span class="me1">sendBroadcast</span><span class="br0">&#40;</span>intent<span class="br0">&#41;</span><span class="sy0">;</span>
  <span class="br0">&#125;</span>
&nbsp;
  <span class="kw1">private</span> <span class="kw4">void</span> sleep<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">try</span> <span class="br0">&#123;</span>
      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+thread"><span class="kw3">Thread</span></a>.<span class="me1">sleep</span><span class="br0">&#40;</span><span class="nu0">10000</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="br0">&#125;</span> <span class="kw1">catch</span> <span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+interruptedexception"><span class="kw3">InterruptedException</span></a> interruptedException<span class="br0">&#41;</span> <span class="br0">&#123;</span>
      interruptedException.<span class="me1">printStackTrace</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
  <span class="br0">&#125;</span>
&nbsp;
  <span class="kw1">public</span> <span class="kw4">void</span> stopThread<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    isRunning <span class="sy0">=</span> <span class="kw2">false</span><span class="sy0">;</span>
  <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre>
</dd></dl>

<p>
În contextul firului de execuție dedicat, se calculează inițial valorile necesare (media aritmetică și media geometrică).
</p>

<p>
Rutina asociată firului de execuție implică următoarele operații:
</p>
<ol>
<li class="level1"><div class="li"> propagarea unei intenții cu difuzare la nivelul sistemului de operare Android;</div>
<ol>
<li class="level2"><div class="li"> se creează un obiect de tip <code>Intent</code> care reprezintă intenția cu difuzare care va fi propagată;</div>
<ol>
<li class="level3"><div class="li"> acțiunea asociată intenției este aleasă în mod aleator dintr-o colecție de tipuri de intenții definite de utilizator;</div>
</li>
<li class="level3"><div class="li"> informația conținută de intenția cu difuzare este plasată în câmpul <code>extra</code>, valoarea (șirul de caractere obținut prin concatenarea datei și orei curente cu media aritmetică și cu media geometrică) fiind asociată cheii <code>message</code>;</div>
</li>
</ol>
</li>
<li class="level2"><div class="li"> se transmite intenția cu difuzare la nivelul sistemului de operare Android prin invocarea metodei <code>sendBroadcast()</code> (definită în clasa <code>Context</code>);</div>
</li>
</ol>
</li>
<li class="level1"><div class="li"> așteptarea unui interval de timp (10.000 ms) până la următoarea iterație, prin intermediul unui apel <code>Thread.sleep()</code>.</div>
</li>
</ol>

<p>
Trebuie implementată și o metodă pentru oprirea rulării firului de execuție în situația în care serviciul asociat este distrus.
</p>

<p>
<strong>b)</strong> În clasa <code>PracticalTest01Acivity</code>, sunt plasate operațiile de pornire și de oprire a serviciului.
</p>

<p>
Verificarea momentului în care trebuie pornit serviciul este realizată pe metoda ascultător a evenimentului de apăsare a unui buton. Se realizează suma dintre valorile conținute în cele două câmpuri text editabile și, în situația în care aceasta depășește pragul minim stabilit și dacă serviciul se găsește în starea oprit, atunci poate fi invocată metoda <code>startService()</code>. Aceasta primește ca argument un obiect de tip <code>Intent</code> (explicit, instanțiat cu contextul și cu clasa aferentă serviciului) în care sunt plasate, în câmpul <code>extra</code>, valorile din câmpurile text editabile sub cheile <code>firstNumber</code> și <code>secondNumber</code>.
</p>
<pre class="code java"><span class="kw1">private</span> <span class="kw1">class</span> ButtonClickListener <span class="kw1">implements</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+view"><span class="kw3">View</span></a>.<span class="me1">OnClickListener</span> <span class="br0">&#123;</span>	
  @Override
  <span class="kw1">public</span> <span class="kw4">void</span> onClick<span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+view"><span class="kw3">View</span></a> view<span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw4">int</span> leftNumberOfClicks <span class="sy0">=</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+integer"><span class="kw3">Integer</span></a>.<span class="me1">parseInt</span><span class="br0">&#40;</span>leftEditText.<span class="me1">getText</span><span class="br0">&#40;</span><span class="br0">&#41;</span>.<span class="me1">toString</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="kw4">int</span> rightNumberOfClicks <span class="sy0">=</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+integer"><span class="kw3">Integer</span></a>.<span class="me1">parseInt</span><span class="br0">&#40;</span>rightEditText.<span class="me1">getText</span><span class="br0">&#40;</span><span class="br0">&#41;</span>.<span class="me1">toString</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
    <span class="co1">// ...</span>
&nbsp;
    <span class="kw1">if</span> <span class="br0">&#40;</span>leftNumberOfClicks <span class="sy0">+</span> rightNumberOfClicks <span class="sy0">&gt;</span> Constants.<span class="me1">NUMBER_OF_CLICKS_THRESHOLD</span>
        <span class="sy0">&amp;&amp;</span> serviceStatus <span class="sy0">==</span> Constants.<span class="me1">SERVICE_STOPPED</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
      Intent intent <span class="sy0">=</span> <span class="kw1">new</span> Intent<span class="br0">&#40;</span>getApplicationContext<span class="br0">&#40;</span><span class="br0">&#41;</span>, PracticalTest01Service.<span class="kw1">class</span><span class="br0">&#41;</span><span class="sy0">;</span>
      intent.<span class="me1">putExtra</span><span class="br0">&#40;</span><span class="st0">&quot;firstNumber&quot;</span>, leftNumberOfClicks<span class="br0">&#41;</span><span class="sy0">;</span>
      intent.<span class="me1">putExtra</span><span class="br0">&#40;</span><span class="st0">&quot;secondNumber&quot;</span>, rightNumberOfClicks<span class="br0">&#41;</span><span class="sy0">;</span>
      getApplicationContext<span class="br0">&#40;</span><span class="br0">&#41;</span>.<span class="me1">startService</span><span class="br0">&#40;</span>intent<span class="br0">&#41;</span><span class="sy0">;</span>
      serviceStatus <span class="sy0">=</span> Constants.<span class="me1">SERVICE_STARTED</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
  <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre>

<p>
Momentul la care este oprit serviciul coincide cu distrugerea activității, așadar pe metoda de callback <code>onDestroy()</code>. Similar, această operație poate fi realizată și pe metoda de callback <code>onStop()</code>. Metoda <code>stopService()</code> primește ca argument tot un obiect de tip <code>Intent</code> construit explicit, cu numele clasei care deservește serviciul.
</p>
<pre class="code java">@Override
<span class="kw1">protected</span> <span class="kw4">void</span> onDestroy<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
  Intent intent <span class="sy0">=</span> <span class="kw1">new</span> Intent<span class="br0">&#40;</span><span class="kw1">this</span>, PracticalTest01Service.<span class="kw1">class</span><span class="br0">&#41;</span><span class="sy0">;</span>
  stopService<span class="br0">&#40;</span>intent<span class="br0">&#41;</span><span class="sy0">;</span>
  <span class="kw1">super</span>.<span class="me1">onDestroy</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre>

<p>
Dacă serviciul este oprit, el va fi distrus de sistemul de operare Android (deși <code>stopService()</code> nu implică invocarea unei metode de callback la nivelul serviciului, totuși acesta va fi oprit și ulterior distrus). Pe metoda <code>onDestroy()</code> a serviciului, trebuie să se aibă grijă ca rutina din cadrul firului de execuție asociat să se termine.
</p>

<p>
<strong>D.2.</strong> Un ascultător pentru intenții cu difuzare este o clasă derivată din <code>android.content.BroadcastReceiver</code>. Acesta poate fi declarat în fișierul <code>AndroidManifest.xml</code>, dacă se dorește ca acesta să fie invocat în mod automat chiar dacă aplicația Android din care face parte nu este instanțiată sau poate fi înregistrat / deînregistrat pe metodele de callback <code>onResume()</code> / <code>onPause()</code> dacă se dorește ca funcționarea sa să fie limitată la perioada în care activitatea este disponibilă pe suprafața de afișare a dispozitivului mobil.
</p>

<p>
În momentul în care o intenție cu difuzare are aceeași acțiune ca cea indicată în filtrul de intenții asociat ascultătorului respectiv, este apelată în mod automat metoda de callback <code>onReceive(context, intent)</code>. Aceasta va fi responsabilă exclusiv cu jurnalizarea valorii asociate cheii <code>message</code> din câmpul <code>extra</code> asociat intenției cu difuzare respective.
</p>
<pre class="code java"><span class="kw1">private</span> MessageBroadcastReceiver messageBroadcastReceiver <span class="sy0">=</span> <span class="kw1">new</span> MessageBroadcastReceiver<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw1">private</span> <span class="kw1">class</span> MessageBroadcastReceiver <span class="kw1">extends</span> BroadcastReceiver <span class="br0">&#123;</span>
  @Override
  <span class="kw1">public</span> <span class="kw4">void</span> onReceive<span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+context"><span class="kw3">Context</span></a> context, Intent intent<span class="br0">&#41;</span> <span class="br0">&#123;</span>
    Log.<span class="me1">d</span><span class="br0">&#40;</span><span class="st0">&quot;[Message]&quot;</span>, intent.<span class="me1">getStringExtra</span><span class="br0">&#40;</span><span class="st0">&quot;message&quot;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
  <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre>

<p>
Un ascultător pentru intenții cu difuzare trebuie să aibă asociat și un filtru de intenții. Acesta conține acțiunile asociate intențiilor cu difuzare, pe care ascultătorul respectiv trebuie să le proceseze.
</p>
<pre class="code java"><span class="kw1">public</span> <span class="kw1">class</span> PracticalTest01MainActivity <span class="kw1">extends</span> Activity <span class="br0">&#123;</span>
&nbsp;
  <span class="co1">// ...</span>
&nbsp;
  <span class="kw1">private</span> IntentFilter intentFilter <span class="sy0">=</span> <span class="kw1">new</span> IntentFilter<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
  @Override
  <span class="kw1">protected</span> <span class="kw4">void</span> onCreate<span class="br0">&#40;</span>Bundle savedInstanceState<span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">super</span>.<span class="me1">onCreate</span><span class="br0">&#40;</span>savedInstanceState<span class="br0">&#41;</span><span class="sy0">;</span>
    setContentView<span class="br0">&#40;</span>R.<span class="me1">layout</span>.<span class="me1">activity_practical_test01_main</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
    <span class="kw1">for</span> <span class="br0">&#40;</span><span class="kw4">int</span> index <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span> index <span class="sy0">&lt;</span> Constants.<span class="me1">actionTypes</span>.<span class="me1">length</span><span class="sy0">;</span> index<span class="sy0">++</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
      intentFilter.<span class="me1">addAction</span><span class="br0">&#40;</span>Constants.<span class="me1">actionTypes</span><span class="br0">&#91;</span>index<span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
  <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre>

<p>
Operațiile de activare, respectiv de dezactivare a ascultătorului pentru intenții cu difuzare, sunt realizate pe metodele de callback ale activității <code>onResume()</code>, respectiv <code>onPause()</code>. În acest fel, se asigură faptul că ascultătorul pentru intenții cu difuzare nu va procesa decât mesajele transmise în perioada în care activitatea este afișată pe suprafața de afișare a dispozitivului mobil.
</p>
<pre class="code java"><span class="kw1">public</span> <span class="kw1">class</span> PracticalTest01MainActivity <span class="kw1">extends</span> Activity <span class="br0">&#123;</span>
&nbsp;
  <span class="co1">// ...</span>
&nbsp;
  @Override
  <span class="kw1">protected</span> <span class="kw4">void</span> onResume<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">super</span>.<span class="me1">onResume</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    registerReceiver<span class="br0">&#40;</span>messageBroadcastReceiver, intentFilter<span class="br0">&#41;</span><span class="sy0">;</span>
  <span class="br0">&#125;</span>
&nbsp;
  @Override
  <span class="kw1">protected</span> <span class="kw4">void</span> onPause<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    unregisterReceiver<span class="br0">&#40;</span>messageBroadcastReceiver<span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="kw1">super</span>.<span class="me1">onPause</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
  <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre>

<p>
<strong>D.3.</strong> Pentru încărcarea codului în contextul depozitului din cadrul contului Github personal:
</p>
<ol>
<li class="level1"><div class="li"> se transferă modificările din zona de lucru în zona de lucru în zona de așteptare prin intermediul comenzii <code>git add</code>, indicându-se și fișierele respective (pot fi folosite șabloane pentru a desemna mai multe fișiere);</div>
</li>
<li class="level1"><div class="li"> se consemnează modificările din zona de așteptare în directorul Git prin intermediul comenzii <code>git commit -m</code>, precizându-se și un mesaj sugestiv:</div>
</li>
<li class="level1"><div class="li"> se încarcă modificările la distanță, prin intermediul comenzii <code>git push</code>, care primește ca parametrii:</div>
<ol>
<li class="level2"><div class="li"> sursa (prin eticheta <code>origin</code> se indică depozitul de unde au fost descărcat conținutul);</div>
</li>
<li class="level2"><div class="li"> destinația: ramificația curentă (implicit, aceasta poartă denumirea <code>master</code>).</div>
</li>
</ol>
</li>
</ol>
<pre class="code">student@eim2016:~/PracticalTest01$ git add *
student@eim2016:~/PracticalTest01$ git commit -m &quot;finished tasks for PracticalTest01&quot;
student@eim2016:~/PracticalTest01$ git push origin master</pre>

<p>
În cazul în care este necesar, vor fi configurați parametrii necesari operației de consemnare (numele de utilizator și adresa de poștă electronică):
</p>
<pre class="code">student@eim2016:~/PracticalTest01$ git config --global user.name &quot;Perfect Student&quot;
student@eim2016:~/PracticalTest01$ git config --global user.email perfectstudent@cs.pub.ro</pre>

</div>
<!-- EDIT4 SECTION "Rezolvări" [1246-] --></div>
</body>
</html>

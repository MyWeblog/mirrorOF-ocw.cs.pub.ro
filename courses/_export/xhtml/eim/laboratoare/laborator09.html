    
    

<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8" />
  <title>eim:laboratoare:laborator09</title>
<meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="date" content="2016-05-06T10:01:20+0300"/>
<meta name="keywords" content="eim,laboratoare,laborator09"/>
<link rel="search" type="application/opensearchdescription+xml" href="../../../../lib/exe/opensearch.php" title="CS Open CourseWare"/>
<link rel="start" href="../../../../../courses.1.html"/>
<link rel="alternate" type="application/rss+xml" title="Recent Changes" href="../../../../feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current Namespace" href="../../../../feed.php%3Fmode=list&amp;ns=eim:laboratoare"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="laborator09.html"/>
<link rel="canonical" href="../../../../eim/laboratoare/laborator09.html"/>
<link rel="stylesheet" type="text/css" href="../../../../lib/exe/css.php%3Ft=arctic&amp;tseed=1479898000.css"/>
<script type="text/javascript">/*<![CDATA[*/var NS='eim:laboratoare';var JSINFO = {"id":"eim:laboratoare:laborator09","namespace":"eim:laboratoare","isadmin":0,"isauth":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="../../../../lib/exe/js.php%3Ftseed=1479898000"></script>
<script type="text/x-mathjax-config">/*<![CDATA[*/MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ["$","$"], ["\\(","\\)"] ],
        displayMath: [ ["$$","$$"], ["\\[","\\]"] ],
        processEscapes: true
    }
});
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
<script type="text/javascript">/*<![CDATA[*/
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
		  
/*!]]>*/</script>
<script type="text/javascript">/*<![CDATA[*/
var pageTracker = _gat._getTracker("UA-38383934-1");
pageTracker._initData();
pageTracker._trackPageview();
		  
/*!]]>*/</script>
</head>
<body>
<div class="dokuwiki export">
<!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="laborator09.html#laborator_09_gestiunea_apelurilor_telefonice_folosind_sip_voip">Laborator 09. Gestiunea Apelurilor Telefonice folosind SIP &amp; VoIP</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="laborator09.html#sip_session_initiation_protocol">SIP (Session Initiation Protocol)</a></div></li>
<li class="level2"><div class="li"><a href="laborator09.html#configurare">Configurare</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="laborator09.html#getonsip">GetOnSIP</a></div></li>
<li class="level3"><div class="li"><a href="laborator09.html#pbxes">PBXes</a></div></li>
<li class="level3"><div class="li"><a href="laborator09.html#utilizare_pe_dispozitivul_mobil">Utilizare pe Dispozitivul Mobil</a></div>
<ul class="toc">
<li class="level4"><div class="li"><a href="laborator09.html#adrese_sip_pentru_testare">Adrese SIP pentru Testare</a></div></li>
<li class="level4"><div class="li"><a href="laborator09.html#implementarea_nativa_din_sistemul_de_operare_android">Implementarea Nativă din Sistemul de Operare Android</a></div></li>
<li class="level4"><div class="li"><a href="laborator09.html#aplicatia_csipsimple">Aplicația CSIPSimple</a></div></li>
</ul>
</li>
</ul>
</li>
<li class="level2"><div class="li"><a href="laborator09.html#android_ngn_stack">Android NGN Stack</a></div></li>
<li class="level2"><div class="li"><a href="laborator09.html#activitate_de_laborator">Activitate de Laborator</a></div></li>
<li class="level2"><div class="li"><a href="laborator09.html#resurse_utile">Resurse Utile</a></div></li>
</ul></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="laborator_09_gestiunea_apelurilor_telefonice_folosind_sip_voip">Laborator 09. Gestiunea Apelurilor Telefonice folosind SIP &amp; VoIP</h1>
<div class="level1">

</div>
<!-- EDIT1 SECTION "Laborator 09. Gestiunea Apelurilor Telefonice folosind SIP & VoIP" [1-81] -->
<h2 class="sectionedit2" id="sip_session_initiation_protocol">SIP (Session Initiation Protocol)</h2>
<div class="level2">

<p>
SIP (Session Initiation Protocol) este un protocol de nivel aplicație, definit de <a href="https://www.ietf.org/rfc/rfc3261.txt" class="urlextern" title="https://www.ietf.org/rfc/rfc3261.txt"  rel="nofollow">RFC 3261</a>, folosit împreună cu alte protocoale pentru a gestiona sesiunile de comunicație multimedia la nivelul Internetului. Este frecvent folosit în cadrul tehnologiei VoIP, una dintre cele mai ieftine, portabile, flexibile și facile soluții pentru transmiterea de conțiunut audio și video prin intermediul rețelei de calculatoare. Singura cerință impusă pentru folosirea tehnologiei VoIP este existența unei legături la Internet.
</p>

<p>
Prin intermediul SIP sunt gestionate <strong>sesiuni</strong> care reprezintă o legătură punct la punct, un canal de comunicație între două entități. Este încorporat în HTTP și SMTP, de la care a preluat arhitectura client-server, respectiv schemelor de codificare ale mesajelor, împărțite în antet și corp. SIP folosește SDP (Session Decription Protocol) pentru a califica o sesiune (unicast sau multicast) și RTP (Real Time Transport Protocol) pentru a transmite conținutul multimedia prin intermediul Internetului.
</p>

<p>
În cadrul infrastructurii de comunicație, fiecare element este identificat prin intermediul unui <abbr title="Uniform Resource Identifier">URI</abbr> (Uniform Resource Identifier), având un rol determinat:
</p>
<ul>
<li class="level1"><div class="li"> <strong>agent utilizator</strong> (<em>eng.</em> user agent) reprezintă o entitate care comunică (telefon mobil, tabletă, calculator): aceasta poate porni sau opri o sesiune și de asemenea poate opera modificări asupra ei; poate fi de mai multe tipuri:</div>
<ul>
<li class="level2"><div class="li"> UAC (User Agent Client) - entitatea care trimite cererea și primește răspunsul;</div>
</li>
<li class="level2"><div class="li"> UAS (User Agent Service) - entutatea care primește cererea și trimite răspunsul;</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> <strong>agent intermediar</strong> (<em>eng.</em> proxy server) reprezintă un element din cadrul rețelei de calculatoare care retransmite mesajul între agenți; acesta poate înțelege conținutul mesajului, pe baza căruia decide pe ce rută să îl ghideze; numărul de astfel de elemente între doi agenți utilizatori este de maximum 70; poate fi de mai multe tipuri:</div>
<ul>
<li class="level2"><div class="li"> cu stare (<em>eng.</em> stateful) - reține informații despre mesajele pe care le-a prelucrat și le poate folosi (în situația în care nu se primește nici un răspuns sau în situația în care mesajul ajunge încă o dată sub aceeași formă);</div>
</li>
<li class="level2"><div class="li"> fără stare (<em>eng.</em> stateless) - nu reține informații despre mesajele pe care le-a prelucrat;</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> <strong>serverul de înregistrare</strong> (<em>eng.</em> registrar server) reține <abbr title="Uniform Resource Identifier">URI</abbr>-uri despre entități pe care le stochează într-o bază de date și pe care le partajează cu alte servere de înregistrare din cadrul aceluiași domeniu; prin intermediul său, agenții utilizatori se autentifică în cadrul rețelei de calculatoare;</div>
</li>
<li class="level1"><div class="li"> <strong>serverul de redirectare</strong> (<em>eng.</em> redirect server) verifică baza de date cu locații, transmițând un răspuns către agentul utilizator;</div>
</li>
<li class="level1"><div class="li"> <strong>serverul de localizare</strong> (<em>eng.</em> location server) oferă informații cu privire la plasarea posibilă a agentului utilizator către serverele intermediare sau serverele de redirectare (doar acestea îl pot accesa)</div>
</li>
</ul>

<p>
Un <strong>flux operațional</strong> standard al unei sesiuni SIP implică următoarele operații:
</p>
<ol>
<li class="level1"><div class="li"> tranzacția 1:</div>
<ol>
<li class="level2"><div class="li"> un agent utilizator (sursă) trimite o cerere de tip <code>INVITE</code> către un agent intermediar în scopul de a contacta un alt agent utilizator (destinație);</div>
</li>
<li class="level2"><div class="li"> agentul intermediar</div>
<ol>
<li class="level3"><div class="li"> trimite înapoi (imediat) un răspuns de tip <code>100 Trying</code> către agentul utilizator sursă (pentru ca acesta să nu mai transmită nimic);</div>
</li>
<li class="level3"><div class="li"> caută agentul utilizator destinație folosind un server locație și îi trimite (mai departe) cererea de tip <code>INVITE</code>;</div>
</li>
</ol>
</li>
<li class="level2"><div class="li"> agentul utilizator destinație transmite, prin intermediul agentului intermediar, un răspuns de tipul <code>180 Ringing</code>, către agentul utilizator sursă;</div>
</li>
</ol>
</li>
<li class="level1"><div class="li"> tranzacția 2: în momentul în care agentul utilizator destinație este contactat, acesta transmite, tot prin intermediul agentului intermediar, un răspuns de tipul <code>200 OK</code>, către agentul utilizator sursă și, din acest moment, <strong>conexiunea este realizată</strong>, transmițându-se pachete RTP în ambele sensuri;</div>
</li>
<li class="level1"><div class="li"> tranzacțoa 3: orice participant poate transmite un mesaj de tipul <code>200 BYE</code> pentru a termina legătura, fiind necesar ca acesta să fie confirmat prin <code>200 OK</code> de către cealaltă parte.</div>
</li>
</ol>

<p>
Se observă faptul că o sesiune de comunicare este împărțită în mai multe <strong>tranzacții</strong> care împreună alcătuiesc un <strong>dialog</strong>.
</p>

<p>
<strong>Mesajele</strong> în protocolul SIP sunt de două tipuri:
</p>
<ul>
<li class="level1"><div class="li"> <strong>cereri</strong> au forma <code>&lt;METODĂ&gt; &lt;<abbr title="Uniform Resource Identifier">URI</abbr>&gt;</code> unde metodele pot fi:</div>
<ul>
<li class="level2"><div class="li"> de bază</div>
<ul>
<li class="level3"><div class="li"> <code>INVITE</code> reprezintă o cerere pentru deschiderea unei sesiuni cu un agent utilizator, putând conține informații de tip multimedia în corpul său; aceasta este considerată că a fost îndeplinită cu succes dacă s-a primit un cod de răspuns de tipul <code>2xx</code> sau s-a transmis un <code>ACK</code>; un dialog stabilit între doi agenți utilizatori continuă până în momentul în care se transmite un mesaj de tipul <code>BYE</code>;</div>
</li>
<li class="level3"><div class="li"> <code>BYE</code> este metoda folosită pentru a închide o sesiune cu un agent utilizator, putând fi trimisă de oricare dintre entitățile din canalul de comunicație, fără a trece prin serverul de înregistrare;</div>
</li>
<li class="level3"><div class="li"> <code>REGISTER</code> indică o cerere de înregistrare a unui agent utilizator către un server de înregistrare; un astfel de mesaj este transmis mai departe până ajunge la o entitate care deține autoritatea de a realiza această operație; o înregistrare poate fi realizată de un agent utilizator în numele altui agent utilizator (<em>eng.</em> third party registration);</div>
</li>
<li class="level3"><div class="li"> <code>CANCEL</code> este operația folosită pentru a închide o sesiune care nu a fost încă deschisă, putând fi transmisă fie de către un agent utilizator fie de către un agent intermediar;</div>
</li>
<li class="level3"><div class="li"> <code>ACK</code> este folosit pentru a confirma o cerere de tip <code>INVITE</code>;</div>
</li>
<li class="level3"><div class="li"> <code>OPTIONS</code> este utilizat pentru a interoga un agent utilizator sau un server intermediar despre capabilitățile sale și pentru a determina disponibilitatea sa, rezultatul fiind o listă a funcționalităților entitpții respective;</div>
</li>
</ul>
</li>
<li class="level2"><div class="li"> extensii: <code>SUBSCRIBE</code>, <code>NOTIFY</code>, <code>REFER</code>, <code>INFO</code>, <code>UPDATE</code>, <code>PRACK</code>, <code>MESSAGE</code>;</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> <strong>răspunsuri</strong> reprezintă un mesaj generat de un agent utilizator de tip server sau de un server SIP în replică la o cerere provenită de la un agent utilizator de tip client; acesta poate reprezenta inclusiv o confirmare formală pentru a preveni retransmisiile; există mai multe tipuri de coduri de răspuns:</div>
</li>
</ul>
<div class="table sectionedit3"><table class="inline">
	<tr class="row0">
		<th class="col0"> CLASA </th><th class="col1"> TIP </th><th class="col2"> DESCRIERE </th><th class="col3"> ACȚIUNE </th>
	</tr>
	<tr class="row1">
		<td class="col0"> 1xx </td><td class="col1"> Provizoriu </td><td class="col2"> Informație </td><td class="col3"> Se precizează starea unui apel înainte ca un rezultat să fie disponibil. </td>
	</tr>
	<tr class="row2">
		<td class="col0"> 2xx </td><td class="col1" rowspan="5"> Definitiv </td><td class="col2"> Succes </td><td class="col3"> Cererea a fost procesată cu succes. Pentru cereri de tip <code>INVITE</code> se întoarce <code>ACK</code>. Pentru alte tipuri cereri, se oprește retransmiterea acestora. </td>
	</tr>
	<tr class="row3">
		<td class="col0"> 3xx </td><td class="col1"> Redirectare </td><td class="col2"> Se indică faptul că au fost furnizate mai multe locații posibile astfel încât ar trebui interogat un alt server pentru a se putea obține informația necesară. </td>
	</tr>
	<tr class="row4">
		<td class="col0"> 4xx </td><td class="col1"> Eroare la Client </td><td class="col2"> Cererea nu a fost procesată cu succes datorită unei erori la client, fiind necesar ca aceasta să fie reformulată. </td>
	</tr>
	<tr class="row5">
		<td class="col0"> 5xx </td><td class="col1"> Eroare la Server </td><td class="col2"> Cererea nu a fost procesată cu succes datorită unei erori la server, putând fi retransmisă către o altă entitate. </td>
	</tr>
	<tr class="row6">
		<td class="col0"> 6xx </td><td class="col1"> Eroare Globală </td><td class="col2"> Cererea a eșuat și nu există nici o șansă de a fi procesată corect pe o altă entitate, nici măcar dacă este reformulată. </td>
	</tr>
</table></div>
<!-- EDIT3 TABLE [6713-7723] -->
<p>
Exemple:
</p>
<ul>
<li class="level1"><div class="li"> <code>100 Trying</code>, <code>180 Ringing</code>, <code>181 Call is Being Forwarded</code>, <code>182 Call Queue</code>, <code>183 Session Progress</code>;</div>
</li>
<li class="level1"><div class="li"> <code>200 OK</code>, <code>202 Accepted</code>;</div>
</li>
<li class="level1"><div class="li"> <code>300 Multiple Choices</code>, <code>301 Moved Permanently</code>, <code>302 Moved Temporarily</code>, <code>305 Use Proxy</code>, <code>380 Alternative Service</code>;</div>
</li>
<li class="level1"><div class="li"> <code>400 Bad Request</code>, <code>401 Unauthorized</code>, <code>403 Forbidden</code>, <code>404 Not Found</code>, <code>405 Method Not Allowed</code>, <code>406 Not Acceptable</code>, <code>407 Proxy Authentication Required</code>, <code>408 Request Timeout</code>, <code>422 Session Timer Interval Too Small</code>, <code>423 Interval Too Brief</code>, <code>480 Temporarily Unavailable</code>, <code>481 Dialog/Transaction Does Not Exist</code>, <code>483 Too Many Hops</code>, <code>486 Busy Here</code>, <code>487 Request Terminated</code>;</div>
</li>
<li class="level1"><div class="li"> <code>500 Server Internal Error</code>, <code>501 Not Implemented</code>, <code>502 Bad Gateway</code>, <code>503 Service Unavailable</code>, <code>504 Gateway Timeout</code>, <code>505 Version Not Supported</code>, <code>513 Message Too Large</code>, <code>580 Preconditions Failure</code>;</div>
</li>
<li class="level1"><div class="li"> <code>600 Busy Everywhere</code>, <code>603 Decline</code>, <code>604 Does Not Exist Anywhere</code>, <code>606 Not Acceptable</code>.</div>
</li>
</ul>

</div>
<!-- EDIT2 SECTION "SIP (Session Initiation Protocol)" [82-8760] -->
<h2 class="sectionedit4" id="configurare">Configurare</h2>
<div class="level2">

<p>
<p><div class="noteimportant">În cadrul acestui laborator este necesar un dispozitiv mobil fizic sau un emulator cu acces la microfonul sistemului de operare. De asemenea, pe dispozitivul mobil trebuie să fie instalat Google Play Services întrucât este necesară descărcarea și instalarea unei aplicații Android (<a href="https://play.google.com/store/apps/details?id=com.csipsimple&amp;hl=en" class="urlextern" title="https://play.google.com/store/apps/details?id=com.csipsimple&amp;hl=en"  rel="nofollow">CSipSimple</a>) pentru realizarea de apeluri telefonice folosind SIP &amp; VoIP.
</div></p>
</p>

<p>
Se va utiliza, la alegere, un furnizor (gratuit) de servicii SIP, accesibil ulterior înregistrării (creării unui cont):
</p>
<ul>
<li class="level1"><div class="li"> <a href="http://www.getonsip.com" class="urlextern" title="http://www.getonsip.com"  rel="nofollow">GetOnSIP</a> - are avantajul implementării serviciului <a href="https://webrtc.org" class="urlextern" title="https://webrtc.org"  rel="nofollow">WebRTC</a> (proiect open-source - susținut de consorțiul World Wide Web (<abbr title="World Wide Web Consortium">W3C</abbr>) - ce pune la dispoziție un <abbr title="Application Programming Interface">API</abbr> pentru realizarea de apeluri de voce / multimedia, conversații și partajare de fișiere printr-o conexiune punct la punct între dispozitive mobile (IoT) și aplicații de tip navigator), dar dezavantajul limitării numărului de accesări într-o oră;</div>
</li>
<li class="level1"><div class="li"> <a href="https://www3.pbxes.com/index_e.php" class="urlextern" title="https://www3.pbxes.com/index_e.php"  rel="nofollow">PBXes</a></div>
</li>
</ul>

</div>
<!-- EDIT4 SECTION "Configurare" [8761-9887] -->
<h3 class="sectionedit5" id="getonsip">GetOnSIP</h3>
<div class="level3">

<p>
Pentru obținerea unui cont SIP gratuit, folosind serviciul GetOnSIP, este necesar să se furnizeze o adresă de poștă electronică, urmată de apăsarea butonului <em>Submit</em>.
</p>

<p>
<img src="../../../../_media/eim/laboratoare/laborator09/getonsip01.png%3Fw=500&amp;tok=66be8a" class="mediacenter" alt="" width="500" />
</p>

<p>
La adresa de poștă furnizată va fi transmisă o legătură Internet, la accesarea căreia utilizatorul va fi redirectat către o pagină în care va putea finaliza procesul de înscriere, prin precizarea următoarelor informații:
</p>
<ul>
<li class="level1"><div class="li"> un nume asociat contului respectiv;</div>
</li>
<li class="level1"><div class="li"> denumirea contului (sufixată cu <code>@getonsip.com</code>);</div>
</li>
<li class="level1"><div class="li"> o parolă introdusă de două ori spre a fi verificată.</div>
</li>
</ul>

<p>
<img src="../../../../_media/eim/laboratoare/laborator09/getonsip03.png%3Fw=300&amp;tok=74b3e5" class="mediacenter" alt="" width="300" />
</p>

<p>
În urma realizării cu succes a contului SIP gratuit, acesta va putea fi accesat, inclusiv prin interfața web, prin furnizarea denumirii contului și a parolei specificate anterior:
</p>

<p>
<img src="../../../../_media/eim/laboratoare/laborator09/getonsip04.png%3Fw=300&amp;tok=509743" class="mediacenter" alt="" width="300" />
</p>

<p>
<img src="../../../../_media/eim/laboratoare/laborator09/getonsip05.png%3Fw=300&amp;tok=bcad16" class="mediacenter" alt="" width="300" />
</p>

<p>
Pentru a putea utiliza serviciile SIP și VoIP prin interfața web, este necesar ca aplicația navigator să obțină acces la resursele hardware ale sistemului pe care îl utilizează:
</p>
<ul>
<li class="level1"><div class="li"> camera web;</div>
</li>
<li class="level1"><div class="li"> microfonul.</div>
</li>
</ul>

<p>
<img src="../../../../_media/eim/laboratoare/laborator09/getonsip06.png" class="mediacenter" alt="" />
</p>

<p>
Secțiunea <em>View Profile</em> este foarte importantă, întrucât acolo sunt furnizate informațiile necesare pentru utilizarea contului SIP din contextul altor dispozitive:
</p>
<ul>
<li class="level1"><div class="li"> adresa SIP;</div>
</li>
<li class="level1"><div class="li"> numele de utilizator;</div>
</li>
<li class="level1"><div class="li"> domeniul;</div>
</li>
<li class="level1"><div class="li"> parola SIP → <strong>atenție!!! această valoare este autogenerată și este diferită de parola furnizată la înregistrare</strong>;</div>
</li>
<li class="level1"><div class="li"> numele de utilizator furnizat pentru autentificare → <strong>atenție!!! valoarea acestui identificator este diferită de numele de utilizator furnizat la înregistrare (de regulă, este prefixat cu șirul de caractere <code>getonsip_</code>)</strong>;</div>
</li>
<li class="level1"><div class="li"> proxy-ul folosit pentru conexiuni din afara domeniului.</div>
</li>
</ul>

<p>
<img src="../../../../_media/eim/laboratoare/laborator09/getonsip07.png" class="mediacenter" alt="" />
</p>

</div>
<!-- EDIT5 SECTION "GetOnSIP" [9888-11902] -->
<h3 class="sectionedit6" id="pbxes">PBXes</h3>
<div class="level3">

<p>
Pentru obținerea unui cont SIP gratuit, folosind serviciul PBXes, este necesar se accesează legătura Internet <em>Create your account</em>.
</p>

<p>
<img src="../../../../_media/eim/laboratoare/laborator09/pbxes01.png" class="mediacenter" alt="" />
</p>

<p>
Este necesar să se furnizeze mai multe informații, legate de:
</p>
<ul>
<li class="level1"><div class="li"> limba folosită pentru afișarea interfeței grafice în cadrul paginii Internet;</div>
</li>
<li class="level1"><div class="li"> contul propriu-zis (denumire - limitată la maximum 15 caractere!!! și parolă - nu sunt permise caracterele speciale);</div>
</li>
<li class="level1"><div class="li"> date personale (nume / prenume, adresă - inclusiv oraș și cod poștal -, zona de timp, data nașterii, numărul de telefon, adresa de poștă electronică);</div>
</li>
<li class="level1"><div class="li"> versiunea aplicației;</div>
</li>
<li class="level1"><div class="li"> permisiunea de a permite unor moderatori independenți de a inspecta datele de configurare și fișierele de jurnalizare spre a putea oferi suport.</div>
</li>
</ul>

<p>
<img src="../../../../_media/eim/laboratoare/laborator09/pbxes02.png" class="mediacenter" alt="" />
</p>

<p>
Ulterior înregistrării cu succes, se furnizează adresa care poate fi folosită pentru accesarea serviciilor SIP și VoIP (de regulă, numele de utilizator furnizat în cadrul înregistrării, la care se adaugă <code>@pbxes.org</code>).
</p>

<p>
<img src="../../../../_media/eim/laboratoare/laborator09/pbxes03.png" class="mediacenter" alt="" />
</p>

<p>
Pentru utilizarea propriu-zisă a serviciului, este necesară <strong>definirea unei extensii</strong> (<em>Extensions</em> → <em>Add Extension</em>) de tipul SIP:
</p>

<p>
<img src="../../../../_media/eim/laboratoare/laborator09/pbxes04.png" class="mediacenter" alt="" />
</p>

<p>
Este necesar să se furnizeze informații legate de:
</p>
<ul>
<li class="level1"><div class="li"> extensia propriu-zisă (număr de extensie și denumire);</div>
</li>
<li class="level1"><div class="li"> date pentru apelul prin Internet (<abbr title="Uniform Resource Locator">URL</abbr>, text, GPS - latitudine și longitudine și, opțional, o imagine);</div>
</li>
<li class="level1"><div class="li"> parola specifică (va fi utilizată în locul parolei furnizată pentru cont).</div>
</li>
</ul>

<p>
<img src="../../../../_media/eim/laboratoare/laborator09/pbxes05.png" class="mediacenter" alt="" />
</p>

</div>
<!-- EDIT6 SECTION "PBXes" [11903-13637] -->
<h3 class="sectionedit7" id="utilizare_pe_dispozitivul_mobil">Utilizare pe Dispozitivul Mobil</h3>
<div class="level3">

</div>

<h4 id="adrese_sip_pentru_testare">Adrese SIP pentru Testare</h4>
<div class="level4">

<p>
Un contact de tip SIP poate fi realizat folosind aplicația nativă <em>Contacts</em>, folosind, în mod obișnuit, opțiunea <em>Create a New Contact</em>.
</p>

<p>
<img src="../../../../_media/eim/laboratoare/laborator09/testcall01.png%3Fw=300&amp;tok=a35f44" class="mediacenter" alt="" width="300" />
</p>

<p>
<img src="../../../../_media/eim/laboratoare/laborator09/testcall02.png%3Fw=300&amp;tok=ddb438" class="mediacenter" alt="" width="300" />
</p>

<p>
Adresa SIP la care se plasează apelul telefonic VoIP va fi plasată în secțiunea <em>Internet call</em> sau <em>SIP</em> (dacă nu este vizibilă, se poate specifica un alt timp de câmp specific contactului prin opțiunea <em>Add another field</em>).
</p>

<p>
<img src="../../../../_media/eim/laboratoare/laborator09/testcall03.png%3Fw=300&amp;tok=a7b9ce" class="mediacenter" alt="" width="300" />
</p>

<p>
Pot fi folosite următoarele adrese de test:
</p>
<ul>
<li class="level1"><div class="li"> <code>thetestcall@getonsip.com</code>;</div>
</li>
<li class="level1"><div class="li"> <code>904@mouselike.org</code>;</div>
</li>
<li class="level1"><div class="li"> <code>301@ideasip.com</code>;</div>
</li>
<li class="level1"><div class="li"> <a href="http://www.voip-info.org/wiki/view/Phone+Numbers" class="urlextern" title="http://www.voip-info.org/wiki/view/Phone+Numbers"  rel="nofollow">altele</a>.</div>
</li>
</ul>

<p>
În agenda telefonică, contactul respectiv va fi identificat printr-o pictogramă specifică (indicând faptul că acesta este de tip SIP), fiind apelat în mod implicit folosind protocolul respectiv.
</p>

<p>
<img src="../../../../_media/eim/laboratoare/laborator09/testcall04.png%3Fw=300&amp;tok=fe92e9" class="mediacenter" alt="" width="300" />
</p>

</div>

<h4 id="implementarea_nativa_din_sistemul_de_operare_android">Implementarea Nativă din Sistemul de Operare Android</h4>
<div class="level4">

<p>
Începând cu versiunea 2.3 (Gingerbread, <abbr title="Application Programming Interface">API</abbr> level 9), în kernelul Android a fost implementat protocolul SIP, acesta putând fi accesat în aplicația <em>Phone</em>, secțiunea <em>Settings</em> → <em>Internet Calling</em> → <em>Accounts</em> (sau <em>Settings</em> → <em>Calls</em> → <em>Calling Accounts</em> → <em>SIP Accounts</em>) și <strong>utilizat exclusiv pentru apeluri de voce</strong>. Totuși, nu sunt încă implementate toate funcționalitățile specifice (apeluri video, mesagerie instantanee).
</p>

<p>
Se accesează aplicația <em>Phone</em> și din meniul acesteia intrarea <em>Settings</em>.
</p>

<p>
<img src="../../../../_media/eim/laboratoare/laborator09/androidstack01.png%3Fw=300&amp;tok=e2755c" class="mediacenter" alt="" width="300" />
</p>

<p>
Se parcurg următoarele ecrane <em>Calls</em> → <em>Calling Accounts</em> → <em>SIP Accounts</em>:
</p>

<p>
<img src="../../../../_media/eim/laboratoare/laborator09/androidstack02.png%3Fw=300&amp;tok=c55c7c" class="mediacenter" alt="" width="300" />
</p>

<p>
<img src="../../../../_media/eim/laboratoare/laborator09/androidstack03.png%3Fw=300&amp;tok=34cd88" class="mediacenter" alt="" width="300" />
</p>

<p>
<img src="../../../../_media/eim/laboratoare/laborator09/androidstack04.png%3Fw=300&amp;tok=b48cde" class="mediacenter" alt="" width="300" />
</p>

<p>
<p><div class="noteimportant">Pentru a se putea recepționa apeluri VoIP, este necesar să se selecteze opțiunea <em>Receive incoming calls</em>. O astfel de abordare poate conduce însă la un consum de energie mult mai rapid și la epuizarea bateriei.
</div></p>
</p>

<p>
Definirea unui cont de tip SIP se realizează prin accesarea opțiunii <em>Add Account</em>:
</p>

<p>
<img src="../../../../_media/eim/laboratoare/laborator09/androidstack05.png%3Fw=300&amp;tok=774daa" class="mediacenter" alt="" width="300" />
</p>

<p>
Informațiile care trebuie specificate sunt:
</p>
<ul>
<li class="level1"><div class="li"> numele de utilizator;</div>
</li>
<li class="level1"><div class="li"> parola;</div>
</li>
<li class="level1"><div class="li"> adresa serverului care oferă serviciile SIP;</div>
</li>
<li class="level1"><div class="li"> contul folosit pentru autentificare;</div>
</li>
<li class="level1"><div class="li"> adresa proxy pentru accesări din afara domeniului;</div>
</li>
<li class="level1"><div class="li"> portul pe care se realizează comunicația;</div>
</li>
<li class="level1"><div class="li"> protocolul folosit pentru transport (TCP / UDP);</div>
</li>
<li class="level1"><div class="li"> transmiterea de mesaje de tip keep-alive.</div>
</li>
</ul>

<p>
<img src="../../../../_media/eim/laboratoare/laborator09/androidstack06.png%3Fw=300&amp;tok=0ae21c" class="mediacenter" alt="" width="300" />
</p>

<p>
În situația în care contul SIP a fost creat, acesta va fi vizualizat în secțiunea <em>SIP Accounts</em> împreună cu starea sa (<em>Receiving calls</em>, <em>Not receiving calls</em>).
</p>

<p>
<img src="../../../../_media/eim/laboratoare/laborator09/androidstack07.png%3Fw=300&amp;tok=249612" class="mediacenter" alt="" width="300" />
</p>

<p>
De asemenea, în secțiunea <em>Calling accounts</em> există posibilitatea de a preciza ce cont este folosit în mod implicit pentru realizarea de apeluri telefonice. Se recomandă selectarea opțiunii <em>Ask first</em> astfel încât pentru fiecare contact să se poată preciza mecanismul utilizat pentru plasarea sa.
</p>

<p>
<img src="../../../../_media/eim/laboratoare/laborator09/androidstack08.png%3Fw=300&amp;tok=94b4aa" class="mediacenter" alt="" width="300" />
</p>

<p>
Prin accesarea unui contact de tip SIP din agenda telefonică, se va utiliza contul specific pentru realizarea apelului telefonic.
</p>

<p>
<img src="../../../../_media/eim/laboratoare/laborator09/androidstack09.png%3Fw=300&amp;tok=282bfd" class="mediacenter" alt="" width="300" />
</p>

</div>

<h4 id="aplicatia_csipsimple">Aplicația CSIPSimple</h4>
<div class="level4">

<p>
În cazul în care în aplicația <em>Phone</em>, opțiunea <em>Internet Calling</em> / <em>SIP Accounts</em> nu este disponibilă, poate fi utilizată aplicația CSipSimple din Play Store. Ulterior descărcării, utilizatorului îi sunt solicitate acordarea de permisiuni pentru ca această aplicație să poată fi instalată.
</p>

<p>
<img src="../../../../_media/eim/laboratoare/laborator09/csipsimple01.png%3Fw=300&amp;tok=dfc5ff" class="mediacenter" alt="" width="300" />
</p>

<p>
<img src="../../../../_media/eim/laboratoare/laborator09/csipsimple02.png%3Fw=300&amp;tok=72a2be" class="mediacenter" alt="" width="300" />
</p>

<p>
<img src="../../../../_media/eim/laboratoare/laborator09/csipsimple03.png%3Fw=300&amp;tok=c617cf" class="mediacenter" alt="" width="300" />
</p>

<p>
<img src="../../../../_media/eim/laboratoare/laborator09/csipsimple04.png%3Fw=300&amp;tok=7116af" class="mediacenter" alt="" width="300" />
</p>

<p>
<img src="../../../../_media/eim/laboratoare/laborator09/csipsimple05.png%3Fw=300&amp;tok=09debc" class="mediacenter" alt="" width="300" />
</p>

<p>
Aplicația CSipSimple pune la dispoziția utilizatorilor mai multe șabloane pentru definirea unui cont SIP. Se recomandă să se utilizeze <em>Generic Wizards</em> → <em>Advanced</em> întrucât permite definirea tuturor parametrilor necesari pentru realizarea conexiunii la serverului care găzduiește un astfel de serviciu:
</p>

<p>
<img src="../../../../_media/eim/laboratoare/laborator09/csipsimple06.png%3Fw=300&amp;tok=d86f2a" class="mediacenter" alt="" width="300" />
</p>

<p>
<img src="../../../../_media/eim/laboratoare/laborator09/csipsimple07.png%3Fw=300&amp;tok=65cdbf" class="mediacenter" alt="" width="300" />
</p>

<p>
<img src="../../../../_media/eim/laboratoare/laborator09/csipsimple08.png%3Fw=300&amp;tok=0c9e98" class="mediacenter" alt="" width="300" />
</p>

<p>
Pentru <strong>contul de tip <code>getonsip.com</code></strong> se precizează următorii parametri:
</p>
<ul>
<li class="level1"><div class="li"> denumirea contului: <code>informaticamobila2016@getonsip.com</code></div>
</li>
<li class="level1"><div class="li"> adresa serverului care pune la dispoziție serviciile SIP: <code>getonsip.com</code>;</div>
</li>
<li class="level1"><div class="li"> numele de utilizator: <code>informaticamobila2016</code></div>
</li>
<li class="level1"><div class="li"> identificatorul folosit pentru autentificare, de regulă același cu numele de utilizator, prefixat de șirul de caractere <code>getonsip_</code>: <code>getonsip_informaticamobila2016</code>;</div>
</li>
<li class="level1"><div class="li"> parola (din secțiunea <em>View Profile</em>, nu cea folosită la definirea contului);</div>
</li>
</ul>

<p>
<p><div class="notetip">În situația în care se folosește emulatorul Genymotion, pentru a se evita transcrierea parolelor foarte lungi, se poate realiza operația de tip Copy-Paste din mașina fizică în mașina virtuală folosind operația de tip apăsare cu o durată de timp mai mare (<em>eng.</em> long press).
</div></p>
</p>
<ul>
<li class="level1"><div class="li"> protocoul folosit (implicit UDP);</div>
</li>
<li class="level1"><div class="li"> proxy-ul folosit pentru conexiuni din afara domeniului: <code>sip.onsip.com</code></div>
</li>
</ul>

<p>
<img src="../../../../_media/eim/laboratoare/laborator09/csipsimple09.png%3Fw=300&amp;tok=3bc1ca" class="mediacenter" alt="" width="300" />
</p>

<p>
În secțiunea <em>Accounts</em>, contul SIP poate fi în orice  moment activat sau dezactivat. Starea acestuia este vizibilă sub denumirea sa, culoarea folosită fiind sugestivă pentru rezultatul operației de înregistrare:
</p>
<ul>
<li class="level1"><div class="li"> verde: operația a fost realizată cu succes;</div>
</li>
<li class="level1"><div class="li"> roșu: s-a produs o eroare; eroarea de tipul <em>Registration timeout</em> denotă faptul că în NAT/SIP nu se translatează corect adresele interne</div>
<ul>
<li class="level2"><div class="li"> rețeaua Digi.Mobil/4G funcționează corespunzător;</div>
</li>
<li class="level2"><div class="li"> în facultate, rețelele wireless <code>ACS-UPB-OPEN</code>, <code>eduroam</code>, <code>Java-ED117</code> nu creează probleme; în schimb, rețeaua <code>change</code> blochează anumite porturi ceea ce împiedică comunicația cu serverul SIP.</div>
</li>
</ul>
</li>
</ul>

<p>
<img src="../../../../_media/eim/laboratoare/laborator09/csipsimple10.png%3Fw=300&amp;tok=ab4597" class="mediacenter" alt="" width="300" />
</p>

<p>
Contactele de tip SIP sunt vizibile în meniul aplicației CSipSimple astfel încât să poată fi plasate apeluri de tip SIP / VoIP:
</p>

<p>
<img src="../../../../_media/eim/laboratoare/laborator09/csipsimple11.png%3Fw=300&amp;tok=c37044" class="mediacenter" alt="" width="300" />
</p>

<p>
<img src="../../../../_media/eim/laboratoare/laborator09/csipsimple12.png%3Fw=300&amp;tok=f55448" class="mediacenter" alt="" width="300" />
</p>

<p>
Pentru <strong>contul de tip PBXes</strong> există un șablon predefinit:
</p>

<p>
<img src="../../../../_media/eim/laboratoare/laborator09/csipsimple13.png%3Fw=300&amp;tok=390139" class="mediacenter" alt="" width="300" />
</p>

<p>
Se recomandă însă să se utilizeze tot un șablon general, astfel încât să poată fi controlați foarte bine toți parametrii:
</p>
<ul>
<li class="level1"><div class="li"> denumirea contului: <code>mobilecomputing</code></div>
</li>
<li class="level1"><div class="li"> adresa serverului care pune la dispoziție serviciile SIP: <code>pbxes.org</code>;</div>
</li>
<li class="level1"><div class="li"> numele de utilizator (<strong>se utilizează extensia</strong>): <code>mobilecomputing-100</code></div>
</li>
<li class="level1"><div class="li"> identificatorul folosit pentru autentificare, de regulă același cu numele de utilizator;</div>
</li>
<li class="level1"><div class="li"> parola (<strong>se utilizează extensia</strong>);</div>
</li>
<li class="level1"><div class="li"> protocoul folosit (implicit UDP);</div>
</li>
<li class="level1"><div class="li"> proxy-ul folosit pentru conexiuni din afara domeniului: <code>pbxes.org</code></div>
</li>
</ul>

<p>
<img src="../../../../_media/eim/laboratoare/laborator09/csipsimple14.png%3Fw=300&amp;tok=4627ef" class="mediacenter" alt="" width="300" />
</p>

</div>
<!-- EDIT7 SECTION "Utilizare pe Dispozitivul Mobil" [13638-21401] -->
<h2 class="sectionedit8" id="android_ngn_stack">Android NGN Stack</h2>
<div class="level2">

<p>
<a href="http://developer.android.com/guide/topics/connectivity/sip.html" class="urlextern" title="http://developer.android.com/guide/topics/connectivity/sip.html"  rel="nofollow">Stiva SIP</a> face parte din SDK-ul Android începând cu versiunea 2.3 (Gingerbread, <abbr title="Application Programming Interface">API</abbr> level 9), însă nu dispune încă de toate funcționalitățile (mesagerie instantanee, apeluri video). Totuși, poate fi utilizat pentru apeluri audio, funcționalitatea fiind disponibilă în <em>Phone</em> → <em>Settings</em> → <em>Internet Calling</em> (ulterior <em>SIP Accounts</em>).
</p>

<p>
Se preferă însă utilizarea <abbr title="Application Programming Interface">API</abbr>-ului NGN (New Generation Networking), care implementează o stivă SIP completă, dispunând și de documentarea metodelor care pot fi utilizate: <a href="https://imsdroid.googlecode.com/svn-history/r381/branches/2.0/android-ngn-stack-00.pdf" class="urlextern" title="https://imsdroid.googlecode.com/svn-history/r381/branches/2.0/android-ngn-stack-00.pdf"  rel="nofollow">https://imsdroid.googlecode.com/svn-history/r381/branches/2.0/android-ngn-stack-00.pdf</a>.
</p>

<p>
Inițial, este necesar să se obțină o referință către obiectul de tip <code>NgnEngine</code>. Acest lucru poate fi realizat prin intermediul metodei statice <code>getInstance()</code> (așa cum era de așteptat, <code>NgnEngine</code> este singleton). De regulă, o astfel de operație este realizată pe metoda <code>onCreate()</code> a activității principale a aplicației Android.
</p>
<pre class="code java">ngnEngine <span class="sy0">=</span> NgnEngine.<span class="me1">getInstance</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw1">if</span> <span class="br0">&#40;</span>ngnEngine <span class="sy0">==</span> <span class="kw2">null</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
  Log.<span class="me1">i</span><span class="br0">&#40;</span>Constants.<span class="me1">TAG</span>, <span class="st0">&quot;Failed to obtain the NGN engine!&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre>

<p>
Motorul NGN trebuie configurat, prin specificarea unor parametri, reținuți sub forma unor perechi de tipul (cheie, valoare). Pentru ca serviciul SIP să poată fi accesat, trebuie specificat identificatorul utilizatorului, adresa SIP (sub forma <code>sip:&lt;username&gt;@&lt;domain&gt;</code>), parola, adresa proxy-ului la care se realizează conexiunea și portul pe care se face acest lucru (frecvent, 5060), rețeaua din care face parte. Pot fi indicate și utilizarea rețelei 3G (implicit, dezactivată) precum și timpul de așteptare în cazul operației de înregistrare.
</p>
<pre class="code java"><span class="kw1">public</span> <span class="kw4">void</span> configureStack<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
  NgnEngine ngnEngine <span class="sy0">=</span> NgnEngine.<span class="me1">getInstance</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
  INgnConfigurationService ngnConfigurationService <span class="sy0">=</span> ngnEngine.<span class="me1">getConfigurationService</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
  ngnConfigurationService.<span class="me1">putString</span><span class="br0">&#40;</span>NgnConfigurationEntry.<span class="me1">IDENTITY_IMPI</span>, Constants.<span class="me1">IDENTITY_IMPI</span><span class="br0">&#41;</span><span class="sy0">;</span>
  ngnConfigurationService.<span class="me1">putString</span><span class="br0">&#40;</span>NgnConfigurationEntry.<span class="me1">IDENTITY_IMPU</span>, <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a>.<span class="me1">format</span><span class="br0">&#40;</span><span class="st0">&quot;sip:%s@%s&quot;</span>, Constants.<span class="me1">USERNAME</span>, Constants.<span class="me1">DOMAIN</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
  ngnConfigurationService.<span class="me1">putString</span><span class="br0">&#40;</span>NgnConfigurationEntry.<span class="me1">IDENTITY_PASSWORD</span>, Constants.<span class="me1">IDENTITY_PASSWORD</span><span class="br0">&#41;</span><span class="sy0">;</span>
  ngnConfigurationService.<span class="me1">putString</span><span class="br0">&#40;</span>NgnConfigurationEntry.<span class="me1">NETWORK_PCSCF_HOST</span>, Constants.<span class="me1">NETWORK_PCSCF_HOST</span><span class="br0">&#41;</span><span class="sy0">;</span>
  ngnConfigurationService.<span class="me1">putInt</span><span class="br0">&#40;</span>NgnConfigurationEntry.<span class="me1">NETWORK_PCSCF_PORT</span>, Constants.<span class="me1">NETWORK_PCSCF_PORT</span><span class="br0">&#41;</span><span class="sy0">;</span>
  ngnConfigurationService.<span class="me1">putString</span><span class="br0">&#40;</span>NgnConfigurationEntry.<span class="me1">NETWORK_REALM</span>, Constants.<span class="me1">NETWORK_REALM</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
  ngnConfigurationService.<span class="me1">putBoolean</span><span class="br0">&#40;</span>NgnConfigurationEntry.<span class="me1">NETWORK_USE_3G</span>, <span class="kw2">true</span><span class="br0">&#41;</span><span class="sy0">;</span>
  ngnConfigurationService.<span class="me1">putInt</span><span class="br0">&#40;</span>NgnConfigurationEntry.<span class="me1">NETWORK_REGISTRATION_TIMEOUT</span>, Constants.<span class="me1">NETWORK_REGISTRATION_TIMEOUT</span><span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
  ngnConfigurationService.<span class="me1">commit</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre>

<p>
Ulterior, motorul NGN trebuie să fie pornit.
</p>
<pre class="code java"><span class="kw1">public</span> <span class="kw4">boolean</span> startNgnEngine<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
  <span class="kw1">if</span> <span class="br0">&#40;</span><span class="sy0">!</span>ngnEngine.<span class="me1">isStarted</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">if</span> <span class="br0">&#40;</span><span class="sy0">!</span>ngnEngine.<span class="me1">start</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
      Log.<span class="me1">e</span><span class="br0">&#40;</span>Constants.<span class="me1">TAG</span>, <span class="st0">&quot;Failed to start the NGN engine!&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
      <span class="kw1">return</span> <span class="kw2">false</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
  <span class="br0">&#125;</span>
  <span class="kw1">return</span> <span class="kw2">true</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre>

<p>
Pe baza acestui obiect, se poate obține un serviciu SIP de tipul <code>INgnSipService</code> care pune la dispoziție metodele pentru obținerea de sesiuni pe baza operațiilor de înregistrare / deînregistrare.
</p>
<pre class="code java">ngnSipService <span class="sy0">=</span> ngnEngine.<span class="me1">getSipService</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>

<p>
Operația de înregistrare presupune transmiterea unui context (al aplicației Android) care este asociat serviciului SIP.
</p>
<pre class="code java"><span class="kw1">public</span> <span class="kw4">void</span> registerSipService<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
  <span class="kw1">if</span> <span class="br0">&#40;</span><span class="sy0">!</span>ngnSipService.<span class="me1">isRegistered</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    ngnSipService.<span class="me1">register</span><span class="br0">&#40;</span><span class="kw1">this</span><span class="br0">&#41;</span><span class="sy0">;</span>
  <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre>

<p>
Pentru operația (simetrică) de deînregistrare, furnizarea unui astfel de argument nu mai este necesară. Utilizatorul este cel care ar trebui să dețină controlul asupra acestui tip de operații, prin intermediul unor elemente din cadrul interfeței grafice.
</p>
<pre class="code java"><span class="kw1">public</span> <span class="kw4">void</span> unregisterSipService<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
  <span class="kw1">if</span> <span class="br0">&#40;</span>ngnSipService.<span class="me1">isRegistered</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    ngnSipService.<span class="me1">unRegister</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
  <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre>

<p>
Motorul NGN trebuie să fie oprit atunci când aplicația Android este terminată. De regulă, o astfel de operație este realizată pe metoda <code>onDestroy()</code> a activității principale.
</p>
<pre class="code java"><span class="kw1">public</span> <span class="kw4">boolean</span> stopNgnEngine<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
  <span class="kw1">if</span> <span class="br0">&#40;</span>ngnEngine.<span class="me1">isStarted</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">if</span> <span class="br0">&#40;</span><span class="sy0">!</span>ngnEngine.<span class="me1">stop</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
      Log.<span class="me1">e</span><span class="br0">&#40;</span>Constants.<span class="me1">TAG</span>, <span class="st0">&quot;Failed to stop the NGN engine!&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
      <span class="kw1">return</span> <span class="kw2">false</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
  <span class="br0">&#125;</span>
  <span class="kw1">return</span> <span class="kw2">true</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre>

<p>
<p><div class="notetip">Este mai puțin frecvent ca operațiile de înregistrare / deînregistrare să se realizeze pe metodele <code>onStart()</code> respectiv <code>onStop()</code> deoarece execuția acestora poate fi destul de îndelungată având un impact negativ asupra responsivității sistemului de operare.
</div></p>
</p>

<p>
Ulterior, se pot deschide sesiuni audio-video (<code>NgnAVSession</code>) respectiv pentru mesagerie instantanee (<code>NgnMessagingSession</code>), acestea fiind obiecte partajate la nivelul întregii aplicații întrucât furnizează aproximativ toate metodele pentru gestiunea apelurilor telefonice sau pentru transmiterea de mesaje.
</p>
<pre class="code java">NgnAVSession ngnAVSession <span class="sy0">=</span> NgnAVSession.<span class="me1">createOutgoingSession</span><span class="br0">&#40;</span>
  NgnEngine.<span class="me1">getInstance</span><span class="br0">&#40;</span><span class="br0">&#41;</span>.<span class="me1">getSipService</span><span class="br0">&#40;</span><span class="br0">&#41;</span>.<span class="me1">getSipStack</span><span class="br0">&#40;</span><span class="br0">&#41;</span>,
  NgnMediaType.<span class="me1">AudioVideo</span>
<span class="br0">&#41;</span><span class="sy0">;</span></pre>
<pre class="code java">NgnMessagingSession instantMessagingSession <span class="sy0">=</span> NgnMessagingSession.<span class="me1">createOutgoingSession</span><span class="br0">&#40;</span>
  NgnEngine.<span class="me1">getInstance</span><span class="br0">&#40;</span><span class="br0">&#41;</span>.<span class="me1">getSipService</span><span class="br0">&#40;</span><span class="br0">&#41;</span>.<span class="me1">getSipStack</span><span class="br0">&#40;</span><span class="br0">&#41;</span>,
  remotePartyUri
<span class="br0">&#41;</span><span class="sy0">;</span></pre>

<p>
În cazul <strong>operațiilor de înregistrare / deînregistrare</strong>, se poate defini un <strong>ascultător pentru mesaje cu difuzare</strong>, care gestionează acțiunile de tipul <code>NgnRegistrationEventArgs.ACTION_REGISTRATION_EVENT</code>.
</p>

<p>
Evenimentele ce pot fi tratate de un astfel de obiect sunt legate de:
</p>
<ul>
<li class="level1"><div class="li"> rezultatul operației de înregistrare:</div>
<ul>
<li class="level2"><div class="li"> <code>REGISTRATION_NOK</code></div>
</li>
<li class="level2"><div class="li"> <code>REGISTRATION_OK</code></div>
</li>
<li class="level2"><div class="li"> <code>REGISTRATION_INPROGRESS</code></div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> rezultatul operației de deînregistrare:</div>
<ul>
<li class="level2"><div class="li"> <code>UNREGISTRATION_NOK</code></div>
</li>
<li class="level2"><div class="li"> <code>UNREGISTRATION_OK</code></div>
</li>
<li class="level2"><div class="li"> <code>UNREGISTRATION_INPROGRESS</code></div>
</li>
</ul>
</li>
</ul>

<p>
Pentru gestiunea <strong>apelurilor telefonice</strong> se folosesc metodele <code>makeCall()</code>, respectiv <code>hangUpCall()</code>, puse la dispoziție de obiectul <code>INgnAVSession</code>.
</p>
<ul>
<li class="level1"><div class="li"> metoda <code>makeCall()</code> primește ca argument un șir de caractere formatat, reprezentând un <abbr title="Uniform Resource Identifier">URI</abbr> valid, acesta fiind furnizat prin intermediul metodei statice <code>NgnUriUtils.makeValidSipUri()</code>; de regulă, se respectă formatul protocol:utilizator@domeniu, în cazul de față protocolul fiind sip; metoda furnizează un rezultat de tip adevărat / fals;</div>
</li>
<li class="level1"><div class="li"> metoda <code>hangUpCall()</code> nu primește nici un argument și furnizează un rezultat de tip adevărat / fals.</div>
</li>
</ul>

<p>
În același scop, se poate defini un ascultător pentru mesaje cu difuzare, care gestionează acțiunile de tipul <code>NgnInviteEventArgs.ACTION_INVITE_EVENT</code>. Evenimentele ce pot fi tratate de un astfel de obiect sunt:
</p>
<ul>
<li class="level1"><div class="li"> <code>INCOMING</code></div>
</li>
<li class="level1"><div class="li"> <code>INCALL</code></div>
</li>
<li class="level1"><div class="li"> <code>TERMINATED</code> / <code>TERMINATING</code></div>
</li>
<li class="level1"><div class="li"> <code>NONE</code></div>
</li>
</ul>

<p>
Pentru gestiunea <strong>mesajelor ce se doresc a fi transmise instantaneu</strong> se folosește metoda <code>sendTextMessage()</code>, care primește ca argument șirul de caractere care trebuie comunicat. Aceasta furnizează un rezultat de tip adevărat / fals după cum operația a reușit respectiv a eșuat.
</p>

<p>
În același scop, se poate defini un ascultător pentru mesaje cu difuzare, care gestionează acțiunile de tipul <code>NgnMessagingEventArgs.ACTION_MESSAGING_EVENT</code>. Evenimentele ce pot fi tratate de un astfel de obiect sunt:
</p>
<ul>
<li class="level1"><div class="li"> <code>INCOMING</code></div>
</li>
<li class="level1"><div class="li"> <code>OUTGOING</code></div>
</li>
<li class="level1"><div class="li"> <code>SUCCESS</code></div>
</li>
<li class="level1"><div class="li"> <code>FAILURE</code></div>
</li>
</ul>

<p>
<p><div class="notetip">În situația mesageriei instantanee, este necesar să se creeze câte o sesiune pentru fiecare mesaj gestionat, întrucât acesta reprezintă de fapt o legătură punct la punct între (cel puțin) două sau mai multe entități.
</div></p>
</p>

</div>
<!-- EDIT8 SECTION "Android NGN Stack" [21402-29207] -->
<h2 class="sectionedit9" id="activitate_de_laborator">Activitate de Laborator</h2>
<div class="level2">

<p>
Se dorește implementarea unei aplicații Android care folosește stiva Android NGN pentru a realiza apeluri de voce precum și comunicație prin mesagerie instantanee folosind SIP.
</p>

<p>

<center>

</p>

<p>
<img src="../../../../_media/eim/laboratoare/laborator09/activitatedelaborator01.png%3Fw=300&amp;tok=5ed356" class="media" alt="" width="300" /> <img src="../../../../_media/eim/laboratoare/laborator09/activitatedelaborator02.png%3Fw=300&amp;tok=050a14" class="media" alt="" width="300" />
</p>

<p>

</center>

</p>

<p>
Proiectul conține două activități:
</p>
<ul>
<li class="level1"><div class="li"> <code>VoiceCallActivity</code>, folosit pentru operații de tip înregistrare / deînregistrare, apeluri de voce și transmiterea de coduri DTMF;</div>
</li>
<li class="level1"><div class="li"> <code>InstantMessagingActivity</code>, utilizat pentru transferul de mesaje instantanee.</div>
</li>
</ul>

<p>
<strong>1.</strong> În contul Github personal, să se creeze un depozit denumit &#039;Laborator09&#039;. Inițial, acesta trebuie să fie gol (nu trebuie să bifați nici adăugarea unui fișier <code>README.md</code>, nici a fișierului <code>.gitignore</code> sau a a fișierului <code>LICENSE</code>).
</p>

<p>
<strong>2.</strong> Să se cloneze în directorul de pe discul local conținutul depozitului la distanță de la <a href="https://www.github.com/eim2016/Laborator09" class="urlextern" title="https://www.github.com/eim2016/Laborator09"  rel="nofollow">https://www.github.com/eim2016/Laborator09</a>. 
</p>

<p>
În urma acestei operații, directorul Laborator09 va trebui să se conțină directoarele <code>labtasks</code> și <code>solutions</code>. 
</p>
<pre class="code">student@eim2016:~$ git clone https://www.github.com/eim2016/Laborator09</pre>

<p>
<strong>3.</strong> Să se încarce conținutul descărcat în cadrul depozitului &#039;Laborator09&#039; de pe contul Github personal. 
</p>
<pre class="code">student@eim2016:~$ cd Laborator09
student@eim2016:~/Laborator09$ git remote add Laborator09_perfectstudent https://github.com/perfectstudent/Laborator09
student@eim2016:~/Laborator09$ git push Laborator09_perfectstudent master</pre>

<p>
<strong>4.</strong> Să se importe în mediul integrat de dezvoltare Eclipse proiectul <code>android-ngn-stack</code>, care va fi utilizat ca bibliotecă pentru proiectul <code>ngnsip</code>.
</p>

<p>
Să se importe în mediul integrat de dezvoltare Eclipse proiectul <code>NgnSIP</code> din directorul <code>labtasks</code>. Acesta trebuie să refere biblioteca <code>android-ngn-stack</code>: <em>Project Properties</em> → <em>Android</em> → <em>Library</em> → <em>Add</em>.
</p>

<p>
<img src="../../../../_media/eim/laboratoare/laborator09/eclipse_android_library.png%3Fw=800&amp;tok=c385df" class="mediacenter" alt="" width="800" />
</p>

<p>
<p><div class="notewarning">Este necesar ca proiectul <code>android-ngn-stack</code> să fie referit ca bibliotecă și compilat ca atare, întrucât dacă se construiește o arhivă .jar pe baza sa, aceasta nu va include și bibliotecile partajate (din subdirectorul <code>libs</code>, având extensia <code>.so</code>), astfel încât la încercarea de inițializare a stivei NGN vor fi generate excepții de tipul <code>java.lang.UnsatisfiedLinkError</code> datorate faptului că nu pot fi încărcate bibliotecile partajate folosite.
</div></p>
</p>

<p>
În interfața <code>Constants.java</code>, să se actualizeaze informațiile specifice contului SIP.
</p>
<div class="hiddenGlobal  hiddenActive"><div class="hiddenElements"></div><div class="hiddenHead  hiddenSinceBeginning"><div class="hiddenOnHidden"><div class="table sectionedit1"><table class="inline">
	<tr class="row0">
		
	</tr>
</table></div>
<!-- EDIT1 TABLE [1-25] --></div><div class="hiddenOnVisible"><div class="table sectionedit1"><table class="inline">
	<tr class="row0">
		
	</tr>
</table></div>
<!-- EDIT1 TABLE [1-25] --></div></div> <!-- .hiddenHead --><div class="hiddenBody">
<p>
Este necesar să se precizeze:
</p>
<ul>
<li class="level1"><div class="li"> numele de utilizator: atributul <code>USERNAME</code>;</div>
</li>
<li class="level1"><div class="li"> identificatorul utilizatorului: atributul <code>IDENTITY_IMPI</code>;</div>
</li>
<li class="level1"><div class="li"> parola: atributul <code>IDENTITY_PASSWORD</code>.</div>
</li>
</ul>

<p>
Aceste informații pot fi preluate de la furnizorul de servicii SIP.
</p>
<dl class="file">
<dt><a href="../../../code/eim/laboratoare/laborator09%3Fcodeblock=11" title="Download Snippet" class="mediafile mf_java">Constants.java</a></dt>
<dd><pre class="code file java"><span class="kw1">public</span> <span class="kw1">interface</span> Constants <span class="br0">&#123;</span>
  <span class="kw1">final</span> <span class="kw1">public</span> <span class="kw1">static</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> USERNAME <span class="sy0">=</span> <span class="st0">&quot;...&quot;</span><span class="sy0">;</span>
  <span class="kw1">final</span> <span class="kw1">public</span> <span class="kw1">static</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> IDENTITY_IMPI <span class="sy0">=</span> <span class="st0">&quot;...&quot;</span><span class="sy0">;</span>
  <span class="kw1">final</span> <span class="kw1">public</span> <span class="kw1">static</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> IDENTITY_PASSWORD <span class="sy0">=</span> <span class="st0">&quot;...&quot;</span><span class="sy0">;</span>
  <span class="co1">// ...</span>
<span class="br0">&#125;</span></pre>
</dd></dl>
</div></div>
<p>
<strong>5</strong>. În activitatea <code>VoiceCallActivity</code>, să se implementeze ascultători pentru butoanele <em>Register</em> și <em>Unregister</em>:
</p>
<ul>
<li class="level1"><div class="li"> <em>Register</em></div>
<ol>
<li class="level2"><div class="li"> va configura motorul NGN, ai cărui parametri sunt plasați sub forma unor valori asociate unor chei (metoda <code>configureStack()</code>);</div>
</li>
<li class="level2"><div class="li"> va porni motorul NGN (metoda <code>startNgnEngine()</code>) și va înregistra activitatea principală la serviciul SIP (metoda <code>registerSipService()</code>)</div>
</li>
</ol>
</li>
<li class="level1"><div class="li"> <em>Unregister</em> va deînregistra serviciul SIP (metoda <code>unregisterSipService()</code>).</div>
</li>
</ul>

<p>
În ambele cazuri, în situația în care se produce o eroare, aceasta va fi jurnalizată folosind Logcat.
</p>
<div class="hiddenGlobal  hiddenActive"><div class="hiddenElements"></div><div class="hiddenHead  hiddenSinceBeginning"><div class="hiddenOnHidden"><div class="table sectionedit1"><table class="inline">
	<tr class="row0">
		
	</tr>
</table></div>
<!-- EDIT1 TABLE [1-25] --></div><div class="hiddenOnVisible"><div class="table sectionedit1"><table class="inline">
	<tr class="row0">
		
	</tr>
</table></div>
<!-- EDIT1 TABLE [1-25] --></div></div> <!-- .hiddenHead --><div class="hiddenBody"><pre class="code java"><span class="kw1">private</span> <span class="kw1">class</span> RegisterButtonClickListener <span class="kw1">implements</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+view"><span class="kw3">View</span></a>.<span class="me1">OnClickListener</span> <span class="br0">&#123;</span>
  @Override
  <span class="kw1">public</span> <span class="kw4">void</span> onClick<span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+view"><span class="kw3">View</span></a> view<span class="br0">&#41;</span> <span class="br0">&#123;</span>
    configureStack<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="kw1">if</span> <span class="br0">&#40;</span><span class="sy0">!</span>startNgnEngine<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
      <span class="kw1">return</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
    registerSipService<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
  <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre>
<pre class="code java"><span class="kw1">private</span> <span class="kw1">class</span> UnregisterButtonClickListener <span class="kw1">implements</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+view"><span class="kw3">View</span></a>.<span class="me1">OnClickListener</span> <span class="br0">&#123;</span>
  @Override
  <span class="kw1">public</span> <span class="kw4">void</span> onClick<span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+view"><span class="kw3">View</span></a> view<span class="br0">&#41;</span> <span class="br0">&#123;</span>
    unregisterSipService<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
  <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre>
</div></div>
<p>
<strong>6.</strong> Să se activeze / dezactiveze ascultătorul pentru mesaje cu difuzare <code>RegistrationBroadcastReceiver</code>, folosind filtrul <code>NgnRegistrationEventArgs.ACTION_REGISTRATION_EVENT</code>. Acesta prelucrează mesajele legate de operațiile de înregistrare / deînregistrare, pe care le jurnalizează în Logcat, utilizatorul putând să le vizualizeze și în interfața grafică prin intermediul unor ferestre de tip <code>Toast</code> precum și într-un câmp text care conține starea curentă (<em>Registered</em>, <em>Registration in progress</em>, <em>Unregistration in progress</em>, <em>Unregistered</em>, <em>Failed to register</em>, <em>Failed to unregster</em>).
</p>
<div class="hiddenGlobal  hiddenActive"><div class="hiddenElements"></div><div class="hiddenHead  hiddenSinceBeginning"><div class="hiddenOnHidden"><div class="table sectionedit1"><table class="inline">
	<tr class="row0">
		
	</tr>
</table></div>
<!-- EDIT1 TABLE [1-25] --></div><div class="hiddenOnVisible"><div class="table sectionedit1"><table class="inline">
	<tr class="row0">
		
	</tr>
</table></div>
<!-- EDIT1 TABLE [1-25] --></div></div> <!-- .hiddenHead --><div class="hiddenBody">
<p>
Operațiile de activare / dezactivare vor fi realizate pe metodele <code>onCreate()</code> respectiv <code>onDestroy()</code>.
</p>
<pre class="code java"><span class="kw1">public</span> <span class="kw4">void</span> enableRegistrationBroadcastReceiver<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
  registrationBroadcastReceiver <span class="sy0">=</span> <span class="kw1">new</span> RegistrationBroadcastReceiver<span class="br0">&#40;</span>registrationStatusTextView<span class="br0">&#41;</span><span class="sy0">;</span>
  registrationIntentFilter <span class="sy0">=</span> <span class="kw1">new</span> IntentFilter<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
  registrationIntentFilter.<span class="me1">addAction</span><span class="br0">&#40;</span>NgnRegistrationEventArgs.<span class="me1">ACTION_REGISTRATION_EVENT</span><span class="br0">&#41;</span><span class="sy0">;</span>
  registerReceiver<span class="br0">&#40;</span>registrationBroadcastReceiver, registrationIntentFilter<span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre>
<pre class="code java"><span class="kw1">public</span> <span class="kw4">void</span> disableRegistrationBroadcastReceiver<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
  <span class="kw1">if</span> <span class="br0">&#40;</span>registrationBroadcastReceiver <span class="sy0">!=</span> <span class="kw2">null</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    unregisterReceiver<span class="br0">&#40;</span>registrationBroadcastReceiver<span class="br0">&#41;</span><span class="sy0">;</span>
    registrationBroadcastReceiver <span class="sy0">=</span> <span class="kw2">null</span><span class="sy0">;</span>
  <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre>
</div></div>
<p>
<strong>7.</strong> În aplicația Android, există un câmp text editabil în care se va preciza adresa SIP destinație, precum și două butoane care pornesc / opresc apelul. 
</p>

<p>
Să se creeaze o sesiune către adresa SIP destinație:
</p>
<pre class="code java">NgnAVSession.<span class="me1">createOutgoingSession</span><span class="br0">&#40;</span>
  NgnEngine.<span class="me1">getInstance</span><span class="br0">&#40;</span><span class="br0">&#41;</span>.<span class="me1">getSipService</span><span class="br0">&#40;</span><span class="br0">&#41;</span>.<span class="me1">getSipStack</span><span class="br0">&#40;</span><span class="br0">&#41;</span>,
  NgnMediaType.<span class="me1">Audio</span>
<span class="br0">&#41;</span><span class="sy0">;</span></pre>

<p>
Pe baza acestei sesiuni, să se pornească apelul cu <code>makeCall()</code>, și să se oprească cu <code>hangUpCall()</code>.
</p>

<p>
Să se implementeze metodele specifice, asociate claselor ascultător pentru operația de apăsare a butoanelor <em>Make Call</em>, respectiv <em>Hang up Call</em>.
</p>
<div class="hiddenGlobal  hiddenActive"><div class="hiddenElements"></div><div class="hiddenHead  hiddenSinceBeginning"><div class="hiddenOnHidden"><div class="table sectionedit1"><table class="inline">
	<tr class="row0">
		
	</tr>
</table></div>
<!-- EDIT1 TABLE [1-25] --></div><div class="hiddenOnVisible"><div class="table sectionedit1"><table class="inline">
	<tr class="row0">
		
	</tr>
</table></div>
<!-- EDIT1 TABLE [1-25] --></div></div> <!-- .hiddenHead --><div class="hiddenBody"><pre class="code java"><span class="kw1">private</span> <span class="kw1">class</span> MakeCallButtonListener <span class="kw1">implements</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+view"><span class="kw3">View</span></a>.<span class="me1">OnClickListener</span> <span class="br0">&#123;</span>
  @Override
  <span class="kw1">public</span> <span class="kw4">void</span> onClick<span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+view"><span class="kw3">View</span></a> view<span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> validUri <span class="sy0">=</span> NgnUriUtils.<span class="me1">makeValidSipUri</span><span class="br0">&#40;</span>SIPAddressEditText.<span class="me1">getText</span><span class="br0">&#40;</span><span class="br0">&#41;</span>.<span class="me1">toString</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="kw1">if</span> <span class="br0">&#40;</span>validUri <span class="sy0">==</span> <span class="kw2">null</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
      Log.<span class="me1">e</span><span class="br0">&#40;</span>Constants.<span class="me1">TAG</span>, <span class="st0">&quot;Invalid SIP address&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
      <span class="kw1">return</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
    <span class="kw1">if</span> <span class="br0">&#40;</span><span class="sy0">!</span>ngnEngine.<span class="me1">isStarted</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="sy0">||</span> <span class="sy0">!</span>ngnSipService.<span class="me1">isRegistered</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
      Log.<span class="me1">e</span><span class="br0">&#40;</span>Constants.<span class="me1">TAG</span>, <span class="st0">&quot;NGN Engine is not started or NGN Sip Service is not registered!&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
      <span class="kw1">return</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
    ngnAVSession <span class="sy0">=</span> NgnAVSession.<span class="me1">createOutgoingSession</span><span class="br0">&#40;</span>
      NgnEngine.<span class="me1">getInstance</span><span class="br0">&#40;</span><span class="br0">&#41;</span>.<span class="me1">getSipService</span><span class="br0">&#40;</span><span class="br0">&#41;</span>.<span class="me1">getSipStack</span><span class="br0">&#40;</span><span class="br0">&#41;</span>,
      NgnMediaType.<span class="me1">Audio</span>
    <span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="kw1">if</span> <span class="br0">&#40;</span>ngnAVSession.<span class="me1">makeCall</span><span class="br0">&#40;</span>validUri<span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
      callStatusTextView.<span class="me1">setText</span><span class="br0">&#40;</span>getResources<span class="br0">&#40;</span><span class="br0">&#41;</span>.<span class="me1">getString</span><span class="br0">&#40;</span>R.<span class="me1">string</span>.<span class="me1">calling</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
      Log.<span class="me1">d</span><span class="br0">&#40;</span>Constants.<span class="me1">TAG</span>, <span class="st0">&quot;Call succeeded&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span>
      Log.<span class="me1">d</span><span class="br0">&#40;</span>Constants.<span class="me1">TAG</span>, <span class="st0">&quot;Call failed&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
  <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre>
<pre class="code java"><span class="kw1">private</span> <span class="kw1">class</span> HangupCallButtonListener <span class="kw1">implements</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+view"><span class="kw3">View</span></a>.<span class="me1">OnClickListener</span> <span class="br0">&#123;</span>
  @Override
  <span class="kw1">public</span> <span class="kw4">void</span> onClick<span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+view"><span class="kw3">View</span></a> view<span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">if</span> <span class="br0">&#40;</span>ngnAVSession <span class="sy0">!=</span> <span class="kw2">null</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
      ngnAVSession.<span class="me1">hangUpCall</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
      Log.<span class="me1">d</span><span class="br0">&#40;</span>Constants.<span class="me1">TAG</span>, <span class="st0">&quot;Hang Up&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="br0">&#125;</span>
  <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre>
</div></div>
<p>
<p><div class="notetip">Sesiunea trebuie menținută ca membru al activității, deoarece este necesară și pentru alte operații.
</div></p>
</p>

<p>
<strong>8.</strong>  Să se activeze / dezactiveze ascultătorul pentru mesaje cu difuzare <code>CallStateBroadcastReceiver</code>, folosind filtrul <code>NgnInviteEventArgs.ACTION_INVITE_EVENT</code>. 
</p>

<p>
Acesta prelucrează mesajele legate de operațiile legate de apelurile de voce, pe care le jurnalizează în Logcat, utilizatorul putând să le vizualizeze și în interfața grafică prin intermediul unor ferestre de tip <code>Toast</code> precum și într-un câmp text care conține starea curentă (<em>Incoming call</em>, <em>Call started</em>, <em>Call ended</em>, <em>Call state</em>).
</p>
<div class="hiddenGlobal  hiddenActive"><div class="hiddenElements"></div><div class="hiddenHead  hiddenSinceBeginning"><div class="hiddenOnHidden"><div class="table sectionedit1"><table class="inline">
	<tr class="row0">
		
	</tr>
</table></div>
<!-- EDIT1 TABLE [1-25] --></div><div class="hiddenOnVisible"><div class="table sectionedit1"><table class="inline">
	<tr class="row0">
		
	</tr>
</table></div>
<!-- EDIT1 TABLE [1-25] --></div></div> <!-- .hiddenHead --><div class="hiddenBody">
<p>
Operațiile de activare / dezactivare vor fi realizate pe metodele <code>onCreate()</code> respectiv <code>onDestroy()</code>.
</p>
<pre class="code java"><span class="kw1">public</span> <span class="kw4">void</span> enableCallStateBroadcastReceiver<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
  callStateBroadcastReceiver <span class="sy0">=</span> <span class="kw1">new</span> CallStateBroadcastReceiver<span class="br0">&#40;</span>SIPAddressEditText, callStatusTextView<span class="br0">&#41;</span><span class="sy0">;</span>
  callIntentFilter <span class="sy0">=</span> <span class="kw1">new</span> IntentFilter<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
  callIntentFilter.<span class="me1">addAction</span><span class="br0">&#40;</span>NgnInviteEventArgs.<span class="me1">ACTION_INVITE_EVENT</span><span class="br0">&#41;</span><span class="sy0">;</span>
  registerReceiver<span class="br0">&#40;</span>callStateBroadcastReceiver, callIntentFilter<span class="br0">&#41;</span><span class="sy0">;</span>		
<span class="br0">&#125;</span></pre>
<pre class="code java"><span class="kw1">public</span> <span class="kw4">void</span> disableCallStateBroadcastReceiver<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
  <span class="kw1">if</span> <span class="br0">&#40;</span>callStateBroadcastReceiver <span class="sy0">!=</span> <span class="kw2">null</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    unregisterReceiver<span class="br0">&#40;</span>callStateBroadcastReceiver<span class="br0">&#41;</span><span class="sy0">;</span>
    callStateBroadcastReceiver <span class="sy0">=</span> <span class="kw2">null</span><span class="sy0">;</span>
  <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre>
</div></div>
<p>
<strong>9.</strong> Să se testeze un apel de voce către o adresă SIP de test (<code>thetestcall@getonsip.com</code>).
</p>

<p>
Să se analizeze conversația SIP la nivel pachet:
</p>
<pre class="code">student@eim2016:/opt/android-sdk-linux/platform-tools$ ./adb -s 192.168.56.101:5555 shell</pre>

<p>
În consola sistemului de operare Android, se folosește utilitarul <a href="http://www.androidtcpdump.com/download/4.7.4/tcpdump" class="urlextern" title="http://www.androidtcpdump.com/download/4.7.4/tcpdump"  rel="nofollow">tcpdump</a>: 
</p>
<pre class="code">root@android:/# ./tcpdump -s0 -ni eth1 -w /sdcard/DCIM/sip.pcap &#039;udp&#039;</pre>

<p>
<p><div class="notetip">
Utilitarul <code>tcpdump</code> se instalează în <code>/data/bin</code>, apoi se conferă drepturi de execuție pentru binar:
</p>
<pre class="code">root@android:/data/bin# chmod 777 tcpdump</pre>

<p>

</div></p>
</p>

<p>
Se pornește apelul audio și după ce se termină mesajul, se oprește. 
</p>

<p>
Programul <code>tcpdump</code> este terminat prin Ctrl-C.
</p>

<p>
Se obține dump-ul și se analizează folosind <code>wireshark</code>.
</p>
<pre class="code">student@eim2016:/opt/android-sdk-linux/platform-tools$ ./adb -s 192.168.56.3:5555 pull /sdcard/DCIM/sip.pcap
student@eim2016:/opt/android-sdk-linux/platform-tools$ wireshark sip.pcap</pre>
<ul>
<li class="level1"><div class="li"> Să se identifice operația <code>REGISTER</code>. Ce port se utilizează? Care este adresa serverului?</div>
</li>
</ul>

<p>
<img src="../../../../_media/eim/laboratoare/laborator09/wireshark01.png%3Fw=800&amp;tok=b08b30" class="mediacenter" alt="" width="800" />
</p>
<ul>
<li class="level1"><div class="li"> Să se găsească, în răspunsul de confirmare, adresele NAT prin care trece conversația, odată ce a fost acceptată cererea.</div>
</li>
</ul>

<p>
<img src="../../../../_media/eim/laboratoare/laborator09/wireshark02.png%3Fw=800&amp;tok=e67c51" class="mediacenter" alt="" width="800" />
</p>
<ul>
<li class="level1"><div class="li"> Să se identifice operația <code>INVITE</code>. Apar retransmisii?</div>
</li>
</ul>

<p>
<img src="../../../../_media/eim/laboratoare/laborator09/wireshark03.png%3Fw=800&amp;tok=3ef14b" class="mediacenter" alt="" width="800" />
</p>
<ul>
<li class="level1"><div class="li"> Ce fel de codificare este utilizată pentru semnalul audio?</div>
</li>
</ul>

<p>
<img src="../../../../_media/eim/laboratoare/laborator09/wireshark04.png%3Fw=800&amp;tok=a0dced" class="mediacenter" alt="" width="800" />
</p>
<ul>
<li class="level1"><div class="li"> Ce parametri are fluxul de voce (protocol, dimensiune pachet, rata pachetelor)?</div>
</li>
</ul>

<p>
<img src="../../../../_media/eim/laboratoare/laborator09/wireshark05.png" class="mediacenter" alt="" />
</p>
<ul>
<li class="level1"><div class="li"> Ce adrese sunt folosite pentru traficul de voce și cum au fost negociate?</div>
</li>
</ul>

<p>
<img src="../../../../_media/eim/laboratoare/laborator09/wireshark06.png%3Fw=800&amp;tok=0bd87a" class="mediacenter" alt="" width="800" />
</p>

<p>
<p><div class="notetip">Pornirea monitorizării (pornirea utilitarului <code>tcpdump</code>) trebuie realizată anterior operației de înregistrare. Similar, oprirea monitorizării trebuie realizată ulterior operației de deînregistrare. În acest fel, pot fi surprinse toate operațiile.
</div></p>
</p>

<p>
<strong>10.</strong> (opțional) Pentru a trimite coduri numerice DTMF (Dual Tone Multi Frequency) se creează un buton și un câmp text editabil asociat. Transmiterea unui astfel de caracter se realizează prin intermediul metodei <code>sendDTMF()</code> a obiectului sesiune <code>NgnAVSession</code> cu valorile întregi 0-9, sau 10 pentru * și 11 pentru #. Folosind o adresa de test (<code>thetestcall@getonsip.com</code> sau <code>904@mouselike.org</code>) să se testeze codurile și navigarea prin meniuri.
</p>

<p>
Să se implementeze metoda asociată clasei ascultător corespunzătoare operației de apăsare a butonului respectiv.
</p>
<div class="hiddenGlobal  hiddenActive"><div class="hiddenElements"></div><div class="hiddenHead  hiddenSinceBeginning"><div class="hiddenOnHidden"><div class="table sectionedit1"><table class="inline">
	<tr class="row0">
		
	</tr>
</table></div>
<!-- EDIT1 TABLE [1-25] --></div><div class="hiddenOnVisible"><div class="table sectionedit1"><table class="inline">
	<tr class="row0">
		
	</tr>
</table></div>
<!-- EDIT1 TABLE [1-25] --></div></div> <!-- .hiddenHead --><div class="hiddenBody"><pre class="code java"><span class="kw1">private</span> <span class="kw1">class</span> DTMFButtonClickListener <span class="kw1">implements</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+view"><span class="kw3">View</span></a>.<span class="me1">OnClickListener</span> <span class="br0">&#123;</span>
  @Override
  <span class="kw1">public</span> <span class="kw4">void</span> onClick<span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+view"><span class="kw3">View</span></a> view<span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">if</span> <span class="br0">&#40;</span>ngnAVSession <span class="sy0">!=</span> <span class="kw2">null</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
      <span class="kw4">int</span> character <span class="sy0">=</span> dtmfEditText.<span class="me1">getText</span><span class="br0">&#40;</span><span class="br0">&#41;</span>.<span class="me1">toString</span><span class="br0">&#40;</span><span class="br0">&#41;</span>.<span class="me1">charAt</span><span class="br0">&#40;</span><span class="nu0">0</span><span class="br0">&#41;</span><span class="sy0">;</span>
      <span class="kw1">switch</span><span class="br0">&#40;</span>character<span class="br0">&#41;</span> <span class="br0">&#123;</span>
        <span class="kw1">case</span> <span class="st0">'*'</span><span class="sy0">:</span>
          character <span class="sy0">=</span> <span class="nu0">10</span><span class="sy0">;</span>
          <span class="kw1">break</span><span class="sy0">;</span>
	<span class="kw1">case</span> <span class="st0">'#'</span><span class="sy0">:</span>
	  character <span class="sy0">=</span> <span class="nu0">11</span><span class="sy0">;</span>
          <span class="kw1">break</span><span class="sy0">;</span>
        <span class="kw1">default</span><span class="sy0">:</span>
	  <span class="kw1">if</span> <span class="br0">&#40;</span>character <span class="sy0">&gt;=</span> <span class="st0">'0'</span> <span class="sy0">&amp;&amp;</span> character <span class="sy0">&lt;=</span> <span class="st0">'9'</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
            character <span class="sy0">-=</span> <span class="st0">'0'</span><span class="sy0">;</span>
          <span class="br0">&#125;</span>
      <span class="br0">&#125;</span>
      <span class="kw1">if</span> <span class="br0">&#40;</span><span class="sy0">!</span>ngnAVSession.<span class="me1">sendDTMF</span><span class="br0">&#40;</span>character<span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
	Log.<span class="me1">e</span><span class="br0">&#40;</span>Constants.<span class="me1">TAG</span>, <span class="st0">&quot;Failed to send DTMF &quot;</span> <span class="sy0">+</span> character<span class="br0">&#41;</span><span class="sy0">;</span>
      <span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span>
	Log.<span class="me1">d</span><span class="br0">&#40;</span>Constants.<span class="me1">TAG</span>, <span class="st0">&quot;Succeeded to send DTMF &quot;</span> <span class="sy0">+</span> character<span class="br0">&#41;</span><span class="sy0">;</span>
      <span class="br0">&#125;</span>
    <span class="br0">&#125;</span>			
  <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre>
</div></div>
<p>
<strong>11.</strong> Activitatea <code>InstantMessagingActivity</code> poate fi lansată din activitatea principală, doar ulterior operației de înregistrare. Aceasta primește ca argument, în intenția cu care este lansată în execuție, adresa SIP cu care se va desfașura sesiunea de mesagerie instantanee. Funcționalitatea este împărțită între activitate și ascultătorul pentru mesaje cu difuzare <code>MessageBroadcastReceiver</code> care trebuie să gestioneze evenimentele de tipul <code>NgnMessagingEventArgs.ACTION_MESSAGING_EVENT</code>. 
</p>
<div class="hiddenGlobal  hiddenActive"><div class="hiddenElements"></div><div class="hiddenHead  hiddenSinceBeginning"><div class="hiddenOnHidden"><div class="table sectionedit1"><table class="inline">
	<tr class="row0">
		
	</tr>
</table></div>
<!-- EDIT1 TABLE [1-25] --></div><div class="hiddenOnVisible"><div class="table sectionedit1"><table class="inline">
	<tr class="row0">
		
	</tr>
</table></div>
<!-- EDIT1 TABLE [1-25] --></div></div> <!-- .hiddenHead --><div class="hiddenBody">
<p>
În activitate, se creează o sesiune pentru fiecare mesaj, folosind 
</p>
<pre class="code java">NgnMessagingSession instantMessagingSession <span class="sy0">=</span> NgnMessagingSession.<span class="me1">createOutgoingSession</span><span class="br0">&#40;</span>
  ngnSipService.<span class="me1">getSipStack</span><span class="br0">&#40;</span><span class="br0">&#41;</span>,
  remotePartyUri
<span class="br0">&#41;</span><span class="sy0">;</span></pre>

<p>
Textul preluat din activitate este apoi transmis cu metoda <code>sendTextMessage()</code>. Nu uitați să eliberați resursele folosite de sesiune atunci când toate informațiile pe care aceasta le deține au fost preluate.
</p>
<pre class="code java"><span class="kw1">if</span><span class="br0">&#40;</span><span class="sy0">!</span>instantMessagingSession.<span class="me1">sendTextMessage</span><span class="br0">&#40;</span>messageEditText.<span class="me1">getText</span><span class="br0">&#40;</span><span class="br0">&#41;</span>.<span class="me1">toString</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
  Log.<span class="me1">e</span><span class="br0">&#40;</span>Constants.<span class="me1">TAG</span>, <span class="st0">&quot;Failed to send message&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span>
  <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> conversation <span class="sy0">=</span> conversationTextView.<span class="me1">getText</span><span class="br0">&#40;</span><span class="br0">&#41;</span>.<span class="me1">toString</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
  conversationTextView.<span class="me1">setText</span><span class="br0">&#40;</span>conversation <span class="sy0">+</span> <span class="st0">&quot;Me: &quot;</span> <span class="sy0">+</span> messageEditText.<span class="me1">getText</span><span class="br0">&#40;</span><span class="br0">&#41;</span>.<span class="me1">toString</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="sy0">+</span> <span class="st0">&quot;<span class="es0">\n</span>&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
  messageEditText.<span class="me1">setText</span><span class="br0">&#40;</span><span class="st0">&quot;&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
  Log.<span class="me1">d</span><span class="br0">&#40;</span>Constants.<span class="me1">TAG</span>, <span class="st0">&quot;Succeeded to send message&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span> 
<span class="br0">&#125;</span>
NgnMessagingSession.<span class="me1">releaseSession</span><span class="br0">&#40;</span>instantMessagingSession<span class="br0">&#41;</span><span class="sy0">;</span></pre>

<p>
În ascultătorul de mesaje cu difuzare, se tratează doar acțiunea <code>NgnMessagingEventArgs.ACTION_MESSAGING_EVENT</code>, tipul evenimentului <code>INCOMING</code>, pentru a extrage octeții mesajului folosind metoda <code>getPayload()</code>. Aceștia se convertesc la șir de caractere și se afișează în fereastra care conține conversația.
</p>
<pre class="code java"><span class="kw1">if</span><span class="br0">&#40;</span><span class="sy0">!</span>NgnStringUtils.<span class="me1">equals</span><span class="br0">&#40;</span>arguments.<span class="me1">getContentType</span><span class="br0">&#40;</span><span class="br0">&#41;</span>, NgnContentType.<span class="me1">T140COMMAND</span>, <span class="kw2">true</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
  <span class="kw4">byte</span><span class="br0">&#91;</span><span class="br0">&#93;</span> contentBytes <span class="sy0">=</span> arguments.<span class="me1">getPayload</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
  <span class="kw1">if</span><span class="br0">&#40;</span>contentBytes <span class="sy0">!=</span> <span class="kw2">null</span> <span class="sy0">&amp;&amp;</span> contentBytes.<span class="me1">length</span> <span class="sy0">&gt;</span> <span class="nu0">0</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <span class="kw1">try</span> <span class="br0">&#123;</span>
      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> content <span class="sy0">=</span> <span class="kw1">new</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a><span class="br0">&#40;</span>contentBytes, <span class="st0">&quot;UTF-8&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
      <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+string"><span class="kw3">String</span></a> conversation <span class="sy0">=</span> conversationTextView.<span class="me1">getText</span><span class="br0">&#40;</span><span class="br0">&#41;</span>.<span class="me1">toString</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
      conversationTextView.<span class="me1">setText</span><span class="br0">&#40;</span>conversation <span class="sy0">+</span> <span class="st0">&quot;Others: &quot;</span> <span class="sy0">+</span> content <span class="sy0">+</span> <span class="st0">&quot;<span class="es0">\n</span>&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <span class="br0">&#125;</span> <span class="kw1">catch</span> <span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+unsupportedencodingexception"><span class="kw3">UnsupportedEncodingException</span></a> unsupportedEncodingException<span class="br0">&#41;</span> <span class="br0">&#123;</span>
      Log.<span class="me1">i</span><span class="br0">&#40;</span>Constants.<span class="me1">TAG</span>, unsupportedEncodingException.<span class="me1">toString</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
      <span class="kw1">if</span> <span class="br0">&#40;</span>Constants.<span class="me1">DEBUG</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
	unsupportedEncodingException.<span class="me1">printStackTrace</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy0">;</span>
      <span class="br0">&#125;</span>
    <span class="br0">&#125;</span>
  <span class="br0">&#125;</span>
<span class="br0">&#125;</span></pre>
</div></div>
<p>
<strong>12.</strong>  Să se încarce modificările realizate în cadrul depozitului &#039;Laborator09&#039; de pe contul Github personal, folosind un mesaj sugestiv. 
</p>
<pre class="code">student@eim2016:~/Laborator09$ git add *
student@eim2016:~/Laborator09$ git commit -m &quot;implemented taks for laboratory 08&quot;
student@eim2016:~/Laborator09$ git push Laborator09_perfectstudent master</pre>

</div>
<!-- EDIT9 SECTION "Activitate de Laborator" [29208-44599] -->
<h2 class="sectionedit10" id="resurse_utile">Resurse Utile</h2>
<div class="level2">

<p>
<a href="http://www.siptutorial.net/index.html" class="urlextern" title="http://www.siptutorial.net/index.html"  rel="nofollow">Introduction to SIP - A Beginners&#039; Tutorial as part of Internet Multimedia</a><br/>

<a href="http://computer.howstuffworks.com/ip-telephony.htm" class="urlextern" title="http://computer.howstuffworks.com/ip-telephony.htm"  rel="nofollow">How VoIP Works?</a><br/>

<a href="http://www.tutorialspoint.com/session_initiation_protocol/session_initiation_protocol_introduction.htm" class="urlextern" title="http://www.tutorialspoint.com/session_initiation_protocol/session_initiation_protocol_introduction.htm"  rel="nofollow">Session Initiation Protocol (Tutorial&#039;s Point)</a><br/>

<a href="https://en.wikipedia.org/wiki/Session_Initiation_Protocol" class="urlextern" title="https://en.wikipedia.org/wiki/Session_Initiation_Protocol"  rel="nofollow">Session Initiation Protocol - Wikipedia</a><br/>

<a href="https://play.google.com/store/apps/details?id=com.csipsimple&amp;hl=en" class="urlextern" title="https://play.google.com/store/apps/details?id=com.csipsimple&amp;hl=en"  rel="nofollow">CSipSimple</a><br/>

<a href="https://webrtc.org/" class="urlextern" title="https://webrtc.org/"  rel="nofollow">WebRTC</a>
</p>

</div>
<!-- EDIT10 SECTION "Resurse Utile" [44600-] --></div>
</body>
</html>

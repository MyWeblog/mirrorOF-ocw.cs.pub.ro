    
    

<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8" />
  <title>gsr:laboratoare:laborator-03</title>
<meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="date" content="2016-10-27T13:21:10+0300"/>
<meta name="keywords" content="gsr,laboratoare,laborator-03"/>
<link rel="search" type="application/opensearchdescription+xml" href="../../../../lib/exe/opensearch.php" title="CS Open CourseWare"/>
<link rel="start" href="../../../../../courses.1.html"/>
<link rel="alternate" type="application/rss+xml" title="Recent Changes" href="../../../../feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current Namespace" href="../../../../feed.php%3Fmode=list&amp;ns=gsr:laboratoare"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="laborator-03.html"/>
<link rel="canonical" href="../../../../gsr/laboratoare/laborator-03.html"/>
<link rel="stylesheet" type="text/css" href="../../../../lib/exe/css.php%3Ft=arctic&amp;tseed=1479898000.css"/>
<script type="text/javascript">/*<![CDATA[*/var NS='gsr:laboratoare';var JSINFO = {"id":"gsr:laboratoare:laborator-03","namespace":"gsr:laboratoare","isadmin":0,"isauth":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="../../../../lib/exe/js.php%3Ftseed=1479898000"></script>
<script type="text/x-mathjax-config">/*<![CDATA[*/MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ["$","$"], ["\\(","\\)"] ],
        displayMath: [ ["$$","$$"], ["\\[","\\]"] ],
        processEscapes: true
    }
});
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
<script type="text/javascript">/*<![CDATA[*/
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
		  
/*!]]>*/</script>
<script type="text/javascript">/*<![CDATA[*/
var pageTracker = _gat._getTracker("UA-38383934-1");
pageTracker._initData();
pageTracker._trackPageview();
		  
/*!]]>*/</script>
</head>
<body>
<div class="dokuwiki export">
<!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="laborator-03.html#laborator_03serviciile_de_dhcp_si_ssh">Laborator 03: Serviciile de DHCP si SSH</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="laborator-03.html#pregatirea_infrastructurii_virtuale_openstack">01. Pregatirea infrastructurii virtuale (OpenStack)</a></div></li>
<li class="level2"><div class="li"><a href="laborator-03.html#dhcp">02. DHCP</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="laborator-03.html#a_demofunctionarea_dhclient">a) Demo: Funcționarea dhclient</a></div></li>
<li class="level3"><div class="li"><a href="laborator-03.html#b_configurare_server_de_dhcp">b) Configurare server de DHCP</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="laborator-03.html#ssh">03. SSH</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="laborator-03.html#a_conectare_prin_ssh_intre_masina_virtuala_sn-r_si_d">a) Conectare prin SSH între mașina virtuală &#039;&#039;Sn-R&#039;&#039; și &#039;&#039;D&#039;&#039;</a></div></li>
<li class="level3"><div class="li"><a href="laborator-03.html#b_configurare_remote_logging_pentru_ssh">b) Configurare remote logging pentru SSH</a></div></li>
<li class="level3"><div class="li"><a href="laborator-03.html#bonuspornirea_manuala_a_sshd">Bonus: Pornirea manuală a sshd</a></div></li>
</ul></li>
</ul></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="laborator_03serviciile_de_dhcp_si_ssh">Laborator 03: Serviciile de DHCP si SSH</h1>
<div class="level1">

</div>
<!-- EDIT1 SECTION "Laborator 03: Serviciile de DHCP si SSH" [19-73] -->
<h2 class="sectionedit2" id="pregatirea_infrastructurii_virtuale_openstack">01. Pregatirea infrastructurii virtuale (OpenStack)</h2>
<div class="level2">

<p>
Incepand cu acest laborator vom lucra si pe topologia virtuala OpenStack. Aceeasi topologie va fi folosita si la proiect.
Acest task are ca scop crearea infrastructurii virtuale.
</p>

<p>
<p><div class="noteclassic">
Fiecare student va avea propriul subnet, din care va aloca adrese pentru masinile virtuale. Puteti gasi alocarea aici:
<a href="https://docs.google.com/spreadsheets/d/14QgTyn41hzinWqHaUQ16kf9_UeUcwXNQ__MR5C6Q70U/pubhtml" class="urlextern" title="https://docs.google.com/spreadsheets/d/14QgTyn41hzinWqHaUQ16kf9_UeUcwXNQ__MR5C6Q70U/pubhtml"  rel="nofollow">https://docs.google.com/spreadsheets/d/14QgTyn41hzinWqHaUQ16kf9_UeUcwXNQ__MR5C6Q70U/pubhtml</a>

</div></p>
</p>

<p>
<p><div class="noteclassic">
Pentru crearea contului, a masinilor virtuale si a legaturilor dintre ele, urmati pasii de aici:
<a href="../../../../gsr/resurse/proiect.html" class="urlextern" title="http://ocw.cs.pub.ro/courses/gsr/resurse/proiect"  rel="nofollow">http://ocw.cs.pub.ro/courses/gsr/resurse/proiect</a>

</div></p>
</p>

</div>
<!-- EDIT2 SECTION "01. Pregatirea infrastructurii virtuale (OpenStack)" [74-707] -->
<h2 class="sectionedit3" id="dhcp">02. DHCP</h2>
<div class="level2">

</div>
<!-- EDIT3 SECTION "02. DHCP" [708-729] -->
<h3 class="sectionedit4" id="a_demofunctionarea_dhclient">a) Demo: Funcționarea dhclient</h3>
<div class="level3">

<p>
<p><div class="noteclassic">
Executati acest demo pe masina fizica din laborator.

</div></p>
</p>

<p>
Clientul de DHCP este reprezentat în Linux de comanda <code>dhclient</code>. La o rulare a comenzii <code>dhclient</code> este interogat serverul DHCP pentru transmiterea unei adrese.
</p>

<p>
Pentru a testa această funcționalitate, vom dezactiva configurația curentă și apoi vom face o nouă configurație.
</p>

<p>
Pentru dezactivare identificăm interfața activă prin rularea comenzii
</p>
<pre class="code">ip a s</pre>

<p>
Apoi dezactivăm configurația interfeței:
</p>
<pre class="code">sudo ip a f dev &lt;interface&gt;</pre>

<p>
unde <code>&lt;interface&gt;</code> este numele interfeței.
</p>

<p>
Apoi solicităm o nouă adresă IP pentru interfață folosind comanda
</p>
<pre class="code">sudo dhclient &lt;interface&gt;</pre>

<p>
unde <code>&lt;interface&gt;</code> este numele interfeței.
</p>

<p>
Putem urmări în <code>/var/log/syslog</code> mesajele afișate de clientul <code>DHCP</code>.
</p>

<p>
Dacă dorim să dăm release la configurație, putem folosi comanda
</p>
<pre class="code">sudo dhclient -r &lt;interace&gt;</pre>

<p>
unde <code>&lt;interface&gt;</code> este numele interfeței.
</p>

</div>
<!-- EDIT4 SECTION "a) Demo: Funcționarea dhclient" [730-1752] -->
<h3 class="sectionedit5" id="b_configurare_server_de_dhcp">b) Configurare server de DHCP</h3>
<div class="level3">

<p>
<p><div class="noteclassic">
Acest task se va executa pe infrastructura virtuala.
Masina <code>Sn-R</code> va are rol de server DHCP, iar masina <code>D</code> va avea rol de client DHCP.

</div></p>
</p>

<p>
Instalati serverul <code>isc-dhcp-server</code> pe masina <code>Sn-R</code>.
</p>

<p>
Creati configurația serverului de DHCP în <code>/etc/default/isc-dhcp-server</code> și în <code>/etc/dhcp/dhcpd.conf</code>. Verificați că serverul este pornit și ascultă conexiuni pe portul <code>68</code> UDP.
</p>

<p>
Urmăriți în fișierele de tip jurnal de pe fiecare sistem (<code>/var/log/syslog</code>) mesaje afișate de clientul și serverul DHCP.
</p>

<p>
Folosiți, pe client, comanda
</p>
<pre class="code">sudo dhclient eth0</pre>

<p>
pentru reinterogarea serverului DHCP, care duce la conduce la generarea de noi mesaje de jurnalizare.
</p>

</div>
<!-- EDIT5 SECTION "b) Configurare server de DHCP" [1753-2502] -->
<h2 class="sectionedit6" id="ssh">03. SSH</h2>
<div class="level2">

</div>
<!-- EDIT6 SECTION "03. SSH" [2503-2523] -->
<h3 class="sectionedit7" id="a_conectare_prin_ssh_intre_masina_virtuala_sn-r_si_d">a) Conectare prin SSH între mașina virtuală &#039;&#039;Sn-R&#039;&#039; și &#039;&#039;D&#039;&#039;</h3>
<div class="level3">

<p>
Încercați să vă conectați prin SSH de pe mașina virtuală <code>Sn-R</code> pe masina virtuala <code>D</code> folosind o comandă de forma
</p>
<pre class="code">ssh student@192.168.N.X</pre>

<p>
Acum încercați și invers, să vă conectați de pe mașina virtuală <code>D</code> pe masina virtuala <code>Sn-R</code>
</p>

<p>
Apoi configurați autentificarea fără parolă (pe bază de chei) de la utilizatorul <code>student</code> de pe mașina virtuală <code>Sn-R</code> la utilizatorul <code>student</code> și la utilizatorul <code>root</code> de pe mașina virtuală <code>D</code>. Va trebui să ajungă cheia publică a utilizatorului <code>student</code> de pe masina virtuala <code>Sn-R</code> în fișierul <code>~/.ssh/authorized_keys</code> din directorul home al utilizatorilor <code>student</code> și <code>root</code> pe mașina virtuală <code>D</code>.
</p>

<p>
<p><div class="notetip">
Dacă simțiți că “scârțâiți”, pentru documentare despre folosirea SSH recomandăm să urmariți <a href="../../../../rl/labs/08.html" class="wikilink1" title="rl:labs:08">laboratorul 8 de RL: Securizarea unui server</a>.

</div></p>
</p>

</div>
<!-- EDIT7 SECTION "a) Conectare prin SSH între mașina virtuală ''Sn-R'' și ''D''" [2524-5348] -->
<h3 class="sectionedit8" id="b_configurare_remote_logging_pentru_ssh">b) Configurare remote logging pentru SSH</h3>
<div class="level3">

<p>
Configurați daemon-ul syslog de pe mașina virtuală <code>D</code> să livreze mesajele de jurnalizare emise de SSH (de facilitatea <code>auth</code>) către daemonul de syslog de pe masina virtuala <code>Sn-R</code>. Adică daemonul de syslog de pe masina virtuala <code>Sn-R</code> va fi listener pentru mesajele livrate de pe mașina virtuală <code>D</code>.
</p>

<p>
Realizați conexiuni SSH de pe mașina virtuala <code>Sn-R</code> spre mașina virtuală <code>D</code> pentru a declanșa mesaje de jurnalizare.
</p>

</div>
<!-- EDIT8 SECTION "b) Configurare remote logging pentru SSH" [5349-6124] -->
<h3 class="sectionedit9" id="bonuspornirea_manuala_a_sshd">Bonus: Pornirea manuală a sshd</h3>
<div class="level3">

<p>
Porniți serviciul SSH manual, pe mașina virtuală <code>D</code>, folosind executabilul <code>/usr/sbin/sshd</code> astfel incat să asculte conexiuni pe portul <code>22</code>. Încercați conexiuni către masina virtuala <code>D</code> de pe masina virtuala <code>Sn-R</code>.
</p>

<p>
Rulați serverul de SSH sub <code>strace</code> (eventual folosind opțiunea <code>-f</code>) și urmăriți ce se întâmplă atunci când se încearcă noi conexiuni.
</p>

</div>
<!-- EDIT9 SECTION "Bonus: Pornirea manuală a sshd" [6125-] --></div>
</body>
</html>

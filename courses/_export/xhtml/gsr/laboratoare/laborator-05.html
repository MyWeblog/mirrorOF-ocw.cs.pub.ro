    
    

<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8" />
  <title>gsr:laboratoare:laborator-05</title>
<meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="date" content="2016-11-10T13:28:30+0200"/>
<meta name="keywords" content="gsr,laboratoare,laborator-05"/>
<link rel="search" type="application/opensearchdescription+xml" href="../../../../lib/exe/opensearch.php" title="CS Open CourseWare"/>
<link rel="start" href="../../../../../courses.1.html"/>
<link rel="alternate" type="application/rss+xml" title="Recent Changes" href="../../../../feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current Namespace" href="../../../../feed.php%3Fmode=list&amp;ns=gsr:laboratoare"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="laborator-05.html"/>
<link rel="canonical" href="../../../../gsr/laboratoare/laborator-05.html"/>
<link rel="stylesheet" type="text/css" href="../../../../lib/exe/css.php%3Ft=arctic&amp;tseed=1479898000.css"/>
<script type="text/javascript">/*<![CDATA[*/var NS='gsr:laboratoare';var JSINFO = {"id":"gsr:laboratoare:laborator-05","namespace":"gsr:laboratoare","isadmin":0,"isauth":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="../../../../lib/exe/js.php%3Ftseed=1479898000"></script>
<script type="text/x-mathjax-config">/*<![CDATA[*/MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ["$","$"], ["\\(","\\)"] ],
        displayMath: [ ["$$","$$"], ["\\[","\\]"] ],
        processEscapes: true
    }
});
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
<script type="text/javascript">/*<![CDATA[*/
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
		  
/*!]]>*/</script>
<script type="text/javascript">/*<![CDATA[*/
var pageTracker = _gat._getTracker("UA-38383934-1");
pageTracker._initData();
pageTracker._trackPageview();
		  
/*!]]>*/</script>
</head>
<body>
<div class="dokuwiki export">
<!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="laborator-05.html#laborator_05serviciul_de_e-mail">Laborator 05: Serviciul de e-mail</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="laborator-05.html#trimiterea_si_citirea_e-mail-urilor_local_2p">1. Trimiterea și citirea e-mail-urilor local (2p)</a></div></li>
<li class="level2"><div class="li"><a href="laborator-05.html#configurari_postfix_2p">2. Configurări Postfix (2p)</a></div></li>
<li class="level2"><div class="li"><a href="laborator-05.html#configurare_courier_imap_si_maildir_25p">3. Configurare Courier IMAP și Maildir (2.5p)</a></div></li>
<li class="level2"><div class="li"><a href="laborator-05.html#configurari_avansate">4. Configurari avansate</a></div></li>
</ul></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="laborator_05serviciul_de_e-mail">Laborator 05: Serviciul de e-mail</h1>
<div class="level1">

</div>
<!-- EDIT1 SECTION "Laborator 05: Serviciul de e-mail" [18-66] -->
<h2 class="sectionedit2" id="trimiterea_si_citirea_e-mail-urilor_local_2p">1. Trimiterea și citirea e-mail-urilor local (2p)</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li">[01]. Instalați MTA-ul <code>postfix</code>. Alegți opțiunile implicite în timpul asistentului de instalare.</div>
</li>
</ul>
<div class="solution"><div class="solution_title hidden_solution_title"><img src="../../../../lib/tpl/arctic/images/tool-source.png"/><span class="title_text">Show solution</span></div><div class="hide_text">Hide solution</div><div class="show_text">Show solution</div><div class="solution_contents hidden_solution_contents"><pre class="code">root@mjolnir:~# apt-get install postfix</pre>
</div></div>
<ul>
<li class="level1"><div class="li">[02]. Inspectând conexiunile TCP active, aflați portul pe care ascultă serverul de mail conexiuni. (Hint: <code>netstat</code>)</div>
</li>
<li class="level1"><div class="li">[02].a Cum se numește executabilul asociat?</div>
</li>
</ul>
<div class="solution"><div class="solution_title hidden_solution_title"><img src="../../../../lib/tpl/arctic/images/tool-source.png"/><span class="title_text">Show solution</span></div><div class="hide_text">Hide solution</div><div class="show_text">Show solution</div><div class="solution_contents hidden_solution_contents"><pre class="code">root@mjolnir:~# netstat -lntp | grep &quot;:25&quot;
tcp        0      0 0.0.0.0:25              0.0.0.0:*               LISTEN      10866/master </pre>
</div></div>
<ul>
<li class="level1"><div class="li">[03]. Adăugați utilizatorii <code>alice</code>, <code>bob</code> și <code>charlie</code> pe mașina fizică (adăugați utilizatorii în grupuri omonime, creați-le directoare home și specificați <code>/bin/bash</code> ca shell implicit).</div>
</li>
</ul>
<div class="solution"><div class="solution_title hidden_solution_title"><img src="../../../../lib/tpl/arctic/images/tool-source.png"/><span class="title_text">Show solution</span></div><div class="hide_text">Hide solution</div><div class="show_text">Show solution</div><div class="solution_contents hidden_solution_contents"><pre class="code">root@mjolnir:~# groupadd alice

root@mjolnir:~# useradd -d /home/alice -m -g alice -s /bin/bash alice

root@mjolnir:~# echo &quot;alice:alice&quot; | chpasswd

root@mjolnir:~# groupadd bob

root@mjolnir:~# useradd -d /home/bob -m -g bob -s /bin/bash bob

root@mjolnir:~# echo &quot;bob:bob&quot; | chpasswd

root@mjolnir:~# groupadd charlie

root@mjolnir:~# useradd -d /home/charlie -m -g charlie -s /bin/bash charlie

root@mjolnir:~# echo &quot;charlie:charlie&quot; | chpasswd</pre>
</div></div>
<ul>
<li class="level1"><div class="li">[04]. Din contul utilizatorului <code>alice</code>, trimiteți un mail catre <code>bob</code> cu subiectul <code>salutare</code></div>
</li>
</ul>
<div class="solution"><div class="solution_title hidden_solution_title"><img src="../../../../lib/tpl/arctic/images/tool-source.png"/><span class="title_text">Show solution</span></div><div class="hide_text">Hide solution</div><div class="show_text">Show solution</div><div class="solution_contents hidden_solution_contents"><pre class="code">alice@mjolnir:~$ echo &quot;Mesaj de la alice catre bob&quot; | mail -s &quot;Hello&quot; bob</pre>
</div></div>
<ul>
<li class="level1"><div class="li">[05]. Din contul utlizatorului <code>bob</code>, verificați casuța de mesaje e-mail. Dupa aceasta operatiune, NU inchideti utilitarul mail. (Hint: <code>mail</code>)</div>
</li>
</ul>
<div class="solution"><div class="solution_title hidden_solution_title"><img src="../../../../lib/tpl/arctic/images/tool-source.png"/><span class="title_text">Show solution</span></div><div class="hide_text">Hide solution</div><div class="show_text">Show solution</div><div class="solution_contents hidden_solution_contents"><pre class="code">bob@mjolnir:~$ mail
Mail version 8.1.2 01/15/2001.  Type ? for help.
&quot;/var/mail/bob&quot;: 1 message 1 new
&gt;N  1 alice@mjolnir.lab  Wed Dec 14 21:02   14/494   Hello
&amp; 1
Message 1:
From alice@mjolnir.labs.cs.pub.ro  Wed Dec 14 21:02:52 2011
X-Original-To: bob
To: bob@mjolnir.labs.cs.pub.ro
Subject: Hello
Date: Wed, 14 Dec 2011 21:02:52 +0200 (EET)
From: alice@mjolnir.labs.cs.pub.ro

Mesaj de la alice catre bob

&amp; </pre>
</div></div>
<ul>
<li class="level1"><div class="li">[06]. Răspundeți (reply) la mesaj. Verificați că reply-ul a ajuns în contul lui alice. (Folosiți <code>?</code> - semnul întrebării - pentru un ecran de ajutor)</div>
</li>
</ul>
<div class="solution"><div class="solution_title hidden_solution_title"><img src="../../../../lib/tpl/arctic/images/tool-source.png"/><span class="title_text">Show solution</span></div><div class="hide_text">Hide solution</div><div class="show_text">Show solution</div><div class="solution_contents hidden_solution_contents"><pre class="code">&amp; r 1
To: alice@mjolnir.labs.cs.pub.ro bob@mjolnir.labs.cs.pub.ro
Subject: Re: Hello

Reply de la bob catre alice

.
Cc: 
&amp;

alice@mjolnir:~$ mail
Mail version 8.1.2 01/15/2001.  Type ? for help.
&quot;/var/mail/alice&quot;: 1 message 1 new
&gt;N  1 bob@mjolnir.labs.  Wed Dec 14 21:04   16/611   Re: Hello
&amp; 1
Message 1:
From bob@mjolnir.labs.cs.pub.ro  Wed Dec 14 21:04:31 2011
X-Original-To: alice@mjolnir.labs.cs.pub.ro
To: alice@mjolnir.labs.cs.pub.ro, bob@mjolnir.labs.cs.pub.ro
Subject: Re: Hello
In-Reply-To: &lt;20111214190252.EB4346A@mjolnir.labs.cs.pub.ro&gt;
Date: Wed, 14 Dec 2011 21:04:31 +0200 (EET)
From: bob@mjolnir.labs.cs.pub.ro

Reply de la bob catre alice

&amp;</pre>
</div></div>
<ul>
<li class="level1"><div class="li">[07]. Configurați un alias denumit <code>contact</code> care să redirecteze toate mesajele trimise pe adresa sa către utilizatorul <code>alice</code>. (Hint: <code>/etc/aliases</code>, <code>newaliases</code>)</div>
</li>
</ul>
<div class="solution"><div class="solution_title hidden_solution_title"><img src="../../../../lib/tpl/arctic/images/tool-source.png"/><span class="title_text">Show solution</span></div><div class="hide_text">Hide solution</div><div class="show_text">Show solution</div><div class="solution_contents hidden_solution_contents"><pre class="code">root@mjolnir:~# tail -n 1 /etc/aliases
contact:alice

root@mjolnir:~# newaliases</pre>
</div></div>
<ul>
<li class="level1"><div class="li">[08]. Trimiteți un e-mail de la bob la <code>contact</code> și verificați că mesajul a ajuns la <code>alice</code>. (Hint: <code>mail</code>)</div>
</li>
</ul>
<div class="solution"><div class="solution_title hidden_solution_title"><img src="../../../../lib/tpl/arctic/images/tool-source.png"/><span class="title_text">Show solution</span></div><div class="hide_text">Hide solution</div><div class="show_text">Show solution</div><div class="solution_contents hidden_solution_contents"><pre class="code">bob@mjolnir:~$ echo &quot;Mesaj de la bob catre contact&quot; | mail -s &quot;Test alias contact&quot; contact

alice@mjolnir:~$ mail
Mail version 8.1.2 01/15/2001.  Type ? for help.
&quot;/var/mail/alice&quot;: 1 message 1 new
&gt;N  1 bob@mjolnir.labs.  Wed Dec 14 21:11   14/515   Test alias contact
&amp; 1
Message 1:
From bob@mjolnir.labs.cs.pub.ro  Wed Dec 14 21:11:30 2011
X-Original-To: contact
To: contact@mjolnir.labs.cs.pub.ro
Subject: Test alias contact
Date: Wed, 14 Dec 2011 21:11:30 +0200 (EET)
From: bob@mjolnir.labs.cs.pub.ro

Mesaj de la bob catre contact

&amp;</pre>
</div></div>
<ul>
<li class="level1"><div class="li">[09]. Realizați un forward local (configurat din home-ul utilizatorului) astfel încât toate mesajele care sunt destinate utilzatorului <code>student</code> să ajungă la utilizatorul <code>bob</code>. (Hint: <code>~/.forward</code>)</div>
</li>
</ul>
<div class="solution"><div class="solution_title hidden_solution_title"><img src="../../../../lib/tpl/arctic/images/tool-source.png"/><span class="title_text">Show solution</span></div><div class="hide_text">Hide solution</div><div class="show_text">Show solution</div><div class="solution_contents hidden_solution_contents"><pre class="code">student@mjolnir:~$ cat .forward 
bob</pre>
</div></div>
<ul>
<li class="level1"><div class="li">[10]. Trimiteți un e-mail de la <code>alice</code> către <code>student</code>, având la <code>CC</code> pe <code>charlie</code>. Verificați conturile de mail ale utilizatorilor <code>student</code>, <code>bob</code> și <code>charlie</code>.</div>
</li>
</ul>
<div class="solution"><div class="solution_title hidden_solution_title"><img src="../../../../lib/tpl/arctic/images/tool-source.png"/><span class="title_text">Show solution</span></div><div class="hide_text">Hide solution</div><div class="show_text">Show solution</div><div class="solution_contents hidden_solution_contents"><pre class="code">alice@mjolnir:~$ echo &quot;Mesaj de la alice catre student si charlie&quot; | mail -s &quot;Test forward&quot; -c charlie student

student@mjolnir:~$ mail
No mail for student

bob@mjolnir:~$ mail
Mail version 8.1.2 01/15/2001.  Type ? for help.
&quot;/var/mail/bob&quot;: 1 message 1 unread
&gt;U  1 alice@mjolnir.lab  Wed Dec 14 21:14   19/711   Test forward
&amp; 1
Message 1:
From alice@mjolnir.labs.cs.pub.ro  Wed Dec 14 21:14:46 2011
X-Original-To: student
To: student@mjolnir.labs.cs.pub.ro
Subject: Test forward
Cc: charlie@mjolnir.labs.cs.pub.ro
Date: Wed, 14 Dec 2011 21:14:46 +0200 (EET)
From: alice@mjolnir.labs.cs.pub.ro

Mesaj de la alice catre student si charlie

&amp; 

charlie@mjolnir:~$ mail
Mail version 8.1.2 01/15/2001.  Type ? for help.
&quot;/var/mail/charlie&quot;: 1 message 1 new
&gt;N  1 alice@mjolnir.lab  Wed Dec 14 21:14   15/563   Test forward
&amp; 1
Message 1:
From alice@mjolnir.labs.cs.pub.ro  Wed Dec 14 21:14:46 2011
X-Original-To: charlie
To: student@mjolnir.labs.cs.pub.ro
Subject: Test forward
Cc: charlie@mjolnir.labs.cs.pub.ro
Date: Wed, 14 Dec 2011 21:14:46 +0200 (EET)
From: alice@mjolnir.labs.cs.pub.ro

Mesaj de la alice catre student si charlie

&amp; </pre>
</div></div>

</div>
<!-- EDIT2 SECTION "1. Trimiterea și citirea e-mail-urilor local (2p)" [67-5806] -->
<h2 class="sectionedit3" id="configurari_postfix_2p">2. Configurări Postfix (2p)</h2>
<div class="level2">

<p>
<p><div class="noteimportant">
Toate configurările de Postfix vor fi realizate folosind postconf

</div></p>
</p>
<ul>
<li class="level1"><div class="li">[01]. Configurați Postfix astfel încât mesajele către gsr.ro să fie stocate local (Hint: <code>mydestination</code>). Mapați gsr.ro și mail.gsr.ro pe adresa ip 127.0.0.1.</div>
</li>
</ul>
<div class="solution"><div class="solution_title hidden_solution_title"><img src="../../../../lib/tpl/arctic/images/tool-source.png"/><span class="title_text">Show solution</span></div><div class="hide_text">Hide solution</div><div class="show_text">Show solution</div><div class="solution_contents hidden_solution_contents"><pre class="code">root@mjolnir:~# postconf | grep &quot;mydestination =&quot;
mydestination = mjolnir.labs.cs.pub.ro, localhost.labs.cs.pub.ro, , localhost

root@mjolnir:~# postconf -e &#039;mydestination = mjolnir.labs.cs.pub.ro, localhost.labs.cs.pub.ro, , localhost, gsr.ro&#039;

root@mjolnir:~# /etc/init.d/postfix restart
Stopping Postfix Mail Transport Agent: postfix.
Starting Postfix Mail Transport Agent: postfix.

root@mjolnir:~# head -n 3 /etc/hosts
127.0.0.1	localhost
127.0.1.1	mjolnir.labs.cs.pub.ro	mjolnir
127.0.0.1	gsr.ro mail.gsr.ro</pre>
</div></div>
<ul>
<li class="level1"><div class="li">[02]. Testați funcționarea directivei trimițând un email de la <code>student</code> către <code>alice@gsr.ro</code>. Verificați în contul lui <code>alice</code> mesajul primit de la <code>student</code>.</div>
</li>
</ul>
<div class="solution"><div class="solution_title hidden_solution_title"><img src="../../../../lib/tpl/arctic/images/tool-source.png"/><span class="title_text">Show solution</span></div><div class="hide_text">Hide solution</div><div class="show_text">Show solution</div><div class="solution_contents hidden_solution_contents"><pre class="code">student@mjolnir:~$ echo &quot;Mesaj de la student catre alice@gsr.ro&quot; | mail -s &quot;Mesaj catre alice@gsr.ro&quot; alice@gsr.ro

alice@mjolnir:~$ mail
Mail version 8.1.2 01/15/2001.  Type ? for help.
&quot;/var/mail/alice&quot;: 1 message 1 new
&gt;N  1 student@mjolnir.l  Wed Dec 14 21:26   14/524   Mesaj catre alice@gsr.ro
&amp; 1
Message 1:
From student@mjolnir.labs.cs.pub.ro  Wed Dec 14 21:26:45 2011
X-Original-To: alice@gsr.ro
To: alice@gsr.ro
Subject: Mesaj catre alice@gsr.ro
Date: Wed, 14 Dec 2011 21:26:45 +0200 (EET)
From: student@mjolnir.labs.cs.pub.ro (Student CS)

Mesaj de la student catre alice@gsr.ro

&amp; </pre>
</div></div>
<ul>
<li class="level1"><div class="li">[03]. Configurați Postfix astfel încât directiva <code>myhostname</code> să fie <code>mail.gsr.ro</code>.</div>
</li>
</ul>
<div class="solution"><div class="solution_title hidden_solution_title"><img src="../../../../lib/tpl/arctic/images/tool-source.png"/><span class="title_text">Show solution</span></div><div class="hide_text">Hide solution</div><div class="show_text">Show solution</div><div class="solution_contents hidden_solution_contents"><pre class="code">root@mjolnir:~# postconf | grep &quot;myhostname =&quot;
myhostname = mjolnir.labs.cs.pub.ro

root@mjolnir:~# postconf -e &#039;myhostname = gsr.ro&#039;

root@mjolnir:~# /etc/init.d/postfix restart
Stopping Postfix Mail Transport Agent: postfix.
Starting Postfix Mail Transport Agent: postfix.</pre>
</div></div>
<ul>
<li class="level1"><div class="li">[04]. Configurați Postfix astfel încât directiva <code>myorigin</code> să aibă valoarea directivei <code>myhostname</code>. (Hint: <code>$myhostname</code>)</div>
</li>
</ul>
<div class="solution"><div class="solution_title hidden_solution_title"><img src="../../../../lib/tpl/arctic/images/tool-source.png"/><span class="title_text">Show solution</span></div><div class="hide_text">Hide solution</div><div class="show_text">Show solution</div><div class="solution_contents hidden_solution_contents"><pre class="code">root@mjolnir:~# postconf | grep &quot;myorigin =&quot;
append_at_myorigin = yes
myorigin = /etc/mailname

root@mjolnir:~# postconf -e &#039;myorigin = $myhostname&#039;

root@mjolnir:~# /etc/init.d/postfix restart
Stopping Postfix Mail Transport Agent: postfix.
Starting Postfix Mail Transport Agent: postfix.</pre>
</div></div>
<ul>
<li class="level1"><div class="li">[05]. Testați funcționarea configurărilor anterioare trimițând un email de la <code>alice</code> către <code>bob@gsr.ro</code>.</div>
</li>
</ul>
<div class="solution"><div class="solution_title hidden_solution_title"><img src="../../../../lib/tpl/arctic/images/tool-source.png"/><span class="title_text">Show solution</span></div><div class="hide_text">Hide solution</div><div class="show_text">Show solution</div><div class="solution_contents hidden_solution_contents"><pre class="code">alice@mjolnir:~$ echo &quot;Mesaj de la alice catre bob@gsr.ro&quot; | mail -s &quot;Catre bob@gsr.ro&quot; bob@gsr.ro</pre>
</div></div>
<ul>
<li class="level1"><div class="li">[05].a. Verificați mesajul primit de <code>bob</code>. Ce apare trecut în dreptul sursei?</div>
</li>
</ul>
<div class="solution"><div class="solution_title hidden_solution_title"><img src="../../../../lib/tpl/arctic/images/tool-source.png"/><span class="title_text">Show solution</span></div><div class="hide_text">Hide solution</div><div class="show_text">Show solution</div><div class="solution_contents hidden_solution_contents"><pre class="code">bob@mjolnir:~$ mail
Mail version 8.1.2 01/15/2001.  Type ? for help.
&quot;/var/mail/bob&quot;: 1 message 1 new
&gt;N  1 alice@gsr.ro       Wed Dec 14 21:40   14/407   Catre bob@gsr.ro
&amp; 1
Message 1:
From alice@gsr.ro  Wed Dec 14 21:40:30 2011
X-Original-To: bob@gsr.ro
To: bob@gsr.ro
Subject: Catre bob@gsr.ro
Date: Wed, 14 Dec 2011 21:40:30 +0200 (EET)
From: alice@gsr.ro

Mesaj de la alice catre bob@gsr.ro

&amp; </pre>
</div></div>

</div>
<!-- EDIT3 SECTION "2. Configurări Postfix (2p)" [5807-9197] -->
<h2 class="sectionedit4" id="configurare_courier_imap_si_maildir_25p">3. Configurare Courier IMAP și Maildir (2.5p)</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li">[01]. Instalați un pachet care să conțină utilitarul <code>maildirmake</code>.</div>
</li>
<li class="level1"><div class="li">[01].a. Căutați toate pachetele care conțin <strong>fișierul din /bin</strong> <code>maildirmake</code>. (Hint: <code>apt-file</code>, <code>grep</code>)</div>
</li>
<li class="level1"><div class="li">[01].b. Din lista de pachete găsită instalați pachetul de bază pentru <code>courier</code>. Alegeți opțiunile default din asistentul de instalare.</div>
</li>
</ul>
<div class="solution"><div class="solution_title hidden_solution_title"><img src="../../../../lib/tpl/arctic/images/tool-source.png"/><span class="title_text">Show solution</span></div><div class="hide_text">Hide solution</div><div class="show_text">Show solution</div><div class="solution_contents hidden_solution_contents"><pre class="code">root@mjolnir:~# apt-file search maildirmake | grep /usr/bin
courier-base: /usr/bin/maildirmake.courier
dovecot-core: /usr/bin/maildirmake.dovecot
maildrop: /usr/bin/maildirmake.maildrop

root@mjolnir:~# apt-get install courier-base</pre>
</div></div>
<ul>
<li class="level1"><div class="li">[02]. Configurați suportul de Maildir în Postfix. (Hint: curs, slide 22)</div>
</li>
<li class="level1"><div class="li">[02].a. <code>home_mailbox = Maildir/</code></div>
</li>
<li class="level1"><div class="li">[02].b. <code>mailbox_command =</code></div>
</li>
</ul>
<div class="solution"><div class="solution_title hidden_solution_title"><img src="../../../../lib/tpl/arctic/images/tool-source.png"/><span class="title_text">Show solution</span></div><div class="hide_text">Hide solution</div><div class="show_text">Show solution</div><div class="solution_contents hidden_solution_contents"><pre class="code">root@mjolnir:~# postconf | grep &quot;home_mailbox =&quot;
home_mailbox = 

root@mjolnir:~# postconf | grep &quot;mailbox_command =&quot;
mailbox_command = procmail -a &quot;$EXTENSION&quot;

root@mjolnir:~# postconf -e &quot;home_mailbox = Maildir/&quot;

root@mjolnir:~# postconf -# mailbox_command

root@mjolnir:~# postconf | grep &quot;mailbox_command =&quot;
mailbox_command = </pre>
</div></div>
<ul>
<li class="level1"><div class="li">[03]. Instalați întâi pachetul de IMAP (simplu) al Courier și apoi libgamin0. După instalarea lui libgamin0 reporniți <code>courier-imap</code>. Instalarea lui libgamin este necesară datorită bug-ului descris aici <a href="http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=578937" class="urlextern" title="http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=578937"  rel="nofollow">http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=578937</a>.</div>
</li>
</ul>
<div class="solution"><div class="solution_title hidden_solution_title"><img src="../../../../lib/tpl/arctic/images/tool-source.png"/><span class="title_text">Show solution</span></div><div class="hide_text">Hide solution</div><div class="show_text">Show solution</div><div class="solution_contents hidden_solution_contents"><pre class="code">root@mjolnir:~# apt-get install courier-imap

root@mjolnir:~# apt-get install libgamin0

root@mjolnir:~# /etc/init.d/courier-imap restart
Stopping Courier IMAP server: imapd.
Starting Courier IMAP server: imapd.</pre>
</div></div>
<ul>
<li class="level1"><div class="li">[04]. Inspectând conexiunile active, aflați portul pe care ascultă daemonul de IMAP. (Hint: <code>netstat</code>)</div>
</li>
</ul>
<div class="solution"><div class="solution_title hidden_solution_title"><img src="../../../../lib/tpl/arctic/images/tool-source.png"/><span class="title_text">Show solution</span></div><div class="hide_text">Hide solution</div><div class="show_text">Show solution</div><div class="solution_contents hidden_solution_contents"><pre class="code">root@mjolnir:~# netstat -lntp | grep courier
tcp6       0      0 :::143                  :::*                    LISTEN      14373/couriertcpd

root@mjolnir:~# getent services imap
imap2                 143/tcp imap</pre>
</div></div>
<ul>
<li class="level1"><div class="li">[05]. Creați un director de tip Maildir în home-ul utilizatorului <code>alice</code> (calea către director va trebui să fie <code>/home/alice/Maildir/</code>) (Hint: <code>maildirmake</code>)</div>
</li>
<li class="level1"><div class="li">[05].a. <strong>Atenție</strong>: După creare, directorul <code>Maildir/</code> trebuie să fie deținut de utilizatorul <code>alice</code>.</div>
</li>
</ul>
<div class="solution"><div class="solution_title hidden_solution_title"><img src="../../../../lib/tpl/arctic/images/tool-source.png"/><span class="title_text">Show solution</span></div><div class="hide_text">Hide solution</div><div class="show_text">Show solution</div><div class="solution_contents hidden_solution_contents"><pre class="code">alice@mjolnir:~$ maildirmake /home/alice/Maildir

alice@mjolnir:~$ ls -l
total 8
drwx------ 5 alice alice 4096 Dec 14 22:07 Maildir
-rw------- 1 alice alice 1683 Dec 14 21:28 mbox
alice@mjolnir:~$ ls -lR Maildir/
Maildir/:
total 12
drwx------ 2 alice alice 4096 Dec 14 22:07 cur
drwx------ 2 alice alice 4096 Dec 14 22:07 new
drwx------ 2 alice alice 4096 Dec 14 22:07 tmp

Maildir/cur:
total 0

Maildir/new:
total 0

Maildir/tmp:
total 0</pre>
</div></div>
<ul>
<li class="level1"><div class="li">[06]. Instalați clientul de e-mail Mozilla Thunderbird.</div>
</li>
</ul>
<div class="solution"><div class="solution_title hidden_solution_title"><img src="../../../../lib/tpl/arctic/images/tool-source.png"/><span class="title_text">Show solution</span></div><div class="hide_text">Hide solution</div><div class="show_text">Show solution</div><div class="solution_contents hidden_solution_contents"><pre class="code">root@mjolnir:~# apt-get install thunderbird</pre>
</div></div>
<ul>
<li class="level1"><div class="li">[07]. Configurați Thunderbird pentru a se conecta la serverul de IMAP local (localhost), în contul utilizatorului <code>alice</code>. Mesajele vor fi trimise, de asemenea, folosind MTA-ul local (localhost).</div>
<ul>
<li class="level2"><div class="li">[07].a. Pentru pornirea clientului folosiți meniul <code>Applications → Internet</code>.</div>
</li>
<li class="level2"><div class="li">[07].b. În Mail Account Setup folosiți butonul Manual Setup pentru a configura contul lui alice în mod avansat</div>
<ul>
<li class="level3"><div class="li">[07].b.1. Adresa de email folosită va fi <code>alice@gsr.ro</code> iar parola va fi cea a utilizatorului alice.</div>
</li>
<li class="level3"><div class="li">[07].b.2. Server name va fi <code>gsr.ro</code></div>
</li>
<li class="level3"><div class="li">[07].b.3 Connection security: none</div>
</li>
<li class="level3"><div class="li">[07].b.4 Authentication method: Password, transmitted insecurely</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="solution"><div class="solution_title hidden_solution_title"><img src="../../../../lib/tpl/arctic/images/tool-source.png"/><span class="title_text">Show solution</span></div><div class="hide_text">Hide solution</div><div class="show_text">Show solution</div><div class="solution_contents hidden_solution_contents"><pre class="code">  *Applications -&gt; Internet -&gt; Icedove Mail/News
  *Mail Account Setup
    *Your name: Alice
    *Email address: alice@gsr.ro
    *Password: alice
  *Continue
  *Manual Setup
  *Server name -&gt; gsr.ro
  *Connection security -&gt; none
  *Authentication method -&gt; Password, transmitted insecurely</pre>
</div></div>
<ul>
<li class="level1"><div class="li">[08]. Trimiteți un e-mail de la bob către <code>alice@gsr.ro</code> și verificați că mesajul a ajuns în Thunderbird, în contul lui <code>alice</code>.</div>
</li>
</ul>
<div class="solution"><div class="solution_title hidden_solution_title"><img src="../../../../lib/tpl/arctic/images/tool-source.png"/><span class="title_text">Show solution</span></div><div class="hide_text">Hide solution</div><div class="show_text">Show solution</div><div class="solution_contents hidden_solution_contents"><pre class="code">bob@mjolnir:~$ echo &quot;Mesaj de la bob catre alice@gsr.ro&quot; | mail -s &quot;Test Thunderbird&quot; alice@gsr.ro

Thunderbird -&gt; Get Mail.</pre>
</div></div>

</div>
<!-- EDIT4 SECTION "3. Configurare Courier IMAP și Maildir (2.5p)" [9198-13591] -->
<h2 class="sectionedit5" id="configurari_avansate">4. Configurari avansate</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li">[01]. Alias-uri avansate: Configurați domeniile virtuale <code>gsr-cs.ro</code> și <code>gsr-upb.ro</code> și alias-urile:</div>
</li>
<li class="level1"><div class="li">[01].a. <code>contact@gsr-cs.ro → alice</code></div>
</li>
<li class="level1"><div class="li">[01].b. <code>info@gsr-cs.ro → bob</code></div>
</li>
<li class="level1"><div class="li">[01].c <code>sales@gsr-upb.ro → alice</code></div>
</li>
<li class="level1"><div class="li">[01].d. <code>office@gsr-upb.ro → bob</code></div>
</li>
</ul>
<div class="solution"><div class="solution_title hidden_solution_title"><img src="../../../../lib/tpl/arctic/images/tool-source.png"/><span class="title_text">Show solution</span></div><div class="hide_text">Hide solution</div><div class="show_text">Show solution</div><div class="solution_contents hidden_solution_contents"><pre class="code">root@mjolnir:~# postconf -e &#039;virtual_alias_domains = gsr-cs.ro gsr-upb.ro&#039;

root@mjolnir:~# postconf -e &#039;virtual_alias_maps = hash:/etc/postfix/virtual&#039;

root@mjolnir:~# cat /etc/postfix/virtual 
contact@gsr-cs.ro	alice
info@gsr-cs.ro		bob
sales@gsr-upb.ro	alice
office@gsr-upb.ro	bob

root@mjolnir:~# postmap /etc/postfix/virtual </pre>
</div></div>
<ul>
<li class="level1"><div class="li">[02]. Configurați căsuțe postale virtuale cu utilizatori non-unix pentru domeniul <code>gsr-rules.ro</code>.</div>
</li>
<li class="level1"><div class="li">[02].a. Directorul de bază pentru căsuțele poștare virtuale este <code>/usr/local/mail/gsr-rules.ro/</code>.</div>
</li>
<li class="level1"><div class="li">[02].b. Utilizatorul <code>dorin</code> va avea căsuța poștală, format Maildir, în directorul <code>/usr/local/mail/gsr-rules.ro/dorin/</code>.</div>
</li>
</ul>
<div class="solution"><div class="solution_title hidden_solution_title"><img src="../../../../lib/tpl/arctic/images/tool-source.png"/><span class="title_text">Show solution</span></div><div class="hide_text">Hide solution</div><div class="show_text">Show solution</div><div class="solution_contents hidden_solution_contents"><pre class="code">root@mjolnir:~# groupadd virtual

root@mjolnir:~# useradd -d /home/virtual -m -g virtual -s /bin/bash virtual

root@mjolnir:~# echo &quot;virtual:virtual&quot; | chpasswd

root@mjolnir:~# mkdir -p /usr/local/mail/gsr-rules.ro

root@mjolnir:~# chown -R virtual:virtual /usr/local/mail/

root@mjolnir:~# getent passwd virtual
virtual:x:1005:1005::/home/virtual:/bin/bash

root@mjolnir:~# postconf -e &#039;virtual_mailbox_domains = gsr-rules.ro&#039;

root@mjolnir:~# postconf -e &#039;virtual_mailbox_maps = hash:/etc/postfix/vmailbox&#039;

root@mjolnir:~# postconf -e &#039;virtual_mailbox_base = /usr/local/mail/gsr-rules.ro&#039;

root@mjolnir:~# postconf -e &#039;virtual_uid_maps = static:1005&#039;

root@mjolnir:~# postconf -e &#039;virtual_gid_maps = static:1005&#039;

root@mjolnir:~# cat /etc/postfix/vmailbox 
dorin@gsr-rules.ro	gsr-rules/dorin/

root@mjolnir:~# postmap /etc/postfix/vmailbox</pre>
</div></div>
<ul>
<li class="level1"><div class="li">[03]. Configurați suport de căsuțe poștale virtuale în Courier pentru căsuțele poștale create mai sus.</div>
</li>
</ul>
<div class="solution"><div class="solution_title hidden_solution_title"><img src="../../../../lib/tpl/arctic/images/tool-source.png"/><span class="title_text">Show solution</span></div><div class="hide_text">Hide solution</div><div class="show_text">Show solution</div><div class="solution_contents hidden_solution_contents"><pre class="code">root@mjolnir:~# cat /etc/courier/authdaemonrc | grep &quot;authmodulelist=&quot;
authmodulelist=&quot;authuserdb&quot;

root@mjolnir:~# userdb info set uid=1005 gid=1005 home=/usr/local/mail/gsr-rules.ro/dorin/ mail=/usr/local/mail/gsr-rules.ro/dorin/

root@mjolnir:~# cat /etc/courier/userdb
info	uid=1005|gid=1005|home=/usr/local/mail/gsr-rules.ro/dorin/|mail=/usr/local/mail/gsr-rules.ro/dorin/

root@mjolnir:~# userdbpw -md5 | userdb info set systempw
Password: 
Reenter password:

root@mjolnir:~# makeuserdb

root@mjolnir:~# cat /etc/courier/userdb
info	systempw=$1$6/NXTTBE$wioqqFuVEFXymHoMyVvfu.|uid=1005|mail=/usr/local/mail/gsr-rules.ro/dorin/|home=/usr/local/mail/gsr-rules.ro/dorin/|gid=1005</pre>
</div></div>



</div>
<!-- EDIT5 SECTION "4. Configurari avansate" [13592-] --></div>
</body>
</html>

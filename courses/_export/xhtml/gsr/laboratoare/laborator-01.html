    
    

<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8" />
  <title>gsr:laboratoare:laborator-01</title>
<meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="date" content="2016-10-13T20:27:02+0300"/>
<meta name="keywords" content="gsr,laboratoare,laborator-01"/>
<link rel="search" type="application/opensearchdescription+xml" href="../../../../lib/exe/opensearch.php" title="CS Open CourseWare"/>
<link rel="start" href="../../../../../courses.1.html"/>
<link rel="alternate" type="application/rss+xml" title="Recent Changes" href="../../../../feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current Namespace" href="../../../../feed.php%3Fmode=list&amp;ns=gsr:laboratoare"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="laborator-01.html"/>
<link rel="canonical" href="../../../../gsr/laboratoare/laborator-01.html"/>
<link rel="stylesheet" type="text/css" href="../../../../lib/exe/css.php%3Ft=arctic&amp;tseed=1479898000.css"/>
<script type="text/javascript">/*<![CDATA[*/var NS='gsr:laboratoare';var JSINFO = {"id":"gsr:laboratoare:laborator-01","namespace":"gsr:laboratoare","isadmin":0,"isauth":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="../../../../lib/exe/js.php%3Ftseed=1479898000"></script>
<script type="text/x-mathjax-config">/*<![CDATA[*/MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ["$","$"], ["\\(","\\)"] ],
        displayMath: [ ["$$","$$"], ["\\[","\\]"] ],
        processEscapes: true
    }
});
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
<script type="text/javascript">/*<![CDATA[*/
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
		  
/*!]]>*/</script>
<script type="text/javascript">/*<![CDATA[*/
var pageTracker = _gat._getTracker("UA-38383934-1");
pageTracker._initData();
pageTracker._trackPageview();
		  
/*!]]>*/</script>
</head>
<body>
<div class="dokuwiki export">
<!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="laborator-01.html#laborator_01introducere_si_procese">Laborator 01: Introducere și procese</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="laborator-01.html#folosire_manless_cu_cautare">01. Folosire man/less cu căutare</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="laborator-01.html#exercitii">Exerciții</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="laborator-01.html#fisiere">02. Fisiere</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="laborator-01.html#a_investigarea_ierarhiei_de_fisiere">a) Investigarea ierarhiei de fișiere</a></div>
<ul class="toc">
<li class="level4"><div class="li"><a href="laborator-01.html#exercitii1">Exerciții</a></div></li>
</ul>
</li>
<li class="level3"><div class="li"><a href="laborator-01.html#b_cai_relative_si_absolute">b) Căi relative și absolute</a></div>
<ul class="toc">
<li class="level4"><div class="li"><a href="laborator-01.html#exercitii2">Exerciții</a></div></li>
</ul>
</li>
<li class="level3"><div class="li"><a href="laborator-01.html#c_globbing_vazut_fisiere_care_corespund_unei_expresii">c) Globbing, văzut fișiere care corespund unei expresii</a></div>
<ul class="toc">
<li class="level4"><div class="li"><a href="laborator-01.html#exercitii3">Exerciții</a></div></li>
</ul>
</li>
<li class="level3"><div class="li"><a href="laborator-01.html#d_crearea_unei_ierarhii_locale">d) Crearea unei ierarhii locale</a></div></li>
<li class="level3"><div class="li"><a href="laborator-01.html#e_actualizarea_ierarhiei">e) Actualizarea ierarhiei</a></div></li>
<li class="level3"><div class="li"><a href="laborator-01.html#f_schimbat_de_permisiuni_pe_fisiere">f) Schimbat de permisiuni pe fișiere</a></div></li>
<li class="level3"><div class="li"><a href="laborator-01.html#g_folosirea_find">g) Folosirea find</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="laborator-01.html#vim_sk1llz">03. Vim Sk1llz</a></div></li>
<li class="level2"><div class="li"><a href="laborator-01.html#procese">04. Procese</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="laborator-01.html#a_afisare_procese">a) Afișare procese</a></div></li>
<li class="level3"><div class="li"><a href="laborator-01.html#b_procesele_unui_utilizator">b) Procesele unui utilizator</a></div></li>
<li class="level3"><div class="li"><a href="laborator-01.html#c_procesele_unui_terminal">c) Procesele unui terminal</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="laborator-01.html#investigarea_descriptorilor_de_fisiere">05. Investigarea descriptorilor de fișiere</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="laborator-01.html#a_lsof">a) lsof</a></div></li>
<li class="level3"><div class="li"><a href="laborator-01.html#b_investigarea_redirectarii">b) Investigarea redirectării</a></div></li>
<li class="level3"><div class="li"><a href="laborator-01.html#c_investigarea_operatorului_pipe">c) Investigarea operatorului pipe</a></div></li>
<li class="level3"><div class="li"><a href="laborator-01.html#d_netstat_si_ss">d) netstat și ss</a></div></li>
<li class="level3"><div class="li"><a href="laborator-01.html#e_netcat">e) netcat</a></div></li>
<li class="level3"><div class="li"><a href="laborator-01.html#f_simplehttpserver">f) SimpleHTTPServer</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="laborator-01.html#instalat_dezinstalat_de_pachete">06. Instalat, dezinstalat de pachete</a></div></li>
<li class="level2"><div class="li"><a href="laborator-01.html#bonusfind_avansat">Bonus: find avansat</a></div></li>
<li class="level2"><div class="li"><a href="laborator-01.html#bonusdpkg">Bonus: dpkg</a></div></li>
<li class="level2"><div class="li"><a href="laborator-01.html#bonusapt-file">Bonus: apt-file</a></div></li>
</ul></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="laborator_01introducere_si_procese">Laborator 01: Introducere și procese</h1>
<div class="level1">

<p>
<strong>Comenzi utile</strong>: ls, ls -l, cd, pwd, vi, chown, chmod, recursive, su, tar, zip, sudo, rm, touch, cp, mv, mkdir, stat, ln, ln -s, who, id, apt-get, apt-cache, man, less, cat, find
</p>

</div>
<!-- EDIT1 SECTION "Laborator 01: Introducere și procese" [19-253] -->
<h2 class="sectionedit2" id="folosire_manless_cu_cautare">01. Folosire man/less cu căutare</h2>
<div class="level2">

<p>
Pentru documentarea într-un sistem Linux folosim pagini de manual. De exemplu pentru accesarea paginii de manual a comenzii <code>ls</code> folosim comanda <code>man</code>:
</p>
<pre class="code">$ man ls</pre>

<p>
Pentru accesarea paginii de manual a comenzii <code>passwd</code> folosim comanda
</p>
<pre class="code">$ man passwd</pre>

<p>
Paginile de manual au secțiuni. Pentru a vedea care este semnificatia fiecarei sectiuni, consultati comanda 
</p>
<pre class="code">$ man man</pre>

<p>
. Astfel dacă dorim să accesăm pagina de manual a fișierului <code>/etc/passwd</code> folosim comanda
</p>
<pre class="code">$ man 5 passwd</pre>

<p>
La fel dacă dorim să accesăm pagina de manual a comenzilor <code>printf</code> și <code>write</code> folosim comenzile
</p>
<pre class="code">$ man printf
$ man write</pre>

<p>
pe când dacă dorim să accesăm paginile de manual ale apelurilor de bibliotecă <code>printf</code> și <code>write</code> folosim comenzile
</p>
<pre class="code">$ man 3 printf
$ man 2 write</pre>

<p>
O abilitate importantă este căutarea în paginile de manual pentru identificarea unor informații conceptuale sau a unor opțiuni pentru comenzi. Căutarea se face în cadrul <em>pager</em>-ului (utilitarului de afișare). Pager-ul comun pe sistemele Unix/Linux este <code>less</code>.
</p>

<p>
Pentru căutarea în paginile de manual folosim <code>/</code> (tasta <em>slash</em>) urmată de șirul de căutare și apoi tasta <code>Enter</code> pentru căutarea șirului (de fapt a expresiei regulate) în fișierul curent.
</p>
<ul>
<li class="level1"><div class="li"> Exemplu: <code>/recursive&lt;Enter&gt;</code> (<code>&lt;Enter&gt;</code> denotă apăsarea tastei <code>Enter</code>) înseamnă căutarea în fișierul afișat curent (probabil pagină de manual) a șirului <em>recursive</em>).</div>
<ul>
<li class="level2"><div class="li"> Puteți testa acest lucru în pagina de manual a comenzii <code>ls</code>.</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Exemplu: <code>/^ +-s&lt;Enter&gt;</code> înseamnă căutarea în fișierul afișat curent (probabil o pagină de manual) a șirului <code>-s</code> aflat la începutul rândului (precedat de cel puțin un spațiu).</div>
<ul>
<li class="level2"><div class="li"> Puteți testa acest lucru în pagina de manual a comenzii <code>du</code>.</div>
</li>
</ul>
</li>
</ul>

<p>
De multe ori prima potrivire (<em>match</em>) nu este ceea ce căutăm și dorim să ajungem la următoarea. Pentru aceasta folosim tasta <code>n</code> (de la <em>next</em>) pentru următoarea potrivire. Și tot așa. Dacă vrem să găsim potrivirea precedentă folosim tasta <code>N</code>.
</p>

<p>
<p><div class="noteclassic">
Dacă este nevoie să căutăm <strong>înapoi</strong> un șir sau o expresie folosim tasta <code>?</code> (semnul întrebării) în locul tastei <code>/</code>. Adică o expresie de genul <code>?access time&lt;Enter&gt;</code> va conduce la căutarea înapoi în cadrul fișierului curent a șirului <code>access time</code>.
</p>

<p>
În acest caz tasta <code>n</code> va fi folosită pentru căutarea în continuare (adică <strong>înapoi</strong>), iar tasta <code>N</code> va fi folosită pentru căutarea în sens invers (adică <strong>înainte</strong>).

</div></p>
</p>

<p>
<p><div class="noteclassic">
Aceste mecanisme de căutare (folosind <code>/</code>, <code>n</code>, <code>N</code>, <code>?</code>) sunt folosite și în editorul Vim. 

</div></p>
</p>

</div>
<!-- EDIT2 SECTION "01. Folosire man/less cu căutare" [254-3027] -->
<h3 class="sectionedit3" id="exercitii">Exerciții</h3>
<div class="level3">

<p>
<p><div class="notetip">
Pentru exercițiile de mai jos, va trebui să investigați în pagina de manual pentru a determina opțiunile necesare pentru comenzile indicate.

</div></p>
</p>

<p>
Folosiți comanda <code>ls</code> cu opțiunea <code>-l</code> și o altă opțiune (de determinat) pentru a afișa spațiul ocupat de intrările din directorul curent.
</p>

<p>
Folosiți comanda <code>du</code> cu argumentul potrivit pentru a afla spațiul ocupat de directorul <code>/etc</code>. <strong>Indicație</strong>: Căutați după opțiune de sumarizare (<em>summarize</em>).
</p>

<p>
Folosiți comanda <code>stat</code> pentru a afișa <strong>doar</strong> dimensiunea (în octeți) a fișierului <code>/etc/passwd</code>.
</p>

<p>
Folosiți comanda <code>stat</code> pentru a afișa <strong>doar</strong> numele și dimensiunea (în octeți) a fișierelor din directorul <code>/etc</code>.
</p>

<p>
Folosiți comanda <code>date</code> pentru a afișa data curentă în formatul <code>YYYY-MM-DD_HH:mm</code>.
</p>

<p>
Folosiți comanda <code>touch</code> pentru a schimba timpii de acces/modificare/schimbare ai unui fișier oarecare în <code>2010-10-31 12:13</code>.
</p>

<p>
Folosiți comanda <code>pwgen</code> pentru a genera 3 parole a câte 16 caractere care să conțină cel puțin un caracter special, cel puțin o cifră și cel puțin o literă mare.
</p>

<p>
<strong>Bonus</strong>: Folosiți o construcție de tipul <code>stat … | paste … | bc</code> pentru a calcula spațiul ocupat de fișierele cu extensia din directorul <code>/etc</code> cu extensia <code>*.conf</code>. Indicație: Urmăriți și postarea de <a href="http://stackoverflow.com/a/451204" class="urlextern" title="http://stackoverflow.com/a/451204"  rel="nofollow">aici</a>.
</p>

</div>
<!-- EDIT3 SECTION "Exerciții" [3028-4451] -->
<h2 class="sectionedit4" id="fisiere">02. Fisiere</h2>
<div class="level2">

</div>
<!-- EDIT4 SECTION "02. Fisiere" [4452-4476] -->
<h3 class="sectionedit5" id="a_investigarea_ierarhiei_de_fisiere">a) Investigarea ierarhiei de fișiere</h3>
<div class="level3">

<p>
Ierarhia de fișiere în Unix/Linux este dată de <a href="http://www.pathname.com/fhs/" class="urlextern" title="http://www.pathname.com/fhs/"  rel="nofollow">Filesystem Hierarchy Standard</a>. Fiecare director din vârful ierarhiei are un rol predeterminat. Un pachet instalat în sistemul curent, duce la actualizarea sistemului de fișiere în diferite locuri ale ierarhiei.
</p>

<p>
De exemplu, rularea comenzii
</p>
<pre class="code">$ dpkg -L pwgen</pre>

<p>
duce la afișarea componentelor din sistemul de fișiere care aparțin pachetului <code>pwgen</code>. Un pachet ajunge să completeze intrări pentru binare/executabile (în <code>/bin</code> sau, mai des, în <code>/usr/bin</code>), fișiere de configurare (în <code>/etc</code>), fișiere de documentare sau generaliste (în <code>/usr/share</code>), biblioteci (în <code>/lib</code> sau, mai des, în <code>/usr/lib</code>), fișierele de jurnalizare (în <code>/var/log</code>) și așa mai departe.
</p>

<p>
Putem afla informații despre intrări din sistemul local de fișiere folosind comenzi precum <code>ls -l</code>, <code>stat</code>, <code>file</code>.
</p>

<p>
Comanda <code>which</code> urmată de o comandă afișează calea completă a comenzii respective.
</p>

</div>

<h4 id="exercitii1">Exerciții</h4>
<div class="level4">

<p>
Identificați componentele din sistemul de fișiere care aparțin pachetului <code>grub-common</code>. Verificați ce tip de fișiere sunt și ce reprezintă.
</p>

<p>
Investigați care este editorul folosit în mod implicit de shell prin investigarea comenzii <code>editor</code>. <strong>Indicație</strong>: Porniți de la <code>which</code> și apoi folosiți <code>ls -l</code> sau <code>file</code>.
</p>

<p>
Folosiți comanda
</p>
<pre class="code">$ sudo apt-get install zoo</pre>

<p>
pentru a instala pachetul <code>zoo</code>. Investigați în ierarhia <code>/var</code> unde a fost descărcat pachetul <code>.deb</code> pentru a fi apoi instalat în sistem. <strong>Indicație</strong>: Porniți de la directorul <code>/var/lib</code>.
</p>

</div>
<!-- EDIT5 SECTION "a) Investigarea ierarhiei de fișiere" [4477-6161] -->
<h3 class="sectionedit6" id="b_cai_relative_si_absolute">b) Căi relative și absolute</h3>
<div class="level3">

<p>
Căile în sistemul de fișiere pot fi abolute (încep de la directorul rădăcină) sau pot fi relative (sunt relative la directorul curent).
</p>

<p>
Exemple de căi absolute:
</p>
<ul>
<li class="level1"><div class="li"> <code>/etc/apt/sources.lists</code></div>
</li>
<li class="level1"><div class="li"> <code>/usr/bin/pwgen</code></div>
</li>
<li class="level1"><div class="li"> <code>/boot/grub/grub.cfg</code></div>
</li>
<li class="level1"><div class="li"> <code>/var/lib/apt/</code></div>
</li>
</ul>

<p>
Exemple de căi relative:
</p>
<ul>
<li class="level1"><div class="li"> <code>repo.git/cursuri/curs-01/</code></div>
</li>
<li class="level1"><div class="li"> <code>../../projects/events/message.txt</code></div>
</li>
<li class="level1"><div class="li"> <code>./a.out</code></div>
</li>
</ul>

</div>

<h4 id="exercitii2">Exerciții</h4>
<div class="level4">

<p>
<p><div class="noteclassic">
Înainte de orice exercițiu plasați-vă în directorul <code>/tmp</code> folosind comanda
</p>
<pre class="code">$ cd /tmp</pre>

<p>

</div></p>
</p>

<p>
Folosiți o cale absolută și o cale relativă pentru a ajunge în directorul <code>/boot/grub</code>.
</p>

<p>
Folosiți o cale relativă și o cale absolută pentru a afișa conținutul directorului <code>Downloads/</code> din directorul home al utilizatorului <code>student</code>.
</p>

<p>
Folosiți o cale relativă și o cale absolută pentru a afișa ultimele 10 linii din fișierul de jurnalizare a sistemului (<code>syslog</code>). <strong>Indicație</strong>: Fișierul se găsește în <code>/var/log</code> iar comanda pentru afișarea ultimelor 10 linii este <code>tail</code>.
</p>

</div>
<!-- EDIT6 SECTION "b) Căi relative și absolute" [6162-7249] -->
<h3 class="sectionedit7" id="c_globbing_vazut_fisiere_care_corespund_unei_expresii">c) Globbing, văzut fișiere care corespund unei expresii</h3>
<div class="level3">

<p>
Cu ajutorul globbing-ului putem să vedem fișiere care corespund unui șir. De principiu cea mai uzuală folosire este pentru sistemul de fișiere și acolo caracterul cel mai folosit este <code>*</code> (steluță, <em>star</em>) numit și wildcard.
</p>

</div>

<h4 id="exercitii3">Exerciții</h4>
<div class="level4">

<p>
Folosiți un glob pentru a afișa toate fișierele cu extensia <code>.gz</code> din directorul <code>/var/log/</code>.
</p>

<p>
Folosiți un glob pentru a afișa toate fișierele care se încheie în forma <code>.XY.gz</code> din directorul <code>/var/log/</code>, unde <code>X</code> și <code>Y</code> sunt numere. (este osibil să nu fie nici unul)
</p>

<p>
Folosiți un glob pentru comanda <code>dpkg -l …</code> pentru a afișa pachetele din sistem care conțin șirul <code>jdk</code>.
</p>

<p>
Afișați toate fișierele cu extensia <code>.conf</code> din toate primele subdirectoare din <code>/etc</code> (adică din primul nivel de subdirectoare: <code>init/</code>, <code>systemd/</code>, <code>security/</code>.
</p>

</div>
<!-- EDIT7 SECTION "c) Globbing, văzut fișiere care corespund unei expresii" [7250-8162] -->
<h3 class="sectionedit8" id="d_crearea_unei_ierarhii_locale">d) Crearea unei ierarhii locale</h3>
<div class="level3">

<p>
Creați ierarhia de mai jos într-un director cu numele <code>music/</code>.
</p>
<pre class="code">.
|-- ac_dc/
|   |-- angus
|   |-- bon
|   |-- brian
|   |-- chris
|   |-- cliff
|   |-- dave
|   |-- george
|   |-- malcom
|   |-- mark
|   `-- phil
|-- cargo
|-- hammerfall/
|   |-- anders
|   |-- jesper
|   |-- joacim
|   |-- magnus
|   |-- oscar
|   |-- pontus
|   `-- stefan
|-- iris
|-- nightwish
|-- phoenix
`-- slayer</pre>

</div>
<!-- EDIT8 SECTION "d) Crearea unei ierarhii locale" [8163-8616] -->
<h3 class="sectionedit9" id="e_actualizarea_ierarhiei">e) Actualizarea ierarhiei</h3>
<div class="level3">

<p>
Actualizați ierarhia de mai sus astfel:
</p>
<ul>
<li class="level1"><div class="li"> Creați un subdirector <code>rock/</code> și mutați intrările deja existente în acest director.</div>
</li>
<li class="level1"><div class="li"> Creați un subdirector numit <code>manele/</code> și creați câteva intrări în director după preferințele personale.</div>
</li>
<li class="level1"><div class="li"> Creați un link simbolic numit <code>preferate</code> care să pointeze la directorul <code>rock/</code> sau <code>manele/</code> după preferințele personale.</div>
</li>
<li class="level1"><div class="li"> Creați un link simbolic numit <code>preferate-dupa-alcool</code> care să pointeze la directorul <code>rock/</code> sau <code>manele/</code> după preferințele personale după un consum suficient de mare.</div>
</li>
<li class="level1"><div class="li"> Ștergeți fișierele <code>chris</code>, <code>george</code>, <code>cargo</code> și <code>iris</code>.</div>
</li>
<li class="level1"><div class="li"> Ștergeți întreg directorul <code>hammerfall</code>.</div>
</li>
<li class="level1"><div class="li"> Schimbați numele directorului <code>ac_dc</code> în <code>AC DC</code> (numele conține spațiu).</div>
</li>
</ul>

</div>
<!-- EDIT9 SECTION "e) Actualizarea ierarhiei" [8617-9439] -->
<h3 class="sectionedit10" id="f_schimbat_de_permisiuni_pe_fisiere">f) Schimbat de permisiuni pe fișiere</h3>
<div class="level3">

<p>
Adăugați în sistem utilizatorii <code>ana</code>, <code>bogdan</code> și grupul <code>mayhem</code> și realizați următorele actualizări în ierarhia de mai sus:
</p>
<ul>
<li class="level1"><div class="li"> Fișierul <code>phoenix</code> să fie deținut de <code>ana</code>.</div>
</li>
<li class="level1"><div class="li"> Fișierul <code>slayer</code> să fie deținut de <code>bogdan</code> si grupul <code>mayhem</code>.</div>
</li>
<li class="level1"><div class="li"> Directorul <code>AC DC</code> și intrările sale (recursiv) să fie deținut de <code>ana</code> și grupul <code>mayhem</code>.</div>
</li>
<li class="level1"><div class="li"> Permisiunile pe fișierul <code>mark</code> să permită și lui <code>bogdan</code> citire (fără a modifica ownership).</div>
</li>
<li class="level1"><div class="li"> Permisiunile pe fișierul <code>dave</code> sa permită lui <code>bogdan</code> citire și scriere (fără a modifica ownership).</div>
</li>
<li class="level1"><div class="li"> Fișierul <code>bon</code> să aiba permisiuni de execuție pentru toți utilizatorii.</div>
</li>
</ul>

</div>
<!-- EDIT10 SECTION "f) Schimbat de permisiuni pe fișiere" [9440-10178] -->
<h3 class="sectionedit11" id="g_folosirea_find">g) Folosirea find</h3>
<div class="level3">

<p>
Folosiți comanda <code>find</code> pentru a parcurge ierarhia creată mai sus.
</p>

<p>
Folosiți comanda <code>find</code> pentru a afișa doar fișierele din ierarhia de mai sus. Folosiți comanda <code>find</code> pentru a afișa doar directoarele din ierarhia de mai sus.
</p>

<p>
Folosiți comanda <code>find</code> pe ierarhia de mai sus pentru a afișa doar intrările care încep cu litera <code>a</code>.
</p>

</div>
<!-- EDIT11 SECTION "g) Folosirea find" [10179-10795] -->
<h2 class="sectionedit12" id="vim_sk1llz">03. Vim Sk1llz</h2>
<div class="level2">

<p>
<p><div class="noteimportant">
Dacă exercițiile de mai jos vă iau mai mult timp decât este indicat, să faceți o trecere prin tutorialul de Vim: adică să porniți comanda <code>vimtutor</code>.
</p>

<p>
Puteți să ignorați scrierea cu diacritice.

</div></p>
</p>

<p>
În <strong>30 de secunde</strong>, porniți Vim pentru a crea/edita fișierul <code>poveste.txt</code>, scrieți textul &quot;A fost o dată ca niciodată că dacă nu ar fi nu s-ar povesti.&quot; și salvați textul și părăsiți editorul.
</p>

<p>
În <strong>120 de secunde</strong>, porniți Vim scrieți textul de mai sus în fișierul <code>capitolul-01.txt</code> și apoi tot în Vim (fără a părăsi editorul scrieți textul &quot;Va urma&quot; în fișierul <code>capitolul-02.txt</code> și textul &quot;Sfârșit&quot; în fișierul <code>capitolul-03.txt</code>.
</p>

<p>
Descărcați fișierul de mai jos (<code>mesaj.txt</code>) și, în <strong>180 de secunde</strong> editați-l în Vim pentru a obține forma de dedesubt (<code>mesaj-modificat.txt</code>). Analizați ce trebuie să faceți înainte de a contoriza editarea.
</p>
<dl class="file">
<dt><a href="../../../code/gsr/laboratoare/laborator-01%3Fcodeblock=10" title="Download Snippet" class="mediafile mf_txt">mesaj.txt</a></dt>
<dd><pre class="code file txt">====== Împărțire semigrupe ======
&nbsp;
Pentru împărțirea orelor de laborator de GSR, vom deschide două thread-uri pe [[http://cs.curs.pub.ro/2015/mod/forum/view.php?id=654|forumul de discuții generale]]. Pe fiecare thread vă veți putea înscrie la unul dintre cele două intervale de laborator:
  * joi, 16:00-18:00, sala EG106
  * joi, 20:00-22:00, sala EG106
&nbsp;
Vom deschide thread-urile miercuri, 14 octombrie 2015, la ora 12:30 (la prânz).
&nbsp;
Limita de locuri pe laborator este de 18 persoane. Va fi &quot;first post, first served&quot;.</pre>
</dd></dl>
<dl class="file">
<dt><a href="../../../code/gsr/laboratoare/laborator-01%3Fcodeblock=11" title="Download Snippet" class="mediafile mf_txt">mesaj-modificat.txt</a></dt>
<dd><pre class="code file txt">--- Împărțire semigrupe
&nbsp;
Pentru împărțirea orelor de laborator de GSR, vom deschide două fire de discuție pe forumul de discuții generale. Pe fiecare thread vă veți putea înscrie la unul dintre cele două intervale de laborator:
  * vineri, 16-12, sala EG306
  * vineri, 20-22, sala EG306
&nbsp;
Vom deschide thread-urile miercuri, 14 noiembrie 2015, la ora 19:30 (pe seară).
&nbsp;
Limita de locuri pe laborator este de 12 persoane. Va fi &quot;primul venit, primul servit&quot;.</pre>
</dd></dl>

<p>
În <strong>30 de secunde</strong> copiați codul de <a href="https://github.com/razvand/snippets/blob/master/mmap/dual-mapping.c" class="urlextern" title="https://github.com/razvand/snippets/blob/master/mmap/dual-mapping.c"  rel="nofollow">aici</a> în Vim într-un fișier numit <code>dual-mapping.c</code> și asigurând indentarea codului.
</p>

</div>
<!-- EDIT12 SECTION "03. Vim Sk1llz" [10796-13059] -->
<h2 class="sectionedit13" id="procese">04. Procese</h2>
<div class="level2">

</div>
<!-- EDIT13 SECTION "04. Procese" [13060-13084] -->
<h3 class="sectionedit14" id="a_afisare_procese">a) Afișare procese</h3>
<div class="level3">

<p>
Dorim să afișăm anumite procese într-o anumită ordine.
</p>

<p>
Folosiți <code>ps</code> cu opțiunea corectă pentru a afișa procesele care aparțin utilizatorului <code>student</code>. Căutați în pagina de manual după șirul <em>user</em>.
</p>

<p>
Pentru procesele de mai sus afișați PID-ul, comanda completă (cale completă cu parametri), timpul de rulare pe procesor, memoria RAM consumată (RSS – <em>resident set size</em>). Pentru a selecta doar anumite atribute ale unui proces folosiți comanda <code>ps</code> cu parametrul <code>-o</code> urmat de opțiunile specifice; urmăriți și pagina de manual.
</p>

<p>
Sortați procesele de mai sus în ordinea inversă a memoriei RAM consumate (RSS – <em>resident set size</em>). Adică cele mai consumatoare de memorie procese la început.
</p>

<p>
Din procesele sortate rețineți doar primele 10 intrări. Să afișați și antetul oferit de <code>ps</code>.
</p>

</div>
<!-- EDIT14 SECTION "a) Afișare procese" [13085-13958] -->
<h3 class="sectionedit15" id="b_procesele_unui_utilizator">b) Procesele unui utilizator</h3>
<div class="level3">

<p>
Dorim să lucrăm cu grupuri de procese care țin de un utilizator.
</p>

<p>
Pe un tab nou de terminal adăugăm utilizatorul <code>ana</code> folosind comenzile
</p>
<pre class="code">$ sudo su
# adduser ana
[...]
# exit            # sau puteti folosi combinatia de taste Ctrl+d
$</pre>

<p>
În acel tab nou ne autentificăm ca utilizatorul <code>ana</code> folosind comanda
</p>
<pre class="code">$ su - ana</pre>

<p>
În cel nou tab, din contul utilizatorului <code>ana</code>, porniți în background mai multe procese: <code>sleep</code>, <code>emacs</code>, <code>gedit</code> etc.
</p>

<p>
Din primul tab, folosiți, ca <code>root</code>, <code>pkill</code> pentru o încheia execuția proceselor utilizatorului <code>ana</code>; adică rulați <code>sudo pkill ...</code> (cu ce opțiuni sunt utile). Este posibil să fie necesar să folosiți semnalul <code>SIGKILL</code> ca să fie garantată încheierea execuției.
</p>

<p>
<p><div class="notetip">
În locul comenzii <code>pkill</code> puteți folosi comanda <code>killall</code> cu opțiunile potrivite.

</div></p>
</p>

</div>
<!-- EDIT15 SECTION "b) Procesele unui utilizator" [13959-14889] -->
<h3 class="sectionedit16" id="c_procesele_unui_terminal">c) Procesele unui terminal</h3>
<div class="level3">

<p>
Pe un tab nou de terminal porniți în background procese ca utilizatorul <code>root</code>, <code>student</code> și <code>ana</code>.
</p>

<p>
În acel tab aflăm care este identificatorul terminalului curent folosind comanda
</p>
<pre class="code">$ tty</pre>

<p>
Din primul tab, folosiți, ca <code>root</code>, <code>pkill</code> pentru o încheia execuția proceselor de pe al doilea terminal; adică rulați <code>sudo pkill ...</code> (cu ce opțiuni sunt utile). Este posibil să fie necesar să folosiți semnalul <code>SIGKILL</code> ca să fie garantată încheierea execuției.
</p>

</div>
<!-- EDIT16 SECTION "c) Procesele unui terminal" [14890-15434] -->
<h2 class="sectionedit17" id="investigarea_descriptorilor_de_fisiere">05. Investigarea descriptorilor de fișiere</h2>
<div class="level2">

</div>
<!-- EDIT17 SECTION "05. Investigarea descriptorilor de fișiere" [15435-15491] -->
<h3 class="sectionedit18" id="a_lsof">a) lsof</h3>
<div class="level3">

<p>
Ne interesează pentru un proces dat care sunt fișierele deschise de un proces, sau, de fapt, descriptorii de fișier deschiși de un proces. De exemplu, dacă dorim să identificăm descriptorii de fișier deschiși de shell-ul curent folosim comanda
</p>
<pre class="code">lsof -p $$</pre>

<p>
În fișierele deschise vom putea vedea descriptorii de fișier standard (<code>0</code>, <code>1</code> sau <code>2</code>). Observăm că acești descriptori referă un dispozitiv de tip terminal, de forma <code>/dev/pts/0</code> pentru că astfel interacționează procesul cu utilizatorul.
</p>

<p>
Dacă dorim să vizualizăm descriptorii deschiși de un proces daemon, de exemplu <code>sshd</code>
</p>
<pre class="code">sudo lsof -p $(pidof sshd)</pre>

<p>
Observăm și descriptorii de fișier standard și sockeții TCP deschiși (2 sockeți care ascultă pe portul 22 atât pe IPv4 cât și pe IPv6).
</p>

<p>
Folosiți <code>lsof</code> pentru a investiga și descriptorii deschiși de procesul <code>init</code>.
</p>

</div>
<!-- EDIT18 SECTION "a) lsof" [15492-16418] -->
<h3 class="sectionedit19" id="b_investigarea_redirectarii">b) Investigarea redirectării</h3>
<div class="level3">

<p>
Putem folosi <code>lsof</code> pentru a verifica modul în care redirectarea afectează descriptorii unui proces.
</p>

<p>
Într-un tab de terminal porniți un proces <code>sleep</code> folosind comanda
</p>
<pre class="code">sleep 100</pre>

<p>
În alt tab, pentru a investiga descriptorii procesului <code>sleep</code> folosim comanda
</p>
<pre class="code">lsof -p $(pidof sleep)</pre>

<p>
Observăm că descriptorii standard referă terminalul în care a fost rulată comanda, moșteniți de la terminalul din shell-ul folosit.
</p>

<p>
Acum să invesigăm procesul <code>sleep</code> cu redictări în diverse fișiere. Folosiți comanda
</p>
<pre class="code">sleep 100 &lt; /dev/zero &gt; /dev/null 2&gt; error.txt</pre>

<p>
Folosim comanda <code>lsof</code> anterioară pentru a investiga descriptorii procesului <code>sleep</code>. Putem observa unde pointează descriptorii standard de fișier pentru procesul pornit.
</p>

</div>
<!-- EDIT19 SECTION "b) Investigarea redirectării" [16419-17254] -->
<h3 class="sectionedit20" id="c_investigarea_operatorului_pipe">c) Investigarea operatorului pipe</h3>
<div class="level3">

<p>
Folosiți <code>lsof</code> pentru a investiga descriptorii deschiși de cele trei procese <code>sleep</code> din cadrul comenzii
</p>
<pre class="code">sleep 100 | sleep 120 | sleep 140</pre>

<p>
Urmăriți ce înseamnă operatorul pipe (<code>|</code>) si ce impact are asupra descriptorilor de fișier ai unui proces.
</p>

</div>
<!-- EDIT20 SECTION "c) Investigarea operatorului pipe" [17255-17576] -->
<h3 class="sectionedit21" id="d_netstat_si_ss">d) netstat și ss</h3>
<div class="level3">

<p>
Pentru a determina sockeții deschiși în cadrul sistemului folosim comanda <code>netstat</code>. Modurile uzuale de lucru ale comenzii sunt:
</p>
<pre class="code">netstat -tlpn
netstat -tpn
netstat -ulpn
netstat -lpn</pre>

<p>
Aceleași opțiuni sunt folosite și pentru comanda <code>ss</code>.
</p>

<p>
Urmăriți și din output-ul comenzilor și din pagina de manual ce efect au fiecare dintre comenzile de mai sus.
</p>

</div>
<!-- EDIT21 SECTION "d) netstat și ss" [17577-17984] -->
<h3 class="sectionedit22" id="e_netcat">e) netcat</h3>
<div class="level3">

<p>
Dacă dorim deschiderea unui server/serviciu pe sistemul curent putem folosi comanda
</p>
<pre class="code">netcat -l -p 12345</pre>

<p>
Comanda de mai sus va deschide un server TCP pe portul <code>12345</code>.
</p>

<p>
Pentru a deschide o conexiune către acest serviciu folosim comanda
</p>
<pre class="code">netcat &lt;hostname&gt; 12345</pre>

<p>
unde <code>&lt;hostname&gt;</code> este numele stației sau adresa IP a stației. Pentru o conexiune pe stația locală folosiți comanda
</p>
<pre class="code">netcat localhost 12345</pre>

<p>
Investigați folosind comanda <code>netstat</code> sau comanda <code>s</code> conexiunea astfel deschisă.
</p>

</div>
<!-- EDIT22 SECTION "e) netcat" [17985-18547] -->
<h3 class="sectionedit23" id="f_simplehttpserver">f) SimpleHTTPServer</h3>
<div class="level3">

<p>
Pachetul <code>python</code> vine cu un server web simplu care poate fi pornit pentru a servi fisiere din directorul curent. Pentru pornirea sa folositi comanda
</p>
<pre class="code">python -m SimpleHTTPServer</pre>

<p>
Investigati folosind <code>netstat</code> si <code>s</code> portul pe care asculta conexiuni (afisat si la pornirea sa) si pointati browser-ul la <abbr title="Uniform Resource Locator">URL</abbr>-ul <a href="http://localhost:8000/" class="urlextern" title="http://localhost:8000/"  rel="nofollow">http://localhost:8000/</a> pentru a putea urmari fisierele servite. Un coleg poate sa se conecteze la acest server web folosind in loc de <code>localhost</code> adresa IP a statiei voastre.
</p>

</div>
<!-- EDIT23 SECTION "f) SimpleHTTPServer" [18548-20475] -->
<h2 class="sectionedit24" id="instalat_dezinstalat_de_pachete">06. Instalat, dezinstalat de pachete</h2>
<div class="level2">

<p>
Dezinstalați pachetul <code>zoo</code> instalat anterior. Folosiți opțiunea de <code>purge</code> pentru a șterge și fișierele de configurare.
</p>

<p>
Folosiți comanda <code>dpkg -l *</code> pentru a identifica 2 pachete neinstalate și instalați-le.
</p>

<p>
Folosiți comanda <code>dpkg -L ...</code> pentru a afișa conținutul celor 2 pachete proaspăt instalate.
</p>

</div>
<!-- EDIT24 SECTION "06. Instalat, dezinstalat de pachete" [20476-20855] -->
<h2 class="sectionedit25" id="bonusfind_avansat">Bonus: find avansat</h2>
<div class="level2">

<p>
Folosiți <code>find</code> pentru a identifica fișierele cu drept de execuție care <strong>nu</strong> au extensia <code>.sh</code> aflate în <strong>subdirectoarele</strong> directorului din arhiva de <a href="../../../../_media/gsr/laboratoare/1-find-exec.zip" class="media mediafile mf_zip" title="gsr:laboratoare:1-find-exec.zip (4.7 KB)">aici</a>.
</p>

<p>
Pași ajutățori:
</p>
<ol>
<li class="level1"><div class="li"> Folosiți <code>find</code> pentru a afișa ierarhia din subdirectoare. (Hint: <code>-mindepth</code>)</div>
</li>
<li class="level1"><div class="li"> Folosiți <code>find</code> pentru a afișa fișierele din ierarhia din subdirectoare cu extensia <code>.sh</code>. (Hint: <code>-name</code>, <code>-type</code>)</div>
</li>
<li class="level1"><div class="li"> Folosiți <code>find</code> pentru a afișa fișierele din ierarhia din subdirectoare care <strong>nu</strong> au extensia <code>.sh</code>. (Hint: <code>OPERATORS</code> în pagina de manual)</div>
</li>
<li class="level1"><div class="li"> Folosiți <code>find</code> pentru a afișa fișierele din ierarhia din subdirectoare cu drept de execuție care <strong>nu</strong> au extensia <code>.sh</code>. (Hint: <code>-perm</code>)</div>
</li>
</ol>

</div>
<!-- EDIT25 SECTION "Bonus: find avansat" [20856-21645] -->
<h2 class="sectionedit26" id="bonusdpkg">Bonus: dpkg</h2>
<div class="level2">

<p>
Afișați din ce pachet face parte utilitarul <code>printf</code>. Aflați întâi calea către utilitar folosind comanda <code>which</code>.
</p>

<p>
Ce pachet este folosit pentru a putea vizualiza paginile de manual, adică ce pachet conține fișierul <code>/usr/lib/man-db/libman.so</code>.
</p>

</div>
<!-- EDIT26 SECTION "Bonus: dpkg" [21646-21931] -->
<h2 class="sectionedit27" id="bonusapt-file">Bonus: apt-file</h2>
<div class="level2">

<p>
Folosiți <code>apt-file</code> pentru a afla ce pachete conțin biblioteca standard C, adică fișierul <code>libc.so</code>.
</p>

<p>
Folosiți <code>apt-file</code> pentru a afla pachetul/pachetele care conțin header-ul <code>gdk.h</code>.
</p>

</div>
<!-- EDIT27 SECTION "Bonus: apt-file" [21932-] --></div>
</body>
</html>

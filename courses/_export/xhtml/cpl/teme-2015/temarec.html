    
    

<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8" />
  <title>cpl:teme-2015:temarec</title>
<meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="date" content="2016-10-04T07:18:26+0300"/>
<meta name="keywords" content="cpl,teme-2015,temarec"/>
<link rel="search" type="application/opensearchdescription+xml" href="../../../../lib/exe/opensearch.php" title="CS Open CourseWare"/>
<link rel="start" href="../../../../../courses.1.html"/>
<link rel="alternate" type="application/rss+xml" title="Recent Changes" href="../../../../feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current Namespace" href="../../../../feed.php%3Fmode=list&amp;ns=cpl:teme-2015"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="temarec.html"/>
<link rel="canonical" href="../../../../cpl/teme-2015/temarec.html"/>
<link rel="stylesheet" type="text/css" href="../../../../lib/exe/css.php%3Ft=arctic&amp;tseed=1479898000.css"/>
<script type="text/javascript">/*<![CDATA[*/var NS='cpl:teme-2015';var JSINFO = {"id":"cpl:teme-2015:temarec","namespace":"cpl:teme-2015","isadmin":0,"isauth":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="../../../../lib/exe/js.php%3Ftseed=1479898000"></script>
<script type="text/x-mathjax-config">/*<![CDATA[*/MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ["$","$"], ["\\(","\\)"] ],
        displayMath: [ ["$$","$$"], ["\\[","\\]"] ],
        processEscapes: true
    }
});
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
<script type="text/javascript">/*<![CDATA[*/
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
		  
/*!]]>*/</script>
<script type="text/javascript">/*<![CDATA[*/
var pageTracker = _gat._getTracker("UA-38383934-1");
pageTracker._initData();
pageTracker._trackPageview();
		  
/*!]]>*/</script>
</head>
<body>
<div class="dokuwiki export">
<!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="temarec.html#tema_recuperare">Tema recuperare</a></div>
<ul class="toc">
<li class="clear">
<ul class="toc">
<li class="clear">
<ul class="toc">
<li class="level4"><div class="li"><a href="temarec.html#hello_world">Hello World</a></div></li>
<li class="level4"><div class="li"><a href="temarec.html#ascii_art">ASCII Art</a></div></li>
<li class="level4"><div class="li"><a href="temarec.html#average">Average</a></div></li>
<li class="level4"><div class="li"><a href="temarec.html#surface">Surface</a></div></li>
<li class="level4"><div class="li"><a href="temarec.html#array_average">Array Average</a></div></li>
<li class="level4"><div class="li"><a href="temarec.html#quick_sort">Quick Sort</a></div></li>
<li class="level4"><div class="li"><a href="temarec.html#resurse">Resurse</a></div></li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="tema_recuperare">Tema recuperare</h1>
<div class="level1">

</div>

<h5 id="enuntul_pe_scurt">Enuntul pe scurt</h5>
<div class="level5">

<p>
Va trebui sa realizati, folosind Bison si LLVM IR Builder, interpretarea si translatarea unui program din limbajul SQ2 descris mai jos, intr-o reprezentare intermediara în limbaj de asamblare <a href="http://llvm.org/docs/LangRef.html" class="urlextern" title="http://llvm.org/docs/LangRef.html"  rel="nofollow">LLVM IR</a>. Limbajul SQ2 este un limbaj procedural foarte simplu. 
</p>

</div>

<h5 id="informatii_organizatorice">Informatii organizatorice</h5>
<div class="level5">

<p>
 <strong>Punctare</strong>:
</p>
<ul>
<li class="level1"><div class="li"> Se vor acorda <strong>100 de puncte</strong> pentru o tema care interpreteaza corect exemplele din descrierea limbajului.</div>
</li>
<li class="level1"><div class="li"> Se vor acorda <strong>100 de puncte</strong> pentru o tema care genereaza cod corect LLVM IR pentru exemplele din descrierea limbajului.</div>
</li>
</ul>

<p>
Implementarea trebuie sa fie suficient de generica pentru a putea rula fara probleme si pe alte teste similare.
</p>

<p>
Se vor puncta analiza sintactica si semantica, afisarea erorilor, facilitatile de limbaj implementate, descrierea din README, si modul in care a fost realizat programul.
</p>

</div>

<h5 id="interpretare_si_translatare">Interpretare si translatare</h5>
<div class="level5">

<p>
Programul vostru se va numi sq2c, va citi un fisier sursa SQ2 al carui nume se va trimite pe linia de comanda, si va efectua analiza lexicala, sintactica si semantica. 
</p>

<p>
Daca pe linia de comanda exista un singur parametru, aplicatia va rula programul in modul interpretor.
</p>

<p>
Daca pe linia de comanda exista doi parametri, aplicatia va genera un fisier LLVM IR ce contine codul translatat.
</p>

<p>
In cazul in care programul este eronat, compilatorul trebuie sa emita un mesaj de eroare relevant. Pentru erorile sintactice, mesajul implicit oferit de Bison este suficient. Nu este necesara revenirea din eroare si continuarea compilarii. Compilatorul nu trebuie sa se blocheze sau sa produca un crash, in nicio circumstanta. 
</p>

</div>

<h5 id="limbajul_sq2">Limbajul SQ2</h5>
<div class="level5">

</div>

<h4 id="hello_world">Hello World</h4>
<div class="level4">

<p>
Cel mai simplu program SQ2, ce tipareste un sir de caractere pe standard output, contine:
*    Functia start
*    O constanta tip sir de caractere
*    Un apel catre functia predefinita print
</p>

<p>
Executia programului incepe cu functia <strong>start</strong>, care nu are parametri sau valoare intoarsa.
</p>

<p>
<strong>print</strong> este o functie predefinita care primeste un argument de tip sir de caractere, si il afiseaza.
</p>

<p>
Limbajul nu accepta variabile de tip siruri de caractere. Singurul loc in care pot aparea sirurile este argumentul functiei <strong>print</strong>;
</p>

<p>
Spatiile, taburile, si caracterele sfarsit de linie nu sunt semnificative. Comentariile incep cu caracterul # si continua pana la sfarsitul liniei.
</p>

<p>
Instructiunile sunt terminate cu caracterul ;
</p>

<p>
Cuvant cheie: <strong>end</strong> Functii predefinite: <strong>start</strong>, <strong>print</strong>
</p>
<dl class="file">
<dt><a href="../../../code/cpl/teme-2015/temarec%3Fcodeblock=0" title="Download Snippet" class="mediafile mf_sq2">hello.sq2</a></dt>
<dd><pre class="code file c">start<span class="sy0">:</span>
   <span class="br0">&#91;</span>print <span class="st0">&quot;Hello world!<span class="es1">\n</span>&quot;</span><span class="br0">&#93;</span><span class="sy0">;</span>
end<span class="sy0">;</span></pre>
</dd></dl>

</div>

<h4 id="ascii_art">ASCII Art</h4>
<div class="level4">

<p>
Limbajul accepta constante de tip siruri de caractere pot contine caractere escape: \&quot;   \\   \n  .
Orice altceva reprezinta caracterele in sine.
</p>

<p>
Mai jos: un program ce tipareste “<abbr title="American Standard Code for Information Interchange">ASCII</abbr> art”. 
</p>
<dl class="file">
<dt><a href="../../../code/cpl/teme-2015/temarec%3Fcodeblock=1" title="Download Snippet" class="mediafile mf_sq2">asciiart.sq2</a></dt>
<dd><pre class="code file c"><span class="co2">#   _</span>
<span class="co2"># &quot;/ \&quot;</span>
<span class="co2"># &quot;\_/&quot;</span>
start<span class="sy0">:</span>
   <span class="br0">&#91;</span>print <span class="st0">&quot;  _<span class="es1">\n</span><span class="es1">\&quot;</span>/ <span class="es1">\\</span><span class="es1">\&quot;</span><span class="es1">\n</span><span class="es1">\&quot;</span><span class="es1">\\</span>_/<span class="es1">\&quot;</span><span class="es1">\n</span>&quot;</span><span class="br0">&#93;</span><span class="sy0">;</span>
end<span class="sy0">;</span></pre>
</dd></dl>

</div>

<h4 id="average">Average</h4>
<div class="level4">

<p>
Un alt tip al limbajului este <strong>number</strong> - intregi cu semn pe 32 de biti. Pot exista constante pozitive si negative de acest tip: (de ex. -20 , 0 , 403 ). O functie poate avea variabile locale, ce sunt definite in sectiunea local.
</p>

<p>
Variabilelor locale li se pot atribui valori folosind instructiuni de atribuire: variabila = expresie. Expresiile sunt numerice, si pot contine operatori aritmetici binari ( + - * / ), minus unar, si paranteze. Expresiile pot contine apeluri de functii.
</p>

<p>
Functiile pot avea parametri si intoarce valori. <strong>read</strong> este o functie predefinita ce citeste o linie de la intrarea standard, o converteste la un numar intreg, si intoarce acel numar. <strong>write</strong> este o functie predefinita cu un singur parametru de tip number, pe care il tipareste pe iesirea standard.
</p>

<p>
Cuvinte cheie: <strong>local</strong>, <strong>number</strong> Functii predefinite: <strong>read</strong>, <strong>write</strong>
</p>

<p>
Functiile din biblioteca standard trebuie sa fie implementate de voi. Arhiva de pornire contine o astfel de implementare functionala, bazata pe biblioteca standard C (stdio.h).
</p>
<dl class="file">
<dt><a href="../../../code/cpl/teme-2015/temarec%3Fcodeblock=2" title="Download Snippet" class="mediafile mf_sq2">numbers.sq2</a></dt>
<dd><pre class="code file c">start<span class="sy0">:</span>
   local
       number r1<span class="sy0">;</span>
       number r2<span class="sy0">;</span>
       number r3<span class="sy0">;</span>   
   end<span class="sy0">;</span>
   <span class="br0">&#91;</span>print <span class="st0">&quot;&gt;&quot;</span><span class="br0">&#93;</span><span class="sy0">;</span> r1 <span class="sy0">=</span> <span class="br0">&#91;</span> read <span class="br0">&#93;</span><span class="sy0">;</span>
   <span class="br0">&#91;</span>print <span class="st0">&quot;&gt;&quot;</span><span class="br0">&#93;</span><span class="sy0">;</span> r2 <span class="sy0">=</span> <span class="br0">&#91;</span> read <span class="br0">&#93;</span><span class="sy0">;</span>
   <span class="br0">&#91;</span>print <span class="st0">&quot;&gt;&quot;</span><span class="br0">&#93;</span><span class="sy0">;</span> r3 <span class="sy0">=</span> <span class="br0">&#91;</span> read <span class="br0">&#93;</span><span class="sy0">;</span>
   <span class="br0">&#91;</span>print <span class="st0">&quot;Average = &quot;</span><span class="br0">&#93;</span><span class="sy0">;</span>
   <span class="br0">&#91;</span>write <span class="sy0">-</span><span class="br0">&#40;</span>r1 <span class="sy0">+</span> r2 <span class="sy0">+</span> r3<span class="br0">&#41;</span> <span class="sy0">/</span> <span class="nu0">3</span><span class="br0">&#93;</span><span class="sy0">;</span>
   <span class="br0">&#91;</span>print <span class="st0">&quot;<span class="es1">\n</span>&quot;</span><span class="br0">&#93;</span><span class="sy0">;</span>
end<span class="sy0">;</span></pre>
</dd></dl>

</div>

<h4 id="surface">Surface</h4>
<div class="level4">

<p>
Se pot defini functii de catre utilizator, in afara de <strong>start</strong>. Functiile pot avea parametri si intoarce valori. Se pot apela functii care sunt definite oriunde in fisier, chiar si dupa locul apelului. Argumentele de tip <strong>number</strong> sunt transmise prin valoare - schimbarile unui argument nu ii afecteaza valoarea in functia apelanta.
</p>

<p>
<strong>return</strong> este o structura de control care indica sfarsitul executiei unei functii. Daca functia trebuie sa intoarca o valoare, atunci <strong>return</strong> trebuie sa aiba un parametru.
</p>

<p>
Cuvinte cheie: <strong>return</strong>
</p>
<dl class="file">
<dt><a href="../../../code/cpl/teme-2015/temarec%3Fcodeblock=3" title="Download Snippet" class="mediafile mf_sq2">functions.sq2</a></dt>
<dd><pre class="code file c">start<span class="sy0">:</span>
   local
       number r<span class="sy0">;</span>   
   end<span class="sy0">;</span>
   <span class="br0">&#91;</span>print <span class="st0">&quot;Radius? &quot;</span><span class="br0">&#93;</span><span class="sy0">;</span>
   r <span class="sy0">=</span> <span class="br0">&#91;</span> read <span class="br0">&#93;</span><span class="sy0">;</span>
   <span class="br0">&#91;</span>print <span class="st0">&quot;Circle Surface = &quot;</span><span class="br0">&#93;</span><span class="sy0">;</span>
   <span class="br0">&#91;</span>write <span class="br0">&#91;</span> surf r <span class="br0">&#93;</span><span class="br0">&#93;</span><span class="sy0">;</span>
   <span class="br0">&#91;</span>print <span class="st0">&quot;<span class="es1">\n</span>&quot;</span><span class="br0">&#93;</span><span class="sy0">;</span>
end<span class="sy0">;</span>
&nbsp;
pi100 <span class="sy0">-&gt;</span> number<span class="sy0">:</span>
   <span class="kw1">return</span> <span class="nu0">314</span><span class="sy0">;</span>
end<span class="sy0">;</span>
&nbsp;
surf number r <span class="sy0">-&gt;</span> number<span class="sy0">:</span>
   <span class="kw1">return</span> <span class="br0">&#40;</span><span class="br0">&#91;</span> pi100 <span class="br0">&#93;</span> <span class="sy0">*</span> r <span class="sy0">*</span> r<span class="br0">&#41;</span> <span class="sy0">/</span> <span class="nu0">100</span><span class="sy0">;</span>
end<span class="sy0">;</span></pre>
</dd></dl>

</div>

<h4 id="array_average">Array Average</h4>
<div class="level4">

<p>
Un alt tip este un tablou unidimensional de elemente de tip <strong>number</strong>. Dimensiunea unui tablou este o constanta intreaga pozitiva. Tablourile sunt si ele variabile locale, si sunt declarate similar. Un element dintr-un tablou poate fi folosit in orice loc unde poate fi folosita o variabila locala de tip <strong>number</strong>. Primul element are indexul 0.
</p>

<p>
Un tablou este trimis ca argument catre o functie prin referinta, nu prin valoare. O functie poate avea mai multi parametri de tipuri diferite, number sau tablou, dar nu poate intoarce un tablou.
</p>

<p>
Structurile de control includ <strong>if</strong>, <strong>while</strong> si <strong>until</strong> ; ultima cicleaza atat timp cat expresia este falsa. Structurile de control au ca parametru o expresie conditionala. Conditiile sunt comparatii intre expresii intregi. Operatorii permisi sunt &lt; , = , &gt;
</p>

<p>
Cuvinte cheie: <strong>if</strong>, <strong>else</strong>, <strong>while</strong>, <strong>until</strong>
</p>
<dl class="file">
<dt><a href="../../../code/cpl/teme-2015/temarec%3Fcodeblock=4" title="Download Snippet" class="mediafile mf_sq2">arrays.sq2</a></dt>
<dd><pre class="code file c"><span class="co2"># Average array values</span>
average number<span class="br0">&#91;</span><span class="nu0">256</span><span class="br0">&#93;</span> data<span class="sy0">,</span> number count <span class="sy0">-&gt;</span> number<span class="sy0">:</span>
   local number i<span class="sy0">;</span> number sum<span class="sy0">;</span> end<span class="sy0">;</span>
   i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span>
   sum <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span>
   <span class="kw1">while</span> i <span class="sy0">&lt;</span> count<span class="sy0">;</span>
       sum <span class="sy0">=</span> sum <span class="sy0">+</span> data<span class="br0">&#91;</span>i<span class="br0">&#93;</span><span class="sy0">;</span>
       i <span class="sy0">=</span> i <span class="sy0">+</span> <span class="nu0">1</span><span class="sy0">;</span>
   end<span class="sy0">;</span>
   <span class="kw1">return</span> sum <span class="sy0">/</span> count<span class="sy0">;</span>
end<span class="sy0">;</span>
&nbsp;
<span class="co2"># Read an array, return the size of the data read</span>
&nbsp;
readArray number<span class="br0">&#91;</span><span class="nu0">256</span><span class="br0">&#93;</span> data <span class="sy0">-&gt;</span> number<span class="sy0">:</span>
   local number c<span class="sy0">;</span> number i<span class="sy0">;</span> end<span class="sy0">;</span> 
   <span class="br0">&#91;</span>print <span class="st0">&quot;Count? &quot;</span><span class="br0">&#93;</span><span class="sy0">;</span>
   c <span class="sy0">=</span> <span class="br0">&#91;</span>read<span class="br0">&#93;</span><span class="sy0">;</span>
   <span class="kw1">if</span> c <span class="sy0">&gt;</span> <span class="nu0">0</span><span class="sy0">;</span>
       <span class="kw1">if</span> c <span class="sy0">&gt;</span> <span class="nu0">256</span><span class="sy0">;</span>
           <span class="br0">&#91;</span> print <span class="st0">&quot;ERROR: Buffer overflow!<span class="es1">\n</span>&quot;</span><span class="br0">&#93;</span><span class="sy0">;</span>
           <span class="kw1">return</span> <span class="nu0">0</span><span class="sy0">;</span>
       <span class="kw1">else</span>
           i <span class="sy0">=</span> c<span class="sy0">;</span>
           until i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span>
               <span class="br0">&#91;</span>print <span class="st0">&quot;&gt;&quot;</span><span class="br0">&#93;</span><span class="sy0">;</span>
               data<span class="br0">&#91;</span>c <span class="sy0">-</span> i<span class="br0">&#93;</span> <span class="sy0">=</span> <span class="br0">&#91;</span> read <span class="br0">&#93;</span><span class="sy0">;</span>
               i <span class="sy0">=</span> i <span class="sy0">-</span> <span class="nu0">1</span><span class="sy0">;</span>
           end<span class="sy0">;</span>
       end<span class="sy0">;</span>
&nbsp;
       <span class="kw1">return</span> c<span class="sy0">;</span>
   end<span class="sy0">;</span>
&nbsp;
   <span class="kw1">if</span> c <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span>
       <span class="co2"># do nothing</span>
   <span class="kw1">else</span>
       <span class="br0">&#91;</span> print <span class="st0">&quot;ERROR: Count is negative!<span class="es1">\n</span>&quot;</span><span class="br0">&#93;</span><span class="sy0">;</span>
   end<span class="sy0">;</span>
   <span class="kw1">return</span> <span class="nu0">0</span><span class="sy0">;</span>
end<span class="sy0">;</span>
&nbsp;
start<span class="sy0">:</span>
   local number c<span class="sy0">;</span> number<span class="br0">&#91;</span><span class="nu0">256</span><span class="br0">&#93;</span> d<span class="sy0">;</span> end<span class="sy0">;</span>
   c <span class="sy0">=</span> <span class="br0">&#91;</span>readArray d<span class="br0">&#93;</span><span class="sy0">;</span>
   <span class="kw1">if</span> c <span class="sy0">&gt;</span> <span class="nu0">0</span><span class="sy0">;</span>
       <span class="br0">&#91;</span>print <span class="st0">&quot;Average value: &quot;</span><span class="br0">&#93;</span><span class="sy0">;</span>
       <span class="br0">&#91;</span>write <span class="br0">&#91;</span>average d<span class="sy0">,</span>c<span class="br0">&#93;</span><span class="br0">&#93;</span><span class="sy0">;</span>
       <span class="br0">&#91;</span>print <span class="st0">&quot;<span class="es1">\n</span>&quot;</span><span class="br0">&#93;</span><span class="sy0">;</span>
   end<span class="sy0">;</span>
end<span class="sy0">;</span></pre>
</dd></dl>

</div>

<h4 id="quick_sort">Quick Sort</h4>
<div class="level4">

<p>
O functie se poate apela pe ea insasi recursiv. Mai jos, o implementare de quick sort: 
</p>
<dl class="file">
<dt><a href="../../../code/cpl/teme-2015/temarec%3Fcodeblock=5" title="Download Snippet" class="mediafile mf_sq2">quicksort.sq2</a></dt>
<dd><pre class="code file c">start<span class="sy0">:</span>
   local
       number c<span class="sy0">;</span> number<span class="br0">&#91;</span><span class="nu0">256</span><span class="br0">&#93;</span> d<span class="sy0">;</span>
       number i<span class="sy0">;</span>
   end<span class="sy0">;</span>
   c <span class="sy0">=</span> <span class="br0">&#91;</span>readArray d<span class="br0">&#93;</span><span class="sy0">;</span>
   <span class="br0">&#91;</span>sort d<span class="sy0">,</span>c<span class="br0">&#93;</span><span class="sy0">;</span>
   <span class="br0">&#91;</span>writeArray d<span class="sy0">,</span>c<span class="br0">&#93;</span><span class="sy0">;</span>
end<span class="sy0">;</span>
&nbsp;
<span class="co2">#readArray - is reused from the Unlimited Average example</span>
&nbsp;
writeArray number<span class="br0">&#91;</span><span class="nu0">256</span><span class="br0">&#93;</span> data<span class="sy0">,</span> number count<span class="sy0">:</span>
   local number i<span class="sy0">;</span> end<span class="sy0">;</span>
   i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span>
   <span class="kw1">while</span> i <span class="sy0">&lt;</span> count<span class="sy0">;</span>
       <span class="br0">&#91;</span>print <span class="st0">&quot;&gt;&quot;</span><span class="br0">&#93;</span><span class="sy0">;</span>
       <span class="br0">&#91;</span>write data<span class="br0">&#91;</span>i<span class="br0">&#93;</span><span class="br0">&#93;</span><span class="sy0">;</span>
       <span class="br0">&#91;</span>print <span class="st0">&quot;<span class="es1">\n</span>&quot;</span><span class="br0">&#93;</span><span class="sy0">;</span>
       i <span class="sy0">=</span> i <span class="sy0">+</span> <span class="nu0">1</span><span class="sy0">;</span>
   end<span class="sy0">;</span>
end<span class="sy0">;</span>
&nbsp;
sort number<span class="br0">&#91;</span><span class="nu0">256</span><span class="br0">&#93;</span> data<span class="sy0">,</span> number count<span class="sy0">:</span>
   <span class="br0">&#91;</span>quickSort data<span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> count<span class="br0">&#93;</span><span class="sy0">;</span>
end<span class="sy0">;</span>
&nbsp;
quickSort number<span class="br0">&#91;</span><span class="nu0">256</span><span class="br0">&#93;</span> data<span class="sy0">,</span> number first<span class="sy0">,</span> number count<span class="sy0">:</span>
   local 
       number idx<span class="sy0">;</span> 
       number value<span class="sy0">;</span> 
       number i<span class="sy0">;</span>
   end<span class="sy0">;</span>
   <span class="kw1">if</span> count <span class="sy0">&gt;</span> <span class="nu0">1</span><span class="sy0">;</span>
       idx <span class="sy0">=</span> first <span class="sy0">+</span> count <span class="sy0">/</span> <span class="nu0">2</span><span class="sy0">;</span>
       value <span class="sy0">=</span> data<span class="br0">&#91;</span>idx<span class="br0">&#93;</span><span class="sy0">;</span>
       <span class="br0">&#91;</span>swap data<span class="sy0">,</span> idx<span class="sy0">,</span> first<span class="sy0">+</span>count<span class="sy0">-</span><span class="nu0">1</span><span class="br0">&#93;</span><span class="sy0">;</span>
       idx <span class="sy0">=</span> first<span class="sy0">;</span>
       i <span class="sy0">=</span> first<span class="sy0">;</span>
       <span class="kw1">while</span> i <span class="sy0">-</span> first <span class="sy0">&lt;</span> count <span class="sy0">-</span> <span class="nu0">1</span><span class="sy0">;</span>
           <span class="kw1">if</span> data<span class="br0">&#91;</span>i<span class="br0">&#93;</span> <span class="sy0">&lt;</span> value<span class="sy0">;</span>
               <span class="br0">&#91;</span>swap data<span class="sy0">,</span> i<span class="sy0">,</span> idx<span class="br0">&#93;</span><span class="sy0">;</span>
               idx <span class="sy0">=</span> idx <span class="sy0">+</span> <span class="nu0">1</span><span class="sy0">;</span>
           end<span class="sy0">;</span>
           i <span class="sy0">=</span> i <span class="sy0">+</span> <span class="nu0">1</span><span class="sy0">;</span>
       end<span class="sy0">;</span>
       <span class="br0">&#91;</span>swap data<span class="sy0">,</span> idx<span class="sy0">,</span> first<span class="sy0">+</span>count<span class="sy0">-</span><span class="nu0">1</span><span class="br0">&#93;</span><span class="sy0">;</span>
&nbsp;
       <span class="br0">&#91;</span>quickSort data<span class="sy0">,</span> first<span class="sy0">,</span> idx <span class="sy0">-</span> first<span class="br0">&#93;</span><span class="sy0">;</span>
       <span class="br0">&#91;</span>quickSort data<span class="sy0">,</span> idx <span class="sy0">+</span> <span class="nu0">1</span><span class="sy0">,</span> first <span class="sy0">+</span> count <span class="sy0">-</span> idx <span class="sy0">-</span> <span class="nu0">1</span><span class="br0">&#93;</span><span class="sy0">;</span>
   end<span class="sy0">;</span>
end<span class="sy0">;</span>
&nbsp;
swap number<span class="br0">&#91;</span><span class="nu0">256</span><span class="br0">&#93;</span> data<span class="sy0">,</span> number p1<span class="sy0">,</span> number p2<span class="sy0">:</span>
   local number t<span class="sy0">;</span> end<span class="sy0">;</span>
   t <span class="sy0">=</span> data<span class="br0">&#91;</span>p1<span class="br0">&#93;</span><span class="sy0">;</span> data<span class="br0">&#91;</span>p1<span class="br0">&#93;</span> <span class="sy0">=</span> data<span class="br0">&#91;</span>p2<span class="br0">&#93;</span><span class="sy0">;</span> data<span class="br0">&#91;</span>p2<span class="br0">&#93;</span> <span class="sy0">=</span> t<span class="sy0">;</span>
end<span class="sy0">;</span>
&nbsp;
readArray number<span class="br0">&#91;</span><span class="nu0">256</span><span class="br0">&#93;</span> data <span class="sy0">-&gt;</span> number<span class="sy0">:</span>
   local number c<span class="sy0">;</span> number i<span class="sy0">;</span> end<span class="sy0">;</span> 
   <span class="br0">&#91;</span>print <span class="st0">&quot;Count? &quot;</span><span class="br0">&#93;</span><span class="sy0">;</span>
   c <span class="sy0">=</span> <span class="br0">&#91;</span>read<span class="br0">&#93;</span><span class="sy0">;</span>
   <span class="kw1">if</span> c <span class="sy0">&gt;</span> <span class="nu0">0</span><span class="sy0">;</span>
       <span class="kw1">if</span> c <span class="sy0">&gt;</span> <span class="nu0">256</span><span class="sy0">;</span>
           <span class="br0">&#91;</span> print <span class="st0">&quot;ERROR: Buffer overflow!<span class="es1">\n</span>&quot;</span><span class="br0">&#93;</span><span class="sy0">;</span>
           <span class="kw1">return</span> <span class="nu0">0</span><span class="sy0">;</span>
       <span class="kw1">else</span>
           i <span class="sy0">=</span> c<span class="sy0">;</span>
           until i <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span>
               <span class="br0">&#91;</span>print <span class="st0">&quot;&gt;&quot;</span><span class="br0">&#93;</span><span class="sy0">;</span>
               data<span class="br0">&#91;</span>c <span class="sy0">-</span> i<span class="br0">&#93;</span> <span class="sy0">=</span> <span class="br0">&#91;</span> read <span class="br0">&#93;</span><span class="sy0">;</span>
               i <span class="sy0">=</span> i <span class="sy0">-</span> <span class="nu0">1</span><span class="sy0">;</span>
           end<span class="sy0">;</span>
       end<span class="sy0">;</span>
&nbsp;
       <span class="kw1">return</span> c<span class="sy0">;</span>
   end<span class="sy0">;</span>
&nbsp;
   <span class="kw1">if</span> c <span class="sy0">=</span> <span class="nu0">0</span><span class="sy0">;</span>
       <span class="co2"># do nothing</span>
   <span class="kw1">else</span>
       <span class="br0">&#91;</span> print <span class="st0">&quot;ERROR: Count is negative!<span class="es1">\n</span>&quot;</span><span class="br0">&#93;</span><span class="sy0">;</span>
   end<span class="sy0">;</span>
   <span class="kw1">return</span> <span class="nu0">0</span><span class="sy0">;</span>
end<span class="sy0">;</span></pre>
</dd></dl>

</div>

<h5 id="predarea_si_rularea_temei">Predarea si rularea temei</h5>
<div class="level5">

<p>
Pentru a preda tema, va trebui sa realizati o arhiva .zip, care sa contina urmatoarele in directorul ei radacina:
</p>

<p>
* Codul sursa al temei, incluzand fisierele *.l, *.y, *.cpp si *.h  (fara binare!).
* Un fisier README in care sa prezentati solutia aleasa si cum se face build
* Un script de build (Makefile sau build.xml pentru ANT) care sa creeze executabilul sq2c
</p>

<p>
Pentru a rula tema, se va rula scriptul de build, si apoi
</p>
<ul>
<li class="level1"><div class="li"> pentru a interpreta un fisier sq2:</div>
</li>
</ul>
<pre class="code"> sq2c file.sq2 </pre>
<ul>
<li class="level1"><div class="li"> pentru a translata la LLVM IR si apoi rula un fisier sq2:</div>
</li>
</ul>
<pre class="code"> sq2c file.sq2 file.ir
 llvm-as file.ir -o file.bc
 lli file.bc</pre>

<p>
Se presupune ca pe sistemul pe care se va testa tema este instalat LLVM 3.7 sau LLVM 3.8, inclusiv pachetul de dezvoltare (biblioteci si header files). Atentie, daca folositi versiuni mai vechi de LLVM puteti avea probleme, deoarece <abbr title="Application Programming Interface">API</abbr>-ul este incompatibil cu 3.7 .
</p>

</div>

<h4 id="resurse">Resurse</h4>
<div class="level4">

<p>
Gasiti atasate:
</p>
<ul>
<li class="level1"><div class="li"> <a href="../../../../_media/cpl/teme/sq2-examples.zip" class="media mediafile mf_zip" title="cpl:teme:sq2-examples.zip (3.5 KB)">Exemplele de cod SQ2</a></div>
</li>
</ul>

</div>
</div>
</body>
</html>

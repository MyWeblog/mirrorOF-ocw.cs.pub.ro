    
    

<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8" />
  <title>so-etti:laboratoare:lab8</title>
<meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="date" content="2013-04-26T00:06:36+0300"/>
<meta name="keywords" content="so-etti,laboratoare,lab8"/>
<link rel="search" type="application/opensearchdescription+xml" href="../../../../lib/exe/opensearch.php" title="CS Open CourseWare"/>
<link rel="start" href="../../../../../courses.1.html"/>
<link rel="alternate" type="application/rss+xml" title="Recent Changes" href="../../../../feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current Namespace" href="../../../../feed.php%3Fmode=list&amp;ns=so-etti:laboratoare"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="lab8.html"/>
<link rel="canonical" href="../../../../so-etti/laboratoare/lab8.html"/>
<link rel="stylesheet" type="text/css" href="../../../../lib/exe/css.php%3Ft=arctic&amp;tseed=1476798676.css"/>
<script type="text/javascript">/*<![CDATA[*/var NS='so-etti:laboratoare';var JSINFO = {"id":"so-etti:laboratoare:lab8","namespace":"so-etti:laboratoare","isadmin":0,"isauth":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="../../../../lib/exe/js.php%3Ftseed=1476798676"></script>
<script type="text/x-mathjax-config">/*<![CDATA[*/MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ["$","$"], ["\\(","\\)"] ],
        displayMath: [ ["$$","$$"], ["\\[","\\]"] ],
        processEscapes: true
    }
});
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
<script type="text/javascript">/*<![CDATA[*/
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
		  
/*!]]>*/</script>
<script type="text/javascript">/*<![CDATA[*/
var pageTracker = _gat._getTracker("UA-38383934-1");
pageTracker._initData();
pageTracker._trackPageview();
		  
/*!]]>*/</script>
</head>
<body>
<div class="dokuwiki export">
<!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="lab8.html#laborator_08_-_servicii_de_retea">Laborator 08 - Servicii de rețea</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="lab8.html#cheat_sheet">Cheat sheet</a></div></li>
<li class="level2"><div class="li"><a href="lab8.html#suport_laborator">Suport laborator</a></div></li>
<li class="level2"><div class="li"><a href="lab8.html#masina_virtuala">Mașina virtuală</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="lab8.html#introducere">Introducere</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="lab8.html#servicii_de_retea">Servicii de rețea</a></div></li>
<li class="level2"><div class="li"><a href="lab8.html#tcp_udp_porturi">TCP. UDP. Porturi</a></div></li>
<li class="level2"><div class="li"><a href="lab8.html#world_wide_web">World Wide Web</a></div></li>
<li class="level2"><div class="li"><a href="lab8.html#ssh">SSH</a></div></li>
<li class="level2"><div class="li"><a href="lab8.html#autentificare_la_distanta">Autentificare la distanță.</a></div></li>
<li class="level2"><div class="li"><a href="lab8.html#ssh_neinteractiv">SSH neinteractiv</a></div></li>
<li class="level2"><div class="li"><a href="lab8.html#scp">SCP</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="lab8.html#exercitii">Exerciții</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="lab8.html#masina_virtuala1">0. Mașina virtuală</a></div></li>
<li class="level2"><div class="li"><a href="lab8.html#www_homepages_and_bookmarks">1. WWW. Homepages and Bookmarks</a></div></li>
<li class="level2"><div class="li"><a href="lab8.html#firefox_ca_download_manager">2. Firefox ca download manager</a></div></li>
<li class="level2"><div class="li"><a href="lab8.html#firefoxl_addons">3. Firefoxl Addons</a></div></li>
<li class="level2"><div class="li"><a href="lab8.html#ssh_neinteractiv1">4. SSH neinteractiv</a></div></li>
<li class="level2"><div class="li"><a href="lab8.html#secure_copy_scp">5. Secure Copy (SCP)</a></div></li>
<li class="level2"><div class="li"><a href="lab8.html#autentificarea_ssh_folosind_chei">6. Autentificarea SSH folosind chei</a></div></li>
<li class="level2"><div class="li"><a href="lab8.html#scp_folosind_chei">7. SCP folosind chei</a></div></li>
<li class="level2"><div class="li"><a href="lab8.html#bittorrent">8. BitTorrent</a></div></li>
<li class="level2"><div class="li"><a href="lab8.html#netstat">9. Netstat</a></div></li>
<li class="level2"><div class="li"><a href="lab8.html#inspectarea_traficului_de_retea_wireshark">10. Inspectarea traficului de rețea. Wireshark</a></div></li>
<li class="level2"><div class="li"><a href="lab8.html#client_http_in_linia_de_comanda">11. Client HTTP în linia de comandă</a></div></li>
<li class="level2"><div class="li"><a href="lab8.html#configurari_avansate_firefox">12. Configurări avansate Firefox</a></div></li>
<li class="level2"><div class="li"><a href="lab8.html#netcat_pentru_transfer_de_fisiere">13. Netcat pentru transfer de fișiere</a></div></li>
<li class="level2"><div class="li"><a href="lab8.html#instant_http_server">14. Instant HTTP server</a></div></li>
<li class="level2"><div class="li"><a href="lab8.html#scanarea_retelei_nmap">15. Scanarea rețelei. nmap</a></div></li>
</ul></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="laborator_08_-_servicii_de_retea">Laborator 08 - Servicii de rețea</h1>
<div class="level1">

</div>
<!-- EDIT1 SECTION "Laborator 08 - Servicii de rețea" [1-141] -->
<h2 class="sectionedit2" id="cheat_sheet">Cheat sheet</h2>
<div class="level2">
<div class="table sectionedit3"><table class="inline">
	<tr class="row0">
		<th class="col0 leftalign"> Comandă             </th><th class="col1 leftalign"> Descriere scurtă                          </th>
	</tr>
	<tr class="row1">
		<td class="col0 leftalign"> <strong><code>ssh</code></strong>         </td><td class="col1 leftalign"> conectare securizată la distanță          </td>
	</tr>
	<tr class="row2">
		<td class="col0 leftalign"> <strong><code>scp</code></strong>         </td><td class="col1 leftalign"> copierea securizată a datelor             </td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign"> <strong><code>ssh-keygen</code></strong>  </td><td class="col1 leftalign"> generare cheii de autentificare           </td>
	</tr>
	<tr class="row4">
		<td class="col0"> <strong><code>ssh-copy-id</code></strong> </td><td class="col1"> instalarea cheii publice pe mașina remote </td>
	</tr>
	<tr class="row5">
		<td class="col0 leftalign"> <strong><code>wget</code></strong>        </td><td class="col1 leftalign"> descărcarea neinteractivă a resurselor    </td>
	</tr>
	<tr class="row6">
		<td class="col0 leftalign"> <strong><code>netstat</code></strong>     </td><td class="col1 leftalign"> afișarea conexiunilor                     </td>
	</tr>
	<tr class="row7">
		<td class="col0 leftalign"> <strong><code>netcat</code></strong>      </td><td class="col1 leftalign"> client/server arbitrar TCP sau UDP        </td>
	</tr>
	<tr class="row8">
		<td class="col0 leftalign"> <strong><code>wireshark</code></strong>   </td><td class="col1 leftalign"> analiza traficului de rețea               </td>
	</tr>
	<tr class="row9">
		<td class="col0 leftalign"> <strong><code>netmap</code></strong>      </td><td class="col1 leftalign"> scanare porturi și explorarea rețelei     </td>
	</tr>
</table></div>
<!-- EDIT3 TABLE [167-859] -->
</div>
<!-- EDIT2 SECTION "Cheat sheet" [142-860] -->
<h2 class="sectionedit4" id="suport_laborator">Suport laborator</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> <a href="http://books.google.com/books?id=_JFGzyRxQGcC&amp;pg=PA249" class="urlextern" title="http://books.google.com/books?id=_JFGzyRxQGcC&amp;pg=PA249"  rel="nofollow">9. Servicii de rețea</a></div>
</li>
<li class="level1"><div class="li"> Puteți urmări tutorialul video corespunzător laboratorului făcut de <a href="http://itassistant.org/diverse/utilizarea-sistemelor-de-operare/utilizarea-sistemelor-de-operare-6.html" class="urlextern" title="http://itassistant.org/diverse/utilizarea-sistemelor-de-operare/utilizarea-sistemelor-de-operare-6.html"  rel="nofollow">IT Assistant</a>.</div>
</li>
</ul>

</div>
<!-- EDIT4 SECTION "Suport laborator" [861-1175] -->
<h2 class="sectionedit5" id="masina_virtuala">Mașina virtuală</h2>
<div class="level2">

<p>
Laboratorul folosește mașina virtuală <code><a href="http://elf.cs.pub.ro/uso/store/uso-vm-lucas.tar.gz" class="urlextern" title="http://elf.cs.pub.ro/uso/store/uso-vm-lucas.tar.gz"  rel="nofollow">lucas</a></code>.
</p>
<ul>
<li class="level1"><div class="li"> Mașina se găsește descărcată în directorul <strong><code>/home/student/vm/lucas</code></strong>.</div>
</li>
</ul>

<p>
Puteți folosi utilizatorul <code>lucas</code>, cu parola <code>uso</code>, sau <code>root</code> cu parola <code>uso</code>. Sistemul nu are pachetul <code>sudo</code> instalat.
</p>

<p>
<p><div class="notetip">
Mașina virtuală este accesibilă folosind numele <code>lucas.local</code>. Tehnologia folosită se numește <a href="http://en.wikipedia.org/wiki/Multicast_DNS#Apple.27s_protocol:_Multicast_DNS.2FDNS-SD" class="urlextern" title="http://en.wikipedia.org/wiki/Multicast_DNS#Apple.27s_protocol:_Multicast_DNS.2FDNS-SD"  rel="nofollow">Multicast DNS</a>.

</div></p>
</p>

</div>
<!-- EDIT5 SECTION "Mașina virtuală" [1176-1762] -->
<h1 class="sectionedit6" id="introducere">Introducere</h1>
<div class="level1">

</div>
<!-- EDIT6 SECTION "Introducere" [1763-1789] -->
<h2 class="sectionedit7" id="servicii_de_retea">Servicii de rețea</h2>
<div class="level2">

<p>
Serviciile de rețea presupun de cele mai multe ori existența a două entități:
</p>
<ul>
<li class="level1"><div class="li"> server, oferă un servciu de rețea, acceptând și răspunzând la cereri;</div>
</li>
<li class="level1"><div class="li"> client, interoghează server-ul cu scopul de a obține acces la serviciul respectiv.</div>
</li>
</ul>

<p>
Acest model poartă denumirea de <strong><code>modelul client-server</code></strong>. De exemplu: serviciul web, DHCP, <abbr title="Domain Name System">DNS</abbr>.
</p>

<p>
<strong><code>Modelul punct-la-punct</code></strong> (peer-to-peer, prescurtat P2P) este un alt model ce presupune ca fiecare entitate să joace rolul de server, cât și de client. De exemplu: serviciile de partajare de fișiere (BitTorrent).
</p>

<p>
Fiecare dintre aceste servicii este identificat printr-un protocol de nivel aplicație. De exemplu serviciul web este identificat prin protocolul HTTP (Hypertext Transfer Protocol).
</p>

</div>
<!-- EDIT7 SECTION "Servicii de rețea" [1790-2585] -->
<h2 class="sectionedit8" id="tcp_udp_porturi">TCP. UDP. Porturi</h2>
<div class="level2">

<p>
Entitățile participante, pentru a comunica între ele, folosesc în marea majoritate a cazurilor următoarele două protocoale de nivel transport:
</p>
<ul>
<li class="level1"><div class="li"> TCP. orientat conexiune</div>
</li>
<li class="level1"><div class="li"> UDP, neorientat conexiune</div>
</li>
</ul>

<p>
Pentru a identifica serviciile (protocoalele de nivel aplicație), protocoalele de nivel transport folosesc un mecanism, denumit port (un număr pe 16 biți). Un serviciu de rețea poate avea asociate mai multe porturi, nu doar unul singur.
</p>

<p>
Putem afișa toate serviciile oferite de o stație, rulând comanda <strong><code>netstat</code></strong> pe acea stație.
</p>
<pre class="code bash"><span class="kw2">netstat</span> <span class="re5">--tcp</span> <span class="re5">--listening</span> <span class="re5">--program</span>
Active Internet connections <span class="br0">&#40;</span>only servers<span class="br0">&#41;</span>
Proto Recv-Q Send-Q Local Address       Foreign Address     State       PID<span class="sy0">/</span>Program name
tcp        <span class="nu0">0</span>      <span class="nu0">0</span> <span class="sy0">*</span>:sunrpc            <span class="sy0">*</span>:<span class="sy0">*</span>                 LISTEN      <span class="nu0">2057</span><span class="sy0">/</span>portmap
tcp        <span class="nu0">0</span>      <span class="nu0">0</span> <span class="sy0">*</span>:www               <span class="sy0">*</span>:<span class="sy0">*</span>                 LISTEN      <span class="nu0">2328</span><span class="sy0">/</span>nginx
tcp        <span class="nu0">0</span>      <span class="nu0">0</span> <span class="sy0">*</span>:http-alt          <span class="sy0">*</span>:<span class="sy0">*</span>                 LISTEN      <span class="nu0">2328</span><span class="sy0">/</span>nginx
tcp        <span class="nu0">0</span>      <span class="nu0">0</span> <span class="sy0">*</span>:ftp               <span class="sy0">*</span>:<span class="sy0">*</span>                 LISTEN      <span class="nu0">2336</span><span class="sy0">/</span>vsftpd
tcp        <span class="nu0">0</span>      <span class="nu0">0</span> <span class="sy0">*</span>:ssh               <span class="sy0">*</span>:<span class="sy0">*</span>                 LISTEN      <span class="nu0">2313</span><span class="sy0">/</span>sshd
tcp        <span class="nu0">0</span>      <span class="nu0">0</span> <span class="sy0">*</span>:<span class="nu0">35836</span>             <span class="sy0">*</span>:<span class="sy0">*</span>                 LISTEN      <span class="nu0">2068</span><span class="sy0">/</span>rpc.statd
tcp6       <span class="nu0">0</span>      <span class="nu0">0</span> <span class="br0">&#91;</span>::<span class="br0">&#93;</span>:ssh            <span class="br0">&#91;</span>::<span class="br0">&#93;</span>:<span class="sy0">*</span>              LISTEN      <span class="nu0">2313</span><span class="sy0">/</span>sshd</pre>

<p>
Am adăugat următorii parametrii, pentru a afișa:
</p>
<ul>
<li class="level1"><div class="li"> <code>–tcp</code> serviciile ce folosesc protocolul de nivel transport TCP vor fi afișate</div>
</li>
<li class="level1"><div class="li"> <code>–listening</code> porturile deschise, pe care server-ele așteaptă să primească cereri.</div>
</li>
<li class="level1"><div class="li"> <code>–program</code> denumirea serverului</div>
</li>
</ul>

<p>
Alocarea porturilor standard pentru diverse servicii de rețea poate fi văzută în fișierul <strong><code>/etc/services</code></strong>:
</p>
<pre class="code bash"><span class="kw2">cat</span> <span class="sy0">/</span>etc<span class="sy0">/</span>services
...
<span class="kw2">ssh</span>             <span class="nu0">22</span><span class="sy0">/</span>tcp                          <span class="co0"># SSH Remote Login Protocol</span>
telnet          <span class="nu0">23</span><span class="sy0">/</span>tcp
smtp            <span class="nu0">25</span><span class="sy0">/</span>tcp          mail
domain          <span class="nu0">53</span><span class="sy0">/</span>tcp                          <span class="co0"># Domain Name Server</span>
domain          <span class="nu0">53</span><span class="sy0">/</span>udp
http            <span class="nu0">80</span><span class="sy0">/</span>tcp          www             <span class="co0"># WorldWideWeb HTTP</span>
...</pre>

</div>
<!-- EDIT8 SECTION "TCP. UDP. Porturi" [2586-4678] -->
<h2 class="sectionedit9" id="world_wide_web">World Wide Web</h2>
<div class="level2">

<p>
World Wide Web (sau WWW) reprezintă o rețea de resurse (pagini web) interconectate prin intermediul unor legături (hyperlink-uri), fiind cel mai cunoscut serviciu din Internet.
</p>

<p>
Pentru a accesa o pagină web, folosim un <strong><code>navigator web</code></strong> (browser web). Acesta reprezintă defapt un client, ce se conectează la un server web.
</p>

<p>
Exemple de navigatoare:
</p>
<ul>
<li class="level1"><div class="li"> grafice: Mozilla Firefox, Google Chrome …</div>
</li>
<li class="level1"><div class="li"> text: elinks, lynx, w3m …</div>
</li>
</ul>

<p>
Ca un navigator să poată afișa pagina dorită, acesta are nevoie întâi de un mecanism prin care să o identifice. 
</p>

<p>
<strong><code><abbr title="Uniform Resource Locator">URL</abbr></code></strong> (Uniform Resource Locator) reprezintă un nume cu o formă bine precizată, ce identifică o resursă. Aveți mai jos forma generală a unui <abbr title="Uniform Resource Locator">URL</abbr>. Unele componente pot lipsi:
</p>
<pre class="code">protocol://host:port/cale/catre/resurse</pre>

<p>
Host reprezintă o adresă IP sau un nume de domeniu ce va fi translatat într-o adresă IP printr-o cere <abbr title="Domain Name System">DNS</abbr>.
</p>

<p>
<strong><code><abbr title="Uniform Resource Locator">URL</abbr></code></strong> poate include și informații de autentificare:
</p>
<pre class="code">protocol://user:parola@host:port/cale/catre/resurse</pre>

<p>
Pentru a deschide pagina principală <a href="http://www.google.com" class="urlextern" title="http://www.google.com"  rel="nofollow">www.google.com</a>, putem execută următoarea comandă:
</p>
<pre class="code bash">firefox http:<span class="sy0">//</span>www.google.com
<span class="co0"># sau mai simplu</span>
firefox www.google.com</pre>

<p>
În marea majoritate a navigatoarelor, dacă nu este precizat protocolul se presupune că este HTTP.
</p>

<p>
Pentru protocolul HTTP, portul standard folosit este 80, dar poate fi modificat.
</p>

</div>
<!-- EDIT9 SECTION "World Wide Web" [4679-6090] -->
<h2 class="sectionedit10" id="ssh">SSH</h2>
<div class="level2">

<p>
<strong><code>SSH</code></strong> (<em>Secure Shell</em>) este un alt protocol de nivel aplicație ce asigura un canal securizat pentru transmiterea informației.
Protocolul respecta modelul client-server, astfel pentru a iniția o conexiune, clientul SSH (ex. comanda <strong><code>ssh</code></strong> pe calculatoarele din laborator)  trimite o cerere către serverul SSH (ex. deamon-ul <strong><code>sshd</code></strong>).
</p>

<p>
Portul standard folosit de server-ul SSH este 22.
</p>

</div>
<!-- EDIT10 SECTION "SSH" [6091-6514] -->
<h2 class="sectionedit11" id="autentificare_la_distanta">Autentificare la distanță.</h2>
<div class="level2">

<p>
Putem utiliza protocolul SSH pentru a ne conecta la distanta:
</p>
<pre class="code bash"><span class="kw2">ssh</span> user<span class="sy0">@</span>host</pre>

<p>
Comanda ne permite autentificarea ca utilizatorul <strong><code>user</code></strong> pe mașina specificată printr-o adresă IP sau un nume de domeniu, <strong><code>host</code></strong>. Portul implicit folosit pentru conectare este 22.
</p>

<p>
Dacă este prima dată când ne autentificăm pe stația respectivă, o să primim un mesaj. Acesta ne întreabă dacă vrem să adăugăm cheia RSA în baza de date locală. Va trebui să răspundem cu textul complet “yes”.
</p>

<p>
Odată autentificați, de cele mai multe ori vom observa schimbarea prompt-ului (Nu întotdeauna). Acum ne aflăm pe mașina de la distanță și putem introduce comenzi, la fel cum am face pe mașina locală.
</p>

<p>
<p><div class="notewarning">
Tot timpul când lucrați prin SSH trebuie să fiți atenți pe ce mașină vă aflați.

</div></p>
</p>

<p>
SSH pornește un shell remote, deci pentru a închide sesiunea folosiți <strong><code>exit</code></strong> sau <strong><code>Ctrl-D</code></strong>, ca pentru orice alt shell.
</p>

<p>
De multe ori, pentru sporirea securității, se poate schimba portul pe care ascultă server-ul SSH. În cazul acesta trebuie să specificăm comenzii <strong><code>ssh</code></strong> ce port să folosească:
</p>
<pre class="code bash"><span class="kw2">ssh</span> <span class="re5">-P</span> port user<span class="sy0">@</span>host</pre>

</div>
<!-- EDIT11 SECTION "Autentificare la distanță." [6515-7766] -->
<h2 class="sectionedit12" id="ssh_neinteractiv">SSH neinteractiv</h2>
<div class="level2">

<p>
Putem să rulăm comenzi pe mașina de la distanță în mod neinteractiv, fără a se rula un interpretor în care să introducem comenzile respective. Sintaxa este următoare:
</p>
<pre class="code bash"><span class="kw2">ssh</span> user<span class="sy0">@</span>host <span class="st0">&quot;secvență de comenzi&quot;</span></pre>

</div>
<!-- EDIT12 SECTION "SSH neinteractiv" [7767-8033] -->
<h2 class="sectionedit13" id="scp">SCP</h2>
<div class="level2">

<p>
Comanda <strong><code>ssh</code></strong> ne permite doar să administrăm de la distanță, nu și să transferăm fișiere.
</p>

<p>
Pentru a efectua transferul de date utilizăm utilitarul <strong><code>scp</code></strong>. Acesta se folosește de canalul securizat oferit de <strong><code>ssh</code></strong>.
</p>

<p>
Sintaxa scp:
</p>
<pre class="code bash"><span class="kw2">scp</span> sursă destinație</pre>

<p>
<p><div class="notetip">
Observați sintaxa <code>scp</code>; este asemănătoare cu cea a utilitarului <code>cp</code>, dar oricare dintre cei doi termeni poate fi de forma <code>user@host:path</code>.
</p>
<ul>
<li class="level1"><div class="li"> Când <code>user@host</code> lipsește, este vorba despre mașina locală.</div>
</li>
<li class="level1"><div class="li"> Când <code>path</code> lipsește, este vorba despre directorul home al utilizatorului specificat.</div>
</li>
</ul>

<p>

</div></p>
</p>

<p>
De exemplu:
</p>
<ul>
<li class="level1"><div class="li"> vrem să copiem fișierul de pe stația locală, <code>fisier_local</code>, din directorul curent, în directorul /calea/pe/host de pe stația de la distanță, redenumind în <code>fisier_remote</code></div>
</li>
</ul>
<pre class="code bash"><span class="kw2">scp</span> .<span class="sy0">/</span>fisier_local user<span class="sy0">@</span>host:<span class="sy0">/</span>calea<span class="sy0">/</span>pe<span class="sy0">/</span>host<span class="sy0">/</span>fisier_remote</pre>
<ul>
<li class="level1"><div class="li"> vrem să copiem fișierul fisier_remote din directorul /calea/pe/host de pe stația de la distanță în directorul curent de pe stația locală, redenumind în <code>fisier_local</code></div>
</li>
</ul>
<pre class="code bash"><span class="kw2">scp</span> user<span class="sy0">@</span>host:<span class="sy0">/</span>calea<span class="sy0">/</span>pe<span class="sy0">/</span>host<span class="sy0">/</span>fisier_remote .<span class="sy0">/</span>fisier_local</pre>

</div>
<!-- EDIT13 SECTION "SCP" [8034-9227] -->
<h1 class="sectionedit14" id="exercitii">Exerciții</h1>
<div class="level1">

</div>
<!-- EDIT14 SECTION "Exerciții" [9228-9253] -->
<h2 class="sectionedit15" id="masina_virtuala1">0. Mașina virtuală</h2>
<div class="level2">

<p>
Deschideți mașina virtuală <strong><code>lucas</code></strong> cu Vmware Player.
</p>

<p>
Calea unde se află pe mașiniile din laborator este <strong>/home/student/vm/lucas</strong>.
</p>

</div>
<!-- EDIT15 SECTION "0. Mașina virtuală" [9254-9431] -->
<h2 class="sectionedit16" id="www_homepages_and_bookmarks">1. WWW. Homepages and Bookmarks</h2>
<div class="level2">

<p>
<p><div class="notetip">
Folosiți mașina fizică.

</div></p>
</p>

<p>
Instalați browser-ul <strong><code>Iceweasel</code></strong>:
</p>
<pre class="code bash"><span class="kw2">sudo</span> <span class="kw2">apt-get install</span> iceweasel </pre>

<p>
<a href="http://wiki.debian.org/Iceweasel" class="urlextern" title="http://wiki.debian.org/Iceweasel"  rel="nofollow">Iceweasel</a> este un fork din Mozilla Firefox. Deoarece este identic cu Firefox, o să ne referim la el prin același nume.
</p>

<p>
Realizați următoarele modificări în interfața grafică a browser-ului:
</p>
<ul>
<li class="level1"><div class="li"> Configurați două pagini web ca <em>homepages</em>:</div>
<ul>
<li class="level2"><div class="li"> Accesați fereastra de preferințe: Edit→Preferences. Selectați tab-ul General.</div>
</li>
<li class="level2"><div class="li"> În rubrica Startup, selectați <strong>When Firefox Starts</strong> (în Iceweasel este <strong>When Iceweasel Starts</strong>) <em>Show my homepage</em>.</div>
</li>
<li class="level2"><div class="li"> Setați două pagini de start în rubrica Home Page. Folosiți caracterul <strong><code>|</code></strong> (pipe) pentru a le separa. Paginile sunt <a href="http://www.google.com/" class="urlextern" title="http://www.google.com/"  rel="nofollow">http://www.google.com/</a> și <a href="http://starwars.wikia.com/" class="urlextern" title="http://starwars.wikia.com/"  rel="nofollow">http://starwars.wikia.com/</a>.</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Pentru că sunteți atât de interesați de universul Star Wars, configurați un bookmark pentru pagina despre Star Wars de pe Wikipedia.</div>
<ul>
<li class="level2"><div class="li"> Navigați la <a href="http://en.wikipedia.org/" class="urlextern" title="http://en.wikipedia.org/"  rel="nofollow">http://en.wikipedia.org/</a> și căutați Star Wars.</div>
</li>
<li class="level2"><div class="li"> Accesați pagina și dați click pe steluța de lângă adresă, în partea de sus a ecranului.</div>
</li>
<li class="level2"><div class="li"> Mai dați o dată click pe steluța “aprinsă” pentru opțiuni avansate în ceea ce privește bookmark-ul.</div>
</li>
</ul>
</li>
</ul>

</div>
<!-- EDIT16 SECTION "1. WWW. Homepages and Bookmarks" [9432-10798] -->
<h2 class="sectionedit17" id="firefox_ca_download_manager">2. Firefox ca download manager</h2>
<div class="level2">

<p>
<p><div class="notetip">
</p>
<ul>
<li class="level1"><div class="li"> Folosiți mașina fizică.</div>
</li>
<li class="level1"><div class="li"> Asigurați-vă ca mașina <strong><code>lucas</code></strong> să fie deja pornită.</div>
</li>
</ul>

<p>

</div></p>
</p>

<p>
Accesați fereastra de preferințe și schimbați directorul unde Firefox descarcă fișiere. Directorul va fi <strong><code>~/my_downloads</code></strong>. Va trebui să îl creați înainte.
</p>

<p>
Descărcați următoarele fișiere:
</p>
<ul>
<li class="level1"><div class="li"> <a href="http://lucas.local/anakin.bin" class="urlextern" title="http://lucas.local/anakin.bin"  rel="nofollow">http://lucas.local/anakin.bin</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://lucas.local:80/macewindu.bin" class="urlextern" title="http://lucas.local:80/macewindu.bin"  rel="nofollow">http://lucas.local:80/macewindu.bin</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://lucas.local:8080/yoda.bin" class="urlextern" title="http://lucas.local:8080/yoda.bin"  rel="nofollow">http://lucas.local:8080/yoda.bin</a></div>
</li>
<li class="level1"><div class="li"> <a href="ftp://student:uso@lucas.local/obiwan.bin" class="urlextern" title="ftp://student:uso@lucas.local/obiwan.bin"  rel="nofollow">ftp://student:uso@lucas.local/obiwan.bin</a></div>
</li>
</ul>

<p>
Concatenați fișierele în ordine alfabetică pentru a obține o maximă din Star Wars.
</p>

</div>
<!-- EDIT17 SECTION "2. Firefox ca download manager" [10799-11415] -->
<h2 class="sectionedit18" id="firefoxl_addons">3. Firefoxl Addons</h2>
<div class="level2">

<p>
Firefox are un plugin care ascunde toate reclamele de pe pagini.
</p>
<ul>
<li class="level1"><div class="li"> Intrați pe <a href="http://starwars.wikia.com/" class="urlextern" title="http://starwars.wikia.com/"  rel="nofollow">http://starwars.wikia.com/</a>. Identificați reclamele în partea de sus a paginii.</div>
</li>
<li class="level1"><div class="li"> Instalați addon-ul <a href="https://addons.mozilla.org/en-US/firefox/addon/adblock-plus/" class="urlextern" title="https://addons.mozilla.org/en-US/firefox/addon/adblock-plus/"  rel="nofollow">AdBlock Plus</a>. Reporniți browser-ul după instalare.</div>
</li>
<li class="level1"><div class="li"> Accesați din nou pagina inițială. Much better, right?</div>
</li>
</ul>

<p>
Unele reclame nu sunt doar enervante, ci dăunătoare ochilor sau malițioase (script-uri care urmăresc activitatea).
</p>

<p>
<p><div class="notetip">
Există numeroase extensii de Firefox, disponibile pe <a href="http://addons.mozilla.org" class="urlextern" title="http://addons.mozilla.org"  rel="nofollow">site-ul oficial</a>. Câteva sugestii:
</p>
<ul>
<li class="level1"><div class="li"> <a href="https://addons.mozilla.org/en-US/firefox/addon/1843/" class="urlextern" title="https://addons.mozilla.org/en-US/firefox/addon/1843/"  rel="nofollow">Firebug</a> – inspectarea codului sursă al unei pagini; util pentru dezvoltatorii web.</div>
</li>
<li class="level1"><div class="li"> <a href="https://addons.mozilla.org/en-US/firefox/addon/433/" class="urlextern" title="https://addons.mozilla.org/en-US/firefox/addon/433/"  rel="nofollow">Flashblock</a> – blochează tot conținutul flash; util pentru calculatoarele mai vechi.</div>
</li>
<li class="level1"><div class="li"> <a href="https://addons.mozilla.org/en-US/firefox/addon/684/" class="urlextern" title="https://addons.mozilla.org/en-US/firefox/addon/684/"  rel="nofollow">FireFTP</a> – client complet pentru <abbr title="File Transfer Protocol">FTP</abbr>; permite și upload-area de fișiere.</div>
</li>
<li class="level1"><div class="li"> <a href="https://addons.mozilla.org/en-US/firefox/addon/6584/" class="urlextern" title="https://addons.mozilla.org/en-US/firefox/addon/6584/"  rel="nofollow">Flash Video Downloader</a> – pentru descărcarea locală a filmelor de pe YouTube și alte site-uri similare.</div>
</li>
<li class="level1"><div class="li"> <a href="https://addons.mozilla.org/en-US/firefox/addon/201/" class="urlextern" title="https://addons.mozilla.org/en-US/firefox/addon/201/"  rel="nofollow">DownThemAll!</a> – Download manager avansat, include opțiunea de a salva toate link-urile de pe o pagină.</div>
</li>
<li class="level1"><div class="li"> <a href="https://addons.mozilla.org/en-US/firefox/addon/4891/" class="urlextern" title="https://addons.mozilla.org/en-US/firefox/addon/4891/"  rel="nofollow">Vimperator</a> – face Firefox să se comporte mai mult ca Vim.</div>
</li>
</ul>

<p>

</div></p>
</p>

</div>
<!-- EDIT18 SECTION "3. Firefoxl Addons" [11416-12954] -->
<h2 class="sectionedit19" id="ssh_neinteractiv1">4. SSH neinteractiv</h2>
<div class="level2">

<p>
<p><div class="notewarning">
<strong>Nu</strong> închideti sau reporniți calculatoarele colegilor folosind SSH. 

</div></p>
</p>

<p>
Folosiți SSH neinteractiv pentru a da restart mașinii virtuale <strong><code>lucas</code></strong>. Numele de domeniu complet al mașinii este <strong><code>lucas.local</code></strong>.
</p>
<ul>
<li class="level1"><div class="li"> Observați că, după introducerea parolei și executarea comenzii, <strong>nu</strong> se mai pornește un shell interactiv.</div>
</li>
</ul>

</div>
<!-- EDIT19 SECTION "4. SSH neinteractiv" [12955-13421] -->
<h2 class="sectionedit20" id="secure_copy_scp">5. Secure Copy (SCP)</h2>
<div class="level2">

<p>
Reveniți la download-urile anterioare. Concatenați, în ordine alfabetică, fișierele obținute, în fișierul <code>quote.txt</code>.
</p>

<p>
Copiați fișierul <code>quote.txt</code> de pe mașina fizică în home-ul utilizatorului <code>lucas</code> de pe mașina virtuală. Folosiți <strong><code>scp</code></strong>.
</p>

</div>
<!-- EDIT20 SECTION "5. Secure Copy (SCP)" [13422-13909] -->
<h2 class="sectionedit21" id="autentificarea_ssh_folosind_chei">6. Autentificarea SSH folosind chei</h2>
<div class="level2">

<p>
Configurați sistemul <strong><code>lucas</code></strong> pentru a vă putea autentifica drept utilizatorul <code>lucas</code> fără parolă:
</p>
<ul>
<li class="level1"><div class="li"> Folosiți <strong><code>ssh-keygen</code></strong> <em>pe mașina fizică</em> pentru a genera o cheie.</div>
<ul>
<li class="level2"><div class="li"> Apăsați Enter la întrebarea prompt-ul care întreabă unde va fi salvată cheia. Se va folosi locația din paranteză.</div>
</li>
<li class="level2"><div class="li"> Nu puneți passphrase pe cheie. Dacă puneți, la autentificare, în loc de parola utilizatorului remote, vi se va cere passphrase-ul cheii.</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Folosiți <strong><code>ssh-copy-id</code></strong> pentru a copia cheia pe mașina virtuală.  Destinația este în același format cu cea acceptată de <strong><code>ssh</code></strong>.</div>
</li>
<li class="level1"><div class="li"> Folosiți <strong><code>ssh</code></strong>. Nu ar trebui să vi se mai ceară o parolă.</div>
</li>
</ul>

<p>
Cheile generate (publică și privată) sunt pe mașina fizică în directorul <strong><code>~/.ssh</code></strong>. Vizualizați-le. Comparați cheia publică de pe mașina fizică cu conținutul fișierului <strong><code>~/.ssh/authorized_keys</code></strong> de pe mașina virtuală.
</p>

<p>
<p><div class="notetip">
În cazul în care primiți eroarea: <code>Agent admitted failure to sign using key</code> folosiți comanda <strong><code>ssh-add</code></strong> fără parametri pentru a trece peste această problemă.

</div></p>
</p>

</div>
<!-- EDIT21 SECTION "6. Autentificarea SSH folosind chei" [13910-15450] -->
<h2 class="sectionedit22" id="scp_folosind_chei">7. SCP folosind chei</h2>
<div class="level2">

<p>
SCP folosește SSH pentru transfer. Astfel, pentru că acum vă puteți autentifica fără parolă pe <code>lucas.local</code>, puteți folosi și <code>scp</code> fără parolă.
</p>

<p>
Copiați directorul <code>/var/starwars</code> de pe mașina virtuală pe sistemul fizic.
</p>
<ul>
<li class="level1"><div class="li"> Folosiți scp ca utilizator <code>lucas</code>.</div>
</li>
<li class="level1"><div class="li"> Puteți specifica, după partea de host, o cale absolută pe disc.</div>
</li>
<li class="level1"><div class="li"> Va trebui, de asemenea, să folosiți un parametru al <code>scp</code> pentru a copia recursiv. Folosiți manualul.</div>
</li>
</ul>

</div>
<!-- EDIT22 SECTION "7. SCP folosind chei" [15451-16042] -->
<h2 class="sectionedit23" id="bittorrent">8. BitTorrent</h2>
<div class="level2">

<p>
Descărcați fișierul torrent de <a href="http://cdimage.debian.org/debian-cd/6.0.6/amd64/bt-cd/debian-6.0.6-amd64-CD-1.iso.torrent" class="urlextern" title="http://cdimage.debian.org/debian-cd/6.0.6/amd64/bt-cd/debian-6.0.6-amd64-CD-1.iso.torrent"  rel="nofollow">aici</a>. Folosiți <strong>Transmission</strong>, clientul implicit de BitTorrent pe mașinile din laborator, pentru a descărca imaginea de instalare pentru Debian stable (Squeeze).
</p>

<p>
Puteți vedea utilizatorii de la care descărcați părti din fișier, dând click dreapta pe el din interfața Transmission &gt; Properties &gt; Peers.
</p>

</div>
<!-- EDIT23 SECTION "8. BitTorrent" [16043-16514] -->
<h2 class="sectionedit24" id="netstat">9. Netstat</h2>
<div class="level2">

<p>
Inspectați porturile deschise de pe <strong>mașina virtuală</strong>. Folosiți <code>netstat</code>.
</p>
<ul>
<li class="level1"><div class="li"> Listați doar porturile TCP în starea <em>listening</em>.</div>
</li>
<li class="level1"><div class="li"> Afișați valorile numerice ale porturilor.</div>
</li>
</ul>

<p>
Corelați numărul portului cu exercițiul la care a fost folosit serviciul corespunzător.
</p>

</div>
<!-- EDIT24 SECTION "9. Netstat" [16515-16882] -->
<h2 class="sectionedit25" id="inspectarea_traficului_de_retea_wireshark">10. Inspectarea traficului de rețea. Wireshark</h2>
<div class="level2">

<p>
<p><div class="notetip">
Folosiți mașina fizică.

</div></p>
</p>
<ul>
<li class="level1"><div class="li"> Wireshark este un program care capturează și analizează traficul de rețea. Instalați-l și porniți-l ca <code>root</code>. Pornirea ca root este necesară pentru a putea captura pachete.</div>
</li>
<li class="level1"><div class="li"> Folosiți butonul din stânga toolbar-ului (<em>List available interfaces</em>). Selectați interfața <code>vmnet8</code>.</div>
</li>
<li class="level1"><div class="li"> Accesați <a href="ftp://student:uso@lucas.local/obiwan.bin" class="urlextern" title="ftp://student:uso@lucas.local/obiwan.bin"  rel="nofollow">ftp://student:uso@lucas.local/obiwan.bin</a> folosind <strong>Chromium Web Browser</strong>. Observați că apar în Wireshark în timp real pachetele schimbate.</div>
</li>
<li class="level1"><div class="li"> Opriți captura de pachete.</div>
</li>
<li class="level1"><div class="li"> Analizați traficul. Descoperiți pachetul care trimite parola. Observați că este trimisă în clar. Oricine ascultă pe linie o poate vedea.</div>
</li>
</ul>

<p>
<p><div class="notetip">
Nu lăsați niciodată pornită captura de pachete în Wireshark mai mult decât este necesar. Vor fi capturate multe pachete și veți rămâne rapid fără memorie.

</div></p>
</p>

</div>
<!-- EDIT25 SECTION "10. Inspectarea traficului de rețea. Wireshark" [16883-17820] -->
<h2 class="sectionedit26" id="client_http_in_linia_de_comanda">11. Client HTTP în linia de comandă</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> <code>wget</code> este un client neinteractiv pentru protocolul HTTP.</div>
</li>
<li class="level1"><div class="li"> Folosiți-l pentru a descărca fișierul de la <a href="http://lucas.local:80/macewindu.bin" class="urlextern" title="http://lucas.local:80/macewindu.bin"  rel="nofollow">http://lucas.local:80/macewindu.bin</a>.</div>
</li>
</ul>

<p>
<p><div class="notetip">
</p>
<ul>
<li class="level1"><div class="li"> Avantajul <code>wget</code> este că poate fi folosit în script-uri shell.</div>
</li>
<li class="level1"><div class="li"> Există, de asemenea, clienți interactivi în mod text: <code>links</code>, <code>elinks</code>, <code>lynx</code>, <code>w3m</code>.</div>
</li>
<li class="level1"><div class="li"> Un alt tool interesant este <a href="http://en.wikipedia.org/wiki/HTTrack" class="urlextern" title="http://en.wikipedia.org/wiki/HTTrack"  rel="nofollow">HTTrack</a>.</div>
</li>
</ul>

<p>

</div></p>
</p>

</div>
<!-- EDIT26 SECTION "11. Client HTTP în linia de comandă" [17821-18389] -->
<h2 class="sectionedit27" id="configurari_avansate_firefox">12. Configurări avansate Firefox</h2>
<div class="level2">

<p>
<strong>a)</strong> Folosiți <code><a href="http://kb.mozillazine.org/Firefox_:_FAQs_:_About:config_Entries" class="urlextern" title="http://kb.mozillazine.org/Firefox_:_FAQs_:_About:config_Entries"  rel="nofollow">about:config</a></code> pentru a configura modul de afișare al butonului de închidere pentru tab-uri. Configurați Firefox astfel încât să fie afișat un singur buton de închidere a tab-ului, la sfârșitul tab bar-ului.
</p>

<p>
<strong>b)</strong>  Utilizând pagina de configurări interne Firefox about:config, setați ca atunci când căutați ceva folosind motorul de căutare extern (căsuța de căutare din dreapta căsuței de adresă), să se deschidă o fereastră nouă.
</p>

<p>
<p><div class="notetip">Căutați, folosind filtrul, variabila <code>browser.search.openintab</code>.
</div></p>
</p>

</div>
<!-- EDIT27 SECTION "12. Configurări avansate Firefox" [18390-19071] -->
<h2 class="sectionedit28" id="netcat_pentru_transfer_de_fisiere">13. Netcat pentru transfer de fișiere</h2>
<div class="level2">

<p>
Folosiți <code>netcat</code> (executabilul se mai numește și <code>nc</code>) pentru a transfera un fișier între mașina fizică și cea virtuală.
</p>

<p>
<p><div class="notetip">
Folosiți parametrul `-p` pentru a specifica portul pe care să asculte în mașina virtuală. Folosiți manualul netcat pentru a afla parametrii necesari.

</div></p>
</p>

</div>
<!-- EDIT28 SECTION "13. Netcat pentru transfer de fișiere" [19072-19570] -->
<h2 class="sectionedit29" id="instant_http_server">14. Instant HTTP server</h2>
<div class="level2">

<p>
Puteți porni un server HTTP read-only, restricționat la directorul curent, folosind
</p>
<pre class="code bash"><span class="co4">student@uso:~$ </span>python <span class="re5">-m</span> SimpleHTTPServer <span class="br0">&#91;</span>port<span class="br0">&#93;</span></pre>

<p>
Dacă ultimul parametru lipsește, serverul este pornit pe portul 8000. Puteți opri server-ul folosind Ctrl-C.
</p>

<p>
Aceasta este o metodă foarte rapidă de a transfera fișiere mari între două mașini Linux și Windows, fără a vă complica cu file-sharing sau transfer prin IM.
</p>

<p>
Testați serverul HTTP într-un browser.
</p>

</div>
<!-- EDIT29 SECTION "14. Instant HTTP server" [19571-20086] -->
<h2 class="sectionedit30" id="scanarea_retelei_nmap">15. Scanarea rețelei. nmap</h2>
<div class="level2">

<p>
Folosiți <code>nmap</code> pentru a scana porturile deschise și versiunile serviciilor care rulează pe mașina <code>lucas.local</code>.
</p>

</div>
<!-- EDIT30 SECTION "15. Scanarea rețelei. nmap" [20087-] --></div>
</body>
</html>

    
    

<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8" />
  <title>so-etti:laboratoare:lab4</title>
<meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="date" content="2013-04-04T23:30:36+0300"/>
<meta name="keywords" content="so-etti,laboratoare,lab4"/>
<link rel="search" type="application/opensearchdescription+xml" href="../../../../lib/exe/opensearch.php" title="CS Open CourseWare"/>
<link rel="start" href="../../../../../courses.1.html"/>
<link rel="alternate" type="application/rss+xml" title="Recent Changes" href="../../../../feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current Namespace" href="../../../../feed.php%3Fmode=list&amp;ns=so-etti:laboratoare"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="lab4.html"/>
<link rel="canonical" href="../../../../so-etti/laboratoare/lab4.html"/>
<link rel="stylesheet" type="text/css" href="../../../../lib/exe/css.php%3Ft=arctic&amp;tseed=1476798676.css"/>
<script type="text/javascript">/*<![CDATA[*/var NS='so-etti:laboratoare';var JSINFO = {"id":"so-etti:laboratoare:lab4","namespace":"so-etti:laboratoare","isadmin":0,"isauth":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="../../../../lib/exe/js.php%3Ftseed=1476798676"></script>
<script type="text/x-mathjax-config">/*<![CDATA[*/MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ["$","$"], ["\\(","\\)"] ],
        displayMath: [ ["$$","$$"], ["\\[","\\]"] ],
        processEscapes: true
    }
});
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
<script type="text/javascript">/*<![CDATA[*/
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
		  
/*!]]>*/</script>
<script type="text/javascript">/*<![CDATA[*/
var pageTracker = _gat._getTracker("UA-38383934-1");
pageTracker._initData();
pageTracker._trackPageview();
		  
/*!]]>*/</script>
</head>
<body>
<div class="dokuwiki export">
<!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="lab4.html#laborator_04_-_drepturile_fisierelor_si_utilizatori">Laborator 04 - Drepturile fisierelor si utilizatori</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="lab4.html#cheat_sheet">Cheat sheet</a></div></li>
<li class="level2"><div class="li"><a href="lab4.html#suport_laborator">Suport laborator</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="lab4.html#introducere">Introducere</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="lab4.html#taskuri_administrative_root_sudo_su">Taskuri administrative. root. sudo. su</a></div></li>
<li class="level2"><div class="li"><a href="lab4.html#conturi_de_utilizator">Conturi de utilizator</a></div></li>
<li class="level2"><div class="li"><a href="lab4.html#permisiuni">Permisiuni</a></div></li>
<li class="level2"><div class="li"><a href="lab4.html#grupuri">Grupuri</a></div></li>
<li class="level2"><div class="li"><a href="lab4.html#parole">Parole</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="lab4.html#exercitii">Exerciții</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="lab4.html#permisiuni1">1 Permisiuni</a></div></li>
<li class="level2"><div class="li"><a href="lab4.html#permisiuni_de_grup">2. Permisiuni de grup</a></div></li>
<li class="level2"><div class="li"><a href="lab4.html#home_dirs">3. Home dirs</a></div></li>
<li class="level2"><div class="li"><a href="lab4.html#bashrc_aliasuri">4. bashrc. Aliasuri</a></div></li>
<li class="level2"><div class="li"><a href="lab4.html#chmod_numeric">5. chmod numeric</a></div></li>
<li class="level2"><div class="li"><a href="lab4.html#chown">6. chown</a></div></li>
<li class="level2"><div class="li"><a href="lab4.html#sudo">7. sudo</a></div></li>
<li class="level2"><div class="li"><a href="lab4.html#useradd">8. useradd</a></div></li>
<li class="level2"><div class="li"><a href="lab4.html#date_despre_utilizatorii_autentificati">9. Date despre utilizatorii autentificați</a></div></li>
<li class="level2"><div class="li"><a href="lab4.html#copierea_de_fisiere_la_distanta">10. Copierea de fișiere la distanță</a></div></li>
</ul></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="laborator_04_-_drepturile_fisierelor_si_utilizatori">Laborator 04 - Drepturile fisierelor si utilizatori</h1>
<div class="level1">

</div>
<!-- EDIT1 SECTION "Laborator 04 - Drepturile fisierelor si utilizatori" [18-104] -->
<h2 class="sectionedit2" id="cheat_sheet">Cheat sheet</h2>
<div class="level2">
<div class="table sectionedit3"><table class="inline">
	<tr class="row0">
		<th class="col0 leftalign"> Comandă         </th><th class="col1 leftalign"> Descriere scurtă                                               </th>
	</tr>
	<tr class="row1">
		<td class="col0 leftalign"> <strong><code>su</code></strong>     </td><td class="col1 leftalign"> switch user - schimbă utilizatorul în sesiunea curentă          </td>
	</tr>
	<tr class="row2">
		<td class="col0 leftalign"> <strong><code>sudo</code></strong>   </td><td class="col1 leftalign"> rulează o comandă ca <code>root</code>                                   </td>
	</tr>
	<tr class="row3">
		<td class="col0"> <strong><code>whoami</code></strong> </td><td class="col1 leftalign"> afișează utilizatorul curent                                    </td>
	</tr>
	<tr class="row4">
		<td class="col0"> <strong><code>adduser</code></strong></td><td class="col1 leftalign"> adaugă un utilizator                                            </td>
	</tr>
	<tr class="row5">
		<td class="col0"> <strong><code>deluser</code></strong></td><td class="col1 leftalign"> șterge un utilizator                                            </td>
	</tr>
	<tr class="row6">
		<td class="col0 leftalign"> <strong><code>chmod</code></strong>  </td><td class="col1 leftalign"> schimbă permisiunile unui fișier/director                       </td>
	</tr>
	<tr class="row7">
		<td class="col0 leftalign"> <strong><code>chown</code></strong>  </td><td class="col1"> schimbă utilizatorul proprietar (owner) al unui fișier/director </td>
	</tr>
	<tr class="row8">
		<td class="col0 leftalign"> <strong><code>chgrp</code></strong>  </td><td class="col1 leftalign"> schimbă grupul unui fișier/director                             </td>
	</tr>
	<tr class="row9">
		<td class="col0"> <strong><code>passwd</code></strong> </td><td class="col1 leftalign"> modifică parola                                                 </td>
	</tr>
	<tr class="row10">
		<td class="col0 leftalign"> <strong><code>ssh</code></strong>    </td><td class="col1 leftalign"> conectare la distanță                                           </td>
	</tr>
	<tr class="row11">
		<td class="col0 leftalign"> <strong><code>scp</code></strong>    </td><td class="col1 leftalign"> copiere la distanță                                             </td>
	</tr>
</table></div>
<!-- EDIT3 TABLE [129-1170] -->
</div>
<!-- EDIT2 SECTION "Cheat sheet" [105-1171] -->
<h2 class="sectionedit4" id="suport_laborator">Suport laborator</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> <a href="http://books.google.com/books?id=_JFGzyRxQGcC&amp;lpg=PA532&amp;pg=PA53#v=onepage&amp;q&amp;f=false" class="urlextern" title="http://books.google.com/books?id=_JFGzyRxQGcC&amp;lpg=PA532&amp;pg=PA53#v=onepage&amp;q&amp;f=false"  rel="nofollow">3. Gestiunea pachetelor și utilizatorilor</a></div>
</li>
</ul>

<p>
Puteți urmări tutorialul video corespunzător laboratorului făcut de <a href="http://itassistant.org/diverse/utilizarea-sistemelor-de-operare/utilizarea-sistemelor-de-operare-3.html" class="urlextern" title="http://itassistant.org/diverse/utilizarea-sistemelor-de-operare/utilizarea-sistemelor-de-operare-3.html"  rel="nofollow">IT Assistant</a>.
</p>

</div>
<!-- EDIT4 SECTION "Suport laborator" [1172-1532] -->
<h1 class="sectionedit5" id="introducere">Introducere</h1>
<div class="level1">

</div>
<!-- EDIT5 SECTION "Introducere" [1533-1559] -->
<h2 class="sectionedit6" id="taskuri_administrative_root_sudo_su">Taskuri administrative. root. sudo. su</h2>
<div class="level2">

<p>
Pentru a solicita închiderea calculatorului din linia de comandă, putem folosi comanda:
</p>
<pre class="code bash">halt</pre>

<p>
Rulată din contul <code>student</code>, vi se va spune că ar trebui să fiți <code>root</code> pentru a o putea rula.
</p>

<p>
<code>root</code> este un utilizator privilegiat. Doar el poate rula taskuri administrative. Practic, sistemul îi aparține lui.
</p>

<p>
Pentru a deveni un alt utilizator se poate folosi comanda <code>su</code> (switch user). Fără nici un parametru suplimentar, această comandă vă permite accesarea contului de root și vă cere parola acestui utilizator. Ar fi riscant ca toată lumea să cunoască această parolă. De aceea, se oferă posibilitatea de a obține drepturi administrative folosind parola proprie, prin intermediul comenzii <code>sudo</code>.
</p>

<p>
În acest caz, comanda va fi:
</p>
<pre class="code bash"><span class="kw2">sudo</span> <span class="kw2">su</span></pre>

<p>
<p><div class="noteclassic">Observați că ni se cere parola utilizatorului <code>student</code>, <em>NU</em> a utilizatorului privilegiat.
</div></p>
</p>

<p>
<a href="../../../../uso/laboratoare/laborator-01.html#linia_de_comanda" class="urlextern" title="http://ocw.cs.pub.ro/courses/uso/laboratoare/laborator-01#linia_de_comanda"  rel="nofollow">Promptul</a> se schimbă pentru a indica faptul că sunteți un utilizator privilegiat. Caracterul <strong><code>$</code></strong> indică un utilizator neprivilegiat, caracterul <strong><code>#</code></strong> indică un utilizator privilegiat.
</p>

<p>
<p><div class="notewarning">
Nu vă bazați întodeauna pe ce indică promptul. Poate fi configurat altfel!

</div></p>
</p>

<p>
Pentru a afla în orice moment ca ce utilizator suntem autentificați, indiferent de ceea ce spune promptul putem folosi comanda:
</p>
<pre class="code bash"><span class="kw2">whoami</span></pre>

<p>
Pentru a vă întoarce în shell-ul deținut de utilizatorul inițial, folosim:
</p>
<pre class="code bash"><span class="kw3">exit</span></pre>

<p>
<p><div class="noteclassic">
Se recomandă să nu folosiți contul privilegiat decât atât cât este necesar. Dacă folosiți <code>sudo su</code>, părăsiți acest cont imediat ce ați terminat taskurile ce aveau nevoie de acest cont!

</div></p>
</p>

<p>
Atunci când schimbăm utilizatorul, pornim un alt shell ca noul utilizator. Dacă dorim să încărcăm mediul specific al utilizatorului, putem folosi parametrul <em>-</em> al comenzii <strong><code>su</code></strong>.
</p>
<pre class="code bash"><span class="kw2">sudo</span> <span class="kw2">su</span> -
<span class="kw3">pwd</span></pre>

<p>
Directorul curent este acum home-ul utilizatorului <strong>root</strong>, adică <strong><code>/root</code></strong>.
</p>

<p>
<p><div class="notetip">Mediul curent este salvat și va fi restaurat după comanda <strong><code>exit</code></strong>. Prin mediu se înțeleg: modul de afișare al promptului, alias-uri, directorul home și variabile specifice fiecărui utilizator
</div></p>
</p>

</div>
<!-- EDIT6 SECTION "Taskuri administrative. root. sudo. su" [1560-4484] -->
<h2 class="sectionedit7" id="conturi_de_utilizator">Conturi de utilizator</h2>
<div class="level2">

<p>
Pentru a crea un utilizator cu numele <code>numeutilizator</code> putem folosi comanda <strong><code>adduser</code></strong>:
</p>
<pre class="code bash">adduser numeutilizator</pre>

<p>
Vi se va zice că trebuie să fiți <code>root</code>. Din motive de securitate, se recomandă să nu folosim contul de <code>root</code> mai mult decât minimul necesar.
</p>

<p>
Pentru comenzi simple, se recomandă folosirea formei <code>sudo &lt;comanda&gt;</code> cu semnificația: <em>execută comanda <code>&lt;comanda&gt;</code> ca utilizator privilegiat</em>.
</p>
<pre class="code bash"><span class="kw2">sudo</span> adduser numeutilizator</pre>

<p>
Comanda <strong><code>adduser</code></strong>, interactivă va cere stabilirea parolei noului utilizator. Ignorați ultimele câmpuri (informațiile pentru utilizatorul nou creat) apăsând tasta ENTER.
</p>

<p>
Pentru a vă loga ca utilizatarul nou creat, puteți folosi comanda <strong><code>su</code></strong>.
</p>
<pre class="code bash"><span class="kw2">su</span> - numeutilizator</pre>

<p>
Puteți șterge un utilizator folosind comanda <strong><code>deluser</code></strong>:
</p>
<pre class="code bash"><span class="kw2">sudo</span> deluser numeutilizator</pre>

</div>
<!-- EDIT7 SECTION "Conturi de utilizator" [4485-5434] -->
<h2 class="sectionedit8" id="permisiuni">Permisiuni</h2>
<div class="level2">

<p>
Permisiunile controlează accesul utilizatorilor la fișierele și directoarele din sistem.
</p>

<p>
<p><div class="noteimportant">
Pornind de la imaginea din laboratorul 2, avem următoarea diagramă semnificativă (dreptunghiurile colorate au fost prezentate în laboratorul 2)
</p>

<p>
<a href="http://ocw.cs.pub.ro/courses/lib/exe/fetch.php?hash=3c7d6e&amp;cache=nocache&amp;media=http%3A%2F%2Felf.cs.pub.ro%2Fuso%2Fstore%2F03_ls-l.png" class="media" title="http://elf.cs.pub.ro/uso/store/03_ls-l.png"><img src="http://ocw.cs.pub.ro/courses/lib/exe/fetch.php?hash=3c7d6e&amp;w=650&amp;cache=nocache&amp;tok=e66b9a&amp;media=http%3A%2F%2Felf.cs.pub.ro%2Fuso%2Fstore%2F03_ls-l.png" class="media" alt="" width="650" /></a>
</p>

<p>
Permisiunile sunt împărțite în 3 grupe:
</p>
<ul>
<li class="level1"><div class="li"> pentru utilizator (cel trecut în coloana reprezentând deținătorul fișierului)</div>
</li>
<li class="level1"><div class="li"> pentru grup (cel trecut în coloana pentru grupul fișierului): toți utilizatorii acelui grup au aceleași permisiuni</div>
</li>
<li class="level1"><div class="li"> pentru ceilalți utilizatori</div>
</li>
</ul>

<p>
Fiecare grup este format din 3 caractere:
</p>
<ul>
<li class="level1"><div class="li"> un caracter r pentru dreptul de a citi sau - dacă fișierul nu poate fi citit</div>
</li>
<li class="level1"><div class="li"> un caracter w pentru dreptul de a modifica fișierul sau - dacă acest drept nu există</div>
</li>
<li class="level1"><div class="li"> un caracter x pentru posibilitatea de a executa fișierul, - dacă nu se poate executa fișierul</div>
</li>
</ul>

<p>
Pentru a modifica permsiunile folosim comanda <code>chmod</code> (change mode).
</p>

<p>
În formă literală, permisiunile se pot da sub forma <code>[ugoa]{+-=}perm</code>:
</p>
<ul>
<li class="level1"><div class="li"> opțional, un caracter din mulțimea {u, g, o, a} cu semnificația:</div>
<ul>
<li class="level2"><div class="li"> u - modifică permisiunile pentru utilizator</div>
</li>
<li class="level2"><div class="li"> g - modifică permisiunile pentru grup</div>
</li>
<li class="level2"><div class="li"> o - modifică permisiunile pentru ceilalți utilizatori (others)</div>
</li>
<li class="level2"><div class="li"> a - modifică permisiunile pentru toți utilizatorii (all)</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> un caracter din setul {+, -, =} cu semnficația:</div>
<ul>
<li class="level2"><div class="li"> <code>+</code> - adaugă permsiunile următoare la cele existente</div>
</li>
<li class="level2"><div class="li"> <code>-</code> - elimină drepturile următoare din cele existente</div>
</li>
<li class="level2"><div class="li"> <code>=</code> - setează permisiunile la valoarea dată în continuare</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> permisiunile, exprimate cu caractere din mulțimea {r, w, x} cu semnificația:</div>
<ul>
<li class="level2"><div class="li"> r - dreptul de a citi fișierul sau directorul</div>
</li>
<li class="level2"><div class="li"> w - dreptul de a modifica fișierul sau directorul</div>
</li>
<li class="level2"><div class="li"> x - dreptul de a executa fișierul</div>
</li>
</ul>
</li>
</ul>

<p>

</div></p>
</p>

<p>
Pe un fișier <code>test_perms</code>, creat cu (și având permisiuni implicite):
</p>
<pre class="code bash"><span class="kw2">touch</span> test_perms
<span class="kw2">ls</span> <span class="re5">-l</span> test_perms</pre>

<p>
observăm că:
</p>
<pre class="code bash"><span class="kw2">chmod</span> <span class="re2">a</span>= test_perms
<span class="kw2">ls</span> <span class="re5">-l</span> test_perms</pre>

<p>
- s-au revocat toate permisiunile
</p>
<pre class="code bash"><span class="kw2">chmod</span> +r test_perms
<span class="kw2">ls</span> <span class="re5">-l</span> test_perms</pre>

<p>
- s-a dat drept de read pentru fiecare grup: user, group, others
</p>
<pre class="code bash"><span class="kw2">chmod</span> u+<span class="kw2">w</span> test_perms
<span class="kw2">ls</span> <span class="re5">-l</span> test_perms</pre>

<p>
- s-a dat drept de write  pentru owner
</p>
<pre class="code bash"><span class="kw2">chmod</span> u+x,o+<span class="kw2">w</span> test_perms
<span class="kw2">ls</span> <span class="re5">-l</span> test_perms</pre>

<p>
- s-a dat drept de execuție pentru owner și de scriere pentru others.
</p>

</div>
<!-- EDIT8 SECTION "Permisiuni" [5435-8119] -->
<h2 class="sectionedit9" id="grupuri">Grupuri</h2>
<div class="level2">

<p>
Până acum, am manipulat drepturile unui utilizator la nivel de proprietar (owner) și restul lumii (others). În multe ocazii, vom dori să acordăm aceleași drepturi unui grup de utilizatori, diferit the <em>restul utilizatorilor din sistem</em>.
</p>

<p>
Pentru a adăuga un grup în sistem, vom folosi comanda:
</p>
<pre class="code bash"><span class="kw2">sudo</span> addgroup numegrup</pre>

<p>
Pentru a adăuga în grupul <strong>numegrup</strong> utilizatorul <strong>student</strong>, vom folosi:
</p>
<pre class="code bash"><span class="kw2">sudo</span> adduser student numegrup</pre>

<p>
Pentru a schimba grupul unui fișier, folosim <code>chgrp</code>:
</p>
<pre class="code bash"><span class="kw2">sudo</span> <span class="kw2">chgrp</span> numegrup fisier</pre>

</div>
<!-- EDIT9 SECTION "Grupuri" [8120-8724] -->
<h2 class="sectionedit10" id="parole">Parole</h2>
<div class="level2">

<p>
Comanda <code>passwd</code> este folosită pentru a schimba parola. Fără niciun parametru, va schimba parola utilizatorului curent. Cu parametru un nume de utilizator, va încerca schimbarea parolei acelui utilizator, solicitând parola actuală.
</p>

<p>
Rulată de către <em>root</em>, nu va solicita parola curentă.
</p>
<pre class="code bash"><span class="kw2">sudo</span> <span class="kw2">passwd</span> numeutilizator</pre>

<p>
- va schimba parola lui <strong>numeutilizator</strong>, fără a solicita parola curenta.
</p>

</div>
<!-- EDIT10 SECTION "Parole" [8725-9223] -->
<h1 class="sectionedit11" id="exercitii">Exerciții</h1>
<div class="level1">

</div>
<!-- EDIT11 SECTION "Exerciții" [9224-9250] -->
<h2 class="sectionedit12" id="permisiuni1">1 Permisiuni</h2>
<div class="level2">

<p>
Creați utilizatorii: <strong>obama</strong>, <strong>cameron</strong> și <strong>putin</strong>, folosind ca parole chiar numele de utilizator, adică <strong>obama</strong>, <strong>cameron</strong> și <strong>putin</strong>.
</p>
<div class="solution"><div class="solution_title"><span class="title_text">Rezolvare</span></div><div class="solution_contents"><pre class="code bash"><span class="kw2">sudo</span> <span class="kw2">su</span>
adduser obama
adduser cameron
adduser putin</pre>
</div></div>

<p>
Autentificați-vă ca utilizatorul <strong>obama</strong> și creați în home-ul acestuia un fișier <strong><code>launchcodes</code></strong> având conținutul “123456789”.
</p>
<div class="solution"><div class="solution_title"><span class="title_text">Rezolvare</span></div><div class="solution_contents"><pre class="code bash"><span class="kw2">su</span> - obama
<span class="kw3">echo</span> <span class="st0">&quot;124365879&quot;</span> <span class="sy0">&gt;</span> launchcodes</pre>
</div></div>

<p>
Implicit, acest fișier este accesibil și altor utilizatori. 
</p>

<p>
Testați acest lucru, autentificându-vă ca <strong>putin</strong> și <strong>cameron</strong>.
</p>
<div class="solution"><div class="solution_title"><span class="title_text">Rezolvare</span></div><div class="solution_contents"><pre class="code bash"><span class="kw2">su</span> cameron
<span class="kw2">cat</span> <span class="sy0">/</span>home<span class="sy0">/</span>obama<span class="sy0">/</span>launchcodes
<span class="kw3">exit</span>
&nbsp;
<span class="kw2">su</span> putin
<span class="kw2">cat</span> <span class="sy0">/</span>home<span class="sy0">/</span>obama<span class="sy0">/</span>launchcodes
<span class="kw3">exit</span></pre>
</div></div>

<p>
Afișați permisiunile curente ale fișierului.
</p>
<div class="solution"><div class="solution_title"><span class="title_text">Rezolvare</span></div><div class="solution_contents"><pre class="code bash"><span class="kw2">ls</span> <span class="re5">-l</span> <span class="sy0">/</span>home<span class="sy0">/</span>obama<span class="sy0">/</span>launchcodes</pre>

<p>
va afișa:
<code>-rw-rw-r– 1 obama obama 0 Oct 21 17:47 launchcodes</code>
</p>
</div></div>

<p>
Revocați dreptul de citire pentru alți utilizatori, în afară de <strong>obama</strong>.
</p>
<div class="solution"><div class="solution_title"><span class="title_text">Rezolvare</span></div><div class="solution_contents"><pre class="code bash"><span class="kw2">chmod</span> go-r launchcodes</pre>
</div></div>

</div>
<!-- EDIT12 SECTION "1 Permisiuni" [9251-10356] -->
<h2 class="sectionedit13" id="permisiuni_de_grup">2. Permisiuni de grup</h2>
<div class="level2">

<p>
Creați un grup <strong>nato</strong> și adăugați utilizatorii <strong>cameron</strong> și <strong>obama</strong> în el.
</p>
<div class="solution"><div class="solution_title"><span class="title_text">Rezolvare</span></div><div class="solution_contents"><pre class="code bash"><span class="kw2">sudo</span> <span class="kw2">su</span>
addgroup nato
adduser cameron nato
adduser obama nato</pre>
</div></div>

<p>
Ca utilizatorul <strong>obama</strong>, creați un fișier <strong><code>secrettreaty</code></strong> în home-ul acestuia. 
Stabiliți grupul fișierului nou creat la <strong>nato</strong>.
</p>
<div class="solution"><div class="solution_title"><span class="title_text">Rezolvare</span></div><div class="solution_contents"><pre class="code bash"><span class="kw2">su</span> - obama
<span class="kw2">touch</span> secrettraty
<span class="kw3">exit</span>
<span class="kw2">sudo</span> <span class="kw2">chgrp</span> nato <span class="sy0">/</span>home<span class="sy0">/</span>obama<span class="sy0">/</span>secrettreaty</pre>
</div></div>

<p>
Modificați permisiunile astfel încât alți utilizatori (<strong>putin</strong> de exemplu, dar și alții) să nu poată citi fișierul, iar cei din grupul <strong>nato</strong> să îl poată citi și modifica.
</p>
<div class="solution"><div class="solution_title"><span class="title_text">Rezolvare</span></div><div class="solution_contents"><pre class="code bash"><span class="kw2">su</span> - obama
<span class="kw2">chmod</span> <span class="re2">o</span>=,<span class="re2">g</span>=rw secrettreaty
<span class="kw3">exit</span></pre>
</div></div>

<p>
Afișați proprietarul, grupul și permisiunile fișierului <strong><code>secrettreaty</code></strong>.
</p>
<div class="solution"><div class="solution_title"><span class="title_text">Rezolvare</span></div><div class="solution_contents"><pre class="code bash"><span class="kw2">ls</span> <span class="re5">-l</span> <span class="sy0">/</span>home<span class="sy0">/</span>obama<span class="sy0">/</span>secrettreaty</pre>
</div></div>

</div>
<!-- EDIT13 SECTION "2. Permisiuni de grup" [10357-11283] -->
<h2 class="sectionedit14" id="home_dirs">3. Home dirs</h2>
<div class="level2">

<p>
Logați-vă ca fiecare dintre utilizatorii <strong>obama</strong> și <strong>cameron</strong> utilizând <code>su -</code>. Folosiți <strong><code>pwd</code></strong> pentru a vedea în ce director este plasat utilizatorul în mod implicit: directorul <em class="u">home</em>.
</p>
<div class="solution"><div class="solution_title"><span class="title_text">Rezolvare</span></div><div class="solution_contents"><pre class="code bash"><span class="kw2">su</span> - obama
<span class="kw3">pwd</span>
<span class="kw3">exit</span>
<span class="kw2">su</span> - cameron 
<span class="kw3">pwd</span>
<span class="kw3">exit</span></pre>
</div></div>

<p>
Fiind logați ca <code>obama</code> logați-vă ca <code>cameron</code> utilizând <code>su</code>. Navigați spre directorul home al utilizatorului curent, utilizând <code>cd ~</code>.
</p>
<div class="solution"><div class="solution_title"><span class="title_text">Rezolvare</span></div><div class="solution_contents"><pre class="code bash"><span class="kw2">su</span> obama
<span class="kw2">su</span> cameron
<span class="kw3">pwd</span> 
<span class="kw3">cd</span> ~
<span class="kw3">pwd</span>
<span class="kw3">exit</span>
<span class="kw3">exit</span></pre>
</div></div>

<p>
Logați ca <code>cameron</code> navigați către home-ul lui <code>obama</code> utilizând <code>cd ~obama</code>.
</p>
<div class="solution"><div class="solution_title"><span class="title_text">Rezolvare</span></div><div class="solution_contents"><pre class="code">su cameron
cd ~obama
pwd
exit</pre>
</div></div>

<p>
Determinați directorul home pentru utilizatorul privilegiat (<strong>root</strong>), utilizând una din metodele din cadrul acestei secțiuni.
</p>
<div class="solution"><div class="solution_title"><span class="title_text">Rezolvare</span></div><div class="solution_contents"><pre class="code bash"><span class="kw2">sudo</span> <span class="kw2">su</span> -
<span class="kw3">pwd</span>
<span class="kw3">exit</span></pre>
</div></div>

<p>
De ce nu este <code>/</code> directorul căutat?
</p>
<div class="solution"><div class="solution_title"><span class="title_text">Rezolvare</span></div><div class="solution_contents"><code>/</code> este rădăcina arborelui de fișiere. Directorul <code>~root</code> este un director din arbore, și anume <strong><code>/root</code></strong>.
</div></div>

</div>
<!-- EDIT14 SECTION "3. Home dirs" [11284-12461] -->
<h2 class="sectionedit15" id="bashrc_aliasuri">4. bashrc. Aliasuri</h2>
<div class="level2">

<p>
Dacă folosiți <code>type ls</code> veți observa că <code>ls</code> est e un alias pentru 
</p>
<pre class="code">ls --color=auto</pre>

<p>
 (ceea ce îi spune să afișeze directoarele și fișierele speciale colorat).
</p>

<p>
<p><div class="noteclassic">
Puteți lista aliasurile existente utilizând comanda <code>alias</code>. De asemenea puteți seta un nou alias, cu <code>alias NUME_ALIAS=“COMANDA”</code>

</div></p>
</p>

<p>
Utilizați <code>alias</code> pentru a face ca <code>lal</code> să fie un alias pentru <code>ls -al</code>.
</p>
<div class="solution"><div class="solution_title"><span class="title_text">Rezolvare</span></div><div class="solution_contents"><pre class="code bash"><span class="kw3">alias</span> <span class="re2">lal</span>=<span class="st0">&quot;ls -al&quot;</span>
lal</pre>
</div></div>

<p>
Se păstrează alias-ul și în alt terminal/tab?
</p>

<p>
Vizualizați fișierul de configurare bash din home-ul utilizatorului student (<strong><code>~/.bashrc</code></strong>) și adăugați definiția aliasului anterior definit, la sfârșitul fișierului.
</p>
<div class="solution"><div class="solution_title"><span class="title_text">Rezolvare</span></div><div class="solution_contents">Se modifică <code>.bashrc</code> și se adaugă în el linia:
<pre class="code bash"><span class="kw3">alias</span> <span class="re2">lal</span>=<span class="st0">&quot;ls -al&quot;</span></pre>
</div></div>

<p>
Verificați că alias-ul se păstrează acum și în alt terminal.
</p>

<p>
<p><div class="noteclassic">
Configurările realizate din linia de comandă sunt temporare (se pierd după un restart al sistemului sau la pornirea altui terminal, în funcție de tipul configurării).
</p>

<p>
Pentru configurările permanente trebuie <em class="u">întotdeauna</em> modificat un fișier.

</div></p>
</p>

</div>
<!-- EDIT15 SECTION "4. bashrc. Aliasuri" [12462-13669] -->
<h2 class="sectionedit16" id="chmod_numeric">5. chmod numeric</h2>
<div class="level2">

<p>
<code>chmod</code> permite specificarea drepturilor într-o formă numerică, mai comodă. Permisiunile unui fișier se exprimă ca un număr în baza 8 de 3 cifre. Pentru a face corespondența între numere și permisiuni, se realizează trecerea în baza 2 a fiecărei cifre în parte. Un bit 0 semnifica absența permisiunii respective, așa cum arată și figura:
</p>

<p>
<a href="http://ocw.cs.pub.ro/courses/lib/exe/fetch.php?hash=ced66b&amp;media=http%3A%2F%2Felf.cs.pub.ro%2Fuso%2Fstore%2F03_numeric.png" class="media" title="http://elf.cs.pub.ro/uso/store/03_numeric.png"><img src="http://ocw.cs.pub.ro/courses/lib/exe/fetch.php?hash=ced66b&amp;media=http%3A%2F%2Felf.cs.pub.ro%2Fuso%2Fstore%2F03_numeric.png" class="media" alt="" /></a>
</p>

<p>
Creați utilizatorii <code>ana</code>, <code>gigel</code>, <code>chuck</code>.
</p>
<div class="solution"><div class="solution_title"><span class="title_text">Rezolvare</span></div><div class="solution_contents"><pre class="code bash"><span class="kw2">sudo</span> adduser ana
<span class="kw2">sudo</span> adduser gigel
<span class="kw2">sudo</span> adduser chuck</pre>
</div></div>

<p>
Autentificați-vă ca utilizatorul <code>ana</code>.
</p>

<p>
În home, creați fișierele <strong><code>mere</code></strong> și <strong><code>pere</code></strong> conținând, respectiv, textele <code>Ana are mere</code> și <code>Ana are pere</code>.
</p>
<div class="solution"><div class="solution_title"><span class="title_text">Rezolvare</span></div><div class="solution_contents"><pre class="code bash"><span class="kw2">su</span> ana
<span class="kw3">echo</span> <span class="st0">&quot;Ana are mere&quot;</span> <span class="sy0">&gt;</span> ~<span class="sy0">/</span>mere
<span class="kw3">echo</span> <span class="st0">&quot;Ana are pere&quot;</span> <span class="sy0">&gt;</span> ~<span class="sy0">/</span>pere</pre>
</div></div>

<p>
Modificați permisiunea fișierului <code>mere</code> astfel încât <code>gigel</code> să nu-l poată citi dar să-l poată scrie, păstrând nemodificate celelalte permisiuni. Folosiți doar opțiunile numerice pentru <code>chmod</code>.
</p>
<div class="solution"><div class="solution_title"><span class="title_text">Rezolvare</span></div><div class="solution_contents"><pre class="code bash"><span class="kw2">ls</span> <span class="re5">-l</span> ~<span class="sy0">/</span>mere 
<span class="kw2">chmod</span> <span class="nu0">642</span> ~<span class="sy0">/</span>mere
<span class="kw2">ls</span> <span class="re5">-l</span> ~<span class="sy0">/</span>mere </pre>
</div></div>

<p>
Modificați permisiunile fișierului <code>pere</code> astfel încât <code>chuck</code> să-l poată modifica și citi. Folosiți permisiuni numerice. Nu modificați alte permisiuni.
</p>
<div class="solution"><div class="solution_title"><span class="title_text">Rezolvare</span></div><div class="solution_contents"><pre class="code bash"><span class="kw2">ls</span> <span class="re5">-l</span> ~<span class="sy0">/</span>pere 
<span class="kw2">chmod</span> <span class="nu0">646</span> ~<span class="sy0">/</span>pere
<span class="kw2">ls</span> <span class="re5">-l</span> pere </pre>
</div></div>

<p>
Verificați permisiunile.
</p>

<p>
<p><div class="notetip">Permisiunile setate pentru <code>chuck</code> sunt aceleași ca și pentru <code>gigel</code>. Nu puteți să separați cei doi utilizatori.
</div></p>
</p>

</div>
<!-- EDIT16 SECTION "5. chmod numeric" [13670-15505] -->
<h2 class="sectionedit17" id="chown">6. chown</h2>
<div class="level2">

<p>
Schimbați owner-ul fișierului <strong><code>pere</code></strong> în <code>gigel</code>. Ce drepturi va avea acum <code>ana</code> asupra fișierului <code>pere</code>?
</p>

<p>
<p><div class="notetip">
Din motive de securitate, comanda <code>chown</code> necesită privilegii de root. Folosiți <code>sudo</code> pentru a o rula.

</div></p>
</p>
<div class="solution"><div class="solution_title"><span class="title_text">Rezolvare</span></div><div class="solution_contents"><pre class="code bash"><span class="kw2">sudo</span> <span class="kw2">chown</span> gigel pere
<span class="kw2">ls</span> <span class="re5">-l</span> pere</pre>

<p>
Ana va avea aceleași drepturi cu <code>chuck</code> - doar de scriere.
</p>
</div></div>

</div>
<!-- EDIT17 SECTION "6. chown" [15506-15920] -->
<h2 class="sectionedit18" id="sudo">7. sudo</h2>
<div class="level2">

<p>
<p><div class="noteclassic">
Nu este sigur să partajăm parola utilizatorului root. <code>sudo</code> (superuser do) este o metodă mai sigură şi mai flexibilă decât <code>su</code> pentru a delega autoritatea.
</p>

<p>
Pentru ca un utilizator să poată folosi <code>sudo</code>, trebuie să aibă permisiune explicită în fişierul de configurare <strong><code>/etc/sudoers</code></strong>. De asemenea, la folosirea sudo prima oară în sesiunea curentă, se cere o parolă. Aceasta este parola utilizatorului, nu a root. Astfel, nu partajăm parola root cu nimeni.
</p>

<p>
De asemenea, <code>sudo</code> poate fi configurat să permită doar anumite comenzi, să nu ceară o parolă, şi să funcţioneze peste reţea.

</div></p>
</p>

<p>
Configurați <code>sudo</code> astfel încât <code>obama</code> să-l poată folosi. Urmăriți pașii:
</p>
<ul>
<li class="level1"><div class="li"> vizualizați conținutul fișierului <strong><code>/etc/sudoers</code></strong> folosind comanda <strong><code>visudo</code></strong> (se recomandă folosirea <code>visudo</code> pentru a-l edita)</div>
<ul>
<li class="level2"><div class="li"> ATENȚIE: <strong>NU</strong> editați fișierul acum! </div>
</li>
</ul>
</li>
</ul>

<p>
<p><div class="notewarning">
Deoarece editorul folosit implicit de <code>visudo</code> este <code>nano</code>, rulați întâi comanda
</p>
<pre class="code bash"><span class="kw2">sudo</span> update-alternatives <span class="re5">--config</span> editor</pre>

<p>
și alegeți <code>vim.basic</code> pentru a seta <code>vim</code> ca editor.

</div></p>
</p>
<ul>
<li class="level1"><div class="li"> identificați grupul utilizatorilor ce pot folosi <code>sudo</code>. </div>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> adăugați utilizatorul <code>obama</code> în acest grup</div>
</li>
</ul>

<p>
Stergeți utilizatorul <code>putin</code>, fiind autentificat ca utilizator <code>obama</code>.
</p>
<div class="solution"><div class="solution_title"><span class="title_text">Rezolvare</span></div><div class="solution_contents"><pre class="code bash"><span class="kw2">sudo</span> adduser obama <span class="kw2">sudo</span>
<span class="kw2">su</span> - obama
<span class="kw2">sudo</span> deluser putin</pre>
</div></div>

</div>
<!-- EDIT18 SECTION "7. sudo" [15921-17404] -->
<h2 class="sectionedit19" id="useradd">8. useradd</h2>
<div class="level2">

<p>
<p><div class="noteclassic">
Comanda <code>adduser</code> nu este portabilă (nu se găsește, de exemplu pe Gentoo), este doar un wrapper peste <code>useradd</code>, <code>usermod</code> şi alte comenzi similare. Exemplul de mai jos arată tipurile celor două fișiere (<code>student@uso:~$</code> semnifică promptul):
</p>
<pre class="code bash"><span class="co4">student@uso:~$ </span><span class="kw2">file</span> $<span class="br0">&#40;</span><span class="kw2">which</span> adduser<span class="br0">&#41;</span>
<span class="sy0">/</span>usr<span class="sy0">/</span>sbin<span class="sy0">/</span>adduser: a <span class="sy0">/</span>usr<span class="sy0">/</span>bin<span class="sy0">/</span><span class="kw2">perl</span> script text executable
<span class="co4">student@uso:~$ </span><span class="kw2">file</span> $<span class="br0">&#40;</span><span class="kw2">which</span> useradd<span class="br0">&#41;</span>
<span class="sy0">/</span>usr<span class="sy0">/</span>sbin<span class="sy0">/</span>useradd: ELF <span class="nu0">32</span>-bit LSB executable, Intel <span class="nu0">80386</span>, version <span class="nu0">1</span> <span class="br0">&#40;</span>SYSV<span class="br0">&#41;</span>, 
dynamically linked <span class="br0">&#40;</span>uses shared libs<span class="br0">&#41;</span>, <span class="kw1">for</span> GNU<span class="sy0">/</span>Linux 2.6.15, stripped</pre>

<p>
(comanda <code>file</code> afișează tipul unui fișier, comanda <code>which</code> afișează locația executabilului ce reprezintă o comandă, notația <code>$(cmd)</code> înseamnă executarea comenzii cmd și înlocuirea șirului cu rezultatul acestei comenzi)
</p>

<p>

</div></p>
</p>

<p>
Adăugați utilizatorul <code>thor</code> având ca home directorul <code>/home/asgaard/thor</code>, membru al grupurilor <code>admin</code>, <code>student</code>, <code>nato</code> și <code>thor</code>.
</p>

<p>
<p><div class="notetip">
Dacă nu configurați o parolă pentru contul creat, puteți să vă logați în acel cont prin intermediul contului privilegiat.

</div></p>
</p>
<div class="solution"><div class="solution_title"><span class="title_text">Rezolvare</span></div><div class="solution_contents"><pre class="code bash"><span class="kw2">sudo</span> <span class="kw2">mkdir</span> <span class="re5">-p</span> <span class="sy0">/</span>home<span class="sy0">/</span>asgaard<span class="sy0">/</span>thor
<span class="kw2">sudo</span> addgroup nato
<span class="kw2">sudo</span> useradd <span class="re5">-d</span> <span class="sy0">/</span>home<span class="sy0">/</span>asgaard<span class="sy0">/</span>thor <span class="re5">-G</span> admin,student,nato thor</pre>

<p>
Deoarece nu a fost configurată parola, logarea ca <code>thor</code> se va face prin intermediul contului <code>root</code>.
</p>
</div></div>

</div>
<!-- EDIT19 SECTION "8. useradd" [17405-18813] -->
<h2 class="sectionedit20" id="date_despre_utilizatorii_autentificati">9. Date despre utilizatorii autentificați</h2>
<div class="level2">

<p>
<p><div class="notewarning">Următoarele exerciții necesită o mașină virtuală pornită.
</p>

<p>
Deschideți <em>Activities</em> → <em>VMware Player</em> și apoi faceți double-click pe <strong>smalltalk</strong>. Așteptați până când pornește.
</p>

<p>
Nu dați comenzi pe mașina virtuală, următoarele comenzi se execută pe mașina locală (intel-workstation).

</div></p>
</p>

<p>
Deschideți 3 conexiuni prin <code>ssh</code> la mașina virtuală <code>smalltalk</code> pusă la dispoziție în laborator, sau pe care o descărcați de la <a href="http://elf.cs.pub.ro/uso/store/uso-vm-smalltalk.zip" class="urlextern" title="http://elf.cs.pub.ro/uso/store/uso-vm-smalltalk.zip"  rel="nofollow">adresa</a>.
</p>

<p>
<p><div class="notetip">
Utilizatorul este <code>bjarne</code> cu parola <code>c++</code>. Parola de root este <code>uso</code>. Hostname-ul este: <code>smalltalk.local</code>.

</div></p>
</p>
<div class="solution"><div class="solution_title"><span class="title_text">Rezolvare</span></div><div class="solution_contents"><pre class="code bash"><span class="kw2">ssh</span> bjarne<span class="sy0">@</span>smalltalk.local</pre>
</div></div>

<p>
Aflați informații despre utilizatorii <em>autentificați</em> în sistem în prezent, <em>ultimele</em> autentificări, ultima repornire și timpul cât a fost pornită (<em>running</em>) mașina.
</p>
<div class="solution"><div class="solution_title"><span class="title_text">Rezolvare</span></div><div class="solution_contents"><pre class="code bash"><span class="kw2">w</span>
<span class="kw2">last</span>
<span class="kw2">last</span> reboot
<span class="kw2">uptime</span></pre>
</div></div>

<p>
Vă puteți folosi de comanda <strong><code>apropos</code></strong> pentru a găsi comenzile necesare rezolvării acestui exercițiu. De asemenea, suportul de curs poate fi de un real ajutor.
</p>

</div>
<!-- EDIT20 SECTION "9. Date despre utilizatorii autentificați" [18814-20112] -->
<h2 class="sectionedit21" id="copierea_de_fisiere_la_distanta">10. Copierea de fișiere la distanță</h2>
<div class="level2">

<p>
<p><div class="notetip">Sintaxa <code>scp</code> este asemănătoare cu cea a <code>cp</code>, atât că la destinație specificați și username + host. 
</p>

<p>
Exemplu:
</p>
<pre class="code bash"><span class="kw2">scp</span> fisier_local user<span class="sy0">@</span>host:<span class="sy0">/</span>calea<span class="sy0">/</span>pe<span class="sy0">/</span>host</pre>

<p>

</div></p>
</p>

<p>
Consultați manualul comenzii <strong><code>scp</code></strong> pentru a copia directorul <strong><code>/etc/init.d</code></strong> în home-ul utilizatorului <strong>bjarne</strong> de pe mașina virtuală <code>smalltalk</code> din exercițiul anterior.
</p>
<div class="solution"><div class="solution_title"><span class="title_text">Rezolvare</span></div><div class="solution_contents"><pre class="code bash"><span class="kw2">scp</span> <span class="re5">-r</span> <span class="sy0">/</span>etc<span class="sy0">/</span>init.d bjarne<span class="sy0">@</span>smalltalk.local:</pre>
</div></div>

</div>
<!-- EDIT21 SECTION "10. Copierea de fișiere la distanță" [20113-] --></div>
</body>
</html>

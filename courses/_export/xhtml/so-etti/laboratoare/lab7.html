    
    

<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8" />
  <title>so-etti:laboratoare:lab7</title>
<meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="date" content="2013-04-26T00:07:07+0300"/>
<meta name="keywords" content="so-etti,laboratoare,lab7"/>
<link rel="search" type="application/opensearchdescription+xml" href="../../../../lib/exe/opensearch.php" title="CS Open CourseWare"/>
<link rel="start" href="../../../../../courses.1.html"/>
<link rel="alternate" type="application/rss+xml" title="Recent Changes" href="../../../../feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current Namespace" href="../../../../feed.php%3Fmode=list&amp;ns=so-etti:laboratoare"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="lab7.html"/>
<link rel="canonical" href="../../../../so-etti/laboratoare/lab7.html"/>
<link rel="stylesheet" type="text/css" href="../../../../lib/exe/css.php%3Ft=arctic&amp;tseed=1476798676.css"/>
<script type="text/javascript">/*<![CDATA[*/var NS='so-etti:laboratoare';var JSINFO = {"id":"so-etti:laboratoare:lab7","namespace":"so-etti:laboratoare","isadmin":0,"isauth":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="../../../../lib/exe/js.php%3Ftseed=1476798676"></script>
<script type="text/x-mathjax-config">/*<![CDATA[*/MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ["$","$"], ["\\(","\\)"] ],
        displayMath: [ ["$$","$$"], ["\\[","\\]"] ],
        processEscapes: true
    }
});
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
<script type="text/javascript">/*<![CDATA[*/
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
		  
/*!]]>*/</script>
<script type="text/javascript">/*<![CDATA[*/
var pageTracker = _gat._getTracker("UA-38383934-1");
pageTracker._initData();
pageTracker._trackPageview();
		  
/*!]]>*/</script>
</head>
<body>
<div class="dokuwiki export">
<!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="lab7.html#laborator_07_-_configurari_de_retea">Laborator 07 - Configurări de rețea</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="lab7.html#cheat_sheet">Cheat sheet</a></div></li>
<li class="level2"><div class="li"><a href="lab7.html#suport_laborator">Suport laborator</a></div></li>
<li class="level2"><div class="li"><a href="lab7.html#masini_virtuale">Mașini virtuale</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="lab7.html#introducere">Introducere</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="lab7.html#notiuni_generale">Noțiuni generale</a></div></li>
<li class="level2"><div class="li"><a href="lab7.html#configurari_de_retea">Configurări de rețea</a></div></li>
<li class="level2"><div class="li"><a href="lab7.html#interface_state">Interface state</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="lab7.html#exercitii">Exerciții</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="lab7.html#configurari_dinamice_temporare_de_retea">1. Configurări dinamice temporare de rețea</a></div></li>
<li class="level2"><div class="li"><a href="lab7.html#descoperirea_configurarilor_de_retea">2. Descoperirea configurărilor de rețea</a></div></li>
<li class="level2"><div class="li"><a href="lab7.html#configurari_statice_temporare_de_retea">3. Configurări statice temporare de rețea</a></div></li>
<li class="level2"><div class="li"><a href="lab7.html#descoperirea_configurarilor_de_retea_folosind_iproute2">4. Descoperirea configurărilor de rețea folosind iproute2</a></div></li>
<li class="level2"><div class="li"><a href="lab7.html#configurari_persistente_de_retea">5. Configurări persistente de rețea</a></div></li>
<li class="level2"><div class="li"><a href="lab7.html#configurari_dinamice_permanente">6. Configurări dinamice permanente</a></div></li>
<li class="level2"><div class="li"><a href="lab7.html#configurari_statice_permanente">7. Configurări statice permanente</a></div></li>
<li class="level2"><div class="li"><a href="lab7.html#vizualizarea_tabelei_arp">8. Vizualizarea tabelei ARP</a></div></li>
<li class="level2"><div class="li"><a href="lab7.html#configurarea_statica_a_unui_nume">9. Configurarea statică a unui nume</a></div></li>
<li class="level2"><div class="li"><a href="lab7.html#folosirea_iproute2_configurarea_de_adrese_ipv6">10. Folosirea iproute2. Configurarea de adrese IPv6</a></div></li>
<li class="level2"><div class="li"><a href="lab7.html#nameserver_switch">11. Nameserver Switch</a></div></li>
<li class="level2"><div class="li"><a href="lab7.html#configurarea_unui_tunel_ipv6_peste_ipv4">12. Configurarea unui tunel IPv6 peste IPv4</a></div></li>
</ul></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="laborator_07_-_configurari_de_retea">Laborator 07 - Configurări de rețea</h1>
<div class="level1">

</div>
<!-- EDIT1 SECTION "Laborator 07 - Configurări de rețea" [18-70] -->
<h2 class="sectionedit2" id="cheat_sheet">Cheat sheet</h2>
<div class="level2">
<div class="table sectionedit3"><table class="inline">
	<tr class="row0">
		<th class="col0 leftalign"> Comandă     </th><th class="col1"> Descriere scurtă </th>
	</tr>
	<tr class="row1">
		<td class="col0"> <strong><code>dhclient</code></strong> </td><td class="col1"> cofigurare dinamică temporară </td>
	</tr>
	<tr class="row2">
		<td class="col0"> <strong><code>ifconfig</code></strong> </td><td class="col1"> afișarea configurărilor/configurarea  unei inerfețe de rețea </td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign"> <strong><code>route</code></strong>    </td><td class="col1"> afișarea/configurarea tabelei de rutare </td>
	</tr>
	<tr class="row4">
		<td class="col0 leftalign"> <strong><code>ip</code></strong>       </td><td class="col1"> afișarea configurărilor/configurarea  unei inerfețe de rețea, rutelor, etc </td>
	</tr>
	<tr class="row5">
		<td class="col0 leftalign"> <strong><code>ifup</code></strong>     </td><td class="col1"> trecerea unei interfețe în starea <strong>UP</strong> </td>
	</tr>
	<tr class="row6">
		<td class="col0 leftalign"> <strong><code>ifdown</code></strong>   </td><td class="col1"> trecerea unei interfețe în starea <strong>DOWN</strong> </td>
	</tr>
</table></div>
<!-- EDIT3 TABLE [96-575] -->
</div>
<!-- EDIT2 SECTION "Cheat sheet" [71-575] -->
<h2 class="sectionedit4" id="suport_laborator">Suport laborator</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> <a href="http://books.google.com/books?id=_JFGzyRxQGcC&amp;lpg=PA532&amp;dq=introducere%20in%20sisteme%20de%20operare&amp;pg=PA217#v=onepage&amp;q&amp;f=false" class="urlextern" title="http://books.google.com/books?id=_JFGzyRxQGcC&amp;lpg=PA532&amp;dq=introducere%20in%20sisteme%20de%20operare&amp;pg=PA217#v=onepage&amp;q&amp;f=false"  rel="nofollow">8. Configurări de rețea</a></div>
</li>
<li class="level1"><div class="li"> Puteți urmări tutorialul video corespunzător laboratorului făcut de <a href="http://itassistant.org/diverse/utilizarea-sistemelor-de-operare/utilizarea-sistemelor-de-operare-5.html" class="urlextern" title="http://itassistant.org/diverse/utilizarea-sistemelor-de-operare/utilizarea-sistemelor-de-operare-5.html"  rel="nofollow">IT Assistant</a>.</div>
</li>
</ul>

</div>
<!-- EDIT4 SECTION "Suport laborator" [576-969] -->
<h2 class="sectionedit5" id="masini_virtuale">Mașini virtuale</h2>
<div class="level2">

<p>
Laboratorul folosește două mașini virtuale, <a href="http://elf.cs.pub.ro/uso/store/uso-vm-sheldon.tar.gz" class="urlextern" title="http://elf.cs.pub.ro/uso/store/uso-vm-sheldon.tar.gz"  rel="nofollow">sheldon</a> și <a href="http://elf.cs.pub.ro/uso/store/uso-vm-leonard.tar.gz" class="urlextern" title="http://elf.cs.pub.ro/uso/store/uso-vm-leonard.tar.gz"  rel="nofollow">leonard</a>. Ambele au instalat <a href="http://www.debian.org" class="urlextern" title="http://www.debian.org"  rel="nofollow">Debian GNU/Linux 5.0</a>. Această distribuție nu vine cu <code>sudo</code> instalat.
</p>
<ul>
<li class="level1"><div class="li"> Pentru acces de <code>root</code>, folosiți utilizatorul <code>root</code> și parola <code>uso</code>.</div>
</li>
<li class="level1"><div class="li"> Fiecare mașină mai are și un utilzator normal, numit <code>sheldon</code>, respectiv <code>leonard</code>, ambele cu parola <code>uso</code>.</div>
</li>
</ul>

</div>
<!-- EDIT5 SECTION "Mașini virtuale" [970-1509] -->
<h1 class="sectionedit6" id="introducere">Introducere</h1>
<div class="level1">

</div>
<!-- EDIT6 SECTION "Introducere" [1510-1981] -->
<h2 class="sectionedit7" id="notiuni_generale">Noțiuni generale</h2>
<div class="level2">

<p>
IP = Internet Protocol
</p>

<p>
Se folosește referitor la versiunea 4, în care adresa IP are 32 biți. Aceștia în mod obișnuit sunt scriși în formatul:
</p>
<pre class="code">X.X.X.X</pre>

<p>
unde X este un număr reprezentat pe 8 biți, cu valori în intervalul [0, 255].
</p>

<p>
De exemplu, adresa:
</p>
<pre class="code">11000000 10101000 00000010 01100101</pre>

<p>
se scrie ca
</p>
<pre class="code">192.168.2.101</pre>

<p>
O adresă IP trebuie precizată împreună cu masca de rețea aferentă.
</p>

<p>
<strong>Masca de rețea</strong> este reprezentată pe 32 de biți, este formată dintr-o serie de biți de 1 urmată de o serie de biți de 0. Orice număr care are biți de 1 după primul bit de 0 <strong>nu</strong> este o mască de rețea. Masca de rețea se scrie fie în formatul X.X.X.X fie în formatul /Y unde Y este în intervalul [0, 32], reprezentând numărul de biți de 1 din masca de rețea.
</p>

<p>
De exemplu o mască de rețea /24 se reprezintă ca:
</p>
<pre class="code">11111111 11111111 11111111 00000000</pre>

<p>
echivalent cu:
</p>
<pre class="code">255.255.255.0</pre>

<p>
O adresă IP include adresa de rețea și adresa stației din rețeaua respecitvă. Pentru a obține adresa de rețea facem <code>ȘI</code> (AND) pe biți între adresa IP și masca de rețea.
</p>

<p>
De exemplu, pentru adresa 192.168.2.101/24 adresa de rețea este:
</p>
<pre class="code">11000000 10101000 00000010 01100101 &amp;
11111111 11111111 11111111 00000000 =
11000000 10101000 00000010 00000000</pre>

<p>
echivalent cu:
</p>
<pre class="code">192.168.2.0</pre>

<p>
Adresa IP este utilizată la Nivelul 3.
</p>

<p>
MAC = Media Access Control
</p>

<p>
MAC este un identificator unic asociat unei interfețe de rețea. Adresa MAC este utilizată la Nivelul 2.
</p>

<p>
<abbr title="Domain Name System">DNS</abbr> = Domain Name System
</p>

<p>
Cu ajutorul <abbr title="Domain Name System">DNS</abbr> se asociază un nume de domeniu cu o adresă de IP.
</p>

</div>
<!-- EDIT7 SECTION "Noțiuni generale" [1982-3611] -->
<h2 class="sectionedit8" id="configurari_de_retea">Configurări de rețea</h2>
<div class="level2">

<p>
Configurările unei adrese pot fi catalogate după mai multe criterii.
</p>

<p>
În funcție de felul în care se obține adresa IP, pot fi:
</p>
<ul>
<li class="level1"><div class="li"> statice</div>
</li>
<li class="level1"><div class="li"> dinamice</div>
</li>
</ul>

<p>
În funcție de persistența pe care o au în cadrul sistemului:
</p>
<ul>
<li class="level1"><div class="li"> temporare</div>
</li>
<li class="level1"><div class="li"> permanente</div>
</li>
</ul>

<p>
<strong>Configurările temporare</strong> se realizează din linie de comandă utilizând diverse utilitare.
</p>

<p>
<p><div class="noteclassic">
În această secțiune găsiți comenzile utilizate și câteva exemple, pentru mai multe detalii consultați paginile de manual sau suportul de laborator.

</div></p>
Pentru configurările temporare dinamice de rețea folosim <code>dhclient</code> urmat de numele interfeței.
</p>
<pre class="code">root@uso:~# dhclient eth0</pre>

<p>
Pentru configurările temporare statice putem folosi fie <code>ifconfig</code> fie
<code>ip</code>.
</p>

<p>
Un exemplu de configurare folosint <code>ifconfig</code>:
</p>
<pre class="code">root@uso:~# ifconfig eth0 10.2.10.2 netmask 255.255.255.0</pre>

<p>
Un exemplu de configurare folosint <code>ip</code>:
</p>
<pre class="code">root@uso:~# ip address add 10.2.10.2/24 dev eth0</pre>

<p>
<strong>Configurările permanente</strong> se realizează editând anumite fișiere specifice.
</p>

<p>
Fișierul utilizat pentru a configura interfețele de rețea este
<code>/etc/network/interfaces</code>
</p>

<p>
Un exemplu pentru configurarea permanentă dinamică este:
</p>
<pre class="code"># The loopback network interface
auto lo
iface lo inet loopback

# The primary network interface
auto eth0
iface eth0 inet dhcp</pre>

<p>
Un exemplu pentru configurarea permanentă statică este:
</p>
<pre class="code"># The loopback network interface
auto lo
iface lo inet loopback

# The primary network interface
auto eth0
iface eth0 inet static
	address 10.15.1.20
	netmask 255.255.255.0
	gateway 10.15.1.1</pre>

<p>
Fișierul utilizat pentru a configura serverele de <abbr title="Domain Name System">DNS</abbr> este <code>/etc/resolv.conf</code>. Aceasta conține intrări de tipul
</p>
<pre class="code">nameserver adresa_ip</pre>

<p>
De exemplu:
</p>
<pre class="code">nameserver 8.8.8.8</pre>

</div>
<!-- EDIT8 SECTION "Configurări de rețea" [3612-5480] -->
<h2 class="sectionedit9" id="interface_state">Interface state</h2>
<div class="level2">

<p>
Pentru a asigura conectivitatea, o interfață trebuie să fie în starea <code>UP</code>. Pentru a o aduce în această stare folosim <code>ifup</code>.
</p>
<pre class="code">root@uso:~# ifup eth0</pre>

<p>
Pentru a aduce o interfață în starea <code>DOWN</code> folosim <code>ifdown</code>
</p>
<pre class="code">root@uso:~# ifdown eth0</pre>

</div>
<!-- EDIT9 SECTION "Interface state" [5481-5792] -->
<h1 class="sectionedit10" id="exercitii">Exerciții</h1>
<div class="level1">

<p>
<p><div class="notewarning">
Deschideți mașina virtuală cu Vmware Player!

</div></p>
</p>

</div>
<!-- EDIT10 SECTION "Exerciții" [5793-5889] -->
<h2 class="sectionedit11" id="configurari_dinamice_temporare_de_retea">1. Configurări dinamice temporare de rețea</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> Configurați dinamic, temporar, interfața de rețea <strong><code>eth1</code></strong> a mașinii fizice:</div>
</li>
</ul>
<div class="solution"><div class="solution_title"><span class="title_text">Rezolvare</span></div><div class="solution_contents"><pre class="code bash">dhclient eth1</pre>
</div></div>

<p>
<p><div class="noteimportant">
Pentru că această comandă modifică parametrii de rețea, trebuie lansată cu privilegii <strong><code>root</code></strong>.

</div></p>
</p>
<ul>
<li class="level1"><div class="li"> Testați conectivitatea cu google.com, trimițând 5 mesaje ICMP (ping) succesive:</div>
</li>
</ul>
<div class="solution"><div class="solution_title"><span class="title_text">Rezolvare</span></div><div class="solution_contents"><pre class="code bash"><span class="kw2">ping</span> <span class="re5">-c</span> <span class="nu0">5</span> www.google.com</pre>
</div></div>

</div>
<!-- EDIT11 SECTION "1. Configurări dinamice temporare de rețea" [5890-6383] -->
<h2 class="sectionedit12" id="descoperirea_configurarilor_de_retea">2. Descoperirea configurărilor de rețea</h2>
<div class="level2">

<p>
Inspectați configurările de rețea curente de pe mașina fizică. Afișați informațiile:
</p>
<ul>
<li class="level1"><div class="li"> de nivel 2 - legatură de date (adresa MAC)</div>
</li>
<li class="level1"><div class="li"> de nivel 3 - rețea (adresa IP, masca de rețea și gateway-ul implicit)</div>
</li>
<li class="level1"><div class="li"> de nivel 7 - aplicații (server <abbr title="Domain Name System">DNS</abbr>).</div>
</li>
</ul>

<p>
<p><div class="noteimportant">pentru a <em>schimba</em> configurările de rețea, trebuie să fim <strong><code>root</code></strong>. Pentru a le inspecta, în general, nu este nevoie.
</div></p>
</p>

<p>
Folosiți <strong><code>ifconfig</code></strong> pentru a afla adresa MAC, adresa IP, și masca de rețea. Ce interfață este cea relevantă?
</p>
<ul>
<li class="level1"><div class="li"> Adresa MAC se mai numește și adresă fizică sau adresă hardware.</div>
</li>
</ul>
<pre class="code bash"><span class="kw2">ifconfig</span></pre>

<p>
Folosiți <strong><code>route</code></strong> pentru a afla gateway-ul implicit.
</p>
<pre class="code bash">route <span class="re5">-n</span></pre>
<ul>
<li class="level1"><div class="li"> <strong>Pentru acasă</strong>: de ce este nevoie de parametrul <strong><code>-n</code></strong>?</div>
</li>
</ul>

<p>
Inspectați fișierul <strong><code>/etc/resolv.conf</code></strong> pentru a descoperi adresa serverului <abbr title="Domain Name System">DNS</abbr>. 
</p>
<pre class="code bash"><span class="kw2">cat</span> <span class="sy0">/</span>etc<span class="sy0">/</span>resolv.conf</pre>

</div>
<!-- EDIT12 SECTION "2. Descoperirea configurărilor de rețea" [6384-7370] -->
<h2 class="sectionedit13" id="configurari_statice_temporare_de_retea">3. Configurări statice temporare de rețea</h2>
<div class="level2">

<p>
<strong>Acest exercițiu se desfășoară pe mașina virtuală <code>sheldon</code>.</strong>
</p>

<p>
<strong>Configurarea rețelei este o operațiune critică sistemului, deci are nevoie de privilegii de <code>root</code></strong>
</p>

<p>
Configurați <strong>static temporar</strong> mașina virtuală cu următorii parametri:
</p>
<ul>
<li class="level1"><div class="li"> adresa IP 192.168.21.10</div>
</li>
<li class="level1"><div class="li"> masca de rețea 255.255.255.0. Câți biți aparțin adresei de rețea în cazul acesta?</div>
<ul>
<li class="level2"><div class="li"> interfața nu este pornită. Va trebui să o puneți în starea <strong><code>UP</code></strong>.</div>
</li>
</ul>
</li>
</ul>
<div class="solution"><div class="solution_title"><span class="title_text">Rezolvare</span></div><div class="solution_contents"><pre class="code bash"><span class="kw2">ifconfig</span> eth0 192.168.21.10 netmask 255.255.255.0 up</pre>
</div></div>
<ul>
<li class="level1"><div class="li"> gateway-ul implicit va fi 192.168.21.2</div>
</li>
</ul>
<div class="solution"><div class="solution_title"><span class="title_text">Rezolvare</span></div><div class="solution_contents"><pre class="code bash">route add default gw 192.168.21.2</pre>
</div></div>
<ul>
<li class="level1"><div class="li"> serverul <abbr title="Domain Name System">DNS</abbr> va fi 8.8.8.8. Suprascrieți orice server existent.</div>
</li>
</ul>
<div class="solution"><div class="solution_title"><span class="title_text">Rezolvare</span></div><div class="solution_contents"><pre class="code bash"><span class="kw3">echo</span> nameserver 8.8.8.8 <span class="sy0">&gt;</span> <span class="sy0">/</span>etc<span class="sy0">/</span>resolv.conf</pre>
</div></div>

<p>
Testați conectivitatea cu google.com, trimițând 5 mesaje ICMP succesive:
</p>
<div class="solution"><div class="solution_title"><span class="title_text">Rezolvare</span></div><div class="solution_contents"><pre class="code bash"><span class="kw2">ping</span> <span class="re5">-c</span> <span class="nu0">5</span> www.google.com</pre>
</div></div>

<p>
Reporniți mașina virtuală. S-au păstrat configurările?
</p>

</div>
<!-- EDIT13 SECTION "3. Configurări statice temporare de rețea" [7371-8471] -->
<h2 class="sectionedit14" id="descoperirea_configurarilor_de_retea_folosind_iproute2">4. Descoperirea configurărilor de rețea folosind iproute2</h2>
<div class="level2">

<p>
ifconfig, route și arp sunt comenzi clasice de configurarea rețelei, dar fac parte dintr-un pachet ce nu mai este menținut în prezent. <strong><code>iproute2</code></strong> este pachetul modern ce vine să înlocuiască utilitarele clasice
</p>

<p>
Folosiți comanda <strong><code>ip</code></strong> pentru a descoperi configurațiile mașinii fizice.
</p>
<ul>
<li class="level1"><div class="li"> Listați interfețele și IP-urilor lor folosind ip.</div>
</li>
</ul>
<div class="solution"><div class="solution_title"><span class="title_text">Rezolvare</span></div><div class="solution_contents"><pre class="code bash"><span class="kw2">ip</span> address show</pre>
</div></div>
<ul>
<li class="level1"><div class="li"> Afișați tabela de rutare folosind ip.</div>
</li>
</ul>
<div class="solution"><div class="solution_title"><span class="title_text">Rezolvare</span></div><div class="solution_contents"><pre class="code bash"><span class="kw2">ip route</span> show</pre>
</div></div>
<ul>
<li class="level1"><div class="li"> Faceți același lucru folosind variantele prescurtate ale acestor comenzi.</div>
</li>
</ul>
<div class="solution"><div class="solution_title"><span class="title_text">Rezolvare</span></div><div class="solution_contents"><pre class="code bash"><span class="kw2">ip</span> a s
<span class="kw2">ip</span> r s</pre>
</div></div>

</div>
<!-- EDIT14 SECTION "4. Descoperirea configurărilor de rețea folosind iproute2" [8472-9209] -->
<h2 class="sectionedit15" id="configurari_persistente_de_retea">5. Configurări persistente de rețea</h2>
<div class="level2">

<p>
Setările făcute până acum sunt temporare deoarece se pierd la repornirea sistemului. Pentru a face configurări persistente, ne folosim de fișierul <code>&#039;/etc/network/interfaces</code>&#039;.
</p>
<ul>
<li class="level1"><div class="li"> Vizualizați structura fișierlui de configurări persistente de rețea:</div>
</li>
</ul>
<div class="solution"><div class="solution_title"><span class="title_text">Rezolvare</span></div><div class="solution_contents"><pre class="code bash"><span class="kw2">cat</span> <span class="sy0">/</span>etc<span class="sy0">/</span>network<span class="sy0">/</span>interfaces</pre>
</div></div>

</div>
<!-- EDIT15 SECTION "5. Configurări persistente de rețea" [9210-9597] -->
<h2 class="sectionedit16" id="configurari_dinamice_permanente">6. Configurări dinamice permanente</h2>
<div class="level2">

<p>
<strong>Acest exercițiu se desfășoară pe mașina virtuală <code>sheldon</code>.</strong>
</p>
<ul>
<li class="level1"><div class="li"> Inspectați configurația de pe mașina <strong><code>sheldon</code></strong>. Este interfața <strong><code>eth0</code></strong> activă?</div>
</li>
<li class="level1"><div class="li"> Configurați interfața <strong><code>eth0</code></strong> astfel încât ea să fie activă la boot-are și să fie configurată prin DHCP.</div>
<ul>
<li class="level2"><div class="li"> Ce fișier conține configurarea interfețelor de rețea?</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Reporniți mașina <strong><code>sheldon</code></strong>. Testați conectivitatea.</div>
</li>
</ul>
<div class="solution"><div class="solution_title"><span class="title_text">Rezolvare</span></div><div class="solution_contents"><pre class="code bash">$ <span class="kw2">cat</span> <span class="sy0">/</span>etc<span class="sy0">/</span>network<span class="sy0">/</span>interfaces
<span class="br0">&#91;</span>...<span class="br0">&#93;</span>
auto eth0 <span class="co0"># activează interfața la boot-are</span>
iface eth0 inet dhcp
<span class="br0">&#91;</span>...<span class="br0">&#93;</span></pre>
</div></div>

<p>
<p><div class="notetip">
Pentru a nu reporni calculatorul de fiecare dată când modificați fișierul, puteți folosi comanda: `/etc/init.d/networking restart`

</div></p>
</p>

</div>
<!-- EDIT16 SECTION "6. Configurări dinamice permanente" [9598-10380] -->
<h2 class="sectionedit17" id="configurari_statice_permanente">7. Configurări statice permanente</h2>
<div class="level2">

<p>
<strong>Acest exercițiu se desfășoară pe mașina virtuală <code>leonard</code>.</strong>
</p>
<ul>
<li class="level1"><div class="li"> Inspectați configurația interfeței <strong><code>eth0</code></strong>. Este interfața activă?</div>
</li>
<li class="level1"><div class="li"> Configurați permanent interfața <strong><code>eth0</code></strong>:</div>
<ul>
<li class="level2"><div class="li"> adresa 192.168.21.80</div>
</li>
<li class="level2"><div class="li"> netmask 255.255.255.0</div>
</li>
<li class="level2"><div class="li"> gateway 192.168.21.2</div>
</li>
<li class="level2"><div class="li"> Folosiți 8.8.8.8 ca nameserver. <strong>Atenție</strong>: nu folosiți același fișier în care ați configurat adresa IP și gateway-ul.</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Porniți interfața <strong><code>eth0</code></strong> folosind <strong><code>ifup</code></strong>. Cu ce diferă <strong><code>ifup</code></strong> de <strong><code>ifconfig</code></strong>?</div>
</li>
<li class="level1"><div class="li"> Testați conectivitatea.</div>
</li>
</ul>
<div class="solution"><div class="solution_title"><span class="title_text">Rezolvare</span></div><div class="solution_contents"><pre class="code bash">$ <span class="kw2">cat</span> <span class="sy0">/</span>etc<span class="sy0">/</span>network<span class="sy0">/</span>interfaces
<span class="br0">&#91;</span>...<span class="br0">&#93;</span>
auto eth0
iface eth0 inet static
    address 192.168.102.80
    netmask 255.255.255.0
    gateway 192.168.102.2
<span class="br0">&#91;</span>...<span class="br0">&#93;</span>
$ <span class="kw2">cat</span> <span class="sy0">/</span>etc<span class="sy0">/</span>resolv.conf
nameserver 8.8.8.8
$ <span class="kw2">ifup</span> eth0 <span class="co0"># ifup folosește informațiile din /etc/network/interfaces</span></pre>
</div></div>

</div>
<!-- EDIT17 SECTION "7. Configurări statice permanente" [10381-11301] -->
<h2 class="sectionedit18" id="vizualizarea_tabelei_arp">8. Vizualizarea tabelei ARP</h2>
<div class="level2">

<p>
Listați pe mașina fizică tabela ARP (neighbour table) folosind două comenzi diferite (o comandă clasică și o comandă din cadru iproute2).
</p>
<div class="solution"><div class="solution_title"><span class="title_text">Rezolvare</span></div><div class="solution_contents"><pre class="code bash">arp
arp <span class="re5">-a</span>
<span class="kw2">ip</span> neighbour show
<span class="kw2">ip</span> n s</pre>
</div></div>

</div>
<!-- EDIT18 SECTION "8. Vizualizarea tabelei ARP" [11302-11570] -->
<h2 class="sectionedit19" id="configurarea_statica_a_unui_nume">9. Configurarea statică a unui nume</h2>
<div class="level2">

<p>
<strong>Acest exercițiu se desfășoară pe mașina fizică.</strong>
</p>
<ul>
<li class="level1"><div class="li"> Aflați adresa serverului <a href="http://wikipedia.org/" class="urlextern" title="http://wikipedia.org/"  rel="nofollow">http://wikipedia.org/</a>. Cel mai simplu mod este a folosi <code>ping</code>.</div>
</li>
<li class="level1"><div class="li"> Adăugați o intrare în fișierul <code>/etc/hosts</code> astfel încât serverul Wikipedia să poată fi accesat cu numele <code>wiki</code>.</div>
</li>
<li class="level1"><div class="li"> Testați conectivitatea folosind <code>ping</code>.</div>
</li>
</ul>
<div class="solution"><div class="solution_title"><span class="title_text">Rezolvare</span></div><div class="solution_contents"><pre class="code bash">$ host wikipedia.org <span class="co0"># alternativ, se putea folosi ping</span>
wikipedia.org has address 208.80.152.2
$ <span class="kw3">echo</span> <span class="st0">&quot;208.80.152.2 wiki&quot;</span> <span class="sy0">&gt;&gt;</span> <span class="sy0">/</span>etc<span class="sy0">/</span>hosts
$ <span class="kw2">ping</span> wiki</pre>
</div></div>

<p>
<p><div class="noteclassic">
<strong>Nicio întrebare de examen sau test practic nu va conține noțiuni despre IPv6.</strong>

</div></p>
</p>

</div>
<!-- EDIT19 SECTION "9. Configurarea statică a unui nume" [11571-12253] -->
<h2 class="sectionedit20" id="folosirea_iproute2_configurarea_de_adrese_ipv6">10. Folosirea iproute2. Configurarea de adrese IPv6</h2>
<div class="level2">

<p>
Folosiți iproute2 (comanda corespunzătoare se numește <code>ip</code>) pentru a configura următoarele adrese:
</p>
<ul>
<li class="level1"><div class="li"> 2000::1/64 pe interfața vmnet8 a mașinii fizice</div>
</li>
<li class="level1"><div class="li"> 2000::2/64 pe interfața eth0 a mașinii virtuale sheldon</div>
</li>
</ul>

<p>
Inspectați rutele din tabela de rutare IPv6 de pe fiecare mașină (folosiți tot <code>ip</code>) și testați conectivitatea folosind comanda <code>ping6</code>.
</p>

<p>
<p><div class="notetip">
Pentru configurarea adreselor IPv6 în Linux, poate fi folosită atât suita iproute2 cât și <code>ifconfig</code>. Hint:  <a href="http://www.tldp.org/HOWTO/Linux+IPv6-HOWTO/chapter-configuration-address.html" class="urlextern" title="http://www.tldp.org/HOWTO/Linux+IPv6-HOWTO/chapter-configuration-address.html"  rel="nofollow"> configure ipv6</a>

</div></p>
</p>
<div class="solution"><div class="solution_title"><span class="title_text">Rezolvare</span></div><div class="solution_contents">Pe mașina fizică:<pre class="code">root@uso:~# ip -6 address add 2000::1/64 dev vmnet8       </pre>

<p>
Pe mașina virtuală <code>sheldon</code>:
</p>
<pre class="code">sheldon:~# ip -6 address add 2000::2/64 dev eth0
sheldon:~# ping6 2000::1</pre>
</div></div>

</div>
<!-- EDIT20 SECTION "10. Folosirea iproute2. Configurarea de adrese IPv6" [12254-13166] -->
<h2 class="sectionedit21" id="nameserver_switch">11. Nameserver Switch</h2>
<div class="level2">

<p>
Adaugati in <strong><code>/etc/hosts</code></strong> urmatoarea intrare <strong><code>127.0.0.1 google.com</code></strong>. In acest moment comanda <strong><code>ping google.com</code></strong> va da ping la <strong><code>127.0.0.1</code></strong>. Fără a realiza alte modificări în <strong><code>/etc/hosts</code></strong>, configurati sistemul astfel incat <strong><code>ping google.com</code></strong> sa va raspunda cu adresa IP reala a google.com.
<p><div class="notetip">
Cautati informatii despre nsswitch

</div></p>
</p>
<div class="solution"><div class="solution_title"><span class="title_text">Rezolvare</span></div><div class="solution_contents"><pre class="code">student@uso:~# cat /etc/hosts
127.0.0.1	google.com
...
sudent@uso:~# ping -c 1 google.com
PING google.com (127.0.0.1) 56(84) bytes of data.
64 bytes from localhost.localdomain (127.0.0.1): icmp_req=1 ttl=64 time=0.036 ms</pre>

<p>
Fișierul de configurare pentru nsswitch este <code>/etc/nsswitch.conf</code>. Se modifică linia ce conține <code>hosts:</code> astfel încât <code>dns</code> să fie prima opțiune.
</p>
<pre class="code">student@uso:~$ cat /etc/nsswitch.conf
...
hosts:          dns files mdns4_minimal [NOTFOUND=return] mdns4
...
student@uso:~$ ping -c 1 google.com
PING google.com (46.108.1.167) 56(84) bytes of data.
64 bytes from google-cache.adnettelecom.ro (46.108.1.167): icmp_req=1 ttl=54 time=9.69 ms</pre>
</div></div>

</div>
<!-- EDIT21 SECTION "11. Nameserver Switch" [13167-14304] -->
<h2 class="sectionedit22" id="configurarea_unui_tunel_ipv6_peste_ipv4">12. Configurarea unui tunel IPv6 peste IPv4</h2>
<div class="level2">

<p>
Configurați un tunel IPv6 peste IPv4 între mașina Sheldon și Leonard. Mașina Leonard are doar o adresă IPv4 pe interfața eth0 (nu adăugați o adresă IPv6).
</p>

<p>
Tunetul se va crea între interfețele eth0 cu adresele IPv4 de pe fiecare dintre cele două mașini. Capetele celor două tunele vor avea adresele 2001::1/64, respectiv 2001::2/64. 
</p>

<p>
<a href="http://tldp.org/HOWTO/Linux+IPv6-HOWTO/conf-ipv6-in-ipv4-point-to-point-tunnels.html" class="urlextern" title="http://tldp.org/HOWTO/Linux+IPv6-HOWTO/conf-ipv6-in-ipv4-point-to-point-tunnels.html"  rel="nofollow">http://tldp.org/HOWTO/Linux+IPv6-HOWTO/conf-ipv6-in-ipv4-point-to-point-tunnels.html</a>
</p>
<div class="solution"><div class="solution_title"><span class="title_text">Rezolvare</span></div><div class="solution_contents">Pe mașina virtuală <code>sheldon</code>:<pre class="code">sheldon:~# ip tunnel add sit1 mode sit ttl 64 remote 192.168.99.135 local 192.168.99.134
sheldon:~# ip link set dev sit1 up
sheldon:~# ip address add 2001::1/64 dev sit1
sheldon:~# ip -6 route add 2001::/64 dev sit1 metric 1</pre>

<p>
Pe mașina virtuală leonard:
</p>
<pre class="code">leonard:~# ip tunnel add sit1 mode sit ttl 64 remote 192.168.99.134 local 192.168.99.135
leonard:~# ip link set dev sit1 up
leonard:~# ip address add 2001::2/64 dev sit1
leonard:~# ip -6 route add 2001::/64 dev sit1 metric 1

leonard:~# ping6 2001::1</pre>
</div></div>

</div>
<!-- EDIT22 SECTION "12. Configurarea unui tunel IPv6 peste IPv4" [14305-] --></div>
</body>
</html>

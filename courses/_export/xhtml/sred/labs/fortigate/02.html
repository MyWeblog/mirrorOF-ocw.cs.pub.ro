    
    

<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8" />
  <title>sred:labs:fortigate:02</title>
<meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="date" content="2015-03-29T10:49:56+0300"/>
<meta name="keywords" content="sred,labs,fortigate,02"/>
<link rel="search" type="application/opensearchdescription+xml" href="../../../../../lib/exe/opensearch.php" title="CS Open CourseWare"/>
<link rel="start" href="../../../../../../courses.1.html"/>
<link rel="alternate" type="application/rss+xml" title="Recent Changes" href="../../../../../feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current Namespace" href="../../../../../feed.php%3Fmode=list&amp;ns=sred:labs:fortigate"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="02.html"/>
<link rel="canonical" href="../../../../../sred/labs/fortigate/02.html"/>
<link rel="stylesheet" type="text/css" href="../../../../../lib/exe/css.php%3Ft=arctic&amp;tseed=1476798676.css"/>
<script type="text/javascript">/*<![CDATA[*/var NS='sred:labs:fortigate';var JSINFO = {"id":"sred:labs:fortigate:02","namespace":"sred:labs:fortigate","isadmin":0,"isauth":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="../../../../../lib/exe/js.php%3Ftseed=1476798676"></script>
<script type="text/x-mathjax-config">/*<![CDATA[*/MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ["$","$"], ["\\(","\\)"] ],
        displayMath: [ ["$$","$$"], ["\\[","\\]"] ],
        processEscapes: true
    }
});
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
<script type="text/javascript">/*<![CDATA[*/
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
		  
/*!]]>*/</script>
<script type="text/javascript">/*<![CDATA[*/
var pageTracker = _gat._getTracker("UA-38383934-1");
pageTracker._initData();
pageTracker._trackPageview();
		  
/*!]]>*/</script>
</head>
<body>
<div class="dokuwiki export">
<!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="02.html#f02_-_basic_policies">F02 - Basic Policies</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="02.html#topology">Topology</a></div></li>
<li class="level2"><div class="li"><a href="02.html#tasks">Tasks</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="02.html#basic_connectivity">Basic Connectivity</a></div></li>
<li class="level3"><div class="li"><a href="02.html#advanced_firewall_policies">Advanced Firewall Policies</a></div></li>
<li class="level3"><div class="li"><a href="02.html#policies_with_authentication">Policies with Authentication</a></div></li>
</ul></li>
</ul></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="f02_-_basic_policies">F02 - Basic Policies</h1>
<div class="level1">

</div>
<!-- EDIT1 SECTION "F02 - Basic Policies" [19-54] -->
<h2 class="sectionedit2" id="topology">Topology</h2>
<div class="level2">

<p>
<a href="../../../../../_detail/sred/labs/fortigate/fg_topology_05.png%3Fid=sred%253Alabs%253Afortigate%253A02.html" class="media" title="sred:labs:fortigate:fg_topology_05.png"><img src="../../../../../_media/sred/labs/fortigate/fg_topology_05.png" class="mediacenter" alt="" /></a>
</p>

</div>
<!-- EDIT2 SECTION "Topology" [55-122] -->
<h2 class="sectionedit3" id="tasks">Tasks</h2>
<div class="level2">

</div>
<!-- EDIT3 SECTION "Tasks" [123-141] -->
<h3 class="sectionedit4" id="basic_connectivity">Basic Connectivity</h3>
<div class="level3">

<p>
In this task you will learn how to configure connectivity between your host the <strong>Internet Server</strong>.
</p>

<p>
<p><div class="noteclassic"> The <strong>Internet Server</strong> is simulated via an Ubuntu Server Virtual Machine 
</div></p>
</p>

<p>
Connect to the FortiGate using a web browser of your choice. The user is <strong>admin</strong> and no password is configured.
<p><div class="noteclassic"> The IP address of the FortiGate is 10.99.99.10 
</div></p>
</p>
<div class="solution"><div class="solution_title"><span class="title_text">Rezolvare</span></div><div class="solution_contents"><a href="http://elf.cs.pub.ro/sred/wiki/videos/01_01a.ogv" class="urlextern" title="http://elf.cs.pub.ro/sred/wiki/videos/01_01a.ogv"  rel="nofollow"> Rezolvare</a>
</div></div>

<p>
Configure the <code>200.0.0.2/24</code> IP address on the <strong>port2</strong> FortiGate interface. Test that the FortiGate can ping the Internet Server (<code>200.0.0.1/24</code>).
</p>

<p>
If there are policies already configured, <strong>delete</strong> them.
</p>

<p>
Configure a NAT policy on the FortiGate s.t. the host can reach the Internet server using any protocol. Test using SSH, HTTP and ICMP.
</p>
<div class="solution"><div class="solution_title"><span class="title_text">Rezolvare</span></div><div class="solution_contents"><a href="http://elf.cs.pub.ro/sred/wiki/videos/02_01f.ogv" class="urlextern" title="http://elf.cs.pub.ro/sred/wiki/videos/02_01f.ogv"  rel="nofollow"> Rezolvare</a>
</div></div>

</div>
<!-- EDIT4 SECTION "Basic Connectivity" [142-1985] -->
<h3 class="sectionedit5" id="advanced_firewall_policies">Advanced Firewall Policies</h3>
<div class="level3">

<p>
In this you will learn how to customize firewall policies. Your task is to create a firewall policy that only permits web and ICMP traffic from the inside subnet, during weekdays and only between 8AM and 10PM.
</p>

<p>
<p><div class="noteclassic"> Use the <strong>Firewall</strong> tab to solve the next tasks 
</div></p>
</p>

<p>
Create an address called <code>internal_networks</code> that includes the <code>10.99.99.0/24</code> subnet.
</p>
<div class="solution"><div class="solution_title"><span class="title_text">Rezolvare</span></div><div class="solution_contents"><a href="http://elf.cs.pub.ro/sred/wiki/videos/02_03a.ogv" class="urlextern" title="http://elf.cs.pub.ro/sred/wiki/videos/02_03a.ogv"  rel="nofollow"> Rezolvare</a>
</div></div>

<p>
Create a new service group called <code>web</code>; it must include HTTP, HTTPS and <abbr title="Domain Name System">DNS</abbr> traffic.
</p>
<div class="solution"><div class="solution_title"><span class="title_text">Rezolvare</span></div><div class="solution_contents"><a href="http://elf.cs.pub.ro/sred/wiki/videos/02_03b.ogv" class="urlextern" title="http://elf.cs.pub.ro/sred/wiki/videos/02_03b.ogv"  rel="nofollow"> Rezolvare</a>
</div></div>

<p>
Create a new periodic timetable called <code>work_hours</code>. The timetable must include each workday (Monday to Friday) between 8AM and 10PM.
</p>
<div class="solution"><div class="solution_title"><span class="title_text">Rezolvare</span></div><div class="solution_contents"><a href="http://elf.cs.pub.ro/sred/wiki/videos/02_03c.ogv" class="urlextern" title="http://elf.cs.pub.ro/sred/wiki/videos/02_03c.ogv"  rel="nofollow"> Rezolvare</a>
</div></div>

<p>
Modify the existing internal to Internet firewall policy to include the three restrictions configured earlier. Verify that only web traffic works (HTTP should work, SSH should not).
</p>
<div class="solution"><div class="solution_title"><span class="title_text">Rezolvare</span></div><div class="solution_contents"><a href="http://elf.cs.pub.ro/sred/wiki/videos/02_03d.ogv" class="urlextern" title="http://elf.cs.pub.ro/sred/wiki/videos/02_03d.ogv"  rel="nofollow"> Rezolvare</a>
</div></div>

</div>
<!-- EDIT5 SECTION "Advanced Firewall Policies" [1986-3158] -->
<h3 class="sectionedit6" id="policies_with_authentication">Policies with Authentication</h3>
<div class="level3">

<p>
Create a new local user. Use your own name for username and password.
</p>
<div class="solution"><div class="solution_title"><span class="title_text">Rezolvare</span></div><div class="solution_contents"><a href="http://elf.cs.pub.ro/sred/wiki/videos/02_04a.ogv" class="urlextern" title="http://elf.cs.pub.ro/sred/wiki/videos/02_04a.ogv"  rel="nofollow"> Rezolvare</a>
</div></div>

<p>
Create a user group of type <code>firewall</code>, called <code>firewall_authentication</code>. Add the new user to the group.
</p>
<div class="solution"><div class="solution_title"><span class="title_text">Rezolvare</span></div><div class="solution_contents"><a href="http://elf.cs.pub.ro/sred/wiki/videos/02_04b.ogv" class="urlextern" title="http://elf.cs.pub.ro/sred/wiki/videos/02_04b.ogv"  rel="nofollow"> Rezolvare</a>
</div></div>

<p>
Activate <strong>Identity Based Policy</strong> on the <code>internal→wan1</code> policy. The group will the one you created during the previous exercise. Only allow services included in the <code>web</code> service group. Choose whatever redirect page you want.
</p>

<p>
Test the setup using your browser.
</p>
<div class="solution"><div class="solution_title"><span class="title_text">Rezolvare</span></div><div class="solution_contents"><a href="http://elf.cs.pub.ro/sred/wiki/videos/02_04c.ogv" class="urlextern" title="http://elf.cs.pub.ro/sred/wiki/videos/02_04c.ogv"  rel="nofollow"> Rezolvare</a>
</div></div>

<p>
Modify the two disclaimer messages:
</p>
<ul>
<li class="level1"><div class="li"> Disclaimer page</div>
</li>
<li class="level1"><div class="li"> Declined disclaimer page</div>
</li>
</ul>

<p>
<p><div class="noteclassic"> Use the <strong>System configuration</strong> tab. 
</div></p>
</p>

<p>
<p><div class="noteimportant"> The previously established user session must be deleted to force the disclaimer pages to appear again.
</p>

<p>
You can delete the established session from <code>User → Monitor</code>. 
</div></p>
</p>
<div class="solution"><div class="solution_title"><span class="title_text">Rezolvare</span></div><div class="solution_contents"><a href="http://elf.cs.pub.ro/sred/wiki/videos/02_04d.ogv" class="urlextern" title="http://elf.cs.pub.ro/sred/wiki/videos/02_04d.ogv"  rel="nofollow"> Rezolvare</a>
</div></div>

</div>
<!-- EDIT6 SECTION "Policies with Authentication" [3159-] --></div>
</body>
</html>

    
    

<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8" />
  <title>sred:labs:asa:05</title>
<meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="date" content="2015-06-01T20:52:53+0300"/>
<meta name="keywords" content="sred,labs,asa,05"/>
<link rel="search" type="application/opensearchdescription+xml" href="../../../../../lib/exe/opensearch.php" title="CS Open CourseWare"/>
<link rel="start" href="../../../../../../courses.1.html"/>
<link rel="alternate" type="application/rss+xml" title="Recent Changes" href="../../../../../feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current Namespace" href="../../../../../feed.php%3Fmode=list&amp;ns=sred:labs:asa"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="05.html"/>
<link rel="canonical" href="../../../../../sred/labs/asa/05.html"/>
<link rel="stylesheet" type="text/css" href="../../../../../lib/exe/css.php%3Ft=arctic&amp;tseed=1476798676.css"/>
<script type="text/javascript">/*<![CDATA[*/var NS='sred:labs:asa';var JSINFO = {"id":"sred:labs:asa:05","namespace":"sred:labs:asa","isadmin":0,"isauth":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="../../../../../lib/exe/js.php%3Ftseed=1476798676"></script>
<script type="text/x-mathjax-config">/*<![CDATA[*/MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ["$","$"], ["\\(","\\)"] ],
        displayMath: [ ["$$","$$"], ["\\[","\\]"] ],
        processEscapes: true
    }
});
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
<script type="text/javascript">/*<![CDATA[*/
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
		  
/*!]]>*/</script>
<script type="text/javascript">/*<![CDATA[*/
var pageTracker = _gat._getTracker("UA-38383934-1");
pageTracker._initData();
pageTracker._trackPageview();
		  
/*!]]>*/</script>
</head>
<body>
<div class="dokuwiki export">
<!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="05.html#a05_-_vlans_and_routing">A05 - VLANs and Routing</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="05.html#topology">Topology</a></div></li>
<li class="level2"><div class="li"><a href="05.html#tasks">Tasks</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="05.html#basic_setup">1. Basic Setup</a></div>
<ul class="toc">
<li class="level4"><div class="li"><a href="05.html#a_router_check">A. Router Check</a></div></li>
<li class="level4"><div class="li"><a href="05.html#b_intervlan_routing">B. InterVLAN Routing</a></div></li>
</ul>
</li>
<li class="level3"><div class="li"><a href="05.html#static_routing">2. Static routing</a></div>
<ul class="toc">
<li class="level4"><div class="li"><a href="05.html#a_inside_connectivity">A. Inside connectivity</a></div></li>
<li class="level4"><div class="li"><a href="05.html#b_loopback_interfaces">B. Loopback interfaces</a></div></li>
<li class="level4"><div class="li"><a href="05.html#c_static_routes">C. Static routes</a></div></li>
</ul>
</li>
<li class="level3"><div class="li"><a href="05.html#rip">3. RIP</a></div>
<ul class="toc">
<li class="level4"><div class="li"><a href="05.html#a_ripv2_on_the_routers">A. RIPv2 on the routers</a></div></li>
<li class="level4"><div class="li"><a href="05.html#b_ripv2_on_the_firewall">B. RIPv2 on the firewall</a></div></li>
<li class="level4"><div class="li"><a href="05.html#c_connectivity_test">C. Connectivity test</a></div></li>
<li class="level4"><div class="li"><a href="05.html#d_passive_interface">D. Passive interface</a></div></li>
<li class="level4"><div class="li"><a href="05.html#e_advertise_default_routes">E. Advertise default routes</a></div></li>
<li class="level4"><div class="li"><a href="05.html#f_end_to_end_connectivity">F. End to end connectivity</a></div></li>
</ul></li>
</ul></li>
</ul></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="a05_-_vlans_and_routing">A05 - VLANs and Routing</h1>
<div class="level1">

</div>
<!-- EDIT1 SECTION "A05 - VLANs and Routing" [19-57] -->
<h2 class="sectionedit2" id="topology">Topology</h2>
<div class="level2">

<p>
<a href="../../../../../_detail/sred/labs/asa/asa_topology_05.png%3Fid=sred%253Alabs%253Aasa%253A05.html" class="media" title="sred:labs:asa:asa_topology_05.png"><img src="../../../../../_media/sred/labs/asa/asa_topology_05.png" class="mediacenter" alt="" /></a>
</p>

</div>
<!-- EDIT2 SECTION "Topology" [58-120] -->
<h2 class="sectionedit3" id="tasks">Tasks</h2>
<div class="level2">

</div>
<!-- EDIT3 SECTION "Tasks" [121-139] -->
<h3 class="sectionedit4" id="basic_setup">1. Basic Setup</h3>
<div class="level3">

<p>
In this task you will configure IP addressing and security levels on the ASA firewall.
</p>

</div>

<h4 id="a_router_check">A. Router Check</h4>
<div class="level4">

<p>
Check that IP addresses and routes are configured on all the routers.
</p>

<p>
Check that the administrative distance of the default routes is 130.
</p>
<div class="solution"><div class="solution_title hidden_solution_title"><img src="../../../../../lib/tpl/arctic/images/tool-source.png"/><span class="title_text">Show solution</span></div><div class="hide_text">Hide solution</div><div class="show_text">Show solution</div><div class="solution_contents hidden_solution_contents"> <pre class="code bash"><span class="co4">R1#</span>show <span class="kw2">ip</span> interface brief
Interface                  IP-Address      OK? Method Status                Protocol
FastEthernet0<span class="sy0">/</span><span class="nu0">0</span>            141.85.99.100   YES manual up                    up  
<span class="co4">R1#</span>show <span class="kw2">ip route</span>
Codes: C - connected, S - static, R - RIP, M - mobile, B - BGP
       D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area
       N1 - OSPF NSSA external <span class="kw3">type</span> <span class="nu0">1</span>, N2 - OSPF NSSA external <span class="kw3">type</span> <span class="nu0">2</span>
       E1 - OSPF external <span class="kw3">type</span> <span class="nu0">1</span>, E2 - OSPF external <span class="kw3">type</span> <span class="nu0">2</span>
       i - IS-IS, <span class="kw2">su</span> - IS-IS summary, L1 - IS-IS level-<span class="nu0">1</span>, L2 - IS-IS level-<span class="nu0">2</span>
       ia - IS-IS inter area, <span class="sy0">*</span> - candidate default, U - per-user static route
       o - ODR, P - periodic downloaded static route
&nbsp;
Gateway of <span class="kw2">last</span> resort is 141.85.99.1 to network 0.0.0.0
&nbsp;
     141.85.0.0<span class="sy0">/</span><span class="nu0">24</span> is subnetted, <span class="nu0">1</span> subnets
C       141.85.99.0 is directly connected, FastEthernet0<span class="sy0">/</span><span class="nu0">0</span>
S<span class="sy0">*</span>   0.0.0.0<span class="sy0">/</span><span class="nu0">0</span> <span class="br0">&#91;</span><span class="nu0">1</span><span class="sy0">/</span><span class="nu0">0</span><span class="br0">&#93;</span> via 141.85.99.1
&nbsp;
R1<span class="br0">&#40;</span>config<span class="br0">&#41;</span><span class="co0">#ip route 0.0.0.0 0.0.0.0 141.85.99.1 130</span></pre>


<pre class="code bash"><span class="co4">R2#</span>show <span class="kw2">ip</span> interface brief
Interface                  IP-Address      OK? Method Status                Protocol
FastEthernet0<span class="sy0">/</span><span class="nu0">0</span>            10.10.10.100    YES manual up                    up  
<span class="co4">R2#</span>show <span class="kw2">ip route</span>
Codes: C - connected, S - static, R - RIP, M - mobile, B - BGP
       D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area
       N1 - OSPF NSSA external <span class="kw3">type</span> <span class="nu0">1</span>, N2 - OSPF NSSA external <span class="kw3">type</span> <span class="nu0">2</span>
       E1 - OSPF external <span class="kw3">type</span> <span class="nu0">1</span>, E2 - OSPF external <span class="kw3">type</span> <span class="nu0">2</span>
       i - IS-IS, <span class="kw2">su</span> - IS-IS summary, L1 - IS-IS level-<span class="nu0">1</span>, L2 - IS-IS level-<span class="nu0">2</span>
       ia - IS-IS inter area, <span class="sy0">*</span> - candidate default, U - per-user static route
       o - ODR, P - periodic downloaded static route
&nbsp;
Gateway of <span class="kw2">last</span> resort is 10.10.10.1 to network 0.0.0.0
&nbsp;
     10.0.0.0<span class="sy0">/</span><span class="nu0">24</span> is subnetted, <span class="nu0">1</span> subnets
C       10.10.10.0 is directly connected, FastEthernet0<span class="sy0">/</span><span class="nu0">0</span>
S<span class="sy0">*</span>   0.0.0.0<span class="sy0">/</span><span class="nu0">0</span> <span class="br0">&#91;</span><span class="nu0">1</span><span class="sy0">/</span><span class="nu0">0</span><span class="br0">&#93;</span> via 10.10.10.1
&nbsp;
R2<span class="br0">&#40;</span>config<span class="br0">&#41;</span><span class="co0">#ip route 0.0.0.0 0.0.0.0 10.10.10.1 130</span></pre>


<pre class="code bash"><span class="co4">R3#</span>show <span class="kw2">ip</span> interface brief
Interface                  IP-Address      OK? Method Status                Protocol
FastEthernet0<span class="sy0">/</span><span class="nu0">0</span>            192.168.1.100   YES manual up                    up  
<span class="co4">R3#</span>show <span class="kw2">ip route</span>
Codes: C - connected, S - static, R - RIP, M - mobile, B - BGP
       D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area
       N1 - OSPF NSSA external <span class="kw3">type</span> <span class="nu0">1</span>, N2 - OSPF NSSA external <span class="kw3">type</span> <span class="nu0">2</span>
       E1 - OSPF external <span class="kw3">type</span> <span class="nu0">1</span>, E2 - OSPF external <span class="kw3">type</span> <span class="nu0">2</span>
       i - IS-IS, <span class="kw2">su</span> - IS-IS summary, L1 - IS-IS level-<span class="nu0">1</span>, L2 - IS-IS level-<span class="nu0">2</span>
       ia - IS-IS inter area, <span class="sy0">*</span> - candidate default, U - per-user static route
       o - ODR, P - periodic downloaded static route
&nbsp;
Gateway of <span class="kw2">last</span> resort is 192.168.1.1 to network 0.0.0.0
&nbsp;
C    192.168.1.0<span class="sy0">/</span><span class="nu0">24</span> is directly connected, FastEthernet0<span class="sy0">/</span><span class="nu0">0</span>
S<span class="sy0">*</span>   0.0.0.0<span class="sy0">/</span><span class="nu0">0</span> <span class="br0">&#91;</span><span class="nu0">1</span><span class="sy0">/</span><span class="nu0">0</span><span class="br0">&#93;</span> via 192.168.1.1
&nbsp;
R3<span class="br0">&#40;</span>config<span class="br0">&#41;</span><span class="co0">#ip route 0.0.0.0 0.0.0.0 192.168.1.1 130</span></pre>


</div></div>

</div>

<h4 id="b_intervlan_routing">B. InterVLAN Routing</h4>
<div class="level4">

<p>
Configure inter-VLAN routing on the ASA between R1 and R2 by following the steps below:
</p>

<p>
Activate the <strong>GigabitEthernet0</strong> interface. <strong>Do not</strong> configure a name or IP address on the interface.
</p>
<div class="solution"><div class="solution_title hidden_solution_title"><img src="../../../../../lib/tpl/arctic/images/tool-source.png"/><span class="title_text">Show solution</span></div><div class="hide_text">Hide solution</div><div class="show_text">Show solution</div><div class="solution_contents hidden_solution_contents"> <pre class="code bash">Atlas<span class="br0">&#40;</span>config<span class="br0">&#41;</span><span class="co0"># interface gigabit 0</span>
Atlas<span class="br0">&#40;</span>config-if<span class="br0">&#41;</span><span class="co0"># no shutdown</span></pre>


</div></div>

<p>
<p><div class="noteimportant"> Note that <strong>R1</strong> is in <strong>VLAN10</strong> and <strong>R2</strong> is in <strong>VLAN20</strong>. 
</div></p>
</p>

<p>
On <strong>GigabitEthernet0</strong>, create two virtual subinterfaces corresponding to <strong>VLAN10</strong> and <strong>VLAN20</strong>. Assign the relevant next-hop addresses configured on the routers to the subinterfaces.
</p>
<div class="solution"><div class="solution_title hidden_solution_title"><img src="../../../../../lib/tpl/arctic/images/tool-source.png"/><span class="title_text">Show solution</span></div><div class="hide_text">Hide solution</div><div class="show_text">Show solution</div><div class="solution_contents hidden_solution_contents"> <pre class="code bash">Atlas<span class="br0">&#40;</span>config<span class="br0">&#41;</span><span class="co0"># interface gigabit 0.10</span>
Atlas<span class="br0">&#40;</span>config-subif<span class="br0">&#41;</span><span class="co0"># ip address 141.85.99.1 255.255.255.0</span>
Atlas<span class="br0">&#40;</span>config-subif<span class="br0">&#41;</span><span class="co0"># interface gigabit 0.20</span>
Atlas<span class="br0">&#40;</span>config-subif<span class="br0">&#41;</span><span class="co0"># ip address 10.10.10.1 255.255.255.0</span></pre>


</div></div>

<p>
Configure the VLANs and names on the two subinterfaces:
</p>
<ul>
<li class="level1"><div class="li"> the <strong>VLAN10</strong> subinterface will be <code>outside</code></div>
</li>
<li class="level1"><div class="li"> the <strong>VLAN20</strong> subinterface will be <code>dmz</code></div>
</li>
</ul>
<div class="solution"><div class="solution_title hidden_solution_title"><img src="../../../../../lib/tpl/arctic/images/tool-source.png"/><span class="title_text">Show solution</span></div><div class="hide_text">Hide solution</div><div class="show_text">Show solution</div><div class="solution_contents hidden_solution_contents"> <pre class="code bash">Atlas<span class="br0">&#40;</span>config<span class="br0">&#41;</span><span class="co0"># interface gigabit 0.10</span>
Atlas<span class="br0">&#40;</span>config-subif<span class="br0">&#41;</span><span class="co0"># vlan 10</span>
Atlas<span class="br0">&#40;</span>config-subif<span class="br0">&#41;</span><span class="co0"># nameif outside</span>
INFO: Security level <span class="kw1">for</span> <span class="st0">&quot;outside&quot;</span> <span class="kw1">set</span> to <span class="nu0">0</span> by default.
Atlas<span class="br0">&#40;</span>config-subif<span class="br0">&#41;</span><span class="co0"># interface gigabit 0.20</span>
Atlas<span class="br0">&#40;</span>config-subif<span class="br0">&#41;</span><span class="co0"># vlan 20</span>
Atlas<span class="br0">&#40;</span>config-subif<span class="br0">&#41;</span><span class="co0"># nameif dmz</span>
INFO: Security level <span class="kw1">for</span> <span class="st0">&quot;dmz&quot;</span> <span class="kw1">set</span> to <span class="nu0">0</span> by default.</pre>


</div></div>

<p>
Configure a security level of 30 on each subinterface.
</p>
<div class="solution"><div class="solution_title hidden_solution_title"><img src="../../../../../lib/tpl/arctic/images/tool-source.png"/><span class="title_text">Show solution</span></div><div class="hide_text">Hide solution</div><div class="show_text">Show solution</div><div class="solution_contents hidden_solution_contents"> <pre class="code bash">Atlas<span class="br0">&#40;</span>config<span class="br0">&#41;</span><span class="co0"># interface gigabit 0.10</span>
Atlas<span class="br0">&#40;</span>config-subif<span class="br0">&#41;</span><span class="co0"># security-level 30</span>
Atlas<span class="br0">&#40;</span>config-subif<span class="br0">&#41;</span><span class="co0"># interface gigabit 0.20</span>
Atlas<span class="br0">&#40;</span>config-subif<span class="br0">&#41;</span><span class="co0"># security-level 30</span></pre>


</div></div>

<p>
Configure the ASA device to allow traffic between interfaces that belong to the same security level. Test the configuration using <code>telnet</code>.
</p>
<div class="solution"><div class="solution_title hidden_solution_title"><img src="../../../../../lib/tpl/arctic/images/tool-source.png"/><span class="title_text">Show solution</span></div><div class="hide_text">Hide solution</div><div class="show_text">Show solution</div><div class="solution_contents hidden_solution_contents"> <pre class="code bash">Atlas<span class="br0">&#40;</span>config<span class="br0">&#41;</span><span class="co0"># same-security-traffic permit inter-interface</span></pre>


<pre class="code bash"><span class="co4">R1#</span>telnet 10.10.10.100
Trying 10.10.10.100 ... Open
&nbsp;
&nbsp;
Password required, but none <span class="kw1">set</span>
&nbsp;
<span class="br0">&#91;</span>Connection to 10.10.10.100 closed by foreign host<span class="br0">&#93;</span></pre>


</div></div>

</div>
<!-- EDIT4 SECTION "1. Basic Setup" [140-5354] -->
<h3 class="sectionedit5" id="static_routing">2. Static routing</h3>
<div class="level3">

<p>
In this task you will configure routes on the ASA firewall in order to reach remote networks.
</p>

</div>

<h4 id="a_inside_connectivity">A. Inside connectivity</h4>
<div class="level4">

<p>
Establish connectivity between the ASA firewall and the <code>inside</code> router.
</p>
<div class="solution"><div class="solution_title hidden_solution_title"><img src="../../../../../lib/tpl/arctic/images/tool-source.png"/><span class="title_text">Show solution</span></div><div class="hide_text">Hide solution</div><div class="show_text">Show solution</div><div class="solution_contents hidden_solution_contents"> <pre class="code bash">Atlas<span class="br0">&#40;</span>config<span class="br0">&#41;</span><span class="co0"># interface gigabit 2</span>
Atlas<span class="br0">&#40;</span>config-if<span class="br0">&#41;</span><span class="co0"># ip address 192.168.1.1 255.255.255.0</span>
Atlas<span class="br0">&#40;</span>config-if<span class="br0">&#41;</span><span class="co0"># nameif inside</span>
INFO: Security level <span class="kw1">for</span> <span class="st0">&quot;inside&quot;</span> <span class="kw1">set</span> to <span class="nu0">100</span> by default.
Atlas<span class="br0">&#40;</span>config-if<span class="br0">&#41;</span><span class="co0"># no shutdown</span></pre>


<pre class="code bash"><span class="co4">R3#</span><span class="kw2">ping</span> 192.168.1.1
&nbsp;
Type escape sequence to abort.
Sending <span class="nu0">5</span>, <span class="nu0">100</span>-byte ICMP Echos to 192.168.1.1, timeout is <span class="nu0">2</span> seconds:
.<span class="sy0">!!!!</span>
Success rate is <span class="nu0">80</span> percent <span class="br0">&#40;</span><span class="nu0">4</span><span class="sy0">/</span><span class="nu0">5</span><span class="br0">&#41;</span>, round-trip min<span class="sy0">/</span>avg<span class="sy0">/</span>max = <span class="nu0">8</span><span class="sy0">/</span><span class="nu0">17</span><span class="sy0">/</span><span class="nu0">32</span> ms</pre>


</div></div>

</div>

<h4 id="b_loopback_interfaces">B. Loopback interfaces</h4>
<div class="level4">

<p>
Configure the <strong>Loopback0</strong> interface on each of the three routers. Use the following IP addresses:
</p>
<ul>
<li class="level1"><div class="li"> <code>inside</code> loopback: 192.168.20.100/24 </div>
</li>
</ul>
<div class="solution"><div class="solution_title hidden_solution_title"><img src="../../../../../lib/tpl/arctic/images/tool-source.png"/><span class="title_text">Show solution</span></div><div class="hide_text">Hide solution</div><div class="show_text">Show solution</div><div class="solution_contents hidden_solution_contents"> <pre class="code bash">R3<span class="br0">&#40;</span>config<span class="br0">&#41;</span><span class="co0">#interface loopback 0</span>
R3<span class="br0">&#40;</span>config-if<span class="br0">&#41;</span><span class="co0">#ip address 192.168.20.100 255.255.255.0</span></pre>


</div></div>
<ul>
<li class="level1"><div class="li"> <code>outside</code> loopback: 141.85.20.100/24 </div>
</li>
</ul>
<div class="solution"><div class="solution_title hidden_solution_title"><img src="../../../../../lib/tpl/arctic/images/tool-source.png"/><span class="title_text">Show solution</span></div><div class="hide_text">Hide solution</div><div class="show_text">Show solution</div><div class="solution_contents hidden_solution_contents"> <pre class="code bash">R1<span class="br0">&#40;</span>config<span class="br0">&#41;</span><span class="co0">#interface loopback 0</span>
R1<span class="br0">&#40;</span>config-if<span class="br0">&#41;</span><span class="co0">#ip address 141.85.20.100 255.255.255.0</span></pre>


</div></div>
<ul>
<li class="level1"><div class="li"> <code>dmz</code> loopback: 10.10.20.100/24 </div>
</li>
</ul>
<div class="solution"><div class="solution_title hidden_solution_title"><img src="../../../../../lib/tpl/arctic/images/tool-source.png"/><span class="title_text">Show solution</span></div><div class="hide_text">Hide solution</div><div class="show_text">Show solution</div><div class="solution_contents hidden_solution_contents"> <pre class="code bash">R2<span class="br0">&#40;</span>config<span class="br0">&#41;</span><span class="co0">#interface loopback 0</span>
R2<span class="br0">&#40;</span>config-if<span class="br0">&#41;</span><span class="co0">#ip address 10.10.20.100 255.255.255.0</span></pre>


</div></div>

</div>

<h4 id="c_static_routes">C. Static routes</h4>
<div class="level4">

<p>
Configure the required static routes on the ASA firewall in order to be able to ping the loopback interfaces. Use an administrative distance of 130 for the routes.
</p>
<div class="solution"><div class="solution_title hidden_solution_title"><img src="../../../../../lib/tpl/arctic/images/tool-source.png"/><span class="title_text">Show solution</span></div><div class="hide_text">Hide solution</div><div class="show_text">Show solution</div><div class="solution_contents hidden_solution_contents"> <pre class="code bash">Atlas<span class="br0">&#40;</span>config<span class="br0">&#41;</span><span class="co0"># route outside 141.85.20.0 255.255.255.0 141.85.99.100 130</span>
Atlas<span class="br0">&#40;</span>config<span class="br0">&#41;</span><span class="co0"># route dmz 10.10.20.0 255.255.255.0 10.10.10.100 130</span>
Atlas<span class="br0">&#40;</span>config<span class="br0">&#41;</span><span class="co0"># route inside 192.168.20.0 255.255.255.0 192.168.1.100 130</span>
&nbsp;
<span class="co4">Atlas# </span><span class="kw2">ping</span> 192.168.20.100
Type escape sequence to abort.
Sending <span class="nu0">5</span>, <span class="nu0">100</span>-byte ICMP Echos to 192.168.20.100, timeout is <span class="nu0">2</span> seconds:
<span class="sy0">!!!!!</span>
Success rate is <span class="nu0">100</span> percent <span class="br0">&#40;</span><span class="nu0">5</span><span class="sy0">/</span><span class="nu0">5</span><span class="br0">&#41;</span>, round-trip min<span class="sy0">/</span>avg<span class="sy0">/</span>max = <span class="nu0">1</span><span class="sy0">/</span><span class="nu0">16</span><span class="sy0">/</span><span class="nu0">40</span> ms
&nbsp;
<span class="co4">Atlas# </span><span class="kw2">ping</span> 10.10.20.100
Type escape sequence to abort.
Sending <span class="nu0">5</span>, <span class="nu0">100</span>-byte ICMP Echos to 10.10.20.100, timeout is <span class="nu0">2</span> seconds:
<span class="sy0">!!!!!</span>
Success rate is <span class="nu0">100</span> percent <span class="br0">&#40;</span><span class="nu0">5</span><span class="sy0">/</span><span class="nu0">5</span><span class="br0">&#41;</span>, round-trip min<span class="sy0">/</span>avg<span class="sy0">/</span>max = <span class="nu0">10</span><span class="sy0">/</span><span class="nu0">16</span><span class="sy0">/</span><span class="nu0">40</span> ms
&nbsp;
<span class="co4">Atlas# </span><span class="kw2">ping</span> 141.85.20.100
Type escape sequence to abort.
Sending <span class="nu0">5</span>, <span class="nu0">100</span>-byte ICMP Echos to 141.85.20.100, timeout is <span class="nu0">2</span> seconds:
<span class="sy0">!!!!!</span>
Success rate is <span class="nu0">100</span> percent <span class="br0">&#40;</span><span class="nu0">5</span><span class="sy0">/</span><span class="nu0">5</span><span class="br0">&#41;</span>, round-trip min<span class="sy0">/</span>avg<span class="sy0">/</span>max = <span class="nu0">10</span><span class="sy0">/</span><span class="nu0">16</span><span class="sy0">/</span><span class="nu0">20</span> ms</pre>


</div></div>

</div>
<!-- EDIT5 SECTION "2. Static routing" [5355-7827] -->
<h3 class="sectionedit6" id="rip">3. RIP</h3>
<div class="level3">

<p>
In this task you will configure the RIP routing protocol between the ASA and routers.
</p>

</div>

<h4 id="a_ripv2_on_the_routers">A. RIPv2 on the routers</h4>
<div class="level4">

<p>
Activate RIPv2 on the <strong>FastEthernet0/0</strong> and <strong>Loopback0</strong> router interfaces. Deactivate automatic summaries.
</p>
<div class="solution"><div class="solution_title hidden_solution_title"><img src="../../../../../lib/tpl/arctic/images/tool-source.png"/><span class="title_text">Show solution</span></div><div class="hide_text">Hide solution</div><div class="show_text">Show solution</div><div class="solution_contents hidden_solution_contents"> <pre class="code bash">R1<span class="br0">&#40;</span>config<span class="br0">&#41;</span><span class="co0">#router rip</span>
R1<span class="br0">&#40;</span>config-router<span class="br0">&#41;</span><span class="co0">#version 2</span>
R1<span class="br0">&#40;</span>config-router<span class="br0">&#41;</span><span class="co0">#network 141.85.0.0</span>
R1<span class="br0">&#40;</span>config-router<span class="br0">&#41;</span><span class="co0">#no auto-summary</span></pre>


<pre class="code bash">R2<span class="br0">&#40;</span>config<span class="br0">&#41;</span><span class="co0">#router rip</span>
R2<span class="br0">&#40;</span>config-router<span class="br0">&#41;</span><span class="co0">#version 2</span>
R2<span class="br0">&#40;</span>config-router<span class="br0">&#41;</span><span class="co0">#network 10.0.0.0</span>
R2<span class="br0">&#40;</span>config-router<span class="br0">&#41;</span><span class="co0">#no auto-summary</span></pre>


<pre class="code bash">R3<span class="br0">&#40;</span>config<span class="br0">&#41;</span><span class="co0">#router rip</span>
R3<span class="br0">&#40;</span>config-router<span class="br0">&#41;</span><span class="co0">#version 2</span>
R3<span class="br0">&#40;</span>config-router<span class="br0">&#41;</span><span class="co0">#network 192.168.1.0</span>
R3<span class="br0">&#40;</span>config-router<span class="br0">&#41;</span><span class="co0">#network 192.168.20.0</span>
R3<span class="br0">&#40;</span>config-router<span class="br0">&#41;</span><span class="co0">#no auto-summary</span></pre>


</div></div>

</div>

<h4 id="b_ripv2_on_the_firewall">B. RIPv2 on the firewall</h4>
<div class="level4">

<p>
Enable RIPv2 on the ASA for all interfaces. Deactivate automatic summaries.
</p>

<p>
Verify that routes are learned on the ASA firewall.
</p>
<div class="solution"><div class="solution_title hidden_solution_title"><img src="../../../../../lib/tpl/arctic/images/tool-source.png"/><span class="title_text">Show solution</span></div><div class="hide_text">Hide solution</div><div class="show_text">Show solution</div><div class="solution_contents hidden_solution_contents"> <pre class="code bash"><span class="co4">Atlas# </span>show route
&nbsp;
Codes: C - connected, S - static, I - IGRP, R - RIP, M - mobile, B - BGP
       D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area
       N1 - OSPF NSSA external <span class="kw3">type</span> <span class="nu0">1</span>, N2 - OSPF NSSA external <span class="kw3">type</span> <span class="nu0">2</span>
       E1 - OSPF external <span class="kw3">type</span> <span class="nu0">1</span>, E2 - OSPF external <span class="kw3">type</span> <span class="nu0">2</span>, E - EGP
       i - IS-IS, L1 - IS-IS level-<span class="nu0">1</span>, L2 - IS-IS level-<span class="nu0">2</span>, ia - IS-IS inter area
       <span class="sy0">*</span> - candidate default, U - per-user static route, o - ODR
       P - periodic downloaded static route
&nbsp;
Gateway of <span class="kw2">last</span> resort is not <span class="kw1">set</span>
&nbsp;
C    141.85.99.0 255.255.255.0 is directly connected, outside
S    141.85.20.0 255.255.255.0 <span class="br0">&#91;</span><span class="nu0">130</span><span class="sy0">/</span><span class="nu0">0</span><span class="br0">&#93;</span> via 141.85.99.100, outside
S    192.168.20.0 255.255.255.0 <span class="br0">&#91;</span><span class="nu0">130</span><span class="sy0">/</span><span class="nu0">0</span><span class="br0">&#93;</span> via 192.168.1.100, inside
C    10.10.10.0 255.255.255.0 is directly connected, dmz
S    10.10.20.0 255.255.255.0 <span class="br0">&#91;</span><span class="nu0">130</span><span class="sy0">/</span><span class="nu0">0</span><span class="br0">&#93;</span> via 10.10.10.100, dmz
C    192.168.1.0 255.255.255.0 is directly connected, inside</pre>


<pre class="code bash">Atlas<span class="br0">&#40;</span>config<span class="br0">&#41;</span><span class="co0"># router rip</span>
Atlas<span class="br0">&#40;</span>config-router<span class="br0">&#41;</span><span class="co0"># network 141.85.0.0</span>
Atlas<span class="br0">&#40;</span>config-router<span class="br0">&#41;</span><span class="co0"># network 10.0.0.0</span>
Atlas<span class="br0">&#40;</span>config-router<span class="br0">&#41;</span><span class="co0"># network 192.168.1.0</span>
Atlas<span class="br0">&#40;</span>config-router<span class="br0">&#41;</span><span class="co0"># version 2</span>
Atlas<span class="br0">&#40;</span>config-router<span class="br0">&#41;</span><span class="co0"># no auto-summary</span></pre>


<pre class="code bash"><span class="co4">Atlas# </span>show route
&nbsp;
Codes: C - connected, S - static, I - IGRP, R - RIP, M - mobile, B - BGP
       D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area
       N1 - OSPF NSSA external <span class="kw3">type</span> <span class="nu0">1</span>, N2 - OSPF NSSA external <span class="kw3">type</span> <span class="nu0">2</span>
       E1 - OSPF external <span class="kw3">type</span> <span class="nu0">1</span>, E2 - OSPF external <span class="kw3">type</span> <span class="nu0">2</span>, E - EGP
       i - IS-IS, L1 - IS-IS level-<span class="nu0">1</span>, L2 - IS-IS level-<span class="nu0">2</span>, ia - IS-IS inter area
       <span class="sy0">*</span> - candidate default, U - per-user static route, o - ODR
       P - periodic downloaded static route
&nbsp;
Gateway of <span class="kw2">last</span> resort is not <span class="kw1">set</span>
&nbsp;
C    141.85.99.0 255.255.255.0 is directly connected, outside
R    141.85.20.0 255.255.255.0 <span class="br0">&#91;</span><span class="nu0">120</span><span class="sy0">/</span><span class="nu0">1</span><span class="br0">&#93;</span> via 141.85.99.100, <span class="nu0">0</span>:00:01, outside
R    192.168.20.0 255.255.255.0 <span class="br0">&#91;</span><span class="nu0">120</span><span class="sy0">/</span><span class="nu0">1</span><span class="br0">&#93;</span> via 192.168.1.100, <span class="nu0">0</span>:00:02, inside
C    10.10.10.0 255.255.255.0 is directly connected, dmz
R    10.10.20.0 255.255.255.0 <span class="br0">&#91;</span><span class="nu0">120</span><span class="sy0">/</span><span class="nu0">1</span><span class="br0">&#93;</span> via 10.10.10.100, <span class="nu0">0</span>:00:01, dmz
C    192.168.1.0 255.255.255.0 is directly connected, inside</pre>


</div></div>

</div>

<h4 id="c_connectivity_test">C. Connectivity test</h4>
<div class="level4">

<p>
Test that the ASA can successfully <code>ping</code> the loopback interfaces.
</p>
<div class="solution"><div class="solution_title hidden_solution_title"><img src="../../../../../lib/tpl/arctic/images/tool-source.png"/><span class="title_text">Show solution</span></div><div class="hide_text">Hide solution</div><div class="show_text">Show solution</div><div class="solution_contents hidden_solution_contents"> <pre class="code bash"><span class="co4">Atlas# </span><span class="kw2">ping</span> 141.85.20.100
Type escape sequence to abort.
Sending <span class="nu0">5</span>, <span class="nu0">100</span>-byte ICMP Echos to 141.85.20.100, timeout is <span class="nu0">2</span> seconds:
<span class="sy0">!!!!!</span>
Success rate is <span class="nu0">100</span> percent <span class="br0">&#40;</span><span class="nu0">5</span><span class="sy0">/</span><span class="nu0">5</span><span class="br0">&#41;</span>, round-trip min<span class="sy0">/</span>avg<span class="sy0">/</span>max = <span class="nu0">1</span><span class="sy0">/</span><span class="nu0">20</span><span class="sy0">/</span><span class="nu0">60</span> ms
<span class="co4">Atlas# </span><span class="kw2">ping</span> 192.168.20.100
Type escape sequence to abort.
Sending <span class="nu0">5</span>, <span class="nu0">100</span>-byte ICMP Echos to 192.168.20.100, timeout is <span class="nu0">2</span> seconds:
<span class="sy0">!!!!!</span>
Success rate is <span class="nu0">100</span> percent <span class="br0">&#40;</span><span class="nu0">5</span><span class="sy0">/</span><span class="nu0">5</span><span class="br0">&#41;</span>, round-trip min<span class="sy0">/</span>avg<span class="sy0">/</span>max = <span class="nu0">1</span><span class="sy0">/</span><span class="nu0">10</span><span class="sy0">/</span><span class="nu0">30</span> ms
<span class="co4">Atlas# </span><span class="kw2">ping</span> 10.10.20.100
Type escape sequence to abort.
Sending <span class="nu0">5</span>, <span class="nu0">100</span>-byte ICMP Echos to 10.10.20.100, timeout is <span class="nu0">2</span> seconds:
<span class="sy0">!!!!!</span>
Success rate is <span class="nu0">100</span> percent <span class="br0">&#40;</span><span class="nu0">5</span><span class="sy0">/</span><span class="nu0">5</span><span class="br0">&#41;</span>, round-trip min<span class="sy0">/</span>avg<span class="sy0">/</span>max = <span class="nu0">10</span><span class="sy0">/</span><span class="nu0">16</span><span class="sy0">/</span><span class="nu0">30</span> ms</pre>
</div></div>

</div>

<h4 id="d_passive_interface">D. Passive interface</h4>
<div class="level4">

<p>
It has been determined that advertising <code>dmz</code> and <code>inside</code> routes to the <code>outside</code> router is a security breach.
</p>

<p>
Configure the <code>outside</code> interface as a <code>passive-interface</code> so that routes are no longer advertised via RIP.
</p>
<div class="solution"><div class="solution_title hidden_solution_title"><img src="../../../../../lib/tpl/arctic/images/tool-source.png"/><span class="title_text">Show solution</span></div><div class="hide_text">Hide solution</div><div class="show_text">Show solution</div><div class="solution_contents hidden_solution_contents"><pre class="code bash">Atlas<span class="br0">&#40;</span>config<span class="br0">&#41;</span><span class="co0"># router rip</span>
Atlas<span class="br0">&#40;</span>config-router<span class="br0">&#41;</span><span class="co0"># passive-interface outside</span></pre>


</div></div>

</div>

<h4 id="e_advertise_default_routes">E. Advertise default routes</h4>
<div class="level4">

<p>
On the ASA firewall, advertise a default route using RIP.
</p>
<div class="solution"><div class="solution_title hidden_solution_title"><img src="../../../../../lib/tpl/arctic/images/tool-source.png"/><span class="title_text">Show solution</span></div><div class="hide_text">Hide solution</div><div class="show_text">Show solution</div><div class="solution_contents hidden_solution_contents"> <pre class="code bash">Atlas<span class="br0">&#40;</span>config<span class="br0">&#41;</span><span class="co0"># router rip</span>
Atlas<span class="br0">&#40;</span>config-router<span class="br0">&#41;</span><span class="co0"># default-information originate</span></pre>


<pre class="code bash"><span class="co4">R2#</span>show <span class="kw2">ip route</span>
Codes: C - connected, S - static, R - RIP, M - mobile, B - BGP
       D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area
       N1 - OSPF NSSA external <span class="kw3">type</span> <span class="nu0">1</span>, N2 - OSPF NSSA external <span class="kw3">type</span> <span class="nu0">2</span>
       E1 - OSPF external <span class="kw3">type</span> <span class="nu0">1</span>, E2 - OSPF external <span class="kw3">type</span> <span class="nu0">2</span>
       i - IS-IS, <span class="kw2">su</span> - IS-IS summary, L1 - IS-IS level-<span class="nu0">1</span>, L2 - IS-IS level-<span class="nu0">2</span>
       ia - IS-IS inter area, <span class="sy0">*</span> - candidate default, U - per-user static route
       o - ODR, P - periodic downloaded static route
&nbsp;
Gateway of <span class="kw2">last</span> resort is 10.10.10.1 to network 0.0.0.0
&nbsp;
     141.85.0.0<span class="sy0">/</span><span class="nu0">24</span> is subnetted, <span class="nu0">2</span> subnets
R       141.85.99.0 <span class="br0">&#91;</span><span class="nu0">120</span><span class="sy0">/</span><span class="nu0">1</span><span class="br0">&#93;</span> via 10.10.10.1, 00:00:<span class="nu0">19</span>, FastEthernet0<span class="sy0">/</span><span class="nu0">0</span>
R       141.85.20.0 <span class="br0">&#91;</span><span class="nu0">120</span><span class="sy0">/</span><span class="nu0">2</span><span class="br0">&#93;</span> via 10.10.10.1, 00:00:<span class="nu0">19</span>, FastEthernet0<span class="sy0">/</span><span class="nu0">0</span>
R    192.168.20.0<span class="sy0">/</span><span class="nu0">24</span> <span class="br0">&#91;</span><span class="nu0">120</span><span class="sy0">/</span><span class="nu0">2</span><span class="br0">&#93;</span> via 10.10.10.1, 00:00:<span class="nu0">19</span>, FastEthernet0<span class="sy0">/</span><span class="nu0">0</span>
     10.0.0.0<span class="sy0">/</span><span class="nu0">24</span> is subnetted, <span class="nu0">2</span> subnets
C       10.10.10.0 is directly connected, FastEthernet0<span class="sy0">/</span><span class="nu0">0</span>
C       10.10.20.0 is directly connected, Loopback0
R    192.168.1.0<span class="sy0">/</span><span class="nu0">24</span> <span class="br0">&#91;</span><span class="nu0">120</span><span class="sy0">/</span><span class="nu0">1</span><span class="br0">&#93;</span> via 10.10.10.1, 00:00:<span class="nu0">19</span>, FastEthernet0<span class="sy0">/</span><span class="nu0">0</span>
R<span class="sy0">*</span>   0.0.0.0<span class="sy0">/</span><span class="nu0">0</span> <span class="br0">&#91;</span><span class="nu0">120</span><span class="sy0">/</span><span class="nu0">1</span><span class="br0">&#93;</span> via 10.10.10.1, 00:00:<span class="nu0">20</span>, FastEthernet0<span class="sy0">/</span><span class="nu0">0</span></pre>


<pre class="code bash"><span class="co4">R3#</span>show <span class="kw2">ip route</span>
Codes: C - connected, S - static, R - RIP, M - mobile, B - BGP
       D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area
       N1 - OSPF NSSA external <span class="kw3">type</span> <span class="nu0">1</span>, N2 - OSPF NSSA external <span class="kw3">type</span> <span class="nu0">2</span>
       E1 - OSPF external <span class="kw3">type</span> <span class="nu0">1</span>, E2 - OSPF external <span class="kw3">type</span> <span class="nu0">2</span>
       i - IS-IS, <span class="kw2">su</span> - IS-IS summary, L1 - IS-IS level-<span class="nu0">1</span>, L2 - IS-IS level-<span class="nu0">2</span>
       ia - IS-IS inter area, <span class="sy0">*</span> - candidate default, U - per-user static route
       o - ODR, P - periodic downloaded static route
&nbsp;
Gateway of <span class="kw2">last</span> resort is 192.168.1.1 to network 0.0.0.0
&nbsp;
     141.85.0.0<span class="sy0">/</span><span class="nu0">24</span> is subnetted, <span class="nu0">2</span> subnets
R       141.85.99.0 <span class="br0">&#91;</span><span class="nu0">120</span><span class="sy0">/</span><span class="nu0">1</span><span class="br0">&#93;</span> via 192.168.1.1, 00:00:06, FastEthernet0<span class="sy0">/</span><span class="nu0">0</span>
R       141.85.20.0 <span class="br0">&#91;</span><span class="nu0">120</span><span class="sy0">/</span><span class="nu0">2</span><span class="br0">&#93;</span> via 192.168.1.1, 00:00:06, FastEthernet0<span class="sy0">/</span><span class="nu0">0</span>
C    192.168.20.0<span class="sy0">/</span><span class="nu0">24</span> is directly connected, Loopback0
     10.0.0.0<span class="sy0">/</span><span class="nu0">24</span> is subnetted, <span class="nu0">2</span> subnets
R       10.10.10.0 <span class="br0">&#91;</span><span class="nu0">120</span><span class="sy0">/</span><span class="nu0">1</span><span class="br0">&#93;</span> via 192.168.1.1, 00:00:06, FastEthernet0<span class="sy0">/</span><span class="nu0">0</span>
R       10.10.20.0 <span class="br0">&#91;</span><span class="nu0">120</span><span class="sy0">/</span><span class="nu0">2</span><span class="br0">&#93;</span> via 192.168.1.1, 00:00:06, FastEthernet0<span class="sy0">/</span><span class="nu0">0</span>
C    192.168.1.0<span class="sy0">/</span><span class="nu0">24</span> is directly connected, FastEthernet0<span class="sy0">/</span><span class="nu0">0</span>
R<span class="sy0">*</span>   0.0.0.0<span class="sy0">/</span><span class="nu0">0</span> <span class="br0">&#91;</span><span class="nu0">120</span><span class="sy0">/</span><span class="nu0">1</span><span class="br0">&#93;</span> via 192.168.1.1, 00:00:07, FastEthernet0<span class="sy0">/</span><span class="nu0">0</span></pre>


</div></div>

</div>

<h4 id="f_end_to_end_connectivity">F. End to end connectivity</h4>
<div class="level4">

<p>
Test end to end connectivity between the loopback interfaces using <code>ping</code>.
</p>

<p>
<p><div class="noteclassic"> Only test traffic flowing from high security-level interfaces to low security-level interfaces. 
</div></p>
</p>

<p>
<p><div class="notetip"> You will need to adjust the policies in order to enable ICMP traffic 
</div></p>
</p>
<div class="solution"><div class="solution_title hidden_solution_title"><img src="../../../../../lib/tpl/arctic/images/tool-source.png"/><span class="title_text">Show solution</span></div><div class="hide_text">Hide solution</div><div class="show_text">Show solution</div><div class="solution_contents hidden_solution_contents"> <pre class="code bash"><span class="co4">R1#</span><span class="kw2">ping</span> 10.10.20.100 <span class="kw3">source</span> loopback <span class="nu0">0</span>
&nbsp;
Type escape sequence to abort.
Sending <span class="nu0">5</span>, <span class="nu0">100</span>-byte ICMP Echos to 10.10.20.100, timeout is <span class="nu0">2</span> seconds:
Packet sent with a <span class="kw3">source</span> address of 141.85.20.100
<span class="sy0">!!!!!</span>
Success rate is <span class="nu0">100</span> percent <span class="br0">&#40;</span><span class="nu0">5</span><span class="sy0">/</span><span class="nu0">5</span><span class="br0">&#41;</span>, round-trip min<span class="sy0">/</span>avg<span class="sy0">/</span>max = <span class="nu0">24</span><span class="sy0">/</span><span class="nu0">38</span><span class="sy0">/</span><span class="nu0">64</span> ms</pre>


<pre class="code bash">Atlas<span class="br0">&#40;</span>config<span class="br0">&#41;</span><span class="co0"># interface gigabit 2</span>
Atlas<span class="br0">&#40;</span>config-if<span class="br0">&#41;</span><span class="co0"># security-level 30</span></pre>


<pre class="code bash"><span class="co4">R3#</span><span class="kw2">ping</span> 141.85.20.100 <span class="kw3">source</span> loopback <span class="nu0">0</span>
&nbsp;
Type escape sequence to abort.
Sending <span class="nu0">5</span>, <span class="nu0">100</span>-byte ICMP Echos to 141.85.20.100, timeout is <span class="nu0">2</span> seconds:
Packet sent with a <span class="kw3">source</span> address of 192.168.20.100
<span class="sy0">!!!!!</span>
Success rate is <span class="nu0">100</span> percent <span class="br0">&#40;</span><span class="nu0">5</span><span class="sy0">/</span><span class="nu0">5</span><span class="br0">&#41;</span>, round-trip min<span class="sy0">/</span>avg<span class="sy0">/</span>max = <span class="nu0">24</span><span class="sy0">/</span><span class="nu0">37</span><span class="sy0">/</span><span class="nu0">68</span> ms</pre>


</div></div>

</div>
<!-- EDIT6 SECTION "3. RIP" [7828-] --></div>
</body>
</html>

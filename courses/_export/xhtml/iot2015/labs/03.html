    
    

<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8" />
  <title>iot2015:labs:03</title>
<meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="date" content="2016-06-17T15:45:22+0300"/>
<meta name="keywords" content="iot2015,labs,03"/>
<link rel="search" type="application/opensearchdescription+xml" href="../../../../lib/exe/opensearch.php" title="CS Open CourseWare"/>
<link rel="start" href="../../../../../courses.1.html"/>
<link rel="alternate" type="application/rss+xml" title="Recent Changes" href="../../../../feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current Namespace" href="../../../../feed.php%3Fmode=list&amp;ns=iot2015:labs"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="03.html"/>
<link rel="canonical" href="../../../../iot2015/labs/03.html"/>
<link rel="stylesheet" type="text/css" href="../../../../lib/exe/css.php%3Ft=arctic&amp;tseed=1479898000.css"/>
<script type="text/javascript">/*<![CDATA[*/var NS='iot2015:labs';var JSINFO = {"id":"iot2015:labs:03","namespace":"iot2015:labs","isadmin":0,"isauth":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="../../../../lib/exe/js.php%3Ftseed=1479898000"></script>
<script type="text/x-mathjax-config">/*<![CDATA[*/MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ["$","$"], ["\\(","\\)"] ],
        displayMath: [ ["$$","$$"], ["\\[","\\]"] ],
        processEscapes: true
    }
});
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
<script type="text/javascript">/*<![CDATA[*/
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
		  
/*!]]>*/</script>
<script type="text/javascript">/*<![CDATA[*/
var pageTracker = _gat._getTracker("UA-38383934-1");
pageTracker._initData();
pageTracker._trackPageview();
		  
/*!]]>*/</script>
</head>
<body>
<div class="dokuwiki export">
<!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="03.html#lab_3blink_a_led">Lab 3: Blink a LED</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="03.html#what_you_need">What you need</a></div></li>
<li class="level2"><div class="li"><a href="03.html#the_setup">The Setup</a></div></li>
<li class="level2"><div class="li"><a href="03.html#the_code">The Code</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="03.html#visual_programming">Visual Programming</a></div></li>
<li class="level3"><div class="li"><a href="03.html#python">Python</a></div></li>
<li class="level3"><div class="li"><a href="03.html#streams_programming">Streams Programming</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="03.html#tips_tricks">Tips &amp; Tricks</a></div></li>
<li class="level2"><div class="li"><a href="03.html#add_a_button">Add a button</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="03.html#what_you_need1">What you need</a></div></li>
<li class="level3"><div class="li"><a href="03.html#schematics">Schematics</a></div></li>
<li class="level3"><div class="li"><a href="03.html#the_code1">The code</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="03.html#exercises">Exercises</a></div></li>
</ul></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="lab_3blink_a_led">Lab 3: Blink a LED</h1>
<div class="level1">

</div>
<!-- EDIT1 SECTION "Lab 3: Blink a LED" [1-34] -->
<h2 class="sectionedit2" id="what_you_need">What you need</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> One Edison connected to Wyliodrin;</div>
</li>
<li class="level1"><div class="li"> One LED;</div>
</li>
<li class="level1"><div class="li"> One 200 Ohm resistor;</div>
</li>
<li class="level1"><div class="li"> Two male-male jumper wires.</div>
</li>
</ul>

<p>
 <a href="../../../../_detail/iot2015/labs/leed.png%3Fid=iot2015%253Alabs%253A03.html" class="media" title="iot2015:labs:leed.png"><img src="../../../../_media/iot2015/labs/leed.png%3Fw=80&amp;tok=a9b226" class="mediacenter" alt="" width="80" /></a>
<a href="../../../../_detail/iot2015/labs/resist.png%3Fid=iot2015%253Alabs%253A03.html" class="media" title="iot2015:labs:resist.png"><img src="../../../../_media/iot2015/labs/resist.png%3Fw=100&amp;tok=c3d757" class="mediacenter" alt="" width="100" /></a>
</p>

</div>
<!-- EDIT2 SECTION "What you need" [35-242] -->
<h2 class="sectionedit3" id="the_setup">The Setup</h2>
<div class="level2">

<p>
Connect the LED to the Edison following the schematics in the figure.
</p>

<p>
You will see, when you look at the LED, that it has two legs. One is longer, that one is usually the anode. The latter has to be plugged into the GPIO pin of the Edison. The shorter leg should to be connected to the resistor and then to the ground pin of the board. 
<a href="../../../../_detail/iot2015/labs/ledblink.png%3Fid=iot2015%253Alabs%253A03.html" class="media" title="iot2015:labs:ledblink.png"><img src="../../../../_media/iot2015/labs/ledblink.png%3Fw=500&amp;tok=42b7ca" class="mediacenter" alt="" width="500" /></a>
To understand the anode and the cathode of the LED, imagine these two following situations:
</p>
<ol>
<li class="level1"><div class="li">  The cathode is connected ,through the resistor of course, to the ground. This means that the anode will be wired to the GPIO pin, which has to be <em>High</em> in order to make the LED light up.</div>
</li>
<li class="level1"><div class="li"> The anode is connected to the VCC pin of the board. Which means that, should you want to light up the LED, the cathode has to be connected to the GPIO setted to <em>Low </em>. Don&#039;t forget this kind of a circuit also requires a resistor. </div>
</li>
</ol>

<p>
To sum it up, although the position of the resistor is not fixed, it can can either connect the ground to the cathode or the anode to the GPIO pin, the cathode should be connected to the ground to obtain the usually desired behaviour. Meaning you want the LED to light when the GPIO is set to HIGH and not to light when the GPIO is set to LOW. If you put the legs the other way around, the effect will be the opposite. 
</p>

</div>
<!-- EDIT3 SECTION "The Setup" [243-1588] -->
<h2 class="sectionedit4" id="the_code">The Code</h2>
<div class="level2">

<p>
Let&#039;s see the same application in three different programming languages. 
</p>

</div>
<!-- EDIT4 SECTION "The Code" [1589-1684] -->
<h3 class="sectionedit5" id="visual_programming">Visual Programming</h3>
<div class="level3">

<p>
First, you can try it out in Visual Programming. 
Here&#039;s an example: 
<a href="../../../../_detail/iot2015/labs/blink-application.png%3Fid=iot2015%253Alabs%253A03.html" class="media" title="iot2015:labs:blink-application.png"><img src="../../../../_media/iot2015/labs/blink-application.png%3Fw=300&amp;tok=09f9e3" class="mediacenter" alt="" width="300" /></a>
The first two blocks will simply print on the screen the messages written inside them. 
The <em> repeat while true</em> blocks will create an endless loop. Inside it, there will be the blocks that turn on and off the LED on the chosen pin. There is also a <em> delay</em> block, which will insert here a pause of 0.5 seconds between the <em> on </em>  state of the LED and the <em> off </em> one.
</p>

</div>
<!-- EDIT5 SECTION "Visual Programming" [1685-2208] -->
<h3 class="sectionedit6" id="python">Python</h3>
<div class="level3">

<p>
An important feature of Visual Programming in Wyliodrin is that you can easily get the Python code for your projects, just by clicking the <em> Show code</em> button.  
</p>
<pre class="code python"><span class="kw1">from</span> wyliodrin <span class="kw1">import</span> *
<span class="kw1">from</span> <span class="kw3">time</span> <span class="kw1">import</span> *
&nbsp;
pinMode <span class="br0">&#40;</span><span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">1</span><span class="br0">&#41;</span>
&nbsp;
<span class="kw1">print</span><span class="br0">&#40;</span><span class="st0">'Led on pin 0 should blink'</span><span class="br0">&#41;</span>
<span class="kw1">print</span><span class="br0">&#40;</span><span class="st0">'Press the Stop button to stop'</span><span class="br0">&#41;</span>
<span class="kw1">while</span> <span class="kw2">True</span>:
  digitalWrite <span class="br0">&#40;</span><span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">1</span><span class="br0">&#41;</span>
  sleep <span class="br0">&#40;</span><span class="br0">&#40;</span><span class="nu0">500</span><span class="br0">&#41;</span>/<span class="nu0">1000.0</span><span class="br0">&#41;</span>
  digitalWrite <span class="br0">&#40;</span><span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="br0">&#41;</span>
  sleep <span class="br0">&#40;</span><span class="br0">&#40;</span><span class="nu0">500</span><span class="br0">&#41;</span>/<span class="nu0">1000.0</span><span class="br0">&#41;</span></pre>

<p>
First of all, you need to import the <em>wyliodrin</em> and <em>time</em> modules that will allow you to use some simple functions.
</p>

<p>
Firstly, you have to declare the pins you are going to use and their purpose. In this case, pin 0 is used as <em>OUTPUT</em>. This is what <em>pinMode(0,1)</em> does (1=OUTPUT, 0=INPUT). 
</p>

<p>
Next, there are the <em>print</em> functions that simply write the text in the shell.
</p>

<p>
Another useful function is <em>digitalWrite</em>. The function receives as parameter the pin and the value. As you are doing a digital write, the value can be either 0 or 1. If the value is 0, the pin will have no current. If the value is 1, there is current.
</p>

<p>
The <em>sleep</em> function makes the program wait for the desired number of seconds.
</p>

<p>
All this code is enclosed within the <em>while True</em> loop that makes it to be run forever, until the application is stopped.
</p>

</div>
<!-- EDIT6 SECTION "Python" [2209-3496] -->
<h3 class="sectionedit7" id="streams_programming">Streams Programming</h3>
<div class="level3">

<p>
Now that you&#039;ve seen both Visual and python, let&#039;s move on to Streams. 
</p>

<p>
Streams is an inbuilt programming language used in Wyliodrin to create many complex IOT projects. 
</p>

<p>
It is quite different from  usual programming languages, and it can sometimes contain visual blocks as functions.
</p>

<p>
This programming language works not as an imperative one, but is based on data flow. The nodes will send messages to one another. You can look at these messages as JSON objects. Any message has two important fields: one will be the payload and a second one the topic. 
</p>

<p>
You go to the Wyliodrin Applications page and create a new application. You name it and select the Streams programming language, then, the example <em>Led Blink - Streams</em>. This will create an application that makes an LED connected to the pin 2 of the Edison blink.
</p>

<p>
Once created, you click on the new application&#039;s name to open it. A new window will open to display it.
<a href="../../../../_detail/iot2015/labs/blink2.png%3Fid=iot2015%253Alabs%253A03.html" class="media" title="iot2015:labs:blink2.png"><img src="../../../../_media/iot2015/labs/blink2.png%3Fw=400&amp;tok=204991" class="mediacenter" alt="" width="400" /></a>
In this example, the <em>run</em> node will send a message every 1 second to the node that says <em>blink</em>. Look in its settings. The <em>payload</em> field will be a number, incremented by one. The <em>blink</em> node is the one which holds the visual blocks. Double click on the latter to see the function inside. It will be in Visual Programming. 
<a href="../../../../_detail/iot2015/labs/blinkblocks.png%3Fid=iot2015%253Alabs%253A03.html" class="media" title="iot2015:labs:blinkblocks.png"><img src="../../../../_media/iot2015/labs/blinkblocks.png%3Fw=600&amp;tok=1ccd76" class="mediacenter" alt="" width="600" /></a>
What it does is to set a variable <em>new message</em> with the value of the data sent from this node to the next one to come.  Now, the very message is composed like this: take the payload sent from the first node and divide it by 2. Which means the new message will be either 1 or 0. The function returns just one of these values, depending on the case. 
The last node is simply the digital write function. It will ask as a parameter the pin number, so double click on it and specify the pin you are going to use. On this pin, it will write the message that was previously composed. 
</p>

</div>
<!-- EDIT7 SECTION "Streams Programming" [3497-5449] -->
<h2 class="sectionedit8" id="tips_tricks">Tips &amp; Tricks</h2>
<div class="level2">

<p>
Usually the longer leg is the anode and the shorted one is the cathode. However, this is not standard, to make sure which is which, you should know that the cathode leg is always connected to the bigger part inside the LED.
</p>

</div>
<!-- EDIT8 SECTION "Tips & Tricks" [5450-5699] -->
<h2 class="sectionedit9" id="add_a_button">Add a button</h2>
<div class="level2">

<p>
You can easily add a button to turn on and off the LED.
</p>

</div>
<!-- EDIT9 SECTION "Add a button" [5700-5780] -->
<h3 class="sectionedit10" id="what_you_need1">What you need</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> One Edison connected to Wyliodrin;</div>
</li>
<li class="level1"><div class="li"> Two 200 Ohm resistor;</div>
</li>
<li class="level1"><div class="li"> Six male-male jumper wires;</div>
</li>
<li class="level1"><div class="li"> One button;</div>
</li>
<li class="level1"><div class="li"> One LED.</div>
</li>
</ul>

</div>
<!-- EDIT10 SECTION "What you need" [5781-5931] -->
<h3 class="sectionedit11" id="schematics">Schematics</h3>
<div class="level3">

<p>
To connect it, just think about the button as a voltage divider, the same as for the thermistor. Look in the introduction to electronics to properly understand the concept. <a href="../../../../_detail/iot2015/labs/buton.png%3Fid=iot2015%253Alabs%253A03.html" class="media" title="iot2015:labs:buton.png"><img src="../../../../_media/iot2015/labs/buton.png%3Fw=400&amp;tok=f288c6" class="mediacenter" alt="" width="400" /></a>
</p>

</div>
<!-- EDIT11 SECTION "Schematics" [5932-6160] -->
<h3 class="sectionedit12" id="the_code1">The code</h3>
<div class="level3">

<p>
You won&#039;t need to use more than 3 blocks. 
<a href="../../../../_detail/iot2015/labs/button.png%3Fid=iot2015%253Alabs%253A03.html" class="media" title="iot2015:labs:button.png"><img src="../../../../_media/iot2015/labs/button.png%3Fw=500&amp;tok=ced58d" class="mediacenter" alt="" width="500" /></a>
</p>
<ul>
<li class="level1"><div class="li">  one is the usual <em>run</em></div>
</li>
<li class="level1"><div class="li">  read the digital pin to which the button is connected</div>
</li>
<li class="level1"><div class="li">  write its value on the pin where the LED is wired</div>
</li>
</ul>

</div>
<!-- EDIT12 SECTION "The code" [6161-6403] -->
<h2 class="sectionedit13" id="exercises">Exercises</h2>
<div class="level2">
<ol>
<li class="level1"><div class="li"> Connect two LEDs and one button that will light them up one by one.</div>
</li>
<li class="level1"><div class="li"> Use one LED to write SOS using the international morse code. <a href="../../../../_detail/iot2015/labs/international_morse_code.png%3Fid=iot2015%253Alabs%253A03.html" class="media" title="iot2015:labs:international_morse_code.png"><img src="../../../../_media/iot2015/labs/international_morse_code.png%3Fw=300&amp;tok=427486" class="mediacenter" alt="" width="300" /></a></div>
</li>
</ol>

</div>
<!-- EDIT13 SECTION "Exercises" [6404-] --></div>
</body>
</html>

    
    

<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8" />
  <title>iot2015:labs:04</title>
<meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="date" content="2016-06-17T15:45:22+0300"/>
<meta name="keywords" content="iot2015,labs,04"/>
<link rel="search" type="application/opensearchdescription+xml" href="../../../../lib/exe/opensearch.php" title="CS Open CourseWare"/>
<link rel="start" href="../../../../../courses.1.html"/>
<link rel="alternate" type="application/rss+xml" title="Recent Changes" href="../../../../feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current Namespace" href="../../../../feed.php%3Fmode=list&amp;ns=iot2015:labs"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="04.html"/>
<link rel="canonical" href="../../../../iot2015/labs/04.html"/>
<link rel="stylesheet" type="text/css" href="../../../../lib/exe/css.php%3Ft=arctic&amp;tseed=1479898000.css"/>
<script type="text/javascript">/*<![CDATA[*/var NS='iot2015:labs';var JSINFO = {"id":"iot2015:labs:04","namespace":"iot2015:labs","isadmin":0,"isauth":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="../../../../lib/exe/js.php%3Ftseed=1479898000"></script>
<script type="text/x-mathjax-config">/*<![CDATA[*/MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ["$","$"], ["\\(","\\)"] ],
        displayMath: [ ["$$","$$"], ["\\[","\\]"] ],
        processEscapes: true
    }
});
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
<script type="text/javascript">/*<![CDATA[*/
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
		  
/*!]]>*/</script>
<script type="text/javascript">/*<![CDATA[*/
var pageTracker = _gat._getTracker("UA-38383934-1");
pageTracker._initData();
pageTracker._trackPageview();
		  
/*!]]>*/</script>
</head>
<body>
<div class="dokuwiki export">
<!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="04.html#lab_4programming_with_streams">Lab 4: Programming with Streams</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="04.html#multicolor_lamp">Multicolor lamp</a></div></li>
<li class="level2"><div class="li"><a href="04.html#what_you_need">What you need</a></div></li>
<li class="level2"><div class="li"><a href="04.html#the_setup">The Setup</a></div></li>
<li class="level2"><div class="li"><a href="04.html#the_code">The Code</a></div></li>
<li class="level2"><div class="li"><a href="04.html#exercises">Exercises</a></div></li>
</ul></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="lab_4programming_with_streams">Lab 4: Programming with Streams</h1>
<div class="level1">

</div>
<!-- EDIT1 SECTION "Lab 4: Programming with Streams" [1-45] -->
<h2 class="sectionedit2" id="multicolor_lamp">Multicolor lamp</h2>
<div class="level2">

<p>
Let&#039;s replace the simple blinking lamp with a multicolor one.
</p>

<p>
The purpose of this project is to light up an RGB LED in different colors. In order to achieve this, you need three PWM pins to control the LED and have a say on each of its colors. To work with them, you can add three sliders in the Dashboard and, according on the value they send, to set the intensity of each color. 
</p>

</div>
<!-- EDIT2 SECTION "Multicolor lamp" [46-458] -->
<h2 class="sectionedit3" id="what_you_need">What you need</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li">  One Edison connected to Wyliodrin;</div>
</li>
<li class="level1"><div class="li">  One RGB LED;</div>
</li>
<li class="level1"><div class="li">  Three 200 Ohm resistors;</div>
</li>
<li class="level1"><div class="li">  Male-male jumper wires.</div>
</li>
</ul>

</div>
<!-- EDIT3 SECTION "What you need" [459-602] -->
<h2 class="sectionedit4" id="the_setup">The Setup</h2>
<div class="level2">

<p>
Connect the RGB LED to the Edison following the schematics in the figure.
<a href="../../../../_detail/iot2015/labs/rgbled.png%3Fid=iot2015%253Alabs%253A04.html" class="media" title="iot2015:labs:rgbled.png"><img src="../../../../_media/iot2015/labs/rgbled.png%3Fw=400&amp;tok=80196f" class="mediacenter" alt="" width="400" /></a>
The RGB LED is simply an LED consisting of three simple LEDs: a red one, a green one and a blue one. Each of these LEDs is controlled by a PWM pin, so that it can light brighter or dimmer. As a result, the color of the RGB LED will be the result of these three colors.
</p>

</div>
<!-- EDIT4 SECTION "The Setup" [603-1003] -->
<h2 class="sectionedit5" id="the_code">The Code</h2>
<div class="level2">

<p>
You go to the Wyliodrin Applications page and create a new application. you name it and select Streams as programming language. 
<a href="../../../../_detail/iot2015/labs/rgb_code.png%3Fid=iot2015%253Alabs%253A04.html" class="media" title="iot2015:labs:rgb_code.png"><img src="../../../../_media/iot2015/labs/rgb_code.png%3Fw=350&amp;tok=ce1688" class="mediacenter" alt="" width="350" /></a>
The most important thing to do is to choose the node that receives the value given by your sliders. This node connects your application to the dashboard by making it subscribe to signals to be received. Basically, each time a signal is received, the code inside this node gets executed. You can see that the <em>receive signal</em> node also has two parameters: <em>name</em> and <em>signal</em>. <em>Name</em> is of no difficulty, it represents the name of the node and <em>signal</em> the name of the signal the application subscribes to.  As you can imply from the node&#039;s looks, there is no place in this node where you get a value. Why is that? Because the value in the message received changes its value each time a new signal comes. The dashboard has to send the application a value and this is how they interact: through messages. You can think of this message as of a container. The dashboard places the value inside, then it notifies the application, which gets the value from the container and can simply use it.
</p>

<p>
Once you have the value from the slider, you write it on the PWM pin, using the analog write function.
Now consider the sliders. In their settings you have to name them and make sure their scale is from 0 to 255, as those are the values a PWM pin expects.
<a href="../../../../_detail/iot2015/labs/rgbsliders.png%3Fid=iot2015%253Alabs%253A04.html" class="media" title="iot2015:labs:rgbsliders.png"><img src="../../../../_media/iot2015/labs/rgbsliders.png%3Fw=400&amp;tok=9ca263" class="mediacenter" alt="" width="400" /></a>
Once you click the <em>Run the application</em> button, the project will get deployed on the board.
</p>

</div>
<!-- EDIT5 SECTION "The Code" [1004-2582] -->
<h2 class="sectionedit6" id="exercises">Exercises</h2>
<div class="level2">
<ol>
<li class="level1"><div class="li"> Make a Streams application and use it to create a project that will light up a LED for 3 seconds at one press of a button. </div>
</li>
<li class="level1"><div class="li"> Do the same, using a switch from the dashboard instead of the button.</div>
</li>
<li class="level1"><div class="li"> Connect a button that you will have to press in order to turn on an LED and press again to turn the LED off.</div>
</li>
<li class="level1"><div class="li"> The same, only that if you have pressed the button once, for the next two seconds, pressing again the button will have no effect. In a nutshell, once you press the button, it will become inactive for the next two seconds.</div>
</li>
<li class="level1"><div class="li"> The same, but using the switch from the dashboard instead of the button.</div>
</li>
<li class="level1"><div class="li">  Make a chat in Python with your neighbour&#039;s board. You read the messages from the keyboard in Python and the messages received will be shown in Python as well. Every time a new message comes, you turn on an LED for a few seconds. This part of the project should be made using streams nodes.</div>
</li>
</ol>

</div>
<!-- EDIT6 SECTION "Exercises" [2583-] --></div>
</body>
</html>

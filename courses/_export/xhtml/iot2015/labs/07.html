    
    

<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8" />
  <title>iot2015:labs:07</title>
<meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="date" content="2016-06-17T15:45:22+0300"/>
<meta name="keywords" content="iot2015,labs,07"/>
<link rel="search" type="application/opensearchdescription+xml" href="../../../../lib/exe/opensearch.php" title="CS Open CourseWare"/>
<link rel="start" href="../../../../../courses.1.html"/>
<link rel="alternate" type="application/rss+xml" title="Recent Changes" href="../../../../feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current Namespace" href="../../../../feed.php%3Fmode=list&amp;ns=iot2015:labs"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="07.html"/>
<link rel="canonical" href="../../../../iot2015/labs/07.html"/>
<link rel="stylesheet" type="text/css" href="../../../../lib/exe/css.php%3Ft=arctic&amp;tseed=1479898000.css"/>
<script type="text/javascript">/*<![CDATA[*/var NS='iot2015:labs';var JSINFO = {"id":"iot2015:labs:07","namespace":"iot2015:labs","isadmin":0,"isauth":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="../../../../lib/exe/js.php%3Ftseed=1479898000"></script>
<script type="text/x-mathjax-config">/*<![CDATA[*/MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ["$","$"], ["\\(","\\)"] ],
        displayMath: [ ["$$","$$"], ["\\[","\\]"] ],
        processEscapes: true
    }
});
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
<script type="text/javascript">/*<![CDATA[*/
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
		  
/*!]]>*/</script>
<script type="text/javascript">/*<![CDATA[*/
var pageTracker = _gat._getTracker("UA-38383934-1");
pageTracker._initData();
pageTracker._trackPageview();
		  
/*!]]>*/</script>
</head>
<body>
<div class="dokuwiki export">
<!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="07.html#lab_7digital_sensors">Lab 7: Digital sensors</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="07.html#accelerometer">Accelerometer</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="07.html#wiring">Wiring</a></div></li>
<li class="level3"><div class="li"><a href="07.html#the_code">The code</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="07.html#humidity_sensor">Humidity sensor</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="07.html#the_code1">The code</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="07.html#exercises">Exercises</a></div></li>
</ul></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="lab_7digital_sensors">Lab 7: Digital sensors</h1>
<div class="level1">

<p>
You have already used a number of sensors, which you connected to the analog pins. 
You will see now another type of sensor.
This digital sensor provides linearized, calibrated signals in I²C format.
</p>

</div>
<!-- EDIT1 SECTION "Lab 7: Digital sensors" [1-239] -->
<h2 class="sectionedit2" id="accelerometer">Accelerometer</h2>
<div class="level2">

</div>
<!-- EDIT2 SECTION "Accelerometer" [240-266] -->
<h3 class="sectionedit3" id="wiring">Wiring</h3>
<div class="level3">

<p>
You can connect the accelerometer either by SPI or I2C. 
The easiest way will be the I2C connection. SDA and SCL pins go to the respective ones on the board, GND to Ground and VCC to <strong> 3.3V</strong>. 
</p>

<p>
<a href="../../../../_detail/iot2015/labs/accel.png%3Fid=iot2015%253Alabs%253A07.html" class="media" title="iot2015:labs:accel.png"><img src="../../../../_media/iot2015/labs/accel.png%3Fw=500&amp;tok=270503" class="mediacenter" alt="" width="500" /></a>
</p>

</div>
<!-- EDIT3 SECTION "Wiring" [267-515] -->
<h3 class="sectionedit4" id="the_code">The code</h3>
<div class="level3">

<p>
Using streams, the code is just as easy to write. For the simplest application, just add a visual node where you will measure and return, in the payload, the acceleration on one of the axis, the one you chose. The visual blocks for the accelerometer can be found under <em>Sensors</em>, in the side menu, in section <em>Accelerometer</em>. There is one slight change you have to make. You don&#039;t need the default <em> set</em> block to initialise the sensor. You want the initialisation block, which can be found in the <em>Functions</em> section, under the name <em>Initialise…</em>
<a href="../../../../_detail/iot2015/labs/acceloblocks.png%3Fid=iot2015%253Alabs%253A07.html" class="media" title="iot2015:labs:acceloblocks.png"><img src="../../../../_media/iot2015/labs/acceloblocks.png%3Fw=400&amp;tok=9d44e5" class="mediacenter" alt="" width="400" /></a>
</p>

<p>
So the nodes you are going to use are <em> run </em>, followed by the visual node and then you can send a signal with the value, via the corresponding node, or print it on the screen, using <em> print </em>
</p>

</div>
<!-- EDIT4 SECTION "The code" [516-1335] -->
<h2 class="sectionedit5" id="humidity_sensor">Humidity sensor</h2>
<div class="level2">

<p>
<a href="../../../../_detail/iot2015/labs/humidity.png%3Fid=iot2015%253Alabs%253A07.html" class="media" title="iot2015:labs:humidity.png"><img src="../../../../_media/iot2015/labs/humidity.png%3Fw=400&amp;tok=055d36" class="mediacenter" alt="" width="400" /></a>
You can use it both for temperature and humidity. 
It is easy to connect to the board, as you see in the example above. 
</p>

</div>
<!-- EDIT5 SECTION "Humidity sensor" [1336-1521] -->
<h3 class="sectionedit6" id="the_code1">The code</h3>
<div class="level3">

<p>
As for the code, you only need a <em>visual</em> node to extract the data from the sensor.
<a href="../../../../_detail/iot2015/labs/strhumid.png%3Fid=iot2015%253Alabs%253A07.html" class="media" title="iot2015:labs:strhumid.png"><img src="../../../../_media/iot2015/labs/strhumid.png%3Fw=400&amp;tok=08f944" class="mediacenter" alt="" width="400" /></a>
</p>

<p>
Make sure that when you go under <em>sensors</em> and <em> humidity sensor</em> and drag the initialisation block, you extract only the blue, <em>init</em> block. Instead of putting it inside a <em>set</em> block, you choose from <em> function</em> the <em>initialise</em> block. This way, the values from the sensor will be stable. <br/>

<a href="../../../../_detail/iot2015/labs/humidblocks.png%3Fid=iot2015%253Alabs%253A07.html" class="media" title="iot2015:labs:humidblocks.png"><img src="../../../../_media/iot2015/labs/humidblocks.png%3Fw=400&amp;tok=216029" class="mediacenter" alt="" width="400" /></a>
In case you want to extract the humidity as well, you can use a <em>change</em> node.<br/>

<strong>Hint</strong> Double check to have <strong>the same name of the variable</strong> where the sensor was initialised and in the blocks where you take the values. 
</p>

</div>
<!-- EDIT6 SECTION "The code" [1522-2240] -->
<h2 class="sectionedit7" id="exercises">Exercises</h2>
<div class="level2">

<p>
Now, that you got friends with the sensors, you can make a variety of applications using it.
</p>

<p>
After you wired correctly and understood how the sensor works, start solving the following exercises,
</p>
<ol>
<li class="level1"><div class="li"> For each axis, show the value of the acceleration on an LCD</div>
</li>
<li class="level1"><div class="li"> Find the angle of inclination. You have to move the sensor on a single angle and apply the formula to find the angle. <br/>
<strong>angle=arcsin(A/g)</strong> , where A is the measured acceleration, g Earth gravity vector. </div>
</li>
<li class="level1"><div class="li"> Connect an LED to the Edison. Put the sensor on the desk and hit the desk. The sensor will register the vibrations from the collision  and light up the LED.</div>
</li>
<li class="level1"><div class="li"> Identify the movement&#039;s frequency on one of the axis using <em> fft</em> .</div>
</li>
<li class="level1"><div class="li"> Show the difference of temperature between a thermistor&#039;s value and the one given by the humidity sensor. Put the two on the same graphics and see the variation. <br/>
<strong> Hint</strong> you can find the function for the thermistor and the wiring in the sensors lab. </div>
</li>
<li class="level1"><div class="li"> Use this graphics to apply a signal filter in a filter design software. (Matlab, Octave )</div>
</li>
<li class="level1"><div class="li"> Calculate the difference between the values of the two sensors and show it on a chart.</div>
</li>
<li class="level1"><div class="li"> Create a low pass filter with the cutoff frequency wc, using a filter design software.</div>
</li>
<li class="level1"><div class="li"> Apply this filter to the signal sent by the thermistor. </div>
</li>
</ol>

</div>
<!-- EDIT7 SECTION "Exercises" [2241-] --></div>
</body>
</html>

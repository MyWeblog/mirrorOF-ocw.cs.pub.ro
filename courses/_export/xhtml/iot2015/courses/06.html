    
    

<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8" />
  <title>iot2015:courses:06</title>
<meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="date" content="2016-06-17T15:45:22+0300"/>
<meta name="keywords" content="iot2015,courses,06"/>
<link rel="search" type="application/opensearchdescription+xml" href="../../../../lib/exe/opensearch.php" title="CS Open CourseWare"/>
<link rel="start" href="../../../../../courses.1.html"/>
<link rel="alternate" type="application/rss+xml" title="Recent Changes" href="../../../../feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current Namespace" href="../../../../feed.php%3Fmode=list&amp;ns=iot2015:courses"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="06.html"/>
<link rel="canonical" href="../../../../iot2015/courses/06.html"/>
<link rel="stylesheet" type="text/css" href="../../../../lib/exe/css.php%3Ft=arctic&amp;tseed=1479898000.css"/>
<script type="text/javascript">/*<![CDATA[*/var NS='iot2015:courses';var JSINFO = {"id":"iot2015:courses:06","namespace":"iot2015:courses","isadmin":0,"isauth":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="../../../../lib/exe/js.php%3Ftseed=1479898000"></script>
<script type="text/x-mathjax-config">/*<![CDATA[*/MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ["$","$"], ["\\(","\\)"] ],
        displayMath: [ ["$$","$$"], ["\\[","\\]"] ],
        processEscapes: true
    }
});
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
<script type="text/javascript">/*<![CDATA[*/
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
		  
/*!]]>*/</script>
<script type="text/javascript">/*<![CDATA[*/
var pageTracker = _gat._getTracker("UA-38383934-1");
pageTracker._initData();
pageTracker._trackPageview();
		  
/*!]]>*/</script>
</head>
<body>
<div class="dokuwiki export">
<!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="06.html#lecture_6web_servers">Lecture 6: Web servers</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="06.html#what_s_a_web_server_and_http">What&#039;s a web server and HTTP</a></div></li>
<li class="level2"><div class="li"><a href="06.html#webservers_on_gadgets_using_wyliodrin">Webservers on gadgets using Wyliodrin</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="06.html#web_services">Web services</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="06.html#jquery">JQuery</a></div></li>
<li class="level2"><div class="li"><a href="06.html#web_sockets">Web sockets</a></div></li>
<li class="level2"><div class="li"><a href="06.html#angularjs">AngularJS</a></div></li>
</ul></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="lecture_6web_servers">Lecture 6: Web servers</h1>
<div class="level1">

<p>

<center>
<iframe width="640" height="360" src="https://www.youtube-nocookie.com/embed/YGeLUTJpGa4" frameborder="0" allowfullscreen></iframe>
</center>

Slides are available from the <a href="http://www.slideshare.net/alexandruradovici/web-servers-for-the-internet-of-things" class="urlextern" title="http://www.slideshare.net/alexandruradovici/web-servers-for-the-internet-of-things"  rel="nofollow">link</a>
</p>

<p>
This course explains what a web server is, how it works, protocols used in web programming and gives examples on building and implementing a web server, of creating dynamic web pages. It also introduces the students to AngularJS and JQuery. 
</p>

</div>
<!-- EDIT1 SECTION "Lecture 6: Web servers" [1-1242] -->
<h2 class="sectionedit2" id="what_s_a_web_server_and_http">What&#039;s a web server and HTTP</h2>
<div class="level2">

<p>
Any computer that can implement http or https is able to play the role of a web server.
Http is a protocol, a way of communication which supplies web pages. It is pretty widely used and easy to implement. Through http you can transfer html and create simple user interfaces, it can implement Java Script and make more complicated web pages and it is available in most of the browsers. One of the great qualities of this protocol is that it replaced complicated and heavy displays with user friendly web pages. 
</p>

<p>
How does it work? The browser sends a request to the server who searches the demanded page and returns it to the browser for the user.  
The request will consist of information about the kind of browser that is used, about the computer or about the document requested. It will have a method, a <abbr title="Uniform Resource Locator">URL</abbr>, a query string and the upload body in case you want data to be sent to the server. 
</p>

<p>
The response will include the status, which tells the browser if the page was found or not (the errors among the 400s are about a not found page, 300 are redirections and 200s are confirmations of the page being found).
<a href="../../../../_detail/iot2015/courses/picture1.png%3Fid=iot2015%253Acourses%253A06.html" class="media" title="iot2015:courses:picture1.png"><img src="../../../../_media/iot2015/courses/picture1.png%3Fw=450&amp;tok=5248f7" class="mediacenter" alt="" width="450" /></a>
Https has two important security roles.
</p>
<ul>
<li class="level1"><div class="li"> It encripts the data. The request and the response will be both encripted on sending and decripted when read.</div>
</li>
<li class="level1"><div class="li"> The server is always asked for a certificate of authenticity before it is asked for a page. This prevents against stolen data through false web pages. </div>
</li>
</ul>

<p>
What does a query consist of? It will always look like this: <a href="http://address:[port]URL?querystring" class="urlextern" title="http://address:[port]URL?querystring"  rel="nofollow">http://address:[port]URL?querystring</a>. 
The port can be absent, in which case it will be 80 for http and 443 for https. It has to be specified if it is not one the two.
Concerning the <abbr title="Uniform Resource Locator">URL</abbr>, when it is not written, the default will be <em> / </em>.
The available methods in http are : get, post, put and delete. The main ones being the first two.
</p>
<ul>
<li class="level1"><div class="li"> Get method needs no upload body. It will only ask for data from the server and send only the headers, the address, the <abbr title="Uniform Resource Locator">URL</abbr>.</div>
</li>
<li class="level1"><div class="li"> Post sends important data to the server, which will be uploaded. Post has the role of modifying data on the server. The response of both these methods is the page and any additional information that was requested. </div>
</li>
<li class="level1"><div class="li"> Put is similar to post, only that in the semantic way, this method only creates an object on the server.</div>
</li>
<li class="level1"><div class="li"> Delete also plays a semantic part. It needs no upload body and it delets objects on the server. The same action can be performed however using get.</div>
</li>
</ul>

<p>
On one server there can be more than one websites, which means that, if the host is not specified in the request, the response may not be the one the browser expects. 
</p>

<p>
Also, the response may have more than text. Any additional feature: images, JavaScript objects and so on will need a new request, so the process will be slowed down. 
</p>

</div>
<!-- EDIT2 SECTION "What's a web server and HTTP" [1243-4096] -->
<h2 class="sectionedit3" id="webservers_on_gadgets_using_wyliodrin">Webservers on gadgets using Wyliodrin</h2>
<div class="level2">

<p>
The boards are non powerful computers. With wyliodrin there is no need to intall any software or make any configuration on the boards to run a webserver on them. 
</p>

<p>
To create a webserver in wyliodrin you will need a <em> web</em> node. The simplest way to use a web page in this particular way is to send static files. In the project files, create a new folder <em> static</em>. Everything inside it will be sent back to the browser by the server, regardless of the fact that they are html, Java Script or <abbr title="Cascading Style Sheets">CSS</abbr> files. Images can be added as well, but they will definetely make the process slower. 
There are other ways of adding an image. For example by using a storage system and including the images from there. This method will solve speed and memory issues.
</p>

<p>
The <em>web node</em>: The route option is actually the <abbr title="Uniform Resource Locator">URL</abbr>. The webserver will be active when it stumbles upon the specified route. Afterwords you choose the method, and write the port to setup the server. This port will only be used once, in the beginning. <br/>

 <a href="../../../../_detail/iot2015/courses/picture4.png%3Fid=iot2015%253Acourses%253A06.html" class="media" title="iot2015:courses:picture4.png"><img src="../../../../_media/iot2015/courses/picture4.png%3Fw=300&amp;tok=3c09a2" class="mediacenter" alt="" width="300" /></a><br/>

</p>

<p>
 The payload goes either in the query string for the get method or in the upload data for post. The message is built on this payload, on two mandatory variables: <em> res</em> which stands for the response and <em>req</em> which is the request.  Without the last two, the server won&#039;t be able to provide a response. <br/>

<a href="../../../../_detail/iot2015/courses/picture02.png%3Fid=iot2015%253Acourses%253A06.html" class="media" title="iot2015:courses:picture02.png"><img src="../../../../_media/iot2015/courses/picture02.png%3Fw=400&amp;tok=73c9c1" class="mediacenter" alt="" width="400" /></a>
</p>

<p>
The <em>web response</em> node: The message received by this node comes from one web node. 
For a web response the simplet way is to make a redirection. Which means, in the redirect field, you can write the path to one of the static files and the browser will be sent to this page. 
On top of these, you will need the board&#039;s IP address which might not be public unless it is in the same network with the web server. <br/>

<a href="../../../../_detail/iot2015/courses/picture5.png%3Fid=iot2015%253Acourses%253A06.html" class="media" title="iot2015:courses:picture5.png"><img src="../../../../_media/iot2015/courses/picture5.png%3Fw=300&amp;tok=1ba8fc" class="mediaright" title=" " alt=" " width="300" /></a><br/>

<a href="../../../../_detail/iot2015/courses/picture3.png%3Fid=iot2015%253Acourses%253A06.html" class="media" title="iot2015:courses:picture3.png"><img src="../../../../_media/iot2015/courses/picture3.png%3Fw=150&amp;tok=85b8c8" class="mediacenter" alt="" width="150" /></a><br/>

</p>

<p>
As a solution, IOT servers have a public adrdress. The port for these servers can be either 80 for http or 443 for https.
The user accesses the public page, through the IOT server which is connected to Wyliodrin as well as the board. Now the problem with the board and the web being in the same network is solved as both can communicate with Wyliodrin.
</p>

<p>
<em>Web templates</em>: Just as for the static files, you will need a <em> templates </em> folder. This time, when you use the node, you don&#039;t need the whole path. You can only write the name of the file in the templates folder. What does the node do? It processes the response, meaning it loads the values plus the payload in it and sends it back to the browser. The values need to be in between two sets of  curly brackets <em> {{}}</em>. Note that the values won&#039;t update unless the page is reloaded. <br/>

<a href="../../../../_detail/iot2015/courses/picture7.png%3Fid=iot2015%253Acourses%253A06.html" class="media" title="iot2015:courses:picture7.png"><img src="../../../../_media/iot2015/courses/picture7.png%3Fw=300&amp;tok=6a7b62" class="mediaright" title=" " alt=" " width="300" /></a> <br/>

<a href="../../../../_detail/iot2015/courses/picture6.png%3Fid=iot2015%253Acourses%253A06.html" class="media" title="iot2015:courses:picture6.png"><img src="../../../../_media/iot2015/courses/picture6.png%3Fw=200&amp;tok=863db9" class="mediacenter" alt="" width="200" /></a>
</p>

</div>
<!-- EDIT3 SECTION "Webservers on gadgets using Wyliodrin" [4097-6984] -->
<h3 class="sectionedit4" id="web_services">Web services</h3>
<div class="level3">

<p>
A long time ago, the web services were more complicated. Now the application only requests the web server for the data, and it is the browser&#039;s job to rearrange it so that it is in the right format for the application. 
</p>

<p>
How to implement it into a Wyliodrin application? 
Using a simple web response and web server node, you send a static page to the user and each time you make a query, instead of a template, you use a web response node and send the payload to the browser, which can be a number, an object or anything else. 
</p>

</div>
<!-- EDIT4 SECTION "Web services" [6985-7536] -->
<h2 class="sectionedit5" id="jquery">JQuery</h2>
<div class="level2">

<p>
There is a library called JQuery, based on JavScript, thus available in any browser, which can make function calls to the server.
</p>

<p>
<em>Case study</em> : You have the following situation: you change the payload into a variable which stores values from a sensor. You want this variable to be shown in your web page. 
Practically, when an <abbr title="Application Programming Interface">API</abbr> gets called, what you will do, will be to make a get request to the server using the web address that you want with the <abbr title="Uniform Resource Locator">URL</abbr> <em> /sensor </em>. The web page will send values that you will store in a variable in your html file. 
</p>

</div>
<!-- EDIT5 SECTION "JQuery" [7537-8114] -->
<h2 class="sectionedit6" id="web_sockets">Web sockets</h2>
<div class="level2">

<p>
A web socket is based on the http or https protocol.
It builds a connection between the browser and the server, so that either one can send data. When the browser makes a request, the server recongnises the socket and doesn&#039;t close the connection. The two partie send the packages they need to send.  If the server does not know how to work with sockets, the socket io will go back to quering. 
</p>

</div>
<!-- EDIT6 SECTION "Web sockets" [8115-8533] -->
<h2 class="sectionedit7" id="angularjs">AngularJS</h2>
<div class="level2">

<p>
AngularJS is a library through which you can build browser applications. 
In the next example, every web node will create a new socket and serve a static web page. If you include in the respponse a variable, and this variable changes, wyliodrin controller will be notified every time this kind of novelty appears and AngularJS will replace the old value of the variable with the new one, creating a dynamic web page. 
<a href="../../../../_detail/iot2015/courses/picture01.png%3Fid=iot2015%253Acourses%253A06.html" class="media" title="iot2015:courses:picture01.png"><img src="../../../../_media/iot2015/courses/picture01.png%3Fw=200&amp;tok=924ff4" class="medialeft" alt="" width="200" /></a>
<a href="../../../../_detail/iot2015/courses/picture02.png%3Fid=iot2015%253Acourses%253A06.html" class="media" title="iot2015:courses:picture02.png"><img src="../../../../_media/iot2015/courses/picture02.png%3Fw=400&amp;tok=73c9c1" class="mediacenter" alt="" width="400" /></a>
<a href="../../../../_detail/iot2015/courses/picture03.png%3Fid=iot2015%253Acourses%253A06.html" class="media" title="iot2015:courses:picture03.png"><img src="../../../../_media/iot2015/courses/picture03.png%3Fw=500&amp;tok=1f3b71" class="mediacenter" alt="" width="500" /></a>
</p>

</div>
<!-- EDIT7 SECTION "AngularJS" [8534-] --></div>
</body>
</html>

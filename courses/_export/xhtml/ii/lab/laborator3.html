    
    

<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8" />
  <title>ii:lab:laborator3</title>
<meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="date" content="2016-11-17T08:23:32+0200"/>
<meta name="keywords" content="ii,lab,laborator3"/>
<link rel="search" type="application/opensearchdescription+xml" href="../../../../lib/exe/opensearch.php" title="CS Open CourseWare"/>
<link rel="start" href="../../../../../courses.1.html"/>
<link rel="alternate" type="application/rss+xml" title="Recent Changes" href="../../../../feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current Namespace" href="../../../../feed.php%3Fmode=list&amp;ns=ii:lab"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="laborator3.html"/>
<link rel="canonical" href="../../../../ii/lab/laborator3.html"/>
<link rel="stylesheet" type="text/css" href="../../../../lib/exe/css.php%3Ft=arctic&amp;tseed=1476798676.css"/>
<script type="text/javascript">/*<![CDATA[*/var NS='ii:lab';var JSINFO = {"id":"ii:lab:laborator3","namespace":"ii:lab","isadmin":0,"isauth":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="../../../../lib/exe/js.php%3Ftseed=1476798676"></script>
<script type="text/x-mathjax-config">/*<![CDATA[*/MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ["$","$"], ["\\(","\\)"] ],
        displayMath: [ ["$$","$$"], ["\\[","\\]"] ],
        processEscapes: true
    }
});
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
<script type="text/javascript">/*<![CDATA[*/
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
		  
/*!]]>*/</script>
<script type="text/javascript">/*<![CDATA[*/
var pageTracker = _gat._getTracker("UA-38383934-1");
pageTracker._initData();
pageTracker._trackPageview();
		  
/*!]]>*/</script>
</head>
<body>
<div class="dokuwiki export">
<!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="laborator3.html#laborator_3_-_pygamephaser">Laborator 3 - PyGame/Phaser</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="laborator3.html#pygame">PyGame</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="laborator3.html#introducere">Introducere</a></div></li>
<li class="level3"><div class="li"><a href="laborator3.html#creearea_unei_ferestre">Creearea unei ferestre</a></div></li>
<li class="level3"><div class="li"><a href="laborator3.html#bucla_principala">Bucla principală</a></div></li>
<li class="level3"><div class="li"><a href="laborator3.html#desenare">Desenare</a></div></li>
<li class="level3"><div class="li"><a href="laborator3.html#adaugare_imagini">Adăugare imagini</a></div></li>
<li class="level3"><div class="li"><a href="laborator3.html#input_de_la_utilizator">Input de la utilizator</a></div></li>
<li class="level3"><div class="li"><a href="laborator3.html#demo">Demo</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="laborator3.html#phaser">Phaser</a></div></li>
<li class="level2"><div class="li"><a href="laborator3.html#exercitii">Exerciții</a></div></li>
</ul></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="laborator_3_-_pygamephaser">Laborator 3 - PyGame/Phaser</h1>
<div class="level1">

</div>
<!-- EDIT1 SECTION "Laborator 3 - PyGame/Phaser" [1-43] -->
<h2 class="sectionedit2" id="pygame">PyGame</h2>
<div class="level2">

</div>
<!-- EDIT2 SECTION "PyGame" [44-63] -->
<h3 class="sectionedit3" id="introducere">Introducere</h3>
<div class="level3">

<p>
PyGame este o bibliotecă Python folosită pentru creearea de jocuri și aplicații multimedia. PyGame este bazat pe biblioteca SDL.
</p>

</div>
<!-- EDIT3 SECTION "Introducere" [64-220] -->
<h3 class="sectionedit4" id="creearea_unei_ferestre">Creearea unei ferestre</h3>
<div class="level3">

<p>
Pentru a putea desena, avem nevoie de o fereastră. Pentru a creea o astfel de fereastră se apelează funcția set_mode() can în exemplu de mai jos. Această funcție primește ca argument un tuplu cu 2 elemente ce reprezintă rezoluția ferestrei.
</p>
<pre class="code python"><span class="kw1">import</span> pygame
&nbsp;
screen <span class="sy0">=</span> pygame.<span class="me1">display</span>.<span class="me1">set_mode</span><span class="br0">&#40;</span><span class="br0">&#40;</span><span class="nu0">800</span><span class="sy0">,</span> <span class="nu0">600</span><span class="br0">&#41;</span><span class="br0">&#41;</span></pre>

</div>
<!-- EDIT4 SECTION "Creearea unei ferestre" [221-589] -->
<h3 class="sectionedit5" id="bucla_principala">Bucla principală</h3>
<div class="level3">

<p>
Pentru dezvoltarea aplicațiilor grafice, avem nevoie de o buclă infinită creeată explicit de programator. Astfel, la fiecare pas al buclei, putem modifica starea programului în funcție de input-ul utilizatorului și de evenimentele declanșate de diferite componente ale acestuia.
</p>
<pre class="code python"><span class="kw1">import</span> pygame
&nbsp;
screen <span class="sy0">=</span> pygame.<span class="me1">display</span>.<span class="me1">set_mode</span><span class="br0">&#40;</span><span class="br0">&#40;</span><span class="nu0">800</span><span class="sy0">,</span> <span class="nu0">600</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
&nbsp;
running <span class="sy0">=</span> <span class="kw2">True</span>
<span class="kw1">while</span> running:
    <span class="co1"># procesare evenimente utilizator</span>
&nbsp;
    <span class="co1"># verificare eveniment de ieșire (de exemplu dacă utilizatorul apasă tasta Esc sau butonul X</span>
    <span class="kw1">if</span> eveniment_iesire<span class="br0">&#40;</span><span class="br0">&#41;</span>:
        running <span class="sy0">=</span> <span class="kw2">False</span>
&nbsp;
    <span class="co1"># modificare stare curentă a jocului</span>
&nbsp;
    <span class="co1"># desenare stare curentă a jocului modificată la pasul anterior</span>
&nbsp;
    <span class="co1"># Este necesară apelarea funcției flip() pentru a desena ce s-a modifcat la pasul anterior</span>
    pygame.<span class="me1">display</span>.<span class="me1">flip</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
&nbsp;
pygame.<span class="me1">quit</span><span class="br0">&#40;</span><span class="br0">&#41;</span></pre>

</div>
<!-- EDIT5 SECTION "Bucla principală" [590-1474] -->
<h3 class="sectionedit6" id="desenare">Desenare</h3>
<div class="level3">

<p>
Pentru a desena elemente grafice în PyGame, folosim <a href="http://www.pygame.org/docs/ref/draw.html" class="urlextern" title="http://www.pygame.org/docs/ref/draw.html"  rel="nofollow">pygame.draw</a>
</p>

<p>
După cum puteți obseva în link-ul anterior, există mai multe forme suportate de pygame. Drept exemplu, vom desena un dreptunghi:
</p>
<pre class="code python"><span class="kw1">import</span> pygame
&nbsp;
screen <span class="sy0">=</span> pygame.<span class="me1">display</span>.<span class="me1">set_mode</span><span class="br0">&#40;</span><span class="br0">&#40;</span><span class="nu0">800</span><span class="sy0">,</span> <span class="nu0">600</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
&nbsp;
<span class="co1"># pygame.draw.rect(Surface, color, Rect, width=0) -&gt; Rect</span>
<span class="co1"># După cum puteți vedea din semnătura functiei draw.rect(), aceasta</span>
<span class="co1"># primește:</span>
<span class="co1">#   - o suprafață pe care să deseneze dreptunghiul</span>
<span class="co1">#   - o culoare, în format RGB</span>
<span class="co1">#   - un obiect de tip Rect</span>
<span class="co1">#        Rect(left, top, width, height) -&gt; Rect</span>
<span class="co1">#         </span>
pygame.<span class="me1">draw</span>.<span class="me1">rect</span><span class="br0">&#40;</span>screen<span class="sy0">,</span> <span class="br0">&#40;</span><span class="nu0">255</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="br0">&#41;</span><span class="sy0">,</span> Rect<span class="br0">&#40;</span><span class="nu0">120</span><span class="sy0">,</span> <span class="nu0">120</span><span class="sy0">,</span> <span class="nu0">200</span><span class="sy0">,</span> <span class="nu0">100</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
&nbsp;
<span class="co1"># Afișam modificările pe ecran</span>
pygame.<span class="me1">display</span>.<span class="me1">flip</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
&nbsp;
<span class="co1"># Așteptăm 3000 ms pentru a vedea rezultatul desenării</span>
pygame.<span class="kw3">time</span>.<span class="me1">wait</span><span class="br0">&#40;</span><span class="nu0">3000</span><span class="br0">&#41;</span></pre>

</div>
<!-- EDIT6 SECTION "Desenare" [1475-2340] -->
<h3 class="sectionedit7" id="adaugare_imagini">Adăugare imagini</h3>
<div class="level3">

<p>
Pentru a adăuga o imagine, procedăm în același fel, dar mai întâi, încărcăm imaginea în memorie.
</p>
<pre class="code python"><span class="kw1">import</span> pygame
&nbsp;
screen <span class="sy0">=</span> pygame.<span class="me1">display</span>.<span class="me1">set_mode</span><span class="br0">&#40;</span><span class="br0">&#40;</span><span class="nu0">800</span><span class="sy0">,</span> <span class="nu0">600</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
&nbsp;
<span class="co1"># Încărcăm imaginea în memorie</span>
image <span class="sy0">=</span> pygame.<span class="me1">pygame</span>.<span class="me1">load</span><span class="br0">&#40;</span><span class="st0">'image.png'</span><span class="br0">&#41;</span>
&nbsp;
<span class="co1"># Transferăm pixelii imaginii în fereastră</span>
screen.<span class="me1">blit</span><span class="br0">&#40;</span>image<span class="sy0">,</span> <span class="br0">&#40;</span><span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
&nbsp;
pygame.<span class="me1">display</span>.<span class="me1">flip</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
&nbsp;
<span class="co1"># Așteptăm din nou 3000 de milisecunde pentru a vedea imaginea desenată</span>
pygame.<span class="kw3">time</span>.<span class="me1">wait</span><span class="br0">&#40;</span><span class="nu0">3000</span><span class="br0">&#41;</span></pre>

</div>
<!-- EDIT7 SECTION "Adăugare imagini" [2341-2832] -->
<h3 class="sectionedit8" id="input_de_la_utilizator">Input de la utilizator</h3>
<div class="level3">
<pre class="code python"><span class="kw1">import</span> pygame
&nbsp;
screen <span class="sy0">=</span> pygame.<span class="me1">display</span>.<span class="me1">set_mode</span><span class="br0">&#40;</span><span class="br0">&#40;</span><span class="nu0">800</span><span class="sy0">,</span> <span class="nu0">600</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
running <span class="sy0">=</span> <span class="kw2">True</span>
<span class="kw1">while</span> running:
    <span class="kw1">for</span> event <span class="kw1">in</span> pygame.<span class="me1">event</span>.<span class="me1">get</span><span class="br0">&#40;</span><span class="br0">&#41;</span>:
        <span class="co1"># Calea noastra de iesire, declansat cand inchidem fereastra.</span>
        <span class="kw1">if</span> event.<span class="kw2">type</span> <span class="sy0">==</span> pygame.<span class="me1">QUIT</span>:
            running <span class="sy0">=</span> <span class="kw2">False</span>
            <span class="kw1">break</span>
&nbsp;
        <span class="kw1">if</span> event.<span class="kw2">type</span> <span class="sy0">==</span> KEYDOWN:
            <span class="kw1">if</span> event.<span class="me1">key</span> <span class="sy0">==</span> K_UP:
                <span class="kw1">print</span> <span class="st0">'sageata sus'</span>
            <span class="kw1">elif</span> event.<span class="me1">key</span> <span class="sy0">==</span> K_DOWN:
                <span class="kw1">print</span> <span class="st0">'sageata jos'</span>
            <span class="kw1">elif</span> event.<span class="me1">key</span> <span class="sy0">==</span> K_LEFT:
                <span class="kw1">print</span> <span class="st0">'sageata stanga'</span>
            <span class="kw1">elif</span> event.<span class="me1">key</span> <span class="sy0">==</span> K_RIGHT:
                <span class="kw1">print</span> <span class="st0">'sageata dreapta'</span>
            <span class="kw1">elif</span> event.<span class="me1">key</span> <span class="sy0">==</span> K_SPACE:
                <span class="kw1">print</span> <span class="st0">'space'</span>
&nbsp;
pygame.<span class="me1">quit</span><span class="br0">&#40;</span><span class="br0">&#41;</span></pre>

</div>
<!-- EDIT8 SECTION "Input de la utilizator" [2833-3591] -->
<h3 class="sectionedit9" id="demo">Demo</h3>
<div class="level3">

<p>
În această arhivă puteți găsi jocul Pong scris în PyGame. Mai multe detalii despre cum funcționează acesta veți primi în timpul laboratorului.
</p>

<p>
<a href="../../../../_media/ii/lab/pong.zip" class="media mediafile mf_zip" title="ii:lab:pong.zip (1.5 KB)">pong.zip</a>
</p>

</div>
<!-- EDIT9 SECTION "Demo" [3592-3784] -->
<h2 class="sectionedit10" id="phaser">Phaser</h2>
<div class="level2">

</div>
<!-- EDIT10 SECTION "Phaser" [3785-3806] -->
<h2 class="sectionedit11" id="exercitii">Exerciții</h2>
<div class="level2">

<p>
Creeați un joc la alegere pornind de la unul dintre scheletele de cod de mai jos.
</p>

<p>
- Python/PyGame
</p>
<dl class="file">
<dt><a href="../../../code/ii/lab/laborator3%3Fcodeblock=5" title="Download Snippet" class="mediafile mf_py">main.py</a></dt>
<dd><pre class="code file python"><span class="kw1">import</span> pygame
&nbsp;
WIDTH <span class="sy0">=</span> <span class="nu0">800</span>
HEIGHT <span class="sy0">=</span> <span class="nu0">600</span>
&nbsp;
FPS <span class="sy0">=</span> <span class="nu0">60</span>
&nbsp;
COLOR_BLACK <span class="sy0">=</span> <span class="br0">&#40;</span><span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="br0">&#41;</span>
&nbsp;
&nbsp;
<span class="st0">&quot;&quot;&quot; Modify current game state &quot;&quot;&quot;</span>
<span class="kw1">def</span> update<span class="br0">&#40;</span><span class="br0">&#41;</span>:
    <span class="kw1">pass</span>
&nbsp;
<span class="st0">&quot;&quot;&quot; Draw current game state &quot;&quot;&quot;</span>
<span class="kw1">def</span> render<span class="br0">&#40;</span><span class="br0">&#41;</span>:
    <span class="kw1">pass</span>
&nbsp;
<span class="kw1">def</span> main<span class="br0">&#40;</span><span class="br0">&#41;</span>:
    <span class="co1"># Initialize imported pygame modules</span>
    pygame.<span class="me1">init</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
&nbsp;
    <span class="co1"># Set the window's caption</span>
    pygame.<span class="me1">display</span>.<span class="me1">set_caption</span><span class="br0">&#40;</span><span class="st0">&quot;Pong&quot;</span><span class="br0">&#41;</span>
&nbsp;
    clock <span class="sy0">=</span> pygame.<span class="kw3">time</span>.<span class="me1">Clock</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
&nbsp;
    screen <span class="sy0">=</span> pygame.<span class="me1">display</span>.<span class="me1">set_mode</span><span class="br0">&#40;</span><span class="br0">&#40;</span>WIDTH<span class="sy0">,</span> HEIGHT<span class="br0">&#41;</span><span class="br0">&#41;</span>
&nbsp;
    background <span class="sy0">=</span> pygame.<span class="me1">Surface</span><span class="br0">&#40;</span><span class="br0">&#40;</span>WIDTH<span class="sy0">,</span> HEIGHT<span class="br0">&#41;</span><span class="br0">&#41;</span>
    background <span class="sy0">=</span> background.<span class="me1">convert</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
    background.<span class="me1">fill</span><span class="br0">&#40;</span>COLOR_BLACK<span class="br0">&#41;</span>
&nbsp;
    <span class="co1"># Blit everything to screen</span>
    screen.<span class="me1">blit</span><span class="br0">&#40;</span>background<span class="sy0">,</span> <span class="br0">&#40;</span><span class="nu0">0</span><span class="sy0">,</span> <span class="nu0">0</span><span class="br0">&#41;</span><span class="br0">&#41;</span>
&nbsp;
    <span class="co1"># Update the screen</span>
    pygame.<span class="me1">display</span>.<span class="me1">flip</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
&nbsp;
    <span class="co1"># Main loop</span>
    <span class="kw1">while</span> <span class="kw2">True</span>:
        clock.<span class="me1">tick</span><span class="br0">&#40;</span>FPS<span class="br0">&#41;</span>
&nbsp;
        <span class="co1"># Erase everything drawn at last step by filling the background</span>
        <span class="co1"># with color black</span>
        background.<span class="me1">fill</span><span class="br0">&#40;</span>COLOR_BLACK<span class="br0">&#41;</span>
&nbsp;
        <span class="co1"># Check for Quit event</span>
        <span class="kw1">for</span> event <span class="kw1">in</span> pygame.<span class="me1">event</span>.<span class="me1">get</span><span class="br0">&#40;</span><span class="br0">&#41;</span>:
            <span class="kw1">if</span> event.<span class="kw2">type</span> <span class="sy0">==</span> pygame.<span class="me1">QUIT</span>:
                pygame.<span class="me1">quit</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
                <span class="kw3">sys</span>.<span class="me1">exit</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
&nbsp;
        <span class="co1"># Check for key presses and update paddles accordingly</span>
        keys_pressed <span class="sy0">=</span> pygame.<span class="me1">key</span>.<span class="me1">get_pressed</span><span class="br0">&#40;</span><span class="br0">&#41;</span>
        <span class="kw1">if</span> keys_pressed<span class="br0">&#91;</span>pygame.<span class="me1">K_w</span><span class="br0">&#93;</span>:
            <span class="co1"># Do something</span>
            <span class="kw1">pass</span>
        <span class="kw1">if</span> keys_pressed<span class="br0">&#91;</span>pygame.<span class="me1">K_s</span><span class="br0">&#93;</span>:
            <span class="co1"># Do something</span>
            <span class="kw1">pass</span>
        <span class="kw1">if</span> keys_pressed<span class="br0">&#91;</span>pygame.<span class="me1">K_UP</span><span class="br0">&#93;</span>:
            <span class="co1"># Do something</span>
            <span class="kw1">pass</span>
        <span class="kw1">if</span> keys_pressed<span class="br0">&#91;</span>pygame.<span class="me1">K_DOWN</span><span class="br0">&#93;</span>:
            <span class="co1"># Do something</span>
            <span class="kw1">pass</span>
&nbsp;
        <span class="co1"># Update game state</span>
        update<span class="br0">&#40;</span><span class="br0">&#41;</span>
&nbsp;
        <span class="co1"># Render current game state</span>
        render<span class="br0">&#40;</span><span class="br0">&#41;</span>
&nbsp;
&nbsp;
<span class="kw1">if</span> __name__ <span class="sy0">==</span> <span class="st0">'__main__'</span>:
    main<span class="br0">&#40;</span><span class="br0">&#41;</span></pre>
</dd></dl>

<p>
- JavaScript/Phaser
</p>
<dl class="file">
<dt><a href="../../../code/ii/lab/laborator3%3Fcodeblock=6" title="Download Snippet" class="mediafile mf_js">main.js</a></dt>
<dd><pre class="code file js">&nbsp;</pre>
</dd></dl>

<p>
<a href="https://phaser.io/sandbox/" class="urlextern" title="https://phaser.io/sandbox/"  rel="nofollow">https://phaser.io/sandbox/</a>
</p>

<p>
<a href="http://www.zekechan.net/getting-started-html5-game-development-pong1/" class="urlextern" title="http://www.zekechan.net/getting-started-html5-game-development-pong1/"  rel="nofollow">http://www.zekechan.net/getting-started-html5-game-development-pong1/</a>
</p>

<p>
<a href="https://github.com/zekechan/phaser-html5-tutorial-pong" class="urlextern" title="https://github.com/zekechan/phaser-html5-tutorial-pong"  rel="nofollow">https://github.com/zekechan/phaser-html5-tutorial-pong</a>
</p>

</div>
<!-- EDIT11 SECTION "Exerciții" [3807-] --></div>
</body>
</html>

    
    

<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8" />
  <title>so:laboratoare-2013:resurse:c_tips</title>
<meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="date" content="2014-03-05T22:19:57+0200"/>
<meta name="keywords" content="so,laboratoare-2013,resurse,c_tips"/>
<link rel="search" type="application/opensearchdescription+xml" href="../../../../../lib/exe/opensearch.php" title="CS Open CourseWare"/>
<link rel="start" href="../../../../../../courses.1.html"/>
<link rel="alternate" type="application/rss+xml" title="Recent Changes" href="../../../../../feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current Namespace" href="../../../../../feed.php%3Fmode=list&amp;ns=so:laboratoare-2013:resurse"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="c_tips.html"/>
<link rel="canonical" href="../../../../../so/laboratoare-2013/resurse/c_tips.html"/>
<link rel="stylesheet" type="text/css" href="../../../../../lib/exe/css.php%3Ft=arctic&amp;tseed=1479898000.css"/>
<script type="text/javascript">/*<![CDATA[*/var NS='so:laboratoare-2013:resurse';var JSINFO = {"id":"so:laboratoare-2013:resurse:c_tips","namespace":"so:laboratoare-2013:resurse","isadmin":0,"isauth":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="../../../../../lib/exe/js.php%3Ftseed=1479898000"></script>
<script type="text/x-mathjax-config">/*<![CDATA[*/MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ["$","$"], ["\\(","\\)"] ],
        displayMath: [ ["$$","$$"], ["\\[","\\]"] ],
        processEscapes: true
    }
});
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
<script type="text/javascript">/*<![CDATA[*/
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
		  
/*!]]>*/</script>
<script type="text/javascript">/*<![CDATA[*/
var pageTracker = _gat._getTracker("UA-38383934-1");
pageTracker._initData();
pageTracker._trackPageview();
		  
/*!]]>*/</script>
</head>
<body>
<div class="dokuwiki export">
<!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="c_tips.html#cso_tips">C/SO Tips</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="c_tips.html#good_practice">Good practice</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="c_tips.html#verificare_cod_eroare">Verificare cod eroare</a></div></li>
<li class="level3"><div class="li"><a href="c_tips.html#structura_unui_fisier_header">Structura unui fișier header</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="c_tips.html#limbaj">Limbaj</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="c_tips.html#omiterea_parantezelor_in_cazul_folosiri_macrodefinitiilor">Omiterea parantezelor în cazul folosiri macrodefinițiilor</a></div></li>
<li class="level3"><div class="li"><a href="c_tips.html#nume_de_variabilefunctiimacrouri_care_incep_cu_underscore">Nume de variabile/funcții/macrouri care încep cu underscore</a></div></li>
<li class="level3"><div class="li"><a href="c_tips.html#includere_fisiere_c">Includere fișiere C</a></div></li>
<li class="level3"><div class="li"><a href="c_tips.html#alocare_dinamica_a_unui_caracter_sau_intreg">Alocare dinamică a unui caracter sau întreg</a></div></li>
<li class="level3"><div class="li"><a href="c_tips.html#testare_conditie_in_if_sau_while">Testare condiţie în if sau while</a></div></li>
<li class="level3"><div class="li"><a href="c_tips.html#typecast_lade_la_void">Typecast la / de la void *</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="c_tips.html#utilizare_api">Utilizare API</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="c_tips.html#utilizare_open">Utilizare open</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="c_tips.html#sfaturi">Sfaturi</a></div></li>
<li class="level2"><div class="li"><a href="c_tips.html#link-uri_utile">Link-uri utile</a></div></li>
</ul></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="cso_tips">C/SO Tips</h1>
<div class="level1">

</div>
<!-- EDIT1 SECTION "C/SO Tips" [1-24] -->
<h2 class="sectionedit2" id="good_practice">Good practice</h2>
<div class="level2">

</div>
<!-- EDIT2 SECTION "Good practice" [25-50] -->
<h3 class="sectionedit3" id="verificare_cod_eroare">Verificare cod eroare</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li">Verificați codul de eroare întors de apelurile de sistem.</div>
<ul>
<li class="level2"><div class="li">Exemplu:<pre class="code c">fd <span class="sy0">=</span> open<span class="br0">&#40;</span>FILENAME<span class="sy0">,</span> O_RDONLY<span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw1">if</span> <span class="br0">&#40;</span>fd <span class="sy0">&lt;</span> <span class="nu0">0</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
    <a href="http://www.opengroup.org/onlinepubs/009695399/functions/perror.html"><span class="kw3">perror</span></a><span class="br0">&#40;</span><span class="st0">&quot;open&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
    <a href="http://www.opengroup.org/onlinepubs/009695399/functions/exit.html"><span class="kw3">exit</span></a><span class="br0">&#40;</span>EXIT_FAILURE<span class="br0">&#41;</span><span class="sy0">;</span>   <span class="coMULTI">/* sau alta actiune */</span>
<span class="br0">&#125;</span>
&nbsp;
<span class="kw1">if</span> <span class="br0">&#40;</span>ReadFile<span class="br0">&#40;</span>fHandle<span class="sy0">,</span>
        <span class="sy0">&amp;</span>buffer<span class="sy0">,</span>
        bytesToRead<span class="sy0">,</span>
        <span class="sy0">&amp;</span>bytesRead<span class="sy0">,</span>
        NULL<span class="br0">&#41;</span> <span class="sy0">==</span> FALSE<span class="br0">&#41;</span> <span class="br0">&#123;</span>
               <a href="http://www.opengroup.org/onlinepubs/009695399/functions/fprintf.html"><span class="kw3">fprintf</span></a><span class="br0">&#40;</span>stderr<span class="sy0">,</span> <span class="st0">&quot;Error reading file %d<span class="es1">\n</span>&quot;</span><span class="sy0">,</span> GetLastError<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
               <a href="http://www.opengroup.org/onlinepubs/009695399/functions/exit.html"><span class="kw3">exit</span></a><span class="br0">&#40;</span>EXIT_FAILURE<span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span></pre>
</div>
</li>
</ul>
</li>
</ul>

</div>
<!-- EDIT3 SECTION "Verificare cod eroare" [51-512] -->
<h3 class="sectionedit4" id="structura_unui_fisier_header">Structura unui fișier header</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"><strong>TODO</strong></div>
</li>
</ul>

</div>
<!-- EDIT4 SECTION "Structura unui fișier header" [513-565] -->
<h2 class="sectionedit5" id="limbaj">Limbaj</h2>
<div class="level2">

</div>
<!-- EDIT5 SECTION "Limbaj" [566-585] -->
<h3 class="sectionedit6" id="omiterea_parantezelor_in_cazul_folosiri_macrodefinitiilor">Omiterea parantezelor în cazul folosiri macrodefinițiilor</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"><strong>TODO</strong></div>
</li>
</ul>

</div>
<!-- EDIT6 SECTION "Omiterea parantezelor în cazul folosiri macrodefinițiilor" [586-669] -->
<h3 class="sectionedit7" id="nume_de_variabilefunctiimacrouri_care_incep_cu_underscore">Nume de variabile/funcții/macrouri care încep cu underscore</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> Numele de variabile/funcții/macrouri care încep cu underscore _ sunt rezervate de biblioteca standard C. Se recomandă să nu folosiți astfel de nume în codul vostru.</div>
<ul>
<li class="level2"><div class="li"> Mai multe detalii găsiți <a href="http://www.gnu.org/s/libc/manual/html_node/Reserved-Names.html" class="urlextern" title="http://www.gnu.org/s/libc/manual/html_node/Reserved-Names.html"  rel="nofollow"> aici</a>.</div>
</li>
</ul>
</li>
</ul>

<p>
<strong>Greșit (neadecvat)</strong>
</p>
<dl class="file">
<dt><a href="../../../../code/so/laboratoare-2013/resurse/c_tips%3Fcodeblock=1" title="Download Snippet" class="mediafile mf_h">test.h</a></dt>
<dd><pre class="code file c"><span class="co2">#ifndef _TEST_H</span>
<span class="co2">#define _TEST_H      1</span>
...
<span class="co2">#ifndef __TEST_H</span>
<span class="co2">#define __TEST_H     1</span>
...
<span class="co2">#ifndef _TEST_H_</span>
<span class="co2">#define _TEST_H_     1</span>
...
<span class="co2">#ifndef __TEST_H__</span>
<span class="co2">#define __TEST_H__   1</span>
...</pre>
</dd></dl>

<p>
<strong>Corect</strong>
</p>
<dl class="file">
<dt><a href="../../../../code/so/laboratoare-2013/resurse/c_tips%3Fcodeblock=2" title="Download Snippet" class="mediafile mf_h">test.h</a></dt>
<dd><pre class="code file c"><span class="co2">#ifndef TEST_H</span>
<span class="co2">#define TEST_H      1      /* unele șanse de conflict */</span>
...
<span class="co2">#ifndef TEST_H_</span>
<span class="co2">#define TEST_H_    1</span>
...
<span class="co2">#define TEST_H__    1</span>
<span class="co2">#define TEST_H__    1</span></pre>
</dd></dl>

</div>
<!-- EDIT7 SECTION "Nume de variabile/funcții/macrouri care încep cu underscore" [670-1449] -->
<h3 class="sectionedit8" id="includere_fisiere_c">Includere fișiere C</h3>
<div class="level3">

<p>
<strong>NU</strong> includeți fișiere C în alte fișiere C sau headere. Directiva <code>#include</code> se folosește doar pentru headere.
</p>

<p>
<strong>Greșit (neadecvat)</strong>
</p>
<dl class="file">
<dt><a href="../../../../code/so/laboratoare-2013/resurse/c_tips%3Fcodeblock=3" title="Download Snippet" class="mediafile mf_c">test.c</a></dt>
<dd><pre class="code file c"><span class="kw4">int</span> test_fun1<span class="br0">&#40;</span><span class="kw4">int</span> a<span class="sy0">,</span> <span class="kw4">int</span> b<span class="br0">&#41;</span>
<span class="br0">&#123;</span>
     ...
<span class="br0">&#125;</span>
&nbsp;
<span class="kw4">int</span> test_fun2<span class="br0">&#40;</span><span class="kw4">char</span> <span class="sy0">*</span>c<span class="sy0">,</span> <span class="kw4">size_t</span> d<span class="br0">&#41;</span>
<span class="br0">&#123;</span>
     ...
<span class="br0">&#125;</span></pre>
</dd></dl>
<dl class="file">
<dt><a href="../../../../code/so/laboratoare-2013/resurse/c_tips%3Fcodeblock=4" title="Download Snippet" class="mediafile mf_c">main.c</a></dt>
<dd><pre class="code file c"><span class="co2">#include &quot;test.c&quot;</span>
&nbsp;
<span class="kw4">int</span> main<span class="br0">&#40;</span><span class="kw4">void</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    ...
    <span class="me1">test_fun1</span><span class="br0">&#40;</span>t<span class="sy0">,</span> u<span class="br0">&#41;</span><span class="sy0">;</span>
    ...
    <span class="me1">test_fun2</span><span class="br0">&#40;</span>v<span class="sy0">,</span> w<span class="br0">&#41;</span><span class="sy0">;</span>
    ...
&nbsp;
<span class="br0">&#125;</span></pre>
</dd></dl>

<p>
<strong>Corect</strong>
</p>
<dl class="file">
<dt><a href="../../../../code/so/laboratoare-2013/resurse/c_tips%3Fcodeblock=5" title="Download Snippet" class="mediafile mf_c">test.c</a></dt>
<dd><pre class="code file c"><span class="coMULTI">/* definiții de funcții */</span>
&nbsp;
<span class="kw4">int</span> test_fun1<span class="br0">&#40;</span><span class="kw4">int</span> a<span class="sy0">,</span> <span class="kw4">int</span> b<span class="br0">&#41;</span>
<span class="br0">&#123;</span>
     ...
<span class="br0">&#125;</span>
&nbsp;
<span class="kw4">int</span> test_fun2<span class="br0">&#40;</span><span class="kw4">char</span> <span class="sy0">*</span>c<span class="sy0">,</span> <span class="kw4">size_t</span> d<span class="br0">&#41;</span>
<span class="br0">&#123;</span>
     ...
<span class="br0">&#125;</span></pre>
</dd></dl>
<dl class="file">
<dt><a href="../../../../code/so/laboratoare-2013/resurse/c_tips%3Fcodeblock=6" title="Download Snippet" class="mediafile mf_h">test.h</a></dt>
<dd><pre class="code file c"><span class="co2">#ifndef TEST_H_</span>
<span class="co2">#define TEST_H_     1</span>
&nbsp;
<span class="coMULTI">/* declarații (antete) de funcții */</span>
<span class="kw4">int</span> test_fun1<span class="br0">&#40;</span><span class="kw4">int</span> a<span class="sy0">,</span> <span class="kw4">int</span> b<span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw4">int</span> test_fun2<span class="br0">&#40;</span><span class="kw4">char</span> <span class="sy0">*</span>c<span class="sy0">,</span> <span class="kw4">size_t</span> d<span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="co2">#endif</span></pre>
</dd></dl>
<dl class="file">
<dt><a href="../../../../code/so/laboratoare-2013/resurse/c_tips%3Fcodeblock=7" title="Download Snippet" class="mediafile mf_c">main.c</a></dt>
<dd><pre class="code file c"><span class="co2">#include &quot;test.h&quot;</span>
&nbsp;
<span class="kw4">int</span> main<span class="br0">&#40;</span><span class="kw4">void</span><span class="br0">&#41;</span>
<span class="br0">&#123;</span>
    ...
    <span class="me1">test_fun1</span><span class="br0">&#40;</span>t<span class="sy0">,</span> u<span class="br0">&#41;</span><span class="sy0">;</span>
    ...
    <span class="me1">test_fun2</span><span class="br0">&#40;</span>v<span class="sy0">,</span> w<span class="br0">&#41;</span><span class="sy0">;</span>
    ...
<span class="br0">&#125;</span></pre>
</dd></dl>

</div>
<!-- EDIT8 SECTION "Includere fișiere C" [1450-2328] -->
<h3 class="sectionedit9" id="alocare_dinamica_a_unui_caracter_sau_intreg">Alocare dinamică a unui caracter sau întreg</h3>
<div class="level3">

<p>
<strong>Greşit(neadecvat)</strong>
</p>
<pre class="code c"><span class="co2">#define    BUFFER_SIZE     128</span>
&nbsp;
<span class="kw4">char</span> <span class="sy0">*</span>x <span class="sy0">=</span> <a href="http://www.opengroup.org/onlinepubs/009695399/functions/malloc.html"><span class="kw3">malloc</span></a><span class="br0">&#40;</span><span class="nu0">1</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw4">char</span> <span class="sy0">*</span>buffer <span class="sy0">=</span> <a href="http://www.opengroup.org/onlinepubs/009695399/functions/malloc.html"><span class="kw3">malloc</span></a><span class="br0">&#40;</span>BUFFER_SIZE<span class="br0">&#41;</span><span class="sy0">;</span>
&nbsp;
<span class="kw1">if</span> <span class="br0">&#40;</span>read<span class="br0">&#40;</span>STDIN_FILENO<span class="sy0">,</span> x<span class="sy0">,</span> <span class="nu0">1</span><span class="br0">&#41;</span> <span class="sy0">&lt;</span> <span class="nu0">0</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
...
<span class="kw1">if</span> <span class="br0">&#40;</span>read<span class="br0">&#40;</span>STDIN_FILENO<span class="sy0">,</span> buffer<span class="sy0">,</span> BUFFER_SIZE<span class="br0">&#41;</span> <span class="sy0">&lt;</span> <span class="nu0">0</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
...</pre>

<p>
<strong>Corect</strong>
</p>
<pre class="code c"><span class="co2">#define    BUFFER_SIZE     128</span>
&nbsp;
<span class="kw4">char</span> x<span class="sy0">;</span>
<span class="kw4">char</span> buffer<span class="br0">&#91;</span>BUFFER_SIZE<span class="br0">&#93;</span><span class="sy0">;</span>
&nbsp;
<span class="kw1">if</span> <span class="br0">&#40;</span>read<span class="br0">&#40;</span>STDIN_FILENO<span class="sy0">,</span> <span class="sy0">&amp;</span>x<span class="sy0">,</span> <span class="nu0">1</span><span class="br0">&#41;</span> <span class="sy0">&lt;</span> <span class="nu0">0</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
...
<span class="kw1">if</span> <span class="br0">&#40;</span>read<span class="br0">&#40;</span>STDIN_FILENO<span class="sy0">,</span> buffer<span class="sy0">,</span> BUFFER_SIZE<span class="br0">&#41;</span> <span class="sy0">&lt;</span> <span class="nu0">0</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
...</pre>

<p>
<strong>Explicație</strong>
</p>
<ul>
<li class="level1"><div class="li">În cazul de faţă nu este nevoie alocarea dinamică a variabilei <code>x</code>, se poate utiliza operatorul de referenţiere <code>&amp;</code> care află adresa unei variabile.</div>
</li>
<li class="level1"><div class="li">În cazul variabilei <code>buffer</code>, întrucât se cunoaște din momentul compilării valoarea acesteia, se poate folosi alocarea statică. Alocarea statică este realizată de compilator. Alocarea dinamică presupune gestiunea acesteia de utilizator (gestiunea pointerului, eliberarea zonei, evitarea leak-urilor) însemnând un risc mai ridicat.</div>
</li>
</ul>

</div>
<!-- EDIT9 SECTION "Alocare dinamică a unui caracter sau întreg" [2329-3332] -->
<h3 class="sectionedit10" id="testare_conditie_in_if_sau_while">Testare condiţie în if sau while</h3>
<div class="level3">

<p>
<strong>Greşit </strong>
</p>
<pre class="code c"><span class="kw1">if</span> <span class="br0">&#40;</span>fd <span class="sy0">=</span> open<span class="br0">&#40;</span><span class="st0">&quot;file&quot;</span><span class="sy0">,</span> O_RDONLY<span class="br0">&#41;</span> <span class="sy0">&lt;</span> <span class="nu0">0</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
	<a href="http://www.opengroup.org/onlinepubs/009695399/functions/perror.html"><span class="kw3">perror</span></a><span class="br0">&#40;</span><span class="st0">&quot;open&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span>
	<span class="coMULTI">/* use fd */</span>
<span class="br0">&#125;</span></pre>

<p>
<strong>Corect </strong>
</p>
<pre class="code c"><span class="kw1">if</span> <span class="br0">&#40;</span><span class="br0">&#40;</span>fd <span class="sy0">=</span> open<span class="br0">&#40;</span><span class="st0">&quot;file&quot;</span><span class="sy0">,</span> O_RDONLY<span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="sy0">&lt;</span> <span class="nu0">0</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
	<a href="http://www.opengroup.org/onlinepubs/009695399/functions/perror.html"><span class="kw3">perror</span></a><span class="br0">&#40;</span><span class="st0">&quot;open&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="br0">&#125;</span> <span class="kw1">else</span> <span class="br0">&#123;</span>
	<span class="coMULTI">/* use fd */</span>
<span class="br0">&#125;</span></pre>

<p>
<strong>Explicaţia </strong>
</p>

<p>
Operatorul <code>&lt;</code> are prioritate mai mare decât operatorul de atribuire <code>=</code>. Aceaşi greşeală este şi dacă testăm condiţia fără paranteze într-un <code>while</code>.
</p>

<p>
<strong>Și mai corect </strong>
</p>
<pre class="code c">fd <span class="sy0">=</span> open<span class="br0">&#40;</span><span class="st0">&quot;file&quot;</span><span class="sy0">,</span> O_RDONLY<span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw1">if</span> <span class="br0">&#40;</span>fd <span class="sy0">&lt;</span> <span class="nu0">0</span><span class="br0">&#41;</span>
        <a href="http://www.opengroup.org/onlinepubs/009695399/functions/perror.html"><span class="kw3">perror</span></a><span class="br0">&#40;</span><span class="st0">&quot;open&quot;</span><span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw1">else</span> <span class="br0">&#123;</span>
        <span class="coMULTI">/* Use fd. */</span>
<span class="br0">&#125;</span></pre>

<p>
Formularea cu apelul funcției în condiția <code>if</code> este error-prone și face codul mai greu de citit.
</p>

</div>
<!-- EDIT10 SECTION "Testare condiţie în if sau while" [3333-4029] -->
<h3 class="sectionedit11" id="typecast_lade_la_void">Typecast la / de la void *</h3>
<div class="level3">

<p>
În C (nu și în C++), nu sunt necesare typecast-uri într-o atribuire atunci când unul dintre termeni este de tip <code>void *</code>.
</p>

<p>
<strong>Greșit</strong>
</p>
<pre class="code c"><span class="kw4">int</span> <span class="sy0">*</span>a <span class="sy0">=</span> <span class="br0">&#40;</span><span class="kw4">int</span> <span class="sy0">*</span><span class="br0">&#41;</span> <a href="http://www.opengroup.org/onlinepubs/009695399/functions/malloc.html"><span class="kw3">malloc</span></a><span class="br0">&#40;</span>N <span class="sy0">*</span> <span class="kw4">sizeof</span> <span class="sy0">*</span>a<span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw4">void</span> <span class="sy0">*</span>p <span class="sy0">=</span> <span class="br0">&#40;</span><span class="kw4">void</span> <span class="sy0">*</span><span class="br0">&#41;</span> a<span class="sy0">;</span></pre>

<p>
<strong>Corect</strong>
</p>
<pre class="code c"><span class="kw4">int</span> <span class="sy0">*</span>a <span class="sy0">=</span> <a href="http://www.opengroup.org/onlinepubs/009695399/functions/malloc.html"><span class="kw3">malloc</span></a><span class="br0">&#40;</span>N <span class="sy0">*</span> <span class="kw4">sizeof</span> <span class="sy0">*</span>a<span class="br0">&#41;</span><span class="sy0">;</span>
<span class="kw4">void</span> <span class="sy0">*</span>p <span class="sy0">=</span> a<span class="sy0">;</span></pre>

</div>
<!-- EDIT11 SECTION "Typecast la / de la void *" [4030-4365] -->
<h2 class="sectionedit12" id="utilizare_api">Utilizare API</h2>
<div class="level2">

</div>
<!-- EDIT12 SECTION "Utilizare API" [4366-4391] -->
<h3 class="sectionedit13" id="utilizare_open">Utilizare open</h3>
<div class="level3">

<p>
<strong>Greşit </strong>
</p>
<pre class="code c"><span class="kw1">if</span> <span class="br0">&#40;</span><span class="br0">&#40;</span>fd <span class="sy0">=</span> open<span class="br0">&#40;</span><span class="st0">&quot;file_name&quot;</span><span class="sy0">,</span> O_WRONLY <span class="sy0">|</span> O_CREAT<span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="sy0">&lt;</span> <span class="nu0">0</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></pre>

<p>
<strong>Corect </strong>
</p>
<pre class="code c"><span class="kw1">if</span> <span class="br0">&#40;</span><span class="br0">&#40;</span>fd <span class="sy0">=</span> open<span class="br0">&#40;</span><span class="st0">&quot;file_name&quot;</span><span class="sy0">,</span> O_WRONLY <span class="sy0">|</span> O_CREAT<span class="sy0">,</span> <span class="nu8">0644</span><span class="br0">&#41;</span><span class="br0">&#41;</span> <span class="sy0">&lt;</span> <span class="nu0">0</span><span class="br0">&#41;</span> <span class="br0">&#123;</span></pre>

<p>
<strong>Explicaţia </strong>
</p>

<p>
În cazul în care folosim flagul O_CREAT, trebuie să specificăm drepturile cu care se creează fişierul. 
Compilează pentru că funcţia <code>open</code> este declarată
</p>
<pre class="code c"><span class="kw4">int</span> open <span class="br0">&#40;</span><span class="kw4">char</span> <span class="sy0">*</span>file<span class="sy0">,</span> <span class="kw4">int</span> oflag<span class="sy0">,</span> ...<span class="br0">&#41;</span><span class="sy0">;</span></pre>

</div>
<!-- EDIT13 SECTION "Utilizare open" [4392-4842] -->
<h2 class="sectionedit14" id="sfaturi">Sfaturi</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li">Fiți consecvenţi în indentare!</div>
</li>
<li class="level1"><div class="li">Folosiți denumiri relevante pentru funcții și variabile.</div>
</li>
</ul>

</div>
<!-- EDIT14 SECTION "Sfaturi" [4843-4963] -->
<h2 class="sectionedit15" id="link-uri_utile">Link-uri utile</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"><a href="http://www.iso-9899.info/wiki/Snippets" class="urlextern" title="http://www.iso-9899.info/wiki/Snippets"  rel="nofollow"> ##C code snippets</a></div>
</li>
<li class="level1"><div class="li">##C pe <a href="http://freenode.net/" class="urlextern" title="http://freenode.net/"  rel="nofollow"> Freenode</a></div>
</li>
<li class="level1"><div class="li"><a href="http://www.iso-9899.info/wiki/Main_Page" class="urlextern" title="http://www.iso-9899.info/wiki/Main_Page"  rel="nofollow"> site-ul aferent ##C</a></div>
</li>
<li class="level1"><div class="li"><a href="http://groups.google.com/group/comp.lang.c/topics?lnk" class="urlextern" title="http://groups.google.com/group/comp.lang.c/topics?lnk"  rel="nofollow"> comp.lang.c</a> (Usenet)</div>
</li>
<li class="level1"><div class="li"><a href="http://c-faq.com/" class="urlextern" title="http://c-faq.com/"  rel="nofollow"> C FAQ</a></div>
</li>
<li class="level1"><div class="li"><a href="http://www.oualline.com/style/index.html" class="urlextern" title="http://www.oualline.com/style/index.html"  rel="nofollow"> Steve Oualline - C Elements of Style</a></div>
</li>
<li class="level1"><div class="li"><a href="http://www.gnu.org/software/libc/manual/" class="urlextern" title="http://www.gnu.org/software/libc/manual/"  rel="nofollow"> Documentația GNU C Library</a></div>
</li>
<li class="level1"><div class="li"><a href="http://linux.die.net/man/1/indent" class="urlextern" title="http://linux.die.net/man/1/indent"  rel="nofollow"> Tool pentru indentare</a></div>
</li>
</ul>

<p>
~~DISCUSSION:off~~
</p>

</div>
<!-- EDIT15 SECTION "Link-uri utile" [4964-] --></div>
</body>
</html>

    
    

<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8" />
  <title>sd-ca:articole:tutorial-03-1</title>
<meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="date" content="2016-03-09T23:53:37+0200"/>
<meta name="keywords" content="sd-ca,articole,tutorial-03-1"/>
<link rel="search" type="application/opensearchdescription+xml" href="../../../../lib/exe/opensearch.php" title="CS Open CourseWare"/>
<link rel="start" href="../../../../../courses.1.html"/>
<link rel="alternate" type="application/rss+xml" title="Recent Changes" href="../../../../feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current Namespace" href="../../../../feed.php%3Fmode=list&amp;ns=sd-ca:articole"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="tutorial-03-1.html"/>
<link rel="canonical" href="../../../../sd-ca/articole/tutorial-03-1.html"/>
<link rel="stylesheet" type="text/css" href="../../../../lib/exe/css.php%3Ft=arctic&amp;tseed=1476798676.css"/>
<script type="text/javascript">/*<![CDATA[*/var NS='sd-ca:articole';var JSINFO = {"id":"sd-ca:articole:tutorial-03-1","namespace":"sd-ca:articole","isadmin":0,"isauth":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="../../../../lib/exe/js.php%3Ftseed=1476798676"></script>
<script type="text/x-mathjax-config">/*<![CDATA[*/MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ["$","$"], ["\\(","\\)"] ],
        displayMath: [ ["$$","$$"], ["\\[","\\]"] ],
        processEscapes: true
    }
});
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
<script type="text/javascript">/*<![CDATA[*/
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
		  
/*!]]>*/</script>
<script type="text/javascript">/*<![CDATA[*/
var pageTracker = _gat._getTracker("UA-38383934-1");
pageTracker._initData();
pageTracker._trackPageview();
		  
/*!]]>*/</script>
</head>
<body>
<div class="dokuwiki export">
<!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="tutorial-03-1.html#tutorial_31_-_set">Tutorial 3.1 - Set</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="tutorial-03-1.html#gsoc">GSoC</a></div></li>
<li class="level2"><div class="li"><a href="tutorial-03-1.html#obiective">Obiective</a></div></li>
<li class="level2"><div class="li"><a href="tutorial-03-1.html#dezvoltare">Dezvoltare</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="tutorial-03-1.html#varianta_de_baza_a_clasei_set">Varianta de bază a clasei Set</a></div></li>
<li class="level3"><div class="li"><a href="tutorial-03-1.html#constructor_default_si_particular">Constructor default și particular</a></div></li>
<li class="level3"><div class="li"><a href="tutorial-03-1.html#adaugare_de_elemente">Adăugare de elemente</a></div></li>
<li class="level3"><div class="li"><a href="tutorial-03-1.html#stergerea_elementelor">Ștergerea elementelor</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="tutorial-03-1.html#testare_si_evaluare">Testare și evaluare</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="tutorial-03-1.html#program_de_test">Program de test</a></div></li>
<li class="level3"><div class="li"><a href="tutorial-03-1.html#verificare_cu_valgrind">Verificare cu Valgrind</a></div></li>
</ul></li>
</ul></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="tutorial_31_-_set">Tutorial 3.1 - Set</h1>
<div class="level1">

<p>
In acest tutorial, ne propunem sa construim o structura generica Set (multime in sens matematic) capabil sa se redimensioneze automat atunci cand se umple si sa retina numai elemente unice.
</p>

</div>
<!-- EDIT1 SECTION "Tutorial 3.1 - Set" [1-226] -->
<h2 class="sectionedit2" id="gsoc">GSoC</h2>
<div class="level2">

<p>
Google Summer of Code este un program de vară în care studenții
(indiferent de anul de studiu) sunt implicați în proiecte Open Source
pentru a își dezvolta skill-urile de programare, fiind răsplătiți cu o
bursă în valoare totală de 5500$.
<a href="https://developers.google.com/open-source/gsoc/" class="urlextern" title="https://developers.google.com/open-source/gsoc/"  rel="nofollow">https://developers.google.com/open-source/gsoc/</a>
UPB se află în top ca număr de studenți acceptați; în fiecare an fiind
undeva la aprox. 30-40 de studenți acceptați.
Vă încurajăm să aplicați! Există și un grup de fb cu foști
participanți unde puteti să îi contactați pentru sfaturi :)
<a href="https://www.facebook.com/groups/240794072931431/" class="urlextern" title="https://www.facebook.com/groups/240794072931431/"  rel="nofollow">https://www.facebook.com/groups/240794072931431/</a>
</p>

<p>
Pe 14 martie începe perioada de aplicare pentru Google Summer of Code,
și aveti la dispoziție 10 zile.
</p>

</div>
<!-- EDIT2 SECTION "GSoC" [227-957] -->
<h2 class="sectionedit3" id="obiective">Obiective</h2>
<div class="level2">

<p>
Ne dorim:
</p>
<ul>
<li class="level1"><div class="li"> să construim o clasă generica Set cu un membru, astfel încât să poată reține un vector de elemente de tip generic</div>
</li>
<li class="level1"><div class="li"> să facem un constructor prin care Set să se inițializeze cu valorile *unice* ale unui array generic</div>
</li>
<li class="level1"><div class="li"> să adaugam clasei Set o metodă de adăugare a unui element nou. Dacă vectorul intern este deja plin, se va aloca un nou vector de dimensiune dublă, se va copia conținutul original și se va adăuga apoi noul element ca în mod obișnuit. Elementul se va adăuga doar dacă nu există deja în Set. (proprietate de mulțime matematică)</div>
</li>
<li class="level1"><div class="li"> să adaugam clasei Set o metodă de ștergere a unui element. Elementul se va șterge doar dacă există în Set.</div>
</li>
<li class="level1"><div class="li"> să testam clasa Set printr-un cod simplu care arată cum se adaugă elemente și cum se inițializează printr-un array generic.</div>
</li>
<li class="level1"><div class="li"> să verificam cu Valgrind că nu sunt memory leaks.</div>
</li>
</ul>

</div>
<!-- EDIT3 SECTION "Obiective" [958-1876] -->
<h2 class="sectionedit4" id="dezvoltare">Dezvoltare</h2>
<div class="level2">

</div>
<!-- EDIT4 SECTION "Dezvoltare" [1877-1900] -->
<h3 class="sectionedit5" id="varianta_de_baza_a_clasei_set">Varianta de bază a clasei Set</h3>
<div class="level3">

<p>
Vom folosi std::vector din STL pe post de ResizableArray.
</p>
<pre class="code cpp"><span class="kw2">template</span> <span class="sy1">&lt;</span><span class="kw2">class</span> T<span class="sy1">&gt;</span>
<span class="kw2">class</span> Set <span class="br0">&#123;</span>
	<span class="co1">// suportul pe care se salveaza elementele de tip T este un std::vector</span>
	<span class="co1">// din STL (Standard Template Library)</span>
	vector <span class="sy1">&lt;</span>T<span class="sy1">&gt;</span> array<span class="sy4">;</span>
<span class="br0">&#125;</span><span class="sy4">;</span></pre>

</div>
<!-- EDIT5 SECTION "Varianta de bază a clasei Set" [1901-2187] -->
<h3 class="sectionedit6" id="constructor_default_si_particular">Constructor default și particular</h3>
<div class="level3">

<p>
Pentru a adăuga în Set valorile dintr-un array(pointer) dat ca parametru vom folosi metoda “add” pe care o vom implementa mai jos.
</p>
<pre class="code cpp"><span class="kw2">template</span> <span class="sy1">&lt;</span><span class="kw2">class</span> T<span class="sy1">&gt;</span>
<span class="kw2">class</span> Set <span class="br0">&#123;</span>
	<span class="co1">// suportul pe care se salveaza elementele de tip T este un std::vector</span>
	<span class="co1">// din STL (Standard Template Library)</span>
	vector <span class="sy1">&lt;</span>T<span class="sy1">&gt;</span> array<span class="sy4">;</span>
&nbsp;
<span class="kw2">public</span><span class="sy4">:</span>
	Set<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
		<span class="co1">// std::vector este deja alocat static,</span>
		<span class="co1">// deci nu este nevoie de alocare dinamica</span>
	<span class="br0">&#125;</span>
&nbsp;
	<span class="co1">// constructor care initializeaza setul cu valorile unice</span>
	<span class="co1">// dintr-un array de elemente de tip T</span>
	Set<span class="br0">&#40;</span>T<span class="sy2">*</span> other, <span class="kw4">int</span> size<span class="br0">&#41;</span> <span class="br0">&#123;</span>
		<span class="kw1">for</span><span class="br0">&#40;</span><span class="kw4">int</span> i <span class="sy1">=</span> <span class="nu0">0</span><span class="sy4">;</span> i <span class="sy1">&lt;</span> size<span class="sy4">;</span> <span class="sy2">++</span>i<span class="br0">&#41;</span>
			add<span class="br0">&#40;</span>other<span class="br0">&#91;</span>i<span class="br0">&#93;</span><span class="br0">&#41;</span><span class="sy4">;</span>
	<span class="br0">&#125;</span>
&nbsp;
        <span class="co1">// Copy-Constructor</span>
	Set<span class="br0">&#40;</span><span class="kw4">const</span> Set <span class="sy3">&amp;</span>other<span class="br0">&#41;</span> <span class="br0">&#123;</span>
		array <span class="sy1">=</span> other.<span class="me1">array</span><span class="sy4">;</span>
		<span class="co1">// std::vector are deja implementat assignment operator,</span>
		<span class="co1">// asa ca ne vom folosi de el :)</span>
	<span class="br0">&#125;</span>
&nbsp;
	~Set<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
		<span class="co1">// std::vector este alocat static, asa ca nu trebuie dealocat</span>
		<span class="co1">// dinamic (cu &quot;delete&quot;)</span>
	<span class="br0">&#125;</span>
<span class="br0">&#125;</span><span class="sy4">;</span></pre>

</div>
<!-- EDIT6 SECTION "Constructor default și particular" [2188-3120] -->
<h3 class="sectionedit7" id="adaugare_de_elemente">Adăugare de elemente</h3>
<div class="level3">

<p>
înainte de a adăuga un element îl vom căuta în std::vector pentru a fi siguri că este unic.
</p>
<pre class="code cpp"><span class="co1">// adaugarea unui element nou in multime</span>
<span class="kw4">void</span> add<span class="br0">&#40;</span>T element<span class="br0">&#41;</span> <span class="br0">&#123;</span>
	<span class="co1">// il cautam in multime</span>
	<span class="kw1">for</span><span class="br0">&#40;</span><span class="kw4">int</span> i <span class="sy1">=</span> <span class="nu0">0</span><span class="sy4">;</span> i <span class="sy1">&lt;</span> array.<span class="me1">size</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy4">;</span> <span class="sy2">++</span>i<span class="br0">&#41;</span>
		<span class="co1">// operatorul &quot;==&quot; al clasei T trebuie sa fie &quot;overridden&quot;</span>
		<span class="kw1">if</span><span class="br0">&#40;</span>array<span class="br0">&#91;</span>i<span class="br0">&#93;</span> <span class="sy1">==</span> element<span class="br0">&#41;</span>	<span class="br0">&#123;</span>
			<span class="kw3">cout</span> <span class="sy1">&lt;&lt;</span> <span class="st0">&quot;Elementul &quot;</span> <span class="sy1">&lt;&lt;</span> element <span class="sy1">&lt;&lt;</span> <span class="st0">&quot; exista deja in Set.<span class="es1">\n</span>&quot;</span><span class="sy4">;</span>
			<span class="kw1">return</span><span class="sy4">;</span>
		<span class="br0">&#125;</span>
	<span class="co1">// daca nu exista deja in Set, il adaugam</span>
	array.<span class="me1">push_back</span><span class="br0">&#40;</span>element<span class="br0">&#41;</span><span class="sy4">;</span>
	<span class="kw3">cout</span> <span class="sy1">&lt;&lt;</span> <span class="st0">&quot;Element adaugat cu succes: &quot;</span> <span class="sy1">&lt;&lt;</span> element <span class="sy1">&lt;&lt;</span> <span class="st0">&quot;<span class="es1">\n</span>&quot;</span><span class="sy4">;</span>
	<span class="co1">// operatorul &quot;&lt;&lt;&quot; al clasei T trebuie sa fie &quot;overridden&quot;</span>
<span class="br0">&#125;</span></pre>

</div>
<!-- EDIT7 SECTION "Adăugare de elemente" [3121-3758] -->
<h3 class="sectionedit8" id="stergerea_elementelor">Ștergerea elementelor</h3>
<div class="level3">
<pre class="code cpp"><span class="co1">// stergerea unui element nou in multime</span>
<span class="kw4">void</span> <span class="kw3">remove</span><span class="br0">&#40;</span>T element<span class="br0">&#41;</span> <span class="br0">&#123;</span>
	<span class="co1">// il cautam in multime</span>
	<span class="kw1">for</span><span class="br0">&#40;</span><span class="kw4">int</span> i <span class="sy1">=</span> <span class="nu0">0</span><span class="sy4">;</span> i <span class="sy1">&lt;</span> array.<span class="me1">size</span><span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy4">;</span> <span class="sy2">++</span>i<span class="br0">&#41;</span>
		<span class="co1">// operatorul &quot;==&quot; al clasei T trebuie sa fie &quot;overridden&quot;</span>
		<span class="kw1">if</span><span class="br0">&#40;</span>array<span class="br0">&#91;</span>i<span class="br0">&#93;</span> <span class="sy1">==</span> element<span class="br0">&#41;</span>	<span class="br0">&#123;</span>
			<span class="co1">// daca exista, il stergem folosind metoda &quot;erase&quot; a std::vector</span>
			<span class="co1">// iar metoda &quot;begin&quot; returneaza un iterator la inceputul</span>
			<span class="co1">// vectorului. more about it later :)</span>
			array.<span class="me1">erase</span><span class="br0">&#40;</span>array.<span class="me1">begin</span><span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="sy2">+</span> i<span class="br0">&#41;</span><span class="sy4">;</span>
			<span class="kw3">cout</span> <span class="sy1">&lt;&lt;</span> <span class="st0">&quot;Elementul &quot;</span> <span class="sy1">&lt;&lt;</span> element <span class="sy1">&lt;&lt;</span> <span class="st0">&quot; a fost sters din Set.<span class="es1">\n</span>&quot;</span><span class="sy4">;</span>
			<span class="co1">// operatorul &quot;&lt;&lt;&quot; al clasei T trebuie sa fie &quot;overridden&quot;</span>
			<span class="kw1">return</span><span class="sy4">;</span>
		<span class="br0">&#125;</span>		
	<span class="co1">// nu avem ce sterge daca nu exista in Set</span>
	<span class="kw3">cout</span> <span class="sy1">&lt;&lt;</span> <span class="st0">&quot;Elementul &quot;</span> <span class="sy1">&lt;&lt;</span> element <span class="sy1">&lt;&lt;</span> <span class="st0">&quot; nu exista in Set.<span class="es1">\n</span>&quot;</span><span class="sy4">;</span>
<span class="br0">&#125;</span></pre>

</div>
<!-- EDIT8 SECTION "Ștergerea elementelor" [3759-4487] -->
<h2 class="sectionedit9" id="testare_si_evaluare">Testare și evaluare</h2>
<div class="level2">

</div>
<!-- EDIT9 SECTION "Testare și evaluare" [4488-4521] -->
<h3 class="sectionedit10" id="program_de_test">Program de test</h3>
<div class="level3">

<p>
In continuare vom face un program prin care vom arata folosirea constructorului default si pe cea a celui particular si vom testa metodele de adaugare si de stergere.
</p>
<pre class="code cpp"><span class="co2">#include &quot;Set.h&quot;</span>
&nbsp;
<span class="kw4">int</span> main<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
	Set <span class="sy1">&lt;</span><span class="kw4">int</span><span class="sy1">&gt;</span> s<span class="sy4">;</span>
	s.<span class="me1">add</span><span class="br0">&#40;</span><span class="nu0">1</span><span class="br0">&#41;</span><span class="sy4">;</span>
	s.<span class="me1">add</span><span class="br0">&#40;</span><span class="nu0">2</span><span class="br0">&#41;</span><span class="sy4">;</span>
	s.<span class="me1">add</span><span class="br0">&#40;</span><span class="nu0">3</span><span class="br0">&#41;</span><span class="sy4">;</span>
	s.<span class="me1">add</span><span class="br0">&#40;</span><span class="nu0">3</span><span class="br0">&#41;</span><span class="sy4">;</span>
&nbsp;
	s.<span class="kw3">remove</span><span class="br0">&#40;</span><span class="nu0">3</span><span class="br0">&#41;</span><span class="sy4">;</span>
	s.<span class="me1">add</span><span class="br0">&#40;</span><span class="nu0">3</span><span class="br0">&#41;</span><span class="sy4">;</span>
	s.<span class="kw3">remove</span><span class="br0">&#40;</span><span class="nu0">4</span><span class="br0">&#41;</span><span class="sy4">;</span>
&nbsp;
	<span class="kw4">int</span> n<span class="sy4">;</span>
	<span class="kw3">cout</span> <span class="sy1">&lt;&lt;</span> <span class="st0">&quot;n = &quot;</span><span class="sy4">;</span>
	<span class="kw3">cin</span> <span class="sy1">&gt;&gt;</span> n<span class="sy4">;</span>
	<span class="kw4">int</span> <span class="sy2">*</span>v <span class="sy1">=</span> <span class="kw3">new</span> <span class="kw4">int</span><span class="br0">&#91;</span>n<span class="br0">&#93;</span><span class="sy4">;</span>
	<span class="kw1">for</span><span class="br0">&#40;</span><span class="kw4">int</span> i <span class="sy1">=</span> <span class="nu0">0</span><span class="sy4">;</span> i <span class="sy1">&lt;</span> n<span class="sy4">;</span> <span class="sy2">++</span>i<span class="br0">&#41;</span>
		v<span class="br0">&#91;</span>i<span class="br0">&#93;</span> <span class="sy1">=</span> i<span class="sy2">%</span><span class="nu19">5</span><span class="sy4">;</span>
&nbsp;
	Set <span class="sy1">&lt;</span><span class="kw4">int</span><span class="sy1">&gt;</span> s2 <span class="br0">&#40;</span>v, <span class="nu0">7</span><span class="br0">&#41;</span><span class="sy4">;</span>
	<span class="kw3">delete</span><span class="br0">&#91;</span><span class="br0">&#93;</span> v<span class="sy4">;</span>
&nbsp;
	<span class="kw1">return</span> <span class="nu0">0</span><span class="sy4">;</span>
<span class="br0">&#125;</span></pre>

<p>
Exemplu:
</p>
<pre class="code bash">Element adaugat cu succes: <span class="nu0">1</span>
Element adaugat cu succes: <span class="nu0">2</span>
Element adaugat cu succes: <span class="nu0">3</span>
Elementul <span class="nu0">3</span> exista deja <span class="kw1">in</span> Set.
Elementul <span class="nu0">3</span> a fost sters din Set.
Element adaugat cu succes: <span class="nu0">3</span>
Elementul <span class="nu0">4</span> nu exista <span class="kw1">in</span> Set.
n = <span class="nu0">7</span>
Element adaugat cu succes: <span class="nu0">0</span>
Element adaugat cu succes: <span class="nu0">1</span>
Element adaugat cu succes: <span class="nu0">2</span>
Element adaugat cu succes: <span class="nu0">3</span>
Element adaugat cu succes: <span class="nu0">4</span>
Elementul <span class="nu0">0</span> exista deja <span class="kw1">in</span> Set.
Elementul <span class="nu0">1</span> exista deja <span class="kw1">in</span> Set.</pre>

</div>
<!-- EDIT10 SECTION "Program de test" [4522-5475] -->
<h3 class="sectionedit11" id="verificare_cu_valgrind">Verificare cu Valgrind</h3>
<div class="level3">

<p>
Pentru acelasi test rulat cu 
</p>
<pre class="code bash"> <span class="kw2">valgrind</span> .<span class="sy0">/</span>main.out </pre>

<p>
 toata memoria va fi eliberata.
</p>
<pre class="code bash">==<span class="nu0">11142</span>== HEAP SUMMARY:
==<span class="nu0">11142</span>==     <span class="kw1">in</span> use at exit: <span class="nu0">0</span> bytes <span class="kw1">in</span> <span class="nu0">0</span> blocks
==<span class="nu0">11142</span>==   total heap usage: <span class="nu0">8</span> allocs, <span class="nu0">8</span> frees, <span class="nu0">116</span> bytes allocated
==<span class="nu0">11142</span>== 
==<span class="nu0">11142</span>== All heap blocks were freed <span class="re5">--</span> no leaks are possible
==<span class="nu0">11142</span>== 
==<span class="nu0">11142</span>== For counts of detected and suppressed errors, rerun with: <span class="re5">-v</span>
==<span class="nu0">11142</span>== ERROR SUMMARY: <span class="nu0">0</span> errors from <span class="nu0">0</span> contexts <span class="br0">&#40;</span>suppressed: <span class="nu0">0</span> from <span class="nu0">0</span><span class="br0">&#41;</span></pre>

</div>
<!-- EDIT11 SECTION "Verificare cu Valgrind" [5476-] --></div>
</body>
</html>

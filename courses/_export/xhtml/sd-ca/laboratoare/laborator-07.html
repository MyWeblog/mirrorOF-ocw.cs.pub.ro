    
    

<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8" />
  <title>sd-ca:laboratoare:laborator-07</title>
<meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="date" content="2015-05-09T16:47:18+0300"/>
<meta name="keywords" content="sd-ca,laboratoare,laborator-07"/>
<link rel="search" type="application/opensearchdescription+xml" href="../../../../lib/exe/opensearch.php" title="CS Open CourseWare"/>
<link rel="start" href="../../../../../courses.1.html"/>
<link rel="alternate" type="application/rss+xml" title="Recent Changes" href="../../../../feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current Namespace" href="../../../../feed.php%3Fmode=list&amp;ns=sd-ca:laboratoare"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="laborator-07.html"/>
<link rel="canonical" href="../../../../sd-ca/laboratoare/laborator-07.html"/>
<link rel="stylesheet" type="text/css" href="../../../../lib/exe/css.php%3Ft=arctic&amp;tseed=1476798676.css"/>
<script type="text/javascript">/*<![CDATA[*/var NS='sd-ca:laboratoare';var JSINFO = {"id":"sd-ca:laboratoare:laborator-07","namespace":"sd-ca:laboratoare","isadmin":0,"isauth":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="../../../../lib/exe/js.php%3Ftseed=1476798676"></script>
<script type="text/x-mathjax-config">/*<![CDATA[*/MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ["$","$"], ["\\(","\\)"] ],
        displayMath: [ ["$$","$$"], ["\\[","\\]"] ],
        processEscapes: true
    }
});
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
<script type="text/javascript">/*<![CDATA[*/
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
		  
/*!]]>*/</script>
<script type="text/javascript">/*<![CDATA[*/
var pageTracker = _gat._getTracker("UA-38383934-1");
pageTracker._initData();
pageTracker._trackPageview();
		  
/*!]]>*/</script>
</head>
<body>
<div class="dokuwiki export">
<!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="laborator-07.html#laborator_07_-_hashtable">Laborator 07 - HashTable</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="laborator-07.html#obiective">Obiective</a></div></li>
<li class="level2"><div class="li"><a href="laborator-07.html#ce_e_un_dictionar">Ce e un dicționar?</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="laborator-07.html#operatii_de_baza">Operații de bază</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="laborator-07.html#implementarehashtable">Implementare: hashtable</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="laborator-07.html#implementarea_cu_liste_inlantuite">Implementarea cu liste înlănțuite</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="laborator-07.html#alte_implementari">Alte implementări</a></div></li>
<li class="level2"><div class="li"><a href="laborator-07.html#exemplu">Exemplu</a></div></li>
<li class="level2"><div class="li"><a href="laborator-07.html#exercitii">Exerciţii</a></div></li>
<li class="level2"><div class="li"><a href="laborator-07.html#interviu">Interviu</a></div></li>
<li class="level2"><div class="li"><a href="laborator-07.html#bibliografie">Bibliografie</a></div></li>
</ul></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="laborator_07_-_hashtable">Laborator 07 - HashTable</h1>
<div class="level1">

<p>
Responsabili:
</p>
<ul>
<li class="level1"><div class="li"> <a href="mailto:&#x6d;&#x69;&#x68;&#x61;&#x69;&#x2e;&#x6d;&#x6e;&#x65;&#x61;&#x63;&#x73;&#x75;&#x40;&#x67;&#x6d;&#x61;&#x69;&#x6c;&#x2e;&#x63;&#x6f;&#x6d;" class="mail" title="&#x6d;&#x69;&#x68;&#x61;&#x69;&#x2e;&#x6d;&#x6e;&#x65;&#x61;&#x63;&#x73;&#x75;&#x40;&#x67;&#x6d;&#x61;&#x69;&#x6c;&#x2e;&#x63;&#x6f;&#x6d;">Mihai Neacşu</a></div>
</li>
<li class="level1"><div class="li"> <a href="mailto:&#x70;&#x65;&#x74;&#x72;&#x69;&#x73;&#x6f;&#x72;&#x5f;&#x63;&#x6f;&#x73;&#x6d;&#x69;&#x6e;&#x5f;&#x69;&#x6f;&#x61;&#x6e;&#x40;&#x79;&#x61;&#x68;&#x6f;&#x6f;&#x2e;&#x63;&#x6f;&#x6d;" class="mail" title="&#x70;&#x65;&#x74;&#x72;&#x69;&#x73;&#x6f;&#x72;&#x5f;&#x63;&#x6f;&#x73;&#x6d;&#x69;&#x6e;&#x5f;&#x69;&#x6f;&#x61;&#x6e;&#x40;&#x79;&#x61;&#x68;&#x6f;&#x6f;&#x2e;&#x63;&#x6f;&#x6d;">Cosmin Petrişor</a></div>
</li>
</ul>

</div>
<!-- EDIT1 SECTION "Laborator 07 - HashTable" [1-156] -->
<h2 class="sectionedit2" id="obiective">Obiective</h2>
<div class="level2">

<p>
În urma parcurgerii acestui laborator studentul va fi capabil să:
</p>
<ul>
<li class="level1"><div class="li">definească tipul de date dicționar</div>
</li>
<li class="level1"><div class="li">implementeze un dicționar folosind tabele de dispersie</div>
</li>
<li class="level1"><div class="li">prezinte avantaje / dezavataje ale diverselor implementări de dicționare</div>
</li>
</ul>

</div>
<!-- EDIT2 SECTION "Obiective" [157-425] -->
<h2 class="sectionedit3" id="ce_e_un_dictionar">Ce e un dicționar?</h2>
<div class="level2">

<p>
Un dicţionar este un tip de date abstract compus dintr-o colecție de chei şi o colecție de valori, în care fiecărei chei îi este asociată o valoare.
Operația de găsire a unei valori asociate unei chei poartă numele de <strong>indexare</strong>, aceasta fiind și cea mai importantă operație (din acest motiv dicționarele se mai numesc și <em>array-uri asociative</em> - fac asocierea între o cheie și o valoare).
</p>

</div>
<!-- EDIT3 SECTION "Ce e un dicționar?" [426-871] -->
<h3 class="sectionedit4" id="operatii_de_baza">Operații de bază</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"><strong>put(key, value):</strong> </div>
<ul>
<li class="level2"><div class="li">adaugă în dicționar o nouă valoare și o asociază unei anumite chei</div>
</li>
<li class="level2"><div class="li">dacă perechea există deja, valorea este înlocuită cu cea nouă</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"><strong>remove(key):</strong></div>
<ul>
<li class="level2"><div class="li"> elimină din dicţionar cheia <strong>key</strong> (şi valoarea asociată acesteia)</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"><strong>get(key):</strong></div>
<ul>
<li class="level2"><div class="li">întoarce valoarea asociată cheii</div>
</li>
<li class="level2"><div class="li">dacă perechea nu există, întoarce corespunzător o eroare pentru a semnala acest lucru</div>
</li>
</ul>
</li>
<li class="level1"><div class="li"><strong>has_key(key):</strong></div>
<ul>
<li class="level2"><div class="li">întoarce <strong>TRUE</strong> dacă există cheia respectivă în dicționar</div>
</li>
<li class="level2"><div class="li">întoarce <strong>FALSE</strong> dacă nu există cheia respectivă în dicționar</div>
</li>
</ul>
</li>
</ul>

</div>
<!-- EDIT4 SECTION "Operații de bază" [872-1493] -->
<h2 class="sectionedit5" id="implementarehashtable">Implementare: hashtable</h2>
<div class="level2">

<p>
O implementare frecvent întâlnită a unui dicționar este cea folosind o tabelă de dispersie (hashtable). 
Un <strong>hashtable</strong> este o structură de date optimizată pentru funcția de <em>lookup</em> (în medie, timpul de căutare este constant: O(1)). Acest lucru se realizează transformând cheia într-un hash - un număr întreg fără semn pe 16 / 32 / 64 de biţi, etc. - folosind o <strong>funcție hash</strong>.
În cel mai defavorabil caz, timpul de căutare al unui element poate fi O(n). Totuși, tabelele de dispersie sunt foarte utile în cazul în care se stochează cantități mari de date, a căror dimensiune (mărime a volumului de date) poate fi anticipat.
</p>

<p>
Funcția hash trebuie aleasă astfel încât să se <strong>minimizeze</strong> numărul coliziunilor (chei diferite care produc aceleași hash-uri). Coliziunile apar în mod inerent, deoarece lungimea hash-ului este fixă, iar obiectele de stocare pot avea lungimi și conținut arbitrare. În cazul apariției unei coliziuni, valorile se stochează pe <em>aceeaşi poziție</em> (în același bucket). În acest caz, căutarea se va reduce la compararea valorilor efective în cadrul bucketului.
</p>

</div>
<!-- EDIT5 SECTION "Implementare: hashtable" [1494-2673] -->
<h3 class="sectionedit6" id="implementarea_cu_liste_inlantuite">Implementarea cu liste înlănțuite</h3>
<div class="level3">

<p>
O implementare a unui hashtable care trateaza coliziunile se numește <em>înlănțuire directă</em> (direct chaining). 
Cea mai simplă formă folosește câte o listă înlănțuită pentru fiecare bucket, practic un array de liste.
Fiecare listă este asociată unui anumit hash.
</p>
<ul>
<li class="level1"><div class="li"><strong>inserarea</strong> în hashtable presupune găsirea indexului corect și adăugarea elementului la lista corespunzătoare.</div>
</li>
</ul>

<p>
<p><div class="noteimportant">
Hash-ul poate depăşi cu mult dimensiunea array-ului de bucket-uri, ceea ce duce la necesitatea folosirii, cel mai frecvent, a operaţiei <em>modulo</em> → <strong>index = hash % HMAX</strong>,  pentru a situa indexul bucket-ului în care va fi inserat elementul, în limitele necesare.
</p>

<p>
Dacă dimensiunea array-ului este exprimată în puteri ale lui 2, se mai poate folosi şi formula următoare → <strong>index = hash &amp; (HMAX - 1)</strong>.
</p>

<p>
<strong>HMAX</strong> reprezintă dimensiunea maximă a array-ului.
</div></p>
</p>
<ul>
<li class="level1"><div class="li"><strong>ștergerea</strong> presupune căutarea și scoaterea elementului din lista corespunzătoare.</div>
</li>
</ul>

<p>
Avantajul tabelelor de dispersie constă în faptul că operația de ștergere este simplă, iar redimensionarea tabelei poate fi amânată mult timp, deoarece (chiar și când toate pozițiile din hashtable sunt folosite), performanța este încă bună.
</p>

<p>
Dezavantajele acestei soluții sunt cele moștenite de la listele înlănțuite: pentru stocarea unor date mici, overhead-ul introdus poate fi semnificativ; iar parcurgerea unei liste este costisitoare.
</p>

<p>
Există și alte structuri de date cu ajutorul cărora se poate implementa un hashtable ca mai sus. Un exemplu ar fi un arbore binar echilibrat, pentru care timpul - pe cazul cel mai defavorabil - se poate reduce la O(log n) față de O(n). Totuși, această variantă se poate dovedi ineficientă dacă hashtable-ul este proiectat pentru puține coliziuni.
</p>

</div>
<!-- EDIT6 SECTION "Implementarea cu liste înlănțuite" [2674-4531] -->
<h2 class="sectionedit7" id="alte_implementari">Alte implementări</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li">arbori binari echilibrați</div>
</li>
<li class="level1"><div class="li">radix-tree</div>
</li>
<li class="level1"><div class="li">prefix-tree</div>
</li>
<li class="level1"><div class="li">array-uri judy</div>
</li>
</ul>

<p>
Acestea prezintă timpi de căutare mai buni pentru cel mai defavorabil caz și folosesc eficient spațiul de stocare în funcție de tipul de date folosit.
</p>

</div>
<!-- EDIT7 SECTION "Alte implementări" [4532-4799] -->
<h2 class="sectionedit8" id="exemplu">Exemplu</h2>
<div class="level2">

<p>
Funcție de hash pentru șiruri de caractere:
</p>
<dl class="code">
<dt><a href="../../../code/sd-ca/laboratoare/laborator-07%3Fcodeblock=0" title="Download Snippet" class="mediafile mf_h">hash.h</a></dt>
<dd><pre class="code cpp"><span class="co2">#ifndef __HASH__H</span>
<span class="co2">#define __HASH__H</span>
&nbsp;
<span class="co1">// Hash function based on djb2 from Dan Bernstein</span>
<span class="co1">// http://www.cse.yorku.ca/~oz/hash.html</span>
<span class="co1">//</span>
<span class="co1">// @return computed hash value</span>
&nbsp;
<span class="kw4">unsigned</span> <span class="kw4">int</span> hash_fct<span class="br0">&#40;</span><span class="kw4">char</span> <span class="sy2">*</span>str<span class="br0">&#41;</span>
<span class="br0">&#123;</span>
        <span class="kw4">unsigned</span> <span class="kw4">int</span> hash <span class="sy1">=</span> <span class="nu0">5381</span><span class="sy4">;</span>
        <span class="kw4">int</span> c<span class="sy4">;</span>
&nbsp;
        <span class="kw1">while</span> <span class="br0">&#40;</span> <span class="br0">&#40;</span>c <span class="sy1">=</span> <span class="sy2">*</span>str <span class="sy2">++</span><span class="br0">&#41;</span> <span class="sy3">!</span><span class="sy1">=</span> <span class="nu0">0</span> <span class="br0">&#41;</span> <span class="br0">&#123;</span>
                hash <span class="sy1">=</span> <span class="br0">&#40;</span><span class="br0">&#40;</span>hash <span class="sy1">&lt;&lt;</span> <span class="nu0">5</span><span class="br0">&#41;</span> <span class="sy2">+</span> hash<span class="br0">&#41;</span> <span class="sy2">+</span> c<span class="sy4">;</span>
        <span class="br0">&#125;</span>
&nbsp;
        <span class="kw1">return</span> hash<span class="sy4">;</span>
<span class="br0">&#125;</span>
&nbsp;
<span class="co2">#endif // __HASH__H</span></pre>
</dd></dl>

<p>
Header-ul pentru Hashtable:
</p>
<dl class="code">
<dt><a href="../../../code/sd-ca/laboratoare/laborator-07%3Fcodeblock=1" title="Download Snippet" class="mediafile mf_h">hashtable.h</a></dt>
<dd><pre class="code cpp"><span class="co2">#ifndef __HASHTABLE__H</span>
<span class="co2">#define __HASHTABLE__H</span>
<span class="co2">#include &lt;list&gt;</span>
&nbsp;
<span class="kw2">template</span><span class="sy1">&lt;</span><span class="kw2">typename</span> Tkey, <span class="kw2">typename</span> Tvalue<span class="sy1">&gt;</span>
<span class="kw4">struct</span> elem_info <span class="br0">&#123;</span>
    Tkey key<span class="sy4">;</span>
    Tvalue value<span class="sy4">;</span>
<span class="br0">&#125;</span><span class="sy4">;</span>
&nbsp;
<span class="kw2">template</span><span class="sy1">&lt;</span><span class="kw2">typename</span> Tkey, <span class="kw2">typename</span> Tvalue<span class="sy1">&gt;</span>
<span class="kw2">class</span> Hashtable <span class="br0">&#123;</span>
<span class="kw2">private</span><span class="sy4">:</span>
        std<span class="sy4">::</span><span class="me2">list</span><span class="sy1">&lt;</span><span class="kw4">struct</span> elem_info<span class="sy1">&lt;</span>Tkey, Tvalue<span class="sy1">&gt;</span> <span class="sy1">&gt;</span> <span class="sy2">*</span>H<span class="sy4">;</span>
        <span class="kw4">int</span> HMAX<span class="sy4">;</span>
        <span class="kw4">unsigned</span> <span class="kw4">int</span> <span class="br0">&#40;</span><span class="sy2">*</span>hash<span class="br0">&#41;</span> <span class="br0">&#40;</span>Tkey<span class="br0">&#41;</span><span class="sy4">;</span>
<span class="kw2">public</span><span class="sy4">:</span>
        Hashtable<span class="br0">&#40;</span><span class="kw4">int</span> hmax, <span class="kw4">unsigned</span> <span class="kw4">int</span> <span class="br0">&#40;</span><span class="sy2">*</span>h<span class="br0">&#41;</span><span class="br0">&#40;</span>Tkey<span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy4">;</span>
        ~Hashtable<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy4">;</span>
&nbsp;
        <span class="kw4">void</span> put<span class="br0">&#40;</span>Tkey key, Tvalue value<span class="br0">&#41;</span><span class="sy4">;</span>
        <span class="kw4">void</span> <span class="kw3">remove</span><span class="br0">&#40;</span>Tkey key<span class="br0">&#41;</span><span class="sy4">;</span>
        Tvalue get<span class="br0">&#40;</span>Tkey key<span class="br0">&#41;</span><span class="sy4">;</span>
        <span class="kw4">bool</span> has_key<span class="br0">&#40;</span>Tkey key<span class="br0">&#41;</span><span class="sy4">;</span>
<span class="br0">&#125;</span><span class="sy4">;</span>
&nbsp;
<span class="co2">#endif // __HASHTABLE__H</span></pre>
</dd></dl>

</div>
<!-- EDIT8 SECTION "Exemplu" [4800-5940] -->
<h2 class="sectionedit9" id="exercitii">Exerciţii</h2>
<div class="level2">

<p>
1) [<strong>3p</strong>] Pornind de la header-ul de mai sus, implementați structura de date <strong>hashtable</strong>
</p>
<ul>
<li class="level1"><div class="li"> [<strong>1p</strong>] constructor si destructor</div>
</li>
<li class="level2"><div class="li"> [<strong>1p</strong>] metoda put şi remove</div>
</li>
<li class="level2"><div class="li"> [<strong>1p</strong>] metoda has_key şi get</div>
</li>
</ul>

<p>
2) [<strong>1p</strong>] Testați implementarea voastră folosind un cod simplist.
</p>

</div>
<!-- EDIT9 SECTION "Exerciţii" [5941-10466] -->
<h2 class="sectionedit10" id="interviu">Interviu</h2>
<div class="level2">

<p>
Această secțiune nu este punctată și încearcă să vă facă o oarecare idee a tipurilor de întrebări pe care le puteți întâlni la un job interview (internship, part-time, full-time, etc.) din materia prezentată în cadrul laboratorului.
</p>
<ul>
<li class="level1"><div class="li"> Pentru o colecție de date cu nume, prenume și multe alte câmpuri, cum ai defini funcția hash?</div>
</li>
<li class="level1"><div class="li"> Care este complexitatea unei operatiuni de căutare într-un hashtable?</div>
</li>
<li class="level1"><div class="li"> Care este diferența dintre un hashtable și un vector?</div>
</li>
<li class="level1"><div class="li"> Descrie cum ai implementa DEX cu ajutorul unui hashtable.</div>
</li>
<li class="level1"><div class="li"> În ce condiții căutarea într-un hashtable ar putea să nu fie constantă?</div>
</li>
</ul>

</div>
<!-- EDIT10 SECTION "Interviu" [10467-11119] -->
<h2 class="sectionedit11" id="bibliografie">Bibliografie</h2>
<div class="level2">

<p>
[1] <a href="http://www.cplusplus.com" class="urlextern" title="http://www.cplusplus.com"  rel="nofollow">C++ Reference</a>
</p>

<p>
[2] <a href="http://en.wikipedia.org/wiki/Hashtable" class="urlextern" title="http://en.wikipedia.org/wiki/Hashtable"  rel="nofollow">Wikipedia: Hashtable</a>
</p>

<p>
[3] <a href="http://en.wikipedia.org/wiki/Hash_function" class="urlextern" title="http://en.wikipedia.org/wiki/Hash_function"  rel="nofollow">Wikipedia: Hash function</a>
</p>

<p>
[4] <a href="http://www.cs.usfca.edu/~galles/visualization/OpenHash.html" class="urlextern" title="http://www.cs.usfca.edu/~galles/visualization/OpenHash.html"  rel="nofollow">Open Hashing Visualization</a>
</p>

<p>
[5] <a href="http://www.cs.usfca.edu/~galles/visualization/ClosedHash.html" class="urlextern" title="http://www.cs.usfca.edu/~galles/visualization/ClosedHash.html"  rel="nofollow">Closed Hashing Visualization</a>
</p>

<p>
[6] <a href="http://www.cs.usfca.edu/~galles/visualization/ClosedHashBucket.html" class="urlextern" title="http://www.cs.usfca.edu/~galles/visualization/ClosedHashBucket.html"  rel="nofollow">Closed Hashing (Buckets) Visualization</a>
</p>

<p>
[7] <a href="http://www.cse.yorku.ca/~oz/hash.html" class="urlextern" title="http://www.cse.yorku.ca/~oz/hash.html"  rel="nofollow">Collection of hash functions</a>
</p>

</div>
<!-- EDIT11 SECTION "Bibliografie" [11120-] --></div>
</body>
</html>

    
    

<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8" />
  <title>so2:teme:tema0</title>
<meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="date" content="2016-03-13T12:22:57+0200"/>
<meta name="keywords" content="so2,teme,tema0"/>
<link rel="search" type="application/opensearchdescription+xml" href="../../../../lib/exe/opensearch.php" title="CS Open CourseWare"/>
<link rel="start" href="../../../../../courses.1.html"/>
<link rel="alternate" type="application/rss+xml" title="Recent Changes" href="../../../../feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current Namespace" href="../../../../feed.php%3Fmode=list&amp;ns=so2:teme"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="tema0.html"/>
<link rel="canonical" href="../../../../so2/teme/tema0.html"/>
<link rel="stylesheet" type="text/css" href="../../../../lib/exe/css.php%3Ft=arctic&amp;tseed=1476798676.css"/>
<script type="text/javascript">/*<![CDATA[*/var NS='so2:teme';var JSINFO = {"id":"so2:teme:tema0","namespace":"so2:teme","isadmin":0,"isauth":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="../../../../lib/exe/js.php%3Ftseed=1476798676"></script>
<script type="text/x-mathjax-config">/*<![CDATA[*/MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ["$","$"], ["\\(","\\)"] ],
        displayMath: [ ["$$","$$"], ["\\[","\\]"] ],
        processEscapes: true
    }
});
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
<script type="text/javascript">/*<![CDATA[*/
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
		  
/*!]]>*/</script>
<script type="text/javascript">/*<![CDATA[*/
var pageTracker = _gat._getTracker("UA-38383934-1");
pageTracker._initData();
pageTracker._trackPageview();
		  
/*!]]>*/</script>
</head>
<body>
<div class="dokuwiki export">
<!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="tema0.html#tema_0_-_kernel_api">Tema 0 - Kernel API</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="tema0.html#scopul_temei">Scopul temei</a></div></li>
<li class="level2"><div class="li"><a href="tema0.html#enunt">Enunț</a></div></li>
<li class="level2"><div class="li"><a href="tema0.html#testare">Testare</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="tema0.html#sfaturi">Sfaturi</a></div>
<ul class="toc">
<li class="level4"><div class="li"><a href="tema0.html#checkpatchpl">checkpatch.pl</a></div></li>
<li class="level4"><div class="li"><a href="tema0.html#sparse">sparse</a></div></li>
<li class="level4"><div class="li"><a href="tema0.html#cppcheck">cppcheck</a></div></li>
</ul>
</li>
<li class="level3"><div class="li"><a href="tema0.html#depunctari">Depunctări</a></div></li>
<li class="level3"><div class="li"><a href="tema0.html#submitere">Submitere</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="tema0.html#intrebari">Întrebări</a></div></li>
</ul></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="tema_0_-_kernel_api">Tema 0 - Kernel API</h1>
<div class="level1">

<p>
Termen de predare: Duminică, 13 Martie 2016, ora 23:00
</p>

</div>
<!-- EDIT1 SECTION "Tema 0 - Kernel API" [1-93] -->
<h2 class="sectionedit2" id="scopul_temei">Scopul temei</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> familiarizarea cu setup-ul qemu</div>
</li>
<li class="level1"><div class="li"> inserarea/ștergerea de module de kernel</div>
</li>
<li class="level1"><div class="li"> familiarizarea cu <abbr title="Application Programming Interface">API</abbr>-ul de liste implementat în kernel</div>
</li>
<li class="level1"><div class="li"> have fun :)</div>
</li>
</ul>

</div>
<!-- EDIT2 SECTION "Scopul temei" [94-277] -->
<h2 class="sectionedit3" id="enunt">Enunț</h2>
<div class="level2">

<p>
Să se scrie un modul de kernel numit <code>list</code> (fișierul rezultat trebuie să se cheme <code>list.ko</code>) care stochează date (șiruri de caractere) într-o listă internă.
</p>

<p>
Este obligatorie folosirea <a href="https://github.com/torvalds/linux/blob/master/include/linux/list.h" class="urlextern" title="https://github.com/torvalds/linux/blob/master/include/linux/list.h"  rel="nofollow">API-ului de liste</a> implementat în kernel. Pentru detalii puteți urmări <a href="../../../../so2/laboratoare/lab03.html#liste" class="urlextern" title="http://ocw.cs.pub.ro/courses/so2/laboratoare/lab03#liste"  rel="nofollow">laboratorul 3</a>. 
</p>

<p>
Pentru realizarea temei, trebuie să porniți de la <a href="http://elf.cs.pub.ro/so2/res/teme/list-skeleton.c" class="urlextern" title="http://elf.cs.pub.ro/so2/res/teme/list-skeleton.c"  rel="nofollow">scheletul de cod</a> oferit.
</p>

<p>
Modulul exportă un director numit <strong>list</strong> în <em>procfs</em>. Directorul conține două fișiere:
</p>
<ul>
<li class="level1"><div class="li"> <strong>management</strong>: cu acces write-only; este interfața pentru transmiterea comenzilor către modulul de kernel</div>
</li>
<li class="level1"><div class="li"> <strong>preview</strong>: cu acces read-only; este interfața prin care se poate vizualiza conținutul intern al listei din kernel.</div>
</li>
</ul>

<p>
<a href="http://elf.cs.pub.ro/so2/res/teme/list-skeleton.c" class="urlextern" title="http://elf.cs.pub.ro/so2/res/teme/list-skeleton.c"  rel="nofollow">Scheletul de cod</a> implementează cele două fișiere din procfs. Voi va trebui să creați o listă și să adăugați suportul pentru adăugarea și citirea datelor. Urmăriți TODOs din cod pentru detalii.
</p>

<p>
Pentru a interacționa cu lista din kernel, trebuie să scrieți comenzi (folosind comanda <code>echo</code>) în fișierul <code>/proc/list/management</code>:
</p>
<ul>
<li class="level1"><div class="li"> <code>addf nume</code>: adaugă elementul <code>nume</code> la începutul listei</div>
</li>
<li class="level1"><div class="li"> <code>adde nume</code>: adaugă elementul <code>nume</code> la sfârșitul listei</div>
</li>
<li class="level1"><div class="li"> <code>delf nume</code>: șterge prima apariție a elementului <code>nume</code> din listă</div>
</li>
<li class="level1"><div class="li"> <code>dela nume</code>: șterge toate aparițile elementului <code>nume</code> din listă</div>
</li>
</ul>

<p>
Vizualizarea conținutului listei se face prin vizualizarea conținutului fișierului <code>/proc/list/preview</code> (folosiți comanda <code>cat</code>). Formatarea conține câte un element pe fiecare linie.
</p>

<p>
<p><div class="noteclassic">
Pentru a vă asigura că modulul este compilat pentru kernel-ul pe care îl rulează mașina virtuală, trebuie să aveți <code>KDIR = /usr/src/linux-so2</code> în Makefile.

</div></p>
</p>

</div>
<!-- EDIT3 SECTION "Enunț" [278-2251] -->
<h2 class="sectionedit4" id="testare">Testare</h2>
<div class="level2">

<p>
Pentru simplificarea procesului de corectare al temelor, dar și pentru a reduce greșelile temelor trimise, corectarea temelor se va face automat cu ajutorul unui <a href="http://elf.cs.pub.ro/so2/res/teme/list-checker" class="urlextern" title="http://elf.cs.pub.ro/so2/res/teme/list-checker"  rel="nofollow">script de testare</a> numit <code>list-checker</code>. Scriptul de testare presupune că numele modului de kernel este denumit <code>list</code>.
</p>

<p>
Scriptul <code>list-checker</code> trebuie descărcat și îi trebuie acordate drepturi de execuție:
</p>
<pre class="code bash"><span class="kw2">wget</span> http:<span class="sy0">//</span>elf.cs.pub.ro<span class="sy0">/</span>so2<span class="sy0">/</span>res<span class="sy0">/</span>teme<span class="sy0">/</span>list-checker
<span class="kw2">chmod</span> a+x list-checker</pre>

<p>
Apoi scriptul trebuie copiat în directorul <code>fsimg/root/</code> al <a href="../../../../so2/resurse/masini-virtuale.html" class="wikilink1" title="so2:resurse:masini-virtuale">mașinii virtuale QEMU/KVM</a>. Tot acolo trebuie copiat și fișierul modul compilat <code>list.ko</code>. După pornirea mașinii virtuale scriptul și modulul vor fi disponibil în directorul <code>/root/</code> al mașinii virtuale QEMU/KVM. Pentru testare se va invoca scriptul:
</p>
<pre class="code bash">.<span class="sy0">/</span>list-checker</pre>

</div>
<!-- EDIT4 SECTION "Testare" [2252-4165] -->
<h3 class="sectionedit5" id="sfaturi">Sfaturi</h3>
<div class="level3">

<p>
Pentru a vă mări șansele de a obține nota maximă, citiți și respectați coding style-ul kernelului Linux descris din documentul <a href="http://lxr.free-electrons.com/source/Documentation/CodingStyle" class="urlextern" title="http://lxr.free-electrons.com/source/Documentation/CodingStyle"  rel="nofollow"> CodingStyle</a>.
</p>

<p>
De asemenea, folosiți următoarele tool-uri de analiza statică pentru a verifica codul:
</p>

</div>

<h4 id="checkpatchpl">checkpatch.pl</h4>
<div class="level4">
<ul>
<li class="level1"><div class="li"> <pre class="code bash"> .<span class="sy0">/</span>scripts<span class="sy0">/</span>checkpatch.pl <span class="re5">-f</span> <span class="re5">--no-tree</span> list.c </pre>
</div>
</li>
</ul>

</div>

<h4 id="sparse">sparse</h4>
<div class="level4">
<ul>
<li class="level1"><div class="li"> <pre class="code bash"> <span class="kw2">sudo</span> <span class="kw2">apt-get install</span> sparse </pre>
</div>
</li>
<li class="level1"><div class="li"> <pre class="code bash"> <span class="kw2">make</span> <span class="re2">C</span>=<span class="nu0">2</span> <span class="sy0">/</span>path<span class="sy0">/</span>to<span class="sy0">/</span>your<span class="sy0">/</span>source<span class="sy0">/</span>directory<span class="sy0">/</span> </pre>
</div>
</li>
</ul>

</div>

<h4 id="cppcheck">cppcheck</h4>
<div class="level4">
<ul>
<li class="level1"><div class="li"> <pre class="code bash"> <span class="kw2">sudo</span> <span class="kw2">apt-get install</span> cppcheck </pre>
</div>
</li>
<li class="level1"><div class="li"> <pre class="code bash"> cppcheck <span class="sy0">/</span>path<span class="sy0">/</span>to<span class="sy0">/</span>your<span class="sy0">/</span>source<span class="sy0">/</span>file<span class="sy0">/</span>list.c </pre>
</div>
</li>
</ul>

</div>
<!-- EDIT5 SECTION "Sfaturi" [4166-4855] -->
<h3 class="sectionedit6" id="depunctari">Depunctări</h3>
<div class="level3">

<p>
Depunctările generale pentru teme se găsesc pe pagina de <a href="../../../../so2/teme/general.html" class="wikilink1" title="so2:teme:general"> Indicații generale</a>.
</p>

<p>
În cazuri excepționale (tema trece testele prin nerespectarea cerințelor) și în cazul în care tema nu trece toate testele se poate scădea mai mult decât este menționat mai sus.
</p>

</div>
<!-- EDIT6 SECTION "Depunctări" [4856-5168] -->
<h3 class="sectionedit7" id="submitere">Submitere</h3>
<div class="level3">

<p>
Arhiva temei va fi submisă pe vmchecker, în conformitate cu <a href="../../../../so2/reguli-notare.html#reguli_de_trimitere_a_temelor" class="wikilink1" title="so2:reguli-notare">precizările din pagina de reguli</a>.
</p>

<p>
Din interfața vmchecker alegeți opțiunea <code>Kernel <abbr title="Application Programming Interface">API</abbr></code>, aferentă acestei teme.
</p>

</div>
<!-- EDIT7 SECTION "Submitere" [5169-5424] -->
<h2 class="sectionedit8" id="intrebari">Întrebări</h2>
<div class="level2">

<p>
Pentru întrebări legate de temă puteți consulta <a href="http://news.gmane.org/gmane.education.region.romania.operating-systems-design" class="urlextern" title="http://news.gmane.org/gmane.education.region.romania.operating-systems-design"  rel="nofollow"> arhivele</a> listei de discuții sau puteți trimite un <a href="mailto:&#x73;&#x6f;&#x32;&#x40;&#x63;&#x75;&#x72;&#x73;&#x75;&#x72;&#x69;&#x2e;&#x63;&#x73;&#x2e;&#x70;&#x75;&#x62;&#x2e;&#x72;&#x6f;" class="mail" title="&#x73;&#x6f;&#x32;&#x40;&#x63;&#x75;&#x72;&#x73;&#x75;&#x72;&#x69;&#x2e;&#x63;&#x73;&#x2e;&#x70;&#x75;&#x62;&#x2e;&#x72;&#x6f;">e-mail</a> (trebuie să fiți <a href="http://cursuri.cs.pub.ro/cgi-bin/mailman/listinfo/so2" class="urlextern" title="http://cursuri.cs.pub.ro/cgi-bin/mailman/listinfo/so2"  rel="nofollow"> înregistrați</a>).
</p>

</div>
<!-- EDIT8 SECTION "Întrebări" [5425-] --></div>
</body>
</html>

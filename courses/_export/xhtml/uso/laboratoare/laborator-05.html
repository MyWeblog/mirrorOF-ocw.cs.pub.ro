    
    

<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8" />
  <title>uso:laboratoare:laborator-05</title>
<meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="date" content="2016-11-16T17:35:17+0200"/>
<meta name="keywords" content="uso,laboratoare,laborator-05"/>
<link rel="search" type="application/opensearchdescription+xml" href="../../../../lib/exe/opensearch.php" title="CS Open CourseWare"/>
<link rel="start" href="../../../../../courses.1.html"/>
<link rel="alternate" type="application/rss+xml" title="Recent Changes" href="../../../../feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current Namespace" href="../../../../feed.php%3Fmode=list&amp;ns=uso:laboratoare"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="laborator-05.html"/>
<link rel="canonical" href="../../../../uso/laboratoare/laborator-05.html"/>
<link rel="stylesheet" type="text/css" href="../../../../lib/exe/css.php%3Ft=arctic&amp;tseed=1476798676.css"/>
<script type="text/javascript">/*<![CDATA[*/var NS='uso:laboratoare';var JSINFO = {"id":"uso:laboratoare:laborator-05","namespace":"uso:laboratoare","isadmin":0,"isauth":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="../../../../lib/exe/js.php%3Ftseed=1476798676"></script>
<script type="text/x-mathjax-config">/*<![CDATA[*/MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ["$","$"], ["\\(","\\)"] ],
        displayMath: [ ["$$","$$"], ["\\[","\\]"] ],
        processEscapes: true
    }
});
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
<script type="text/javascript">/*<![CDATA[*/
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
		  
/*!]]>*/</script>
<script type="text/javascript">/*<![CDATA[*/
var pageTracker = _gat._getTracker("UA-38383934-1");
pageTracker._initData();
pageTracker._trackPageview();
		  
/*!]]>*/</script>
</head>
<body>
<div class="dokuwiki export">
<!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="laborator-05.html#laborator_05_-_gestiunea_sistemului_de_fisiere">Laborator 05 - Gestiunea sistemului de fișiere</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="laborator-05.html#suport_laborator">Suport laborator</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="laborator-05.html#demo">Demo</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="laborator-05.html#permisiuni">1. Permisiuni</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="laborator-05.html#vizualizarea_permisiunilor">Vizualizarea permisiunilor</a></div></li>
<li class="level3"><div class="li"><a href="laborator-05.html#modificarea_permisiunilor">Modificarea permisiunilor</a></div></li>
<li class="level3"><div class="li"><a href="laborator-05.html#modificarea_utilizatorului_si_a_grupului">Modificarea utilizatorului și a grupului</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="laborator-05.html#link-uri">2. Link-uri</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="laborator-05.html#link-uri_simbolice">Link-uri simbolice</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="laborator-05.html#lucrul_cu_sisteme_de_fisiere">3. Lucrul cu sisteme de fișiere</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="laborator-05.html#montarea_si_demontarea_sistemelor_de_fisiere">Montarea și demontarea sistemelor de fișiere</a></div></li>
</ul>
</li>
</ul>
</li>
<li class="level1"><div class="li"><a href="laborator-05.html#exercitii">Exerciții</a></div>
<ul class="toc">
<li class="clear">
<ul class="toc">
<li class="level3"><div class="li"><a href="laborator-05.html#adaugarea_unor_utilizatori_si_grupuri_noi_15p">1. Adăugarea unor utilizatori și grupuri noi (1.5p)</a></div></li>
<li class="level3"><div class="li"><a href="laborator-05.html#permisiuni_1_2p">2. Permisiuni 1 (2p)</a></div></li>
<li class="level3"><div class="li"><a href="laborator-05.html#permisiuni_2_2p">3. Permisiuni 2 (2p)</a></div></li>
<li class="level3"><div class="li"><a href="laborator-05.html#link-uri_1p">4. Link-uri (1p)</a></div></li>
<li class="level3"><div class="li"><a href="laborator-05.html#montarea_sistemelor_de_fisiere_2p">5. Montarea sistemelor de fișiere (2p)</a></div>
<ul class="toc">
<li class="level4"><div class="li"><a href="laborator-05.html#montarea_iso_1p">5.1. Montarea ISO (1p)</a></div></li>
<li class="level4"><div class="li"><a href="laborator-05.html#montarea_sistemului_propriu_de_fisiere_1p">5.2. Montarea sistemului propriu de fișiere (1p)</a></div></li>
</ul>
</li>
<li class="level3"><div class="li"><a href="laborator-05.html#drepturi_de_executie_1p">6. Drepturi de execuție (1p)</a></div></li>
<li class="level3"><div class="li"><a href="laborator-05.html#linkuri_simbolice_circulare_05p">7. Linkuri simbolice circulare (0.5p)</a></div>
<ul class="toc">
<li class="level4"><div class="li"><a href="laborator-05.html#bonus">BONUS</a></div></li>
</ul>
</li>
<li class="level3"><div class="li"><a href="laborator-05.html#liste_de_acces_posix_acl_2_karma">1. Liste de acces (POSIX ACL) [2 Karma]</a></div></li>
</ul></li>
</ul></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="laborator_05_-_gestiunea_sistemului_de_fisiere">Laborator 05 - Gestiunea sistemului de fișiere</h1>
<div class="level1">

</div>
<!-- EDIT1 SECTION "Laborator 05 - Gestiunea sistemului de fișiere" [18-80] -->
<h2 class="sectionedit2" id="suport_laborator">Suport laborator</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> <a href="http://books.google.ro/books?id=_JFGzyRxQGcC&amp;lpg=PA365&amp;pg=PA284#v=onepage&amp;q&amp;f=false" class="urlextern" title="http://books.google.ro/books?id=_JFGzyRxQGcC&amp;lpg=PA365&amp;pg=PA284#v=onepage&amp;q&amp;f=false"  rel="nofollow">10.2 Securitatea sistemului de operare</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://books.google.ro/books?id=_JFGzyRxQGcC&amp;lpg=PA365&amp;pg=PA69#v=onepage&amp;q&amp;f=false" class="urlextern" title="http://books.google.ro/books?id=_JFGzyRxQGcC&amp;lpg=PA365&amp;pg=PA69#v=onepage&amp;q&amp;f=false"  rel="nofollow">4. Sisteme de fișiere</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://www.explainxkcd.com/wiki/index.php/981:_Porn_Folder" class="urlextern" title="http://www.explainxkcd.com/wiki/index.php/981:_Porn_Folder"  rel="nofollow">Proper Porn Folder permissions</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://www.explainxkcd.com/wiki/index.php/1597:_Git" class="urlextern" title="http://www.explainxkcd.com/wiki/index.php/1597:_Git"  rel="nofollow">This is GIT: memorize shell commands</a></div>
</li>
</ul>

<p>
<p><div class="noteimportant">
Când folosiți linia de comandă, aveți în vedere completarea automată (<em>autocompletion</em>) folosind tasta <code>Tab</code> sau apăsând de două ori tasta <code>Tab</code> pentru a vă afișa toate posibilitățile. Vă va ajuta să rulați mai repede comenzi. În plus, vă ajută și să nu greșiți; vă completează fișierul și nu trebuie să-l scrieți voi (poate greșit) de mână.

</div></p>
</p>

<p>
<p><div class="noteimportant">
Este foarte important ca după fiecare comandă care alterează/configurează ceva (sistemul de fișiere, utilizatori, rețea, procese) să <strong>rulați o comandă de verificare</strong>. De exemplu:
</p>
<ul>
<li class="level1"><div class="li"> După ce creați sau ștergeți un fișier sau un director (folodind <code>touch</code>, <code>mkdir</code>, <code>rm</code> sau <code>rmdir</code>), rulați comanda <code>ls -l</code> pentru a verifica faptul că a fost creat (si a investiga permisiunile).</div>
</li>
<li class="level1"><div class="li"> După ce ați schimbat directorul curent (folosind <code>cd</code>), rulați comanda <code>ls</code> sau <code>pwd</code> pentru a verifica faptul că ați ajuns unde doreați.</div>
</li>
<li class="level1"><div class="li"> După ce schimbați permisiunile sau posesia unei intrări în sistemul de fișiere (folosind <code>chmod</code>, <code>chown</code> sau <code>chgrp</code>), rulați comanda <code>ls -l</code> pentru a verifica noile permisiuni sau noua posesie.</div>
</li>
<li class="level1"><div class="li"> După ce creați un link simbolic (folosind <code>ln -s</code>), rulați comanda <code>ls -l</code> pentru a verifia faptul că noul link pointează unde trebuie.</div>
</li>
<li class="level1"><div class="li"> După ce formatați o partiție (folosind o comanda din familia <code>mkfs…</code>), rulați comanda <code>file -s</code>, cu argument partiția, pentru a verifica sistemul de fișiere de pe aceasta.</div>
</li>
<li class="level1"><div class="li"> După ce montați sau demontați o partiție (folosind <code>mount</code> sau <code>umount</code>), rulați comanda <code>mount</code> fără parametri pentru a lista partițiile montate.</div>
</li>
<li class="level1"><div class="li"> După ce porniți un proces, rulați comanda <code>ps</code> pentru a verifica existența procesului.</div>
</li>
<li class="level1"><div class="li"> După ce creați un utilizator, folosind comanda <code>adduser</code>, rulați comanda <code>id user_name</code>, cu argument numele utilizatorului, pentru a verifica existența utilizatorului sau <code>getent passwd user_name</code> pentru a vedea setarile lui.</div>
</li>
</ul>

<p>

</div></p>
</p>

</div>
<!-- EDIT2 SECTION "Suport laborator" [81-2597] -->
<h1 class="sectionedit3" id="demo">Demo</h1>
<div class="level1">

<p>
<p><div class="noteclassic">
Deschideți un teminal nou folosind combinația de taste <code>Alt+Ctrl+t</code>. În terminal clonați repository-ului oficial de USO folosind comanda:
</p>
<pre class="code">student@uso:~$ git clone https://github.com/systems-cs-pub-ro/uso </pre>

<p>
În directorul <code>~/uso/lab05</code> găsiți fișierele și directoarele necesare pentru parcurgerea exercițiilor acestui laborator. 

</div></p>
</p>

</div>
<!-- EDIT3 SECTION "Demo" [2598-2998] -->
<h2 class="sectionedit4" id="permisiuni">1. Permisiuni</h2>
<div class="level2">

<p>
În laboratorul precedent am aflat că într-un sistem pot exista mai mulți utilizatori. Totuși, fiecare utilizator trebuie sa poată avea fișierele lui personale care să nu poată fi modificate de un alt utilizator fără permisiunea sa, iar unele fișiere sau resurse trebuie să nu poată fi accesate decât de către utilizatorul privilegiat (<em>root</em>). În alte cuvinte trebuie să avem o metodă de a controla accesul utilizatorilor la diversele elemente ale sistemului.
</p>

<p>
Abordarea utilizată în Linux este de a folosi permisiuni. Acestea dictează ce operații (de scriere, citire sau executare) poate să efectueze un utilizator asupra unui fișier sau director. Ele sunt împărțite în trei categorii:
</p>
<ul>
<li class="level1"><div class="li"> <em>utilizator (owner)</em>: utilizatorul care este deținătorul fișierului/directorului</div>
</li>
<li class="level1"><div class="li"> <em>grup (group)</em>: un grup de utilizatori care sunt deținătorii fișierului/directorului</div>
</li>
<li class="level1"><div class="li"> <em>ceilalți (others)</em>: utilizatorii care nu intră în niciuna dintre categoriile dinainte</div>
</li>
</ul>

<p>
Pentru fiecare dintre cele trei categorii există trei permisiuni:
</p>
<ul>
<li class="level1"><div class="li"> <em>de citire</em>: utilizatorul poate citi conținutul fișierului respectiv poate lista conținutul directorului</div>
</li>
<li class="level1"><div class="li"> <em>de scriere</em>: utilizatorul poate modifica conținutul fișierului/directorului</div>
</li>
<li class="level1"><div class="li"> <em>de execuție</em>: utilizatorul poate lansa fișierul în execuție respectiv poate parcurge directorul</div>
</li>
</ul>

<p>
Ordinea în care se aplică aceste permisiuni este: dacă utilizatorul este deținătorul fișierului, atunci se aplică permisiunile pentru <em>owner</em>; dacă face parte din grupul deținător, atunci se aplică permisiunile pentru <em>group</em>; dacă niciuna dintre condițiile precedente nu este adevărată, atunci se aplică permisiunile pentru <em>others</em>.
</p>

</div>
<!-- EDIT4 SECTION "1. Permisiuni" [2999-4756] -->
<h3 class="sectionedit5" id="vizualizarea_permisiunilor">Vizualizarea permisiunilor</h3>
<div class="level3">

<p>
Pentru a vedea conținutul unui director folosim comanda <code>ls</code>. Dacă îi pasăm argumentul <code>-l</code> atunci comanda va lista conținutul în format lung, adică va afișă informații suplimentare. Să luăm un exemplu:
</p>
<pre class="code">student@uso:~/uso/lab05/demo$ touch a
student@uso:~/uso/lab05/demo$ sudo touch b
student@uso:~/uso/lab05/demo$ ls
a  b
student@uso:~/uso/lab05/demo$ ls -l
total 0
-rw-rw-r-- 1 student student 0 oct  6 23:58 a
-rw-r--r-- 1 root    root    0 oct  6 23:58 b</pre>

<p>
Să ne uităm mai indeaproape la rezultatul rulării comenzii <code>ls -l</code>:
</p>
<div class="table sectionedit6"><table class="inline">
	<tr class="row0">
		<th class="col0 centeralign">  -  </th><th class="col1 centeralign">  rw-  </th><th class="col2 centeralign">  rw-  </th><th class="col3 centeralign">  r--  </th><th class="col4 centeralign">  1  </th><th class="col5 centeralign">  student  </th><th class="col6 centeralign">  student  </th><th class="col7 centeralign">  0  </th><th class="col8 centeralign">  oct 6 23:58  </th><th class="col9 centeralign">  a  </th>
	</tr>
	<tr class="row1">
		<td class="col0 centeralign">  Tipul intrării  </td><td class="col1 centeralign" colspan="3">  Permisiuni  </td><td class="col4 centeralign">  Numărul de hardlink-uri  </td><td class="col5 centeralign">  Deținătorul  </td><td class="col6 centeralign">  Grupul  </td><td class="col7 centeralign">  Dimensiunea  </td><td class="col8 centeralign">  Data ultimei modificări  </td><td class="col9 centeralign">  Numele fișierului  </td>
	</tr>
</table></div>
<!-- EDIT6 TABLE [5360-5618] --><ul>
<li class="level1"><div class="li"> Tipul intrării indică dacă intrarea respectivă este un fișier normal (<code>-</code>), director (<code>d</code>) sau altceva (rulați <code>info ls</code> și citiți secțiunea 10.1.2).</div>
</li>
<li class="level1"><div class="li"> Permisiunile indică ce drepturi au anumiți utilizatori asupra fișierului. Sunt împărțite în trei grupuri, primul (<code>rw-</code>) corespunde deținătorului (owner), al doilea (<code>rw-</code>) corespunde grupului (group) și ultimul (<code>r--</code>) corespunde tuturor celorlalți utilizatori (others). Primul bit din fiecare grup reprezintă dreptul de citire, al doilea reprezintă dreptul de scriere iar al treilea dreptul de execuție. Valoarea 0 (<code>-</code>) pe una dintre poziții indică lipsa dreptului respectiv, pe când valoarea 1 (<code>r</code>, <code>w</code> sau <code>x</code>) indică prezența dreptului.</div>
</li>
<li class="level1"><div class="li"> Numărul de hardlink-uri indică câte hardlink-uri există către acest fișier.</div>
</li>
<li class="level1"><div class="li"> Deținătorul fișierului este, în general, utilizatorul care a creat fișierul, dar poate fi modificat.</div>
</li>
<li class="level1"><div class="li"> Grupul fișierului este, în general, grupul utilizatorului care a creat fișierul, dar poate fi modificat.</div>
</li>
</ul>

</div>
<!-- EDIT5 SECTION "Vizualizarea permisiunilor" [4757-7102] -->
<h3 class="sectionedit7" id="modificarea_permisiunilor">Modificarea permisiunilor</h3>
<div class="level3">

<p>
Pentru a modifica permisiunile unui fișier folosim comanda <code>chmod</code>. Putem să specificăm noile permisiuni în două moduri:
</p>
<ul>
<li class="level1"><div class="li"> mod literal: specificăm căror utilizatori vrem să le modificăm permisiunile (<code>u</code> pentru deținător, <code>g</code> pentru grup, <code>o</code> pentru ceilalți și <code>a</code> pentru toți utilizatorii), specificăm dacă să adăugăm (<code>+</code>), să retragem (<code>-</code>) sau să setăm exact (<code>=</code>) un set de permisiuni și permisiunile ce trebuie modificate (<code>r</code> pentru citire, <code>w</code> pentru scriere sau <code>x</code> pentru execuție).</div>
</li>
</ul>
<pre class="code">student@uso:~/uso/lab05/demo$ ls -l
total 0
-rw-rw-r-- 1 student student 0 oct  6 23:58 a
-rw-r--r-- 1 root    root    0 oct  6 23:58 b
student@uso:~/uso/lab05/demo$ chmod u+x a
student@uso:~/uso/lab05/demo$ ls -l
total 0
-rwxrw-r-- 1 student student 0 oct  6 23:58 a
-rw-r--r-- 1 root    root    0 oct  6 23:58 b
student@uso:~/uso/lab05/demo$ chmod o=w a
student@uso:~/uso/lab05/demo$ ls -l
total 0
-rwxrw--w- 1 student student 0 oct  6 23:58 a
-rw-r--r-- 1 root    root    0 oct  6 23:58 b</pre>
<ul>
<li class="level1"><div class="li"> mod octal: specificăm permisiunile pentru deținător, grup și ceilalți printr-o cifră în baza 8. Bitul 0 reprezintă dreptul de execuție (<code>x</code>), bitul 1 reprezintă dreptul de scriere (<code>w</code>) și bitul 2 reprezintă dreptul de citire (<code>r</code>). Prezența unei permisiuni este marcată prin valoarea 1 a bit-ului respectiv iar absența prin valoarea 0 a bit-ului respectiv.</div>
</li>
</ul>
<div class="table sectionedit8"><table class="inline">
	<tr class="row0">
		<th class="col0 centeralign">  r w x  </th><th class="col1 centeralign">  r - x  </th><th class="col2 centeralign">  r - -  </th>
	</tr>
	<tr class="row1">
		<td class="col0 centeralign">  1 1 1  </td><td class="col1 centeralign">  1 0 1  </td><td class="col2 centeralign">  1 0 0  </td>
	</tr>
	<tr class="row2">
		<td class="col0 centeralign">    7    </td><td class="col1 centeralign">    5    </td><td class="col2 centeralign">    4    </td>
	</tr>
</table></div>
<!-- EDIT8 TABLE [8575-8670] --><pre class="code">student@uso:~/uso/lab05/demo$ ls -l
total 0
-rwxrw--w- 1 student student 0 oct  7 21:48 a
-rw-r--r-- 1 root    root    0 oct  7 21:48 b
student@uso:~/uso/lab05/demo$ chmod 754 a
student@uso:~/uso/lab05/demo$ ls -l
total 0
-rwxr-xr-- 1 student student 0 oct  7 21:48 a
-rw-r--r-- 1 root    root    0 oct  7 21:48 b
student@uso:~/uso/lab05/demo$ chmod 664 a
student@uso:~/uso/lab05/demo$ ls -l
total 0
-rw-rw-r-- 1 student student 0 oct  7 21:48 a
-rw-r--r-- 1 root    root    0 oct  7 21:48 b</pre>

</div>
<!-- EDIT7 SECTION "Modificarea permisiunilor" [7103-9540] -->
<h3 class="sectionedit9" id="modificarea_utilizatorului_si_a_grupului">Modificarea utilizatorului și a grupului</h3>
<div class="level3">

<p>
Pentru acest demo avem nevoie de utilizatorul <code>gigi</code> pe care îl vom crea folosind comanda <code>adduser</code> și apoi îl vom verifica folosind comanda <code>id</code>:
</p>
<pre class="code">student@uso:~/uso/lab05/demo$ sudo adduser gigi
[...]
student@uso:~/uso/lab05/demo$ id gigi
uid=1001(gigi) gid=1001(gigi) groups=1001(gigi)</pre>

<p>
Pentru a modifica utilizatorul deținător al unui fișier folosim comanda <code>chown</code>.
</p>
<pre class="code">student@uso:~/uso/lab05/demo$ ls -l
total 0
-rw-rw-r-- 1 student student 0 oct  7 21:48 a
-rw-r--r-- 1 root    root    0 oct  7 21:48 b
student@uso:~/uso/lab05/demo$ sudo chown gigi a
student@uso:~/uso/lab05/demo$ ls -l
total 0
-rw-rw-r-- 1 gigi student 0 oct  7 21:48 a
-rw-r--r-- 1 root root    0 oct  7 21:48 b</pre>

<p>
Acum să verificăm faptul că utilizatorul <code>gigi</code> chiar poate scrie și citi din fișierul <code>a</code>. Vom schimba utilizatorul curent din <code>student</code> în <code>gigi</code> și vom rula o comandă de modificare și una de afișare a conținutului.
</p>
<pre class="code">student@uso:~/uso/lab05/demo$ sudo su gigi
gigi@uso:~/uso/lab05/demo$ id
uid=1001(gigi) gid=1001(gigi) groups=1001(gigi)
gigi@uso:~/uso/lab05/demo$ echo &quot;ana are mere&quot; &gt; a
gigi@uso:~/uso/lab05/demo$ cat a
ana are mere
gigi@uso:~/uso/lab05/demo$ exit
student@uso:~/uso/lab05/demo$ id
uid=1000(student) gid=1000(student) groups=1000(student)</pre>

<p>
Pentru a modifica grupul deținător al unui fișier folosim comanda <code>chgrp</code>. Alternativ putem folosi tot comanda <code>chown</code>, dar îi vom pasa un parametru de forma <code>owner:group</code>.
</p>
<pre class="code">student@uso:~/uso/lab05/demo$ ls -l
total 0
-rw-rw-r-- 1 gigi student 0 oct  7 21:48 a
-rw-r--r-- 1 root root    0 oct  7 21:48 b
student@uso:~/uso/lab05/demo$ sudo chgrp gigi a
student@uso:~/uso/lab05/demo$ ls -l
total 0
-rw-rw-r-- 1 gigi gigi 0 oct  7 21:48 a
-rw-r--r-- 1 root root 0 oct  7 21:48 b
student@uso:~/uso/lab05/demo$ sudo chown student:student a
student@uso:~/uso/lab05/demo$ ls -l
total 0
-rw-rw-r-- 1 student student 0 oct  7 21:48 a
-rw-r--r-- 1 root    root    0 oct  7 21:48 b</pre>

<p>
<p><div class="notetip">
Operația de schimbare utilizatorului sau a grupului deținător ale unui fișier sunt operații privilegiate, deci trebuie executate cu <code>sudo</code>.

</div></p>
</p>

</div>
<!-- EDIT9 SECTION "Modificarea utilizatorului și a grupului" [9541-12221] -->
<h2 class="sectionedit10" id="link-uri">2. Link-uri</h2>
<div class="level2">

<p>
Link-urile sunt legături între două puncte ale sistemului de fișiere. În general le folosim când vrem să ne ușurăm accesul la un fișier sau director, sau pentru a uniformiza accesul.
</p>

<p>
Sistemul de fișiere folosit în Linux permite două tipuri de link-uri:
</p>
<ul>
<li class="level1"><div class="li"> <em>link-uri simbolice (soft links)</em>: se comportă precum un shortcut din Windows; pointează către un alt fișier/director</div>
</li>
<li class="level1"><div class="li"> <em>link-uri hard (hard links)</em>: nu au echivalent în Windows; simplu spus, sunt două fișiere ce împart aceleași date, însă descrierea completă și implementarea lor o veți învăța la cursul de <a href="http://ocw.cs.pub.ro/courses/so" class="urlextern" title="http://ocw.cs.pub.ro/courses/so"  rel="nofollow">Sisteme de Operare</a></div>
</li>
</ul>

</div>
<!-- EDIT10 SECTION "2. Link-uri" [12222-12904] -->
<h3 class="sectionedit11" id="link-uri_simbolice">Link-uri simbolice</h3>
<div class="level3">

<p>
Pentru a crea un link folosim comanda <code>ln</code>. Pentru a crea un link simbolic trebuie să specificăm parametrul <code>-s</code>. 
</p>
<pre class="code">student@uso:~/uso/lab05/demo$ touch a
student@uso:~/uso/lab05/demo$ ln -s a sym
student@uso:~/uso/lab05/demo$ ls -l
total 0
-rw-rw---- 1 student student 0 oct  7 22:42 a
lrwxrwxrwx 1 student student 1 oct  7 22:42 sym -&gt; a</pre>

<p>
Observați că ultima linie începe cu <code>l</code>, semnificând ca intrarea este un link simbolic. Mai mult, <code>ls -l</code> ne arată și către ce fișier pointează link-ul: <em>a</em>.
</p>
<pre class="code">student@uso:~/uso/lab05/demo$ echo &quot;abc&quot; &gt; a
student@uso:~/uso/lab05/demo$ cat a
abc
student@uso:~/uso/lab05/demo$ cat sym
abc</pre>

<p>
Link-ul se comportă ca și fișierul către care pointează. Putem să le folosim ca fiind același fișier. Ce se întamplă totuși dacă mutăm fișierul destinație?
</p>
<pre class="code">student@uso:~/uso/lab05/demo$ mv a ..
student@uso:~/uso/lab05/demo$ cat sym
cat: sym: No such file or directory</pre>

<p>
Link-ul nu mai funcționează mutat fișierul către care pointa. Această problemă nu poate fi rezolvată cu link-uri simbolice. Dacă vrem să putem muta fișierul destinație, trebuie sa folosim link-uri hard.
</p>

</div>
<!-- EDIT11 SECTION "Link-uri simbolice" [12905-14127] -->
<h2 class="sectionedit12" id="lucrul_cu_sisteme_de_fisiere">3. Lucrul cu sisteme de fișiere</h2>
<div class="level2">

<p>
Un sistem de fișiere reprezintă modul de organizare a fișierelor pe un mediu de stocare pentru a le face mai ușor accesibile. Sistemul de fișiere folosit, în general, pe sistemele Linux se numește <em>ext4</em>. Pentru a vedea ce sisteme de fișiere există în sistem folosim comanda <code>fdisk -l</code>.
</p>
<pre class="code">student@uso:~/uso/lab05/demo$ sudo fdisk -l
Disk /dev/sda: 8589 MB, 8589934592 bytes
255 heads, 63 sectors/track, 1044 cylinders, total 16777216 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disk identifier: 0x000de65a

   Device Boot      Start         End      Blocks   Id  System
/dev/sda1   *        2048    14680063     7339008   83  Linux
/dev/sda2        14682110    16775167     1046529    5  Extended
/dev/sda5        14682112    16775167     1046528   82  Linux swap / Solaris</pre>

<p>
<p><div class="noteimportant">
Comanda <code>fdisk</code> va merge în cazul majorității calculatoarelor, iar în cazul nostru va merge pentru calculatoarele din sala EG106. Se poate totuși să aveți partiții ce folosesc GPT (GUID Partition Table), cum este cazul stațiilor din sala EG306. În acest caz trebuie să folosiți comanda <code>gdisk</code>.
</p>
<pre class="code">student@uso-eg306:~$ sudo fdisk -l /dev/sda

WARNING: GPT (GUID Partition Table) detected on &#039;/dev/sda&#039;! The util fdisk doesn&#039;t support GPT. Use GNU Parted.


Disk /dev/sda: 500.1 GB, 500107862016 bytes
255 heads, 63 sectors/track, 60801 cylinders, total 976773168 sectors
Units = sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 4096 bytes
I/O size (minimum/optimal): 4096 bytes / 4096 bytes
Disk identifier: 0xc90ab212

   Device Boot      Start         End      Blocks   Id  System
/dev/sda1               1   976773167   488386583+  ee  GPT
Partition 1 does not start on physical sector boundary.
student@uso-eg306:~$ sudo gdisk -l /dev/sda
GPT fdisk (gdisk) version 0.8.8

Partition table scan:
  MBR: protective
  BSD: not present
  APM: not present
  GPT: present

Found valid GPT with protective MBR; using GPT.
Disk /dev/sda: 976773168 sectors, 465.8 GiB
Logical sector size: 512 bytes
Disk identifier (GUID): ED4BC435-E352-403E-898B-09B7A9BA2F2E
Partition table holds up to 128 entries
First usable sector is 34, last usable sector is 976773134
Partitions will be aligned on 2048-sector boundaries
Total free space is 139800557 sectors (66.7 GiB)

Number  Start (sector)    End (sector)  Size       Code  Name
   1            2048       400001023   190.7 GiB   8300  
   2       400001024       800002047   190.7 GiB   8300  
   3       800002048       816003071   7.6 GiB     8200  
   4       816003072       836974591   10.0 GiB    8300  Linux filesystem</pre>

<p>

</div></p>
</p>

<p>
Pentru a afla informații despre unul dintre aceste sisteme de fișiere, folosim comanda <code>df</code>. Pentru a face rezultatul mai ușor de citit pentru noi, vom folosi argumentul <code>-h</code> (<em>human-readable</em>).
</p>
<pre class="code">student@uso:~$ df -h /
Filesystem      Size  Used Avail Use% Mounted on
/dev/sda1       6,8G  3,3G  3,2G  52% /</pre>

<p>
Pentru a afla informații despre cât spațiu ocupă pe disc un director sau fișier folosim comanda <code>du</code>. Din nou vom folosi argumentul <code>-h</code>. Putem folosi și argumentul <code>-s</code> pentru a primi doar totalul pentru fiecare director primit ca argument.
</p>
<pre class="code">student@uso:~/uso$ du -h lab05
0	lab05/demo
3.6M	lab05/star_wars_episode_iv_a_new_hope/death_star
0	lab05/star_wars_episode_iv_a_new_hope/millenium_falcon/smuggling_compartment
0	lab05/star_wars_episode_iv_a_new_hope/millenium_falcon
512	lab05/star_wars_episode_iv_a_new_hope/tatooine/mos_eisley
512	lab05/star_wars_episode_iv_a_new_hope/tatooine
0	lab05/star_wars_episode_iv_a_new_hope/yavin/plans
0	lab05/star_wars_episode_iv_a_new_hope/yavin
3.6M	lab05/star_wars_episode_iv_a_new_hope
3.6M	lab05/
student@uso:~/uso$ du -hs lab05
3.6M	lab05/</pre>

</div>
<!-- EDIT12 SECTION "3. Lucrul cu sisteme de fișiere" [14128-18078] -->
<h3 class="sectionedit13" id="montarea_si_demontarea_sistemelor_de_fisiere">Montarea și demontarea sistemelor de fișiere</h3>
<div class="level3">

<p>
Un sistem de fișiere nu poate fi folosit decât dacă este montat. Comanda cu ajutorul căreia putem face asta este <code>mount</code>. Fără niciun argument ne va spune ce sisteme de fișiere sunt montate și în ce directoare sunt montate.
</p>
<pre class="code">student@uso:~/uso/lab05/demo$ mount
/dev/sda1 on / type ext4 (rw,errors=remount-ro)
proc on /proc type proc (rw,noexec,nosuid,nodev)
sysfs on /sys type sysfs (rw,noexec,nosuid,nodev)
[...]</pre>

<p>
Comanda returnează, pe fiecare linie, fișierul bloc, punctul din ierarhia de fișiere unde este montat, tipul sistemului de fișiere și flag-urile cu care a fost montat. Să luăm ca exemplu linia <code>/dev/sda1 on / type ext4 (rw,errors=remount-ro)</code>: <code>/dev/sda1</code> este fișierul bloc, <code>/</code> este punctul în care este montat (chiar în rădăcina sistemului de fișiere), <code>ext4</code> este tipul sistemului de fișiere și <code>(rw,errors=remount-ro)</code> sunt flag-urile cu care a fost montat (read-write iar in caz de eroare va fi remontat read-only).
</p>

<p>
Pentru a putea să monteze un sistem de fișiere trebuie să îi specificăm ce tip este acesta, fișierul bloc unde se află și directorul în care să îl monteze.
</p>
<pre class="code">student@uso:~/uso/lab05/demo$ mkdir mnt
student@uso:~/uso/lab05/demo$ ls mnt
student@uso:~/uso/lab05/demo$ sudo mkfs.ext4 /dev/sda4
student@uso:~/uso/lab05/demo$ sudo mount -t ext4 /dev/sda4 mnt
student@uso:~/uso/lab05/demo$ ls mnt
lost+found</pre>

<p>
<p><div class="notetip">
Partiția <code>/dev/sda4</code> nu avea niciun sistem de fișiere pe ea. Folosind comanda <code>sudo mkfs.ext4 /dev/sda4</code> am creat un sistem de fișiere de tip <em>ext4</em> pe partiția <code>/dev/sda4</code>

</div></p>
</p>

<p>
Operația opusă montării este demontarea, care se realizează cu ajutorul comenzii <code>umount</code>. Acesteia nu trebuie să îi specificăm decât directorul unde este montat sistemul de fișier ce se dorește a fi demontat sau fișierul bloc.
</p>
<pre class="code">student@uso:~/uso/lab05/demo$ sudo umount mnt
student@uso:~/uso/lab05/demo$ ls mnt</pre>

<p>
<p><div class="notewarning">
Montarea și demontarea sistemelor de fișiere este o acțiune privilegiată. Dacă dorim să montăm/demontăm un sistem de fișiere ca un utilizator neprivilegiat, trebuie sa prefixăm comanda cu <code>sudo</code>.

</div></p>
</p>

</div>
<!-- EDIT13 SECTION "Montarea și demontarea sistemelor de fișiere" [18079-20330] -->
<h1 class="sectionedit14" id="exercitii">Exerciții</h1>
<div class="level1">

<p>
<p><div class="noteclassic">
Dacă nu ați făcut deja acest lucru la partea de demo, intrați în directorul <code>/home/student</code>. Clonați repository-ului oficial de USO folosind comanda:
</p>
<pre class="code">student@uso:~$ git clone https://github.com/systems-cs-pub-ro/uso </pre>

<p>
În directorul <code>~/uso/lab05</code> găsiți fișierele și directoarele necesare pentru parcurgerea exercițiilor acestui laborator. 

</div></p>
</p>

</div>
<!-- EDIT14 SECTION "Exerciții" [20331-20750] -->
<h3 class="sectionedit15" id="adaugarea_unor_utilizatori_si_grupuri_noi_15p">1. Adăugarea unor utilizatori și grupuri noi (1.5p)</h3>
<div class="level3">

<p>
Ca administratori ai infrastructurii IT a școlii de care răspundeți ați primit <a href="https://docs.google.com/spreadsheets/d/15LxIrhz0JTdLgWJqyHwj4hfVOg_uW6TyRnUbKqEtB8Y/edit#gid=0" class="urlextern" title="https://docs.google.com/spreadsheets/d/15LxIrhz0JTdLgWJqyHwj4hfVOg_uW6TyRnUbKqEtB8Y/edit#gid=0"  rel="nofollow">următorul excel</a> cu nume de utilizatori și grupuri din care trebuie să facă parte, conform cu politica școlii. 
</p>

<p>
Sarcina voastră este să adăugați în sistem grupurile și apoi utilizatorii, utilizatorii să îi înscrieți în grupuri conform cu excelul primit. 
</p>

<p>
De asemenea, trebuie să configurați următoarele parole:
</p>
<ul>
<li class="level1"><div class="li"> Studenții vor avea parola <code>student</code></div>
</li>
<li class="level1"><div class="li"> Profesorii vor avea parola <code>profesor007</code></div>
</li>
<li class="level1"><div class="li"> Adminii vor avea parola <code>admin1234</code></div>
</li>
</ul>

<p>
Pentru cei care sunt în mai multe grupuri simultan alegeți parola mai dificilă (să conțină cifre diferite). 
</p>

<p>
<p><div class="notetip">
Pentru <strong>verificarea</strong> adăugării utilizatorilor în sistem trebuie să inspectăm fișierele: <code>/etc/passwd</code> și pentru grupuri <code>/etc/group</code>. De asemenea, pentru a vedea grupurile din care face parte un anumit utilizator (să zicem <code>dan</code>) și totodată existența sa în sistem mai putem folosi comanda:
</p>
<pre class="code bash"><span class="co4">student@uso~$ </span><span class="kw2">id</span> dan</pre>

<p>

</div></p>
</p>

<p>
<p><div class="notetip">
Pentru a verifica directorul home al unui utilizator folosiți comanda <code>finger</code> urmată de numele utilizatorului, ca de exemplu comanda de mai jos:
</p>
<pre class="code bash"><span class="co4">student@uso~$ </span>finger dan</pre>

<p>

</div></p>
</p>

</div>
<!-- EDIT15 SECTION "1. Adăugarea unor utilizatori și grupuri noi (1.5p)" [20751-22163] -->
<h3 class="sectionedit16" id="permisiuni_1_2p">2. Permisiuni 1 (2p)</h3>
<div class="level3">

<p>
În directorul <code>/home/student/uso/lab05/cursuri/</code> vor trebui să lucreze atât utilizatorul <code>alex</code>, cât și <code>mihai</code>. Configurat permisiunile necesare astfel încât cei doi să aibă permisiuni asupra directorului așa cum este descris mai jos, iar restul utilizatorilor să îl poată doar vizualiza.
</p>

<p>
<p><div class="notetip">
Utilizatorul <code>alex</code> și <code>mihai</code> sunt parte a aceluiași grup (<code>profesor</code>). Va trebui
</p>
<ul>
<li class="level1"><div class="li"> să schimbați grupul directorului <code>/home/student/uso/lab05/cursuri/</code> în grupul <code>profesor</code> (folosind comanda <code>chgrp</code>)</div>
</li>
<li class="level1"><div class="li"> să schimbați permisiunile directorului astfel încât grupul să aibă permisiuni de citire, scriere și execuție (folosind comanda <code>chmod</code></div>
</li>
</ul>

<p>

</div></p>
</p>

<p>
<p><div class="notetip">
Pentru a verifica faptul că ați configurat permisiunile utile trebuie să schimbați utilizatorul din <code>student</code> în <code>alex</code> și <code>mihai</code> și să vedeți dacă aceștia pot face modificări în director; ceilalți utilizatori nu trebuie să poată face modificări în director.
</p>

<p>
Folosiți <strong>alte tab-uri de terminal</strong> pentru verificare.
</p>

<p>
Folosiți comanda <code>sudo su</code> urmată de numele utilizatorului; apoi faceți modificări în director, delogați-vă folosind combinația de taste <code>Ctrl+D</code> și repetați procesul pentru alt utilizator.

</div></p>
</p>

</div>
<!-- EDIT16 SECTION "2. Permisiuni 1 (2p)" [22164-23461] -->
<h3 class="sectionedit17" id="permisiuni_2_2p">3. Permisiuni 2 (2p)</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> <strong>a)</strong> Intrați în directorul <code>/home/student/uso/lab05/teste_curs</code>. În acest director se află fișierele <code>test-1.txt</code> și <code>test-2.txt</code> care trebuie protejate. Setați permisiunile necesare fișierelor astfel încât utilizatorii care nu se află în grupul <code>profesor</code> să nu aibă nicio permisiune asupra lui.</div>
</li>
<li class="level1"><div class="li"> <strong>b)</strong> Intrați în directorul <code>/home/student/uso/lab05</code>. În acest director se află fișierul <code>coduri_alarma</code> în care se găsesc codurile de acces la sistemele de securitate din diferite săli din facultate. Vrem ca doar profesorii și administratorii să aibă acces asupra acestui fișier, prin urmare realizați modificările necesare astfel încât doar utilizatorii <code>alex</code>, <code>mihai</code>, <code>geo</code> și <code>razvan</code> să aibă drept de citire și scriere, iar toți ceilați utilizatori să nu aibă niciun drept asupra fișierului.</div>
</li>
</ul>

<p>
<p><div class="notetip"> Din cauza limitării de un singur owner și un singur grup owner asupra unui fișier, la acest exercițiu este nevoie să creați un grup nou în care să adăugați toți utilizatorii menționați la subpunctul <strong>b)</strong> și să setați acest grup ca grup owner al fișierului <code>coduri_alarma</code>.

</div></p>
</p>

</div>
<!-- EDIT17 SECTION "3. Permisiuni 2 (2p)" [23462-24674] -->
<h3 class="sectionedit18" id="link-uri_1p">4. Link-uri (1p)</h3>
<div class="level3">

<p>
Fiind autentificați ca utilizatorul <code>student</code>, intrați în directorul <code>/home/student/uso/lab05</code>. Creați un link simbolic cu numele <code>EC</code> către fișierul <code>corp_EC</code> din directorul <code>cladiri</code>. Folosiți calea cea mai scurtă, relativă: <code>cladiri/corp_EC</code>. Verificați faptul că puteți accesa linkul creat folosind comanda:
</p>
<pre class="code bash">student<span class="sy0">@</span>uso:~<span class="sy0">/</span>uso<span class="sy0">/</span>lab05$ <span class="kw2">cat</span> EC
EC101
EC004
EC102
EC105</pre>

<p>
Mutați fișierul EC (linkul) în directorul <code>/home/student</code> și rulați din nou comanda <code>cat</code> cu argumentul <code>~/EC</code>. Observați că primiți eroare datorită faptului că ați mutat linkul și, așadar, calea relativă cu care a fost el creat nu mai este corectă.
</p>

<p>
Mergeți din nou în directorul <code>/home/student/uso/lab05/cladiri</code>. Acest director conține fișierul <code>corp_EC</code>. Aflați acum în directorul <code>/home/student/uso/lab05/</code>, creați din nou un link simbolic catre fișierul <code>corp_EC</code> din directorul <code>/home/student/uso/lab05/cladiri</code> folosind o cale absoluta; numiți link-ul simbolic <code>new_EC</code>. Mutați apoi linkul creat (<code>new_EC</code>) în directorul home al utilizatorului <code>student</code> și verificați că de această dată puteți accesa fișierul <code>corp_EC</code> prin intermediul linkului, chiar dacă acesta din urmă a fost mutat. 
</p>

</div>
<!-- EDIT18 SECTION "4. Link-uri (1p)" [24675-25971] -->
<h3 class="sectionedit19" id="montarea_sistemelor_de_fisiere_2p">5. Montarea sistemelor de fișiere (2p)</h3>
<div class="level3">

</div>

<h4 id="montarea_iso_1p">5.1. Montarea ISO (1p)</h4>
<div class="level4">

<p>
În ciuda eforturilor de securizare a codurilor de alarmă, fișierul <code>/home/student/uso/lab05/alarm_codes.iso</code>, a rămas accesibil. Inspectați întâi tipul fișierului <code>alarm_codes.iso</code> folosind comanda <code>file</code>. Rețineți tipul sistemului de fișiere de pe imagine și, folosind această informație, montați imaginea după procedura descrisă în secțiunea <span class="curid"><a href="../../../../uso/laboratoare/laborator-05.html#montarea_sistemelor_de_fisiere" class="wikilink1" title="uso:laboratoare:laborator-05">montarea sistemelor de fișiere</a></span> în directorul <code>~/uso/lab05/coduri</code>.
</p>

<p>
<p><div class="notetip">
Imaginea folosește sistemul de fișiere <a href="http://en.wikipedia.org/wiki/ISO_9660" class="urlextern" title="http://en.wikipedia.org/wiki/ISO_9660"  rel="nofollow">iso9660</a>, deci pentru montare veți folosi parametrul <code>-t iso9660</code>.
</p>

<p>
Adică veți folosi o comandă de forma
</p>
<pre class="code">mount -t iso9660 /path/to/iso/file /path/to/mount/point</pre>

<p>

</div></p>
</p>

<p>
Accesați apoi codurile de alarmă folosind comanda:
</p>
<pre class="code bash">student<span class="sy0">@</span>uso:~<span class="sy0">/</span>uso<span class="sy0">/</span>lab05$ <span class="kw2">cat</span> coduri<span class="sy0">/</span>coduri_alarma
EG106: <span class="nu0">1234</span>
EG306: <span class="nu0">5678</span>
EG208: 0208</pre>

<p>
La final, demontați sistemul de fișiere montant în directorul <code>/home/student/uso/lab05/coduri</code> folosind comanda <code>umount</code>. Căutați în paginile de manual care este formatul comenzii <code>umount</code>.
</p>
<div class="solution"><div class="solution_title"><span class="title_text">Rezolvare</span></div><div class="solution_contents"><pre class="code bash"><span class="co4">student@uso:~$ </span><span class="kw2">mkdir</span> <span class="re5">-p</span> <span class="sy0">/</span>home<span class="sy0">/</span>student<span class="sy0">/</span>uso<span class="sy0">/</span>lab05<span class="sy0">/</span>coduri
<span class="co4">student@uso:~$ </span><span class="kw2">sudo</span> <span class="kw2">mount</span> <span class="re5">-o</span> loop <span class="re5">-t</span> iso9660 <span class="sy0">/</span>home<span class="sy0">/</span>student<span class="sy0">/</span>uso<span class="sy0">/</span>lab05<span class="sy0">/</span>alarm_codes.iso <span class="sy0">/</span>home<span class="sy0">/</span>student<span class="sy0">/</span>uso<span class="sy0">/</span>lab05<span class="sy0">/</span>coduri
<span class="co4">student@uso:~$ </span><span class="kw2">df</span> <span class="re5">-hT</span>   <span class="co0"># pentru verificare</span>
<span class="co4">student@uso:~$ </span><span class="kw2">ls</span> <span class="re5">-lh</span> <span class="sy0">/</span>home<span class="sy0">/</span>student<span class="sy0">/</span>uso<span class="sy0">/</span>lab05<span class="sy0">/</span>coduri   <span class="co0"># pentru verificare</span></pre>
</div></div>

</div>

<h4 id="montarea_sistemului_propriu_de_fisiere_1p">5.2. Montarea sistemului propriu de fișiere (1p)</h4>
<div class="level4">

<p>
Avem nevoie de un sistem de fișiere propriu pe care să ținem temele de la USO. Vrem să ne alegem singuri dimensiunea și tipul său, dar și locul unde aceasta să fie montată.
</p>

<p>
Folosiți comenzile necesare pentru a crea un fișier cu dimensiunea de 100MB, plin cu zero-uri (octeți de zero). Apoi avem nevoie să facem un sistem de fișiere de tipul <strong>ext3</strong> peste acest fișier nou.
</p>

<p>
<p><div class="notetip">
Pentru a crea un fișier cu dimensiunea de 100MB folosiți comanda <code>dd</code> și folosind ca <em>input file</em> intrarea specială <code>/dev/zero</code>. Adică ceva de genul
</p>
<pre class="code">dd if=/dev/zero ...</pre>

<p>
Exemple de folosire a comenzii <code>dd</code> pentru a genera fișiere de dimensiune dată găsiți la adresa <a href="http://matrafox.info/create-a-1g-100mb-10mb-file-for-testing-transfer-speed.html" class="urlextern" title="http://matrafox.info/create-a-1g-100mb-10mb-file-for-testing-transfer-speed.html"  rel="nofollow">http://matrafox.info/create-a-1g-100mb-10mb-file-for-testing-transfer-speed.html</a>

</div></p>
</p>

<p>
<p><div class="notetip">
Un fișier poate fi formatat exact ca și cum ar fi o partiție. Pentru aceasta folosiți comanda <code>mkfs.ext3</code> urmată de calea către fișier. Adică ceva de genul
</p>
<pre class="code">sudo mkfs.ext3 /path/fo/file/to/be/formatted</pre>

<p>

</div></p>
</p>

<p>
Apoi trebuie făcute următoarele setări pentru montare:
</p>
<ul>
<li class="level1"><div class="li"> montarea noului sistem de fisiere în <strong>/mnt/myfs</strong></div>
</li>
<li class="level1"><div class="li"> montarea automată a acestuia la fiecare repornire a sistemului (Indicație: <a href="http://man7.org/linux/man-pages/man5/fstab.5.html" class="urlextern" title="http://man7.org/linux/man-pages/man5/fstab.5.html"  rel="nofollow">fstab</a>). </div>
</li>
</ul>

<p>
<p><div class="notetip">Pentru verificare folosiți comanda <code><strong>df -hT</strong></code>. Să descifrăm parametrii:
</p>
<ul>
<li class="level1"><div class="li"> <code>df</code> afișează partițiile montate în acel moment de timp</div>
</li>
<li class="level1"><div class="li"> <code>-h</code> e folosit pentru <em>human-readable</em> size a partițiilor</div>
</li>
<li class="level1"><div class="li"> <code>-T</code> e folosit pentru a afișa încă o coloană cu tipul sistemului de fișiere (e.g. <code>ext3</code>, <code>ext4</code>, <code>nfs</code> etc.)</div>
</li>
</ul>

<p>
O altă comandă de verificare este <code><strong>mount</strong></code> fără nici un alt parametru. Încercați să descifrați output-ul ei (sau căutați pe google <img src="../../../../lib/images/smileys/icon_razz.gif" class="icon" alt=":-P" />)

</div></p>
</p>
<div class="solution"><div class="solution_title"><span class="title_text">Rezolvare</span></div><div class="solution_contents"><pre class="code bash"><span class="co4">student@uso:~$ </span><span class="kw2">dd</span> <span class="re2">if</span>=<span class="sy0">/</span>dev<span class="sy0">/</span>zero <span class="re2">of</span>=filesys.bin <span class="re2">bs</span>=1M <span class="re2">count</span>=<span class="nu0">100</span>
<span class="co4">student@uso:~$ </span>mkfs.ext3 <span class="re5">-F</span> filesys.bin
<span class="co4">student@uso:~$ </span><span class="kw2">mount</span> <span class="re5">-o</span> loop <span class="re5">-t</span> ext3 filesys.bin <span class="sy0">/</span>mnt<span class="sy0">/</span>myfs
<span class="co4">student@uso:~$ </span><span class="kw2">df</span> <span class="re5">-hT</span>   <span class="co0"># pentru verificare</span></pre>
</div></div>

</div>
<!-- EDIT19 SECTION "5. Montarea sistemelor de fișiere (2p)" [25972-29605] -->
<h3 class="sectionedit20" id="drepturi_de_executie_1p">6. Drepturi de execuție (1p)</h3>
<div class="level3">

<p>
Intrați în directorul <code>/home/student/uso/lab05/</code>. Aici veți găsi fișierul <code>restart_servers</code>. Setați permisiunile necesare astfel încât fișierul să poată fi executat doar de către utilizatorul <code>geo</code>. După ce ați făcut aceasta lansați fișierul în execuție.
</p>

</div>
<!-- EDIT20 SECTION "6. Drepturi de execuție (1p)" [29606-29927] -->
<h3 class="sectionedit21" id="linkuri_simbolice_circulare_05p">7. Linkuri simbolice circulare (0.5p)</h3>
<div class="level3">

<p>
Creați în directorul <code>home/student/uso/lab05</code> un director cu numele <code>circularity</code>. În directorul <code>circularity</code> creați 3 linkuri simbolice care să se refere unul pe celălalt, într-o manieră circulară. De exemplu: <code>link_a</code> → <code>link_b</code>, <code>link_b</code> → <code>link_c</code> și <code>link_c</code> → <code>link_a</code>.
</p>
<pre class="code bash">student<span class="sy0">@</span>uso:~<span class="sy0">/</span>uso<span class="sy0">/</span>lab05<span class="sy0">/</span>circularity$ <span class="kw2">ls</span> <span class="re5">-l</span>
total <span class="nu0">0</span>
lrwxrwxrwx <span class="nu0">1</span> student student <span class="nu0">6</span> nov  <span class="nu0">1</span> <span class="nu0">15</span>:06 link_a -<span class="sy0">&gt;</span> link_b
lrwxrwxrwx <span class="nu0">1</span> student student <span class="nu0">6</span> nov  <span class="nu0">1</span> <span class="nu0">15</span>:06 link_b -<span class="sy0">&gt;</span> link_c
lrwxrwxrwx <span class="nu0">1</span> student student <span class="nu0">6</span> nov  <span class="nu0">1</span> <span class="nu0">15</span>:06 link_c -<span class="sy0">&gt;</span> link_a</pre>

<p>
Rulați acum comanda <code>cat</code> pe unul dintre linkuri și observați eroarea întoarsă.
</p>

</div>

<h4 id="bonus">BONUS</h4>
<div class="level4">

</div>
<!-- EDIT21 SECTION "7. Linkuri simbolice circulare (0.5p)" [29928-30641] -->
<h3 class="sectionedit22" id="liste_de_acces_posix_acl_2_karma">1. Liste de acces (POSIX ACL) [2 Karma]</h3>
<div class="level3">

<p>
Am văzut la <a href="../../../../uso/laboratoare/laborator-05.html#permisiuni_2_2p" class="urlextern" title="http://ocw.cs.pub.ro/courses/uso/laboratoare/laborator-05#permisiuni_2_2p"  rel="nofollow">exercițiul 3</a> cum putem proceda pentru a acorda drepturi asupra unui fișier unor utilizatori din două grupuri diferite: adăugăm un grup nou, adăugăm toți utilizatorii respectivi în grupul nou și setăm grupul nou ca fiind grupul owner al fișierului. Dar ce se întâmplă dacă în viitor adăugăm un utilizator nou, <code>ion</code>, în grupul profesori? Am vrea să aibă implicit și el drepturi asupra fișierului <code>coduri_alarma</code>, însă acest lucru nu este posibil folosind doar permisiunile de bază.
</p>

<p>
Pentru acest task, putem folosi însă <strong>liste de acces</strong> sau ACLs (Access Control Lists). Manipularea listelor de acces se face cu comanda <code>setfacl</code>. Pentru a verifica <abbr title="Access Control List">ACL</abbr>-urile, putem folosi comanda <code>getfacl</code>. După ce citiți informațiile de la acest <a href="http://www.computerhope.com/unix/usetfacl.htm" class="urlextern" title="http://www.computerhope.com/unix/usetfacl.htm"  rel="nofollow">link</a> realizați modificările necesare astfel încât orice utilizator care face parte din grupul <code>profesor</code> sau <code>admin</code> să poată scrie și citi fișierul <code>coduri_alarma</code> din directorul <code>/home/student/uso/lab05/</code>, iar toți ceilalți utilizatori să nu aibă niciun drept. Verificați acest lucru adăugând încă un utilizator în oricare dintre cele două grupuri.
</p>

<p>
<p><div class="notetip">
Fiți atenți la faptul că listele de acces vin ca o completare la permisiunile de bază ale fișierului, deci mai întâi va trebui să revocați drepturile de acolo și, mai apoi, să setați <abbr title="Access Control List">ACL</abbr>-urile corespunzătoare.

</div></p>
</p>

</div>
<!-- EDIT22 SECTION "1. Liste de acces (POSIX ACL) [2 Karma]" [30642-] --></div>
</body>
</html>

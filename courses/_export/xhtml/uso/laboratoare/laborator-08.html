    
    

<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8" />
  <title>uso:laboratoare:laborator-08</title>
<meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="date" content="2016-10-09T11:14:38+0300"/>
<meta name="keywords" content="uso,laboratoare,laborator-08"/>
<link rel="search" type="application/opensearchdescription+xml" href="../../../../lib/exe/opensearch.php" title="CS Open CourseWare"/>
<link rel="start" href="../../../../../courses.1.html"/>
<link rel="alternate" type="application/rss+xml" title="Recent Changes" href="../../../../feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current Namespace" href="../../../../feed.php%3Fmode=list&amp;ns=uso:laboratoare"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="laborator-08.html"/>
<link rel="canonical" href="../../../../uso/laboratoare/laborator-08.html"/>
<link rel="stylesheet" type="text/css" href="../../../../lib/exe/css.php%3Ft=arctic&amp;tseed=1476798676.css"/>
<script type="text/javascript">/*<![CDATA[*/var NS='uso:laboratoare';var JSINFO = {"id":"uso:laboratoare:laborator-08","namespace":"uso:laboratoare","isadmin":0,"isauth":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="../../../../lib/exe/js.php%3Ftseed=1476798676"></script>
<script type="text/x-mathjax-config">/*<![CDATA[*/MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ["$","$"], ["\\(","\\)"] ],
        displayMath: [ ["$$","$$"], ["\\[","\\]"] ],
        processEscapes: true
    }
});
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
<script type="text/javascript">/*<![CDATA[*/
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
		  
/*!]]>*/</script>
<script type="text/javascript">/*<![CDATA[*/
var pageTracker = _gat._getTracker("UA-38383934-1");
pageTracker._initData();
pageTracker._trackPageview();
		  
/*!]]>*/</script>
</head>
<body>
<div class="dokuwiki export">
<!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="laborator-08.html#laborator_08_-_configurari_de_retea">Laborator 08 - Configurări de rețea</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="laborator-08.html#suport_laborator">Suport laborator</a></div></li>
<li class="level2"><div class="li"><a href="laborator-08.html#resurse_laborator">Resurse laborator</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="laborator-08.html#demo">Demo</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="laborator-08.html#formatul_comenzii_ip">1. Formatul comenzii &#039;&#039;ip&#039;&#039;</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="laborator-08.html#sumar_al_comenzilor_importante">2. Sumar al comenzilor importante</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="laborator-08.html#configurarea_retelei_in_linux">3. Configurarea rețelei în Linux</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="laborator-08.html#interfete_de_retea">3.1. Interfețe de rețea</a></div></li>
<li class="level3"><div class="li"><a href="laborator-08.html#configurari_temporare">3.2. Configurări temporare</a></div>
<ul class="toc">
<li class="level4"><div class="li"><a href="laborator-08.html#statice">3.2.1 Statice</a></div></li>
<li class="level4"><div class="li"><a href="laborator-08.html#dinamice">3.2.2 Dinamice</a></div></li>
</ul>
</li>
<li class="level3"><div class="li"><a href="laborator-08.html#configurari_permanente">3.3. Configurări permanente</a></div>
<ul class="toc">
<li class="level4"><div class="li"><a href="laborator-08.html#statice1">3.3.1. Statice</a></div></li>
<li class="level4"><div class="li"><a href="laborator-08.html#dinamice1">3.3.2. Dinamice</a></div></li>
</ul>
</li>
<li class="level3"><div class="li"><a href="laborator-08.html#comenzi_de_verificare">4. Comenzi de verificare</a></div></li>
</ul>
</li>
</ul>
</li>
<li class="level1"><div class="li"><a href="laborator-08.html#exercitii">Exerciții</a></div>
<ul class="toc">
<li class="clear">
<ul class="toc">
<li class="level3"><div class="li"><a href="laborator-08.html#pregatirea_setup-ului_15p">1. Pregătirea setup-ului (1.5p)</a></div></li>
<li class="level3"><div class="li"><a href="laborator-08.html#configurare_dinamica_temporara_05p">2. Configurare dinamică temporară (0.5p)</a></div></li>
<li class="level3"><div class="li"><a href="laborator-08.html#configurare_statica_temporara_05p">3. Configurare statică temporară (0.5p)</a></div></li>
<li class="level3"><div class="li"><a href="laborator-08.html#ssh_via_host-only_05p">4. ssh via host-only (0.5p)</a></div></li>
<li class="level3"><div class="li"><a href="laborator-08.html#configurare_statica_temporara_completa_2p">5. Configurare statică temporară completă (2p)</a></div></li>
<li class="level3"><div class="li"><a href="laborator-08.html#configurare_permanenta_pe_sistem_25p">6. Configurare permanentă pe sistem (2.5p)</a></div></li>
<li class="level3"><div class="li"><a href="laborator-08.html#probleme_de_configurare_25p">7. Probleme de configurare (2.5p)</a></div></li>
<li class="level3"><div class="li"><a href="laborator-08.html#bonus_1_asocierea_unui_nume_cu_un_ip_1_karma_wouso">Bonus 1. Asocierea unui nume cu un IP (1 karma WoUSO)</a></div></li>
<li class="level3"><div class="li"><a href="laborator-08.html#bonus_2_nsswitch_2_karma_wouso">Bonus 2. Nsswitch (2 karma WoUSO)</a></div></li>
</ul></li>
</ul></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h1 class="sectionedit1" id="laborator_08_-_configurari_de_retea">Laborator 08 - Configurări de rețea</h1>
<div class="level1">

</div>
<!-- EDIT1 SECTION "Laborator 08 - Configurări de rețea" [1-53] -->
<h2 class="sectionedit2" id="suport_laborator">Suport laborator</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> <a href="http://books.google.ro/books?id=_JFGzyRxQGcC&amp;lpg=PP1&amp;hl=ro&amp;pg=PA217#v=onepage&amp;q&amp;f=false" class="urlextern" title="http://books.google.ro/books?id=_JFGzyRxQGcC&amp;lpg=PP1&amp;hl=ro&amp;pg=PA217#v=onepage&amp;q&amp;f=false"  rel="nofollow">8. Configurări de rețea</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://books.google.ro/books?id=_JFGzyRxQGcC&amp;lpg=PP1&amp;hl=ro&amp;pg=PA293#v=onepage&amp;q&amp;f=false" class="urlextern" title="http://books.google.ro/books?id=_JFGzyRxQGcC&amp;lpg=PP1&amp;hl=ro&amp;pg=PA293#v=onepage&amp;q&amp;f=false"  rel="nofollow">10.3.1 Monitorizarea sistemului (Monitorizarea serviciilor de rețea)</a></div>
</li>
<li class="level1"><div class="li"> <a href="https://www.linux.com/learn/working-network-configurations-command-line" class="urlextern" title="https://www.linux.com/learn/working-network-configurations-command-line"  rel="nofollow">Linux.com: Working with Network Configurations in Command Line</a></div>
</li>
</ul>

<p>
Link-uri utile <code>iproute2</code>:
</p>
<ul>
<li class="level1"><div class="li"> <a href="http://baturin.org/docs/iproute2/" class="urlextern" title="http://baturin.org/docs/iproute2/"  rel="nofollow">Iproute2 docs</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://www.humbug.in/2012/iproute2-primer-for-ifconfig-arp-route-users/" class="urlextern" title="http://www.humbug.in/2012/iproute2-primer-for-ifconfig-arp-route-users/"  rel="nofollow">Iproute2 simple tutorial</a></div>
</li>
<li class="level1"><div class="li"> <a href="https://wiki.gentoo.org/wiki/Iproute2" class="urlextern" title="https://wiki.gentoo.org/wiki/Iproute2"  rel="nofollow">Gentoo Iproute2 docs</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://www.cyberciti.biz/faq/linux-ip-command-examples-usage-syntax/" class="urlextern" title="http://www.cyberciti.biz/faq/linux-ip-command-examples-usage-syntax/"  rel="nofollow">Linux ip Command Examples</a></div>
</li>
</ul>

<p>
Extra: Motivații pentru care suita <code>ifconfig</code> nu se mai folosește:
</p>
<ul>
<li class="level1"><div class="li"> <a href="https://www.archlinux.org/news/deprecation-of-net-tools/" class="urlextern" title="https://www.archlinux.org/news/deprecation-of-net-tools/"  rel="nofollow">&#039;&#039;net-tools&#039;&#039; has been deprecated</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://www.linuxfoundation.org/collaborate/workgroups/networking/net-tools" class="urlextern" title="http://www.linuxfoundation.org/collaborate/workgroups/networking/net-tools"  rel="nofollow">Linux Foundation: Please keep in mind that most net-tools programs are obsolete</a></div>
</li>
<li class="level1"><div class="li"> <a href="http://wiki.centos.org/Manuals/ReleaseNotes/CentOS7" class="urlextern" title="http://wiki.centos.org/Manuals/ReleaseNotes/CentOS7"  rel="nofollow">CentOS 7 release notes</a>: <em>Commonly used utilities such as ifconfig/netstat have been marked as deprecated for some considerable time and the &#039;net-tools&#039; package is no longer part of the @core group so will not be installed by default.</em></div>
</li>
</ul>

</div>
<!-- EDIT2 SECTION "Suport laborator" [54-1509] -->
<h2 class="sectionedit3" id="resurse_laborator">Resurse laborator</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> <a href="http://repository.grid.pub.ro/cs/uso/2015-2016/lab08/dvorak.ova" class="urlextern" title="http://repository.grid.pub.ro/cs/uso/2015-2016/lab08/dvorak.ova"  rel="nofollow">Mașina virtuală &#039;&#039;dvorak&#039;&#039;</a></div>
</li>
<li class="level1"><div class="li"> Mașinile virtuale <a href="http://repository.grid.pub.ro/cs/uso/2015-2016/lab08/vivaldi.ova" class="urlextern" title="http://repository.grid.pub.ro/cs/uso/2015-2016/lab08/vivaldi.ova"  rel="nofollow">&#039;&#039;vivaldi&#039;&#039;</a> și <a href="http://repository.grid.pub.ro/cs/uso/2015-2016/lab08/verdi.ova" class="urlextern" title="http://repository.grid.pub.ro/cs/uso/2015-2016/lab08/verdi.ova"  rel="nofollow">&#039;&#039;verdi&#039;&#039;</a>.</div>
</li>
</ul>

<p>
<p><div class="noteclassic">
Pentru rezolvarea exercițiilor aveți nevoie de cele trei mașini virtuale ce se găsesesc, pe calculatoarele din EG306
pe partiția de 10 <abbr title="Gigabyte">GB</abbr>. 
</p>

<p>
Mașinile virtuale se pot descărca și din în repository-ul facultății: <a href="http://repository.grid.pub.ro/cs/uso/2015-2016/lab08/" class="urlextern" title="http://repository.grid.pub.ro/cs/uso/2015-2016/lab08/"  rel="nofollow">http://repository.grid.pub.ro/cs/uso/2015-2016/lab08/</a>
</p>

<p>
Credențialele de autentificare pentru toate maşinile virtuale sunt: utilizator <code>student</code>, parola <code>student</code>.

</div></p>
</p>

<p>
<p><div class="notewarning">
Verificați existența lor pe mașina de lucru in directorul <code>/mnt/sda5</code>. Dacă nu există, chemați asistentul sau descărcați-le chiar voi pe parcursul demo-ului:
</p>
<pre class="code bash"><span class="co4">student@uso:~$ </span><span class="kw2">ls</span> <span class="re5">-lah</span> <span class="sy0">/</span>mnt<span class="sy0">/</span>sda5</pre>

<p>

</div></p>
</p>

</div>
<!-- EDIT3 SECTION "Resurse laborator" [1510-2486] -->
<h1 class="sectionedit4" id="demo">Demo</h1>
<div class="level1">

</div>
<!-- EDIT4 SECTION "Demo" [2487-2506] -->
<h2 class="sectionedit5" id="formatul_comenzii_ip">1. Formatul comenzii &#039;&#039;ip&#039;&#039;</h2>
<div class="level2">

<p>
<p><div class="notetip">
În acest laborator vom folosi suita <code>iproute2</code>, respectiv comanda <code>ip</code>. Sintaxa generală este: 
</p>
<pre class="code bash"><span class="kw2">ip</span> OBJECT COMMAND
<span class="kw2">ip</span> <span class="br0">&#91;</span>options<span class="br0">&#93;</span> OBJECT COMMAND
<span class="kw2">ip</span> OBJECT <span class="kw3">help</span></pre>

<p>
Obiectele cu care vom lucra în general la USO sunt: 
</p>
<div class="table sectionedit6"><table class="inline">
	<tr class="row0">
		<th class="col0 leftalign"> OBJECT             </th><th class="col1 leftalign"> Forma abreviată  </th><th class="col2"> Descriere </th>
	</tr>
	<tr class="row1">
		<td class="col0 leftalign"> <code>link</code>  </td><td class="col1 centeralign">  <code>l</code>  </td><td class="col2"> Network device și stadiul legăturii </td>
	</tr>
	<tr class="row2">
		<td class="col0"> <code>address</code> </td><td class="col1 centeralign">  <code>addr</code> sau <code>a</code>  </td><td class="col2"> adresă IPv4 sau IPv6 </td>
	</tr>
	<tr class="row3">
		<td class="col0"> <code>route</code> </td><td class="col1 centeralign">  <code>r</code>  </td><td class="col2"> Rută (gateway) </td>
	</tr>
</table></div>
<!-- EDIT6 TABLE [2800-3023] -->
<p>
Observați că obiectele au și o formă abreviată pentru a ne face comenzile mai scurte. De exemplu comanda <code>ip address show</code> se transformă, spre exemplu, în <code>ip a s</code>. 
</p>

<p>

</div></p>
</p>

</div>
<!-- EDIT5 SECTION "1. Formatul comenzii ''ip''" [2507-3211] -->
<h3 class="sectionedit7" id="sumar_al_comenzilor_importante">2. Sumar al comenzilor importante</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> Cum adaug o adresă IP pe o interfață?</div>
</li>
</ul>
<pre class="code bash"><span class="kw2">ip</span> address add 192.168.1.1<span class="sy0">/</span><span class="nu0">24</span> dev eth0</pre>

<p>
Pentru modificare se pot folosi <code>{add | change | replace}</code>
</p>
<ul>
<li class="level1"><div class="li"> Cum șterg o adresă IP pe o interfață?</div>
</li>
</ul>
<pre class="code bash"><span class="kw2">ip</span> address del IFADDR dev STRING</pre>
<ul>
<li class="level1"><div class="li"> Cum afișez adresa IP a unei interfațe?</div>
</li>
</ul>
<pre class="code bash"> <span class="kw2">ip</span> address show dev eth0 </pre>
<ul>
<li class="level1"><div class="li"> Cum afișez informații despre toate interfețele?</div>
<ul>
<li class="level4"><div class="li"> Toate interfețele: <code>ip address show</code></div>
</li>
<li class="level4"><div class="li"> Doar cele active: <code>ip address show up</code> sau <code>ip link show up</code></div>
</li>
</ul>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> Cum adaug default gateway?</div>
</li>
</ul>
<pre class="code bash"> <span class="kw2">ip route</span> add default via 10.10.10.1 </pre>
<ul>
<li class="level1"><div class="li"> Cum șterg default gateway?</div>
</li>
</ul>
<pre class="code bash"> <span class="kw2">ip route</span> delete 10.0.1.0<span class="sy0">/</span><span class="nu0">25</span> via 10.10.10.1 </pre>
<ul>
<li class="level1"><div class="li"> Cum afișez default gateway-ul?</div>
</li>
</ul>
<pre class="code bash"> <span class="kw2">ip route</span> show </pre>
<ul>
<li class="level1"><div class="li"> Cum actualizez server-ul <abbr title="Domain Name System">DNS</abbr>?</div>
<ul>
<li class="level4"><div class="li"> O variantă: editare <code>/etc/resolv.conf</code></div>
</li>
<li class="level4"><div class="li"> Altă variantă: <code>/etc/network/interfaces</code> (pe sisteme Debian-based, opțiunea <code>dns-nameservers</code>)</div>
</li>
</ul>
</li>
</ul>
<ul>
<li class="level1"><div class="li"> Cum activez o interfață de rețea?</div>
</li>
</ul>
<pre class="code bash"><span class="kw2">ip link</span> <span class="kw1">set</span> eth0 up</pre>

</div>
<!-- EDIT7 SECTION "2. Sumar al comenzilor importante" [3212-4348] -->
<h2 class="sectionedit8" id="configurarea_retelei_in_linux">3. Configurarea rețelei în Linux</h2>
<div class="level2">

</div>
<!-- EDIT8 SECTION "3. Configurarea rețelei în Linux" [4349-4396] -->
<h3 class="sectionedit9" id="interfete_de_retea">3.1. Interfețe de rețea</h3>
<div class="level3">

<p>
Interfețele de rețea reprezintă dispozitivele prin intermediul cărora un host se poate conecta la o rețea de calculatoare. Cele mai întâlnite sunt plăcile de rețea Ethernet care sunt nelipsite din aproape orice calculator. Alte exemple de interfețe de rețea sunt adaptoarele WiFi sau interfețele virtuale care, chiar dacă nu conectează fizic un calculator la o rețea, pot participă la interconectarea calculatoarelor (ex: interfețe folosite în virtualizare sau pentru tunelare).
</p>

<p>
Cel mai simplu mod de a determina interfețele de rețea prezente pe un host este de a rula comanda <code>ip address show</code>:
</p>
<pre class="code bash"><span class="co4">student@uso:~$ </span><span class="kw2">ip</span> address show
<span class="br0">&#91;</span>...<span class="br0">&#93;</span>
<span class="nu0">2</span>: eth0: <span class="sy0">&lt;</span>BROADCAST,MULTICAST,UP,LOWER_UP<span class="sy0">&gt;</span> mtu <span class="nu0">1500</span> qdisc pfifo_fast state UP group default qlen <span class="nu0">1000</span>
    link<span class="sy0">/</span>ether bc:ae:c5:1c:06:<span class="nu0">81</span> brd ff:ff:ff:ff:ff:ff
    inet 192.168.1.103<span class="sy0">/</span><span class="nu0">24</span> brd 192.168.1.255 scope global eth0
       valid_lft forever preferred_lft forever
    inet6 fe80::beae:c5ff:fe1c:<span class="nu0">681</span><span class="sy0">/</span><span class="nu0">64</span> scope <span class="kw2">link</span> 
       valid_lft forever preferred_lft forever
<span class="br0">&#91;</span>...<span class="br0">&#93;</span></pre>

<p>
Ce informații (din curs) observați în output-ul de mai sus?
</p>

<p>
Pentru a vedea informații <strong>doar</strong> despre o interfață de rețea:
</p>
<pre class="code bash"><span class="co4">student@uso:~$ </span><span class="kw2">ip</span> address show eth0
<span class="co4">student@uso:~$ </span><span class="kw2">ip</span> address show dev eth0</pre>

<p>
Comanda de mai sus afișează absolut toate interfețele de rețea din sistem (inclusiv cele neconfigurate/inactive). Pentru a vedea doar interfețele de rețea funcționale (cu legătură activă) folosim comanda: 
</p>
<pre class="code bash"><span class="co4">student@uso:~$ </span><span class="kw2">ip link</span> show up
<span class="br0">&#91;</span>...<span class="br0">&#93;</span>
&nbsp;
<span class="co4">student@uso:~$ </span><span class="kw2">ip</span> address show up
<span class="br0">&#91;</span>...<span class="br0">&#93;</span>
<span class="nu0">2</span>: eth0: <span class="sy0">&lt;</span>BROADCAST,MULTICAST,UP,LOWER_UP<span class="sy0">&gt;</span> mtu <span class="nu0">1500</span> qdisc pfifo_fast state UP mode DEFAULT group default qlen <span class="nu0">1000</span>
    link<span class="sy0">/</span>ether bc:ae:c5:1c:06:<span class="nu0">81</span> brd ff:ff:ff:ff:ff:ff
<span class="br0">&#91;</span>...<span class="br0">&#93;</span></pre>

<p>
Ce diferență este între output-ul celor două comenzi? Notă: am folosit două obiecte diferite (<code>link</code> vs. <code>address</code>). 
</p>

<p>
Inspectarea tabelei de rutare (pentru gateway) se face folosind:
</p>
<pre class="code bash"><span class="co4">student@uso:~$ </span> <span class="kw2">ip route</span> show
default via 192.168.1.1 dev eth0  proto static 
192.168.1.0<span class="sy0">/</span><span class="nu0">24</span> dev eth0  proto kernel  scope <span class="kw2">link</span>  src 192.168.1.103  metric <span class="nu0">1</span> 
<span class="br0">&#91;</span>...<span class="br0">&#93;</span></pre>

<p>
Observați pe a doua linie, prima coloană cum este specificată rețeaua din care face parte gateway-ul. 
</p>

</div>
<!-- EDIT9 SECTION "3.1. Interfețe de rețea" [4397-6691] -->
<h3 class="sectionedit10" id="configurari_temporare">3.2. Configurări temporare</h3>
<div class="level3">

<p>
Configurările inițiale de rețea ale unei interfețe pot fi modifcate în diferite moduri: prin schimbarea adresei IP și/sau a măștii de rețea, prin schimbarea rutei implicite sau a serverului <abbr title="Domain Name System">DNS</abbr>. Dacă modificările nu persistă după un restart al sistemului spunem că aveam de-a face cu o <strong><em>configurare temporară</em></strong>.
</p>

<p>
Acest tip de configurare este util în momentul în care se experimentează cu diferite opțiuni sau atunci când apare o situație neobișnuită și configurarea implicită a interfețelor trebuie schimbată, de exemplu, dacă gateway-ul obișnuit (provider-ul de Internet) este inaccesibil temporar și avem la dispoziție un gateway alternativ (conexiunea 3G) am dori să schimbăm ruta implicită (<em>default gateway</em>) pentru a restabili conexiunea cu Internetul.
</p>

</div>

<h4 id="statice">3.2.1 Statice</h4>
<div class="level4">

<p>
Sintaxa generală folosind iproute2 este:
</p>
<pre class="code bash"><span class="kw2">ip</span> address add <span class="br0">&#123;</span>ip_addr<span class="sy0">/</span>mask<span class="br0">&#125;</span> dev <span class="br0">&#123;</span>interface<span class="br0">&#125;</span></pre>

<p>
Pentru a configura static și temporar interfața <code>eth0</code> cu adresa <code>192.168.1.12</code> și masca de rețea <code>24</code> (<code>255.255.255.0</code>) folosim comanda următoare:
</p>
<pre class="code bash"><span class="co4">student@uso:~$ </span><span class="kw2">sudo</span> <span class="kw2">ip</span> address add 192.168.1.12<span class="sy0">/</span><span class="nu0">24</span> dev eth0</pre>

<p>
<p><div class="noteimportant">
Observați că modificarea configurației unei interfețe trebuie făcută ca root prin prefixarea comenzii cu <code>sudo</code>, în vreme ce pentru inspectarea configurațiilor o puteam face și fără privilegii.

</div></p>
</p>

<p>
O altă comandă care poate fi folosită pentru configurări temporare este <code>route</code>. Cu ajutorul acesteia putem modifica <em>default gateway</em> (ruta implicită) a unei rețele astfel:
</p>
<pre class="code">student@uso:~$ sudo ip route add default via 192.168.2.2</pre>

<p>
<p><div class="noteimportant">
Se observă că și modificarea <em>default gateway</em> necesită privilegii de root și trebuie prefixată cu <code>sudo</code>.

</div></p>
</p>

<p>
<p><div class="notewarning">
</p>

<p>
Un <em>default gateway</em> trebuie să se afle întotdeauna în aceeași rețea cu host-ul. Cu alte cuvinte ambele trebuie să aibă aceeași mască de rețea. În caz contrar se va obține un mesaj de eroare care ne atenționeză că rețeaua gateway-ului nu este accesibilă:
</p>
<pre class="code">student@uso:~$ sudo ip route add 192.168.1.0/24 via 10.0.0.15
RTNETLINK answers: Network is unreachable</pre>

<p>

</div></p>
</p>

</div>

<h4 id="dinamice">3.2.2 Dinamice</h4>
<div class="level4">

<p>
Spre deosebire de comenzile anterioare, care foloseau valori statice (constante) pentru parametrii de configurare, o configurare dinamică presupune că aceste valori se determină automat prin diferite mecanisme. Un astfel de mecanism este protocolul <em>DHCP</em> (<em>Dynamic Host Configuration Protocol</em>). Configurarea automată a unei interfețe de rețea prin DHCP poate fi făcută cu utilitarul <code>dhclient</code>. Acesta primește ca parametru numele interfeței care se vrea a fi configurată:
</p>
<pre class="code">student@uso:~$ sudo dhclient eth0</pre>

<p>
Configurările obișnuite care se obțin prin DHCP sunt: adresa IP și masca de rețea, <em>default gateway</em>, precum și server <abbr title="Domain Name System">DNS</abbr>.
</p>

</div>
<!-- EDIT10 SECTION "3.2. Configurări temporare" [6692-9662] -->
<h3 class="sectionedit11" id="configurari_permanente">3.3. Configurări permanente</h3>
<div class="level3">

<p>
Configurarea permanentă presupune că setările interfețelor de rețea vor fi disponibile și după un restart al sistemului. Acest efect se obțiune prin salvarea configurațiilor în cadrul unor fișiere. Sistemele bazate pe Ubuntu/Debian folosesc în mod convențional fișierul <code>/etc/network/interfaces</code> pentru salvarea configurațiilor de adresă IP, mască de rețea și <em>default gateway</em>  și fișierul <code>/etc/resolv.conf</code> pentru salvarea adresei serverului <abbr title="Domain Name System">DNS</abbr>.
</p>

<p>
<p><div class="noteclassic">
Pe unele sisteme Linux configurarea interfețelor de rețea este administrată de un serviciu de background numit <em>NetworkManager</em>. Acest daemon ne oferă o configurare facilă a interfețelor de rețea, în special a adaptoarelor WiFi și a diferitelor modem-uri 3G/4G. Este posibil însă ca el să interfereze cu modul convențional de configurare a interfețelor: comenzi temporare și fișiere de configurare. Acesta poate fi oprit, în caz de probleme, prin comanda: 
</p>
<pre class="code bash"><span class="co4">student@uso:~$ </span><span class="kw2">sudo</span> service network-manager stop</pre>

<p>

</div></p>
</p>

</div>

<h4 id="statice1">3.3.1. Statice</h4>
<div class="level4">

<p>
Pentru a configura o interfață în mod permanent, static, trebuie să adăugăm în fișierul <code>/etc/network/interfaces</code> o intrare similară cu:
</p>
<pre class="code">iface eth0 inet static
    address 192.168.0.2
    netmask 255.255.255.0
    gateway 192.168.0.1</pre>

<p>
Linia <code>iface eth0 inet static</code> specifică interfața de configurat (<code>eth0</code>) și metoda de configurare (statică), linia <code>address 192.168.0.2</code> specifică adresa pe care sa o primească interfața, linia <code>netmask 255.255.255.0.</code> specifică ce mască de rețea să primească interfața, iar linia <code>gateway 192.168.0.1</code> specifică care este adresa default gateway-ului. Pentru a activa o interfață configurată in <code>/etc/network/interfaces</code> folosim comenzile <code>ip link set dev eth0 up</code> (pentru activarea interfeței), respectiv <code>ip link set dev eth0 down</code> (pentru dezactivarea interfeței). Ambele comenzi vor primi ca parametru numele interfeței.
</p>

<p>
Ștergerea completă a configurațiilor interfeței se fac cu <code>ip address flush dev eth0</code>. 
</p>
<pre class="code">student@uso:~$ ip address show
lo        Link encap:Local Loopback  
          inet addr:127.0.0.1  Mask:255.0.0.0
          [...]
          
student@uso:~$ ip route show

student@uso:~$ sudo ip link set dev eth0 up

student@uso:~$  ip address show         
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default 
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
[...]
2: eth0: &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc pfifo_fast state UP group default qlen 1000
    link/ether bc:ae:c5:1c:06:81 brd ff:ff:ff:ff:ff:ff
    inet 192.168.0.2/24 brd 192.168.0.255 scope global eth0
[...]


student@uso:~$ ip route show
default via 192.168.0.1  dev eth0  proto static 
192.168.1.0/24 dev eth0  proto kernel  scope link  src 192.168.0.2  metric 1 

student@uso:~$ sudo ip link set dev eth0 down
student@uso:~$ ip address show up
1: lo: &lt;LOOPBACK,UP,LOWER_UP&gt; mtu 65536 qdisc noqueue state UNKNOWN group default 
    link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
    inet 127.0.0.1/8 scope host lo
[...]
</pre>

<p>
Pentru a configura un server <abbr title="Domain Name System">DNS</abbr>, lucru posibil doar în mod permanent, trebuie să adăugăm în fișierul <code>/etc/resolv.conf</code> o linie de forma:
</p>
<pre class="code">nameserver 8.8.8.8</pre>

<p>
Linia conține cuvântul cheie <code>nameserver</code> și adresa acestuia. 
</p>

<p>
<p><div class="notetip">
<code>8.8.8.8</code> și <code>8.8.4.4</code> sunt două server-e <abbr title="Domain Name System">DNS</abbr> publice puse la dispoziție de către Google.

</div></p>
</p>

</div>

<h4 id="dinamice1">3.3.2. Dinamice</h4>
<div class="level4">

<p>
Pentru a configura o interfață în mod permanent, dinamic, trebuie să adăugăm în fișierul <code>/etc/network/interfaces</code> o intrare de forma:
</p>
<pre class="code">iface eth0 inet dhcp</pre>

<p>
Linia specifică numele interfeței ce vrem să o configurăm (<code>eth0</code>) și tipul de configurare (dinamică, prin DHCP). Le fel ca înainte pentru a activa sau dezactiva configurarea folosim comenzile <code>ifup</code>, respectiv <code>ifdown</code>, urmate de numele interfeței.
</p>

<p>
<p><div class="notetip">O documentație completă a sintaxei fișierului de configurare <code>/etc/network/interfaces</code> se găsește pe <a href="https://wiki.debian.org/NetworkConfiguration" class="urlextern" title="https://wiki.debian.org/NetworkConfiguration"  rel="nofollow">wiki-ul Debian</a>.
</p>

<p>
Rețineți că acest fișier îl găsiți doar pe distribuții derivate din Debian: Debian, Ubuntu, Linux Mint etc. Pe distribuții precum Fedora sau Arch Linux există alte abordări. 

</div></p>
</p>

</div>
<!-- EDIT11 SECTION "3.3. Configurări permanente" [9663-14110] -->
<h3 class="sectionedit12" id="comenzi_de_verificare">4. Comenzi de verificare</h3>
<div class="level3">

<p>
Sunt trei comenzi foarte importante pentru verificarea permanentă a configurațiilor de rețea:
</p>
<ul>
<li class="level1"><div class="li"> Afișarea tuturor interfețelor</div>
</li>
</ul>
<pre class="code bash"><span class="kw2">ip addr</span> show</pre>
<ul>
<li class="level1"><div class="li"> Afișarea tuturor interfețelor <strong>active</strong> (în starea <strong>LINK UP</strong>)</div>
</li>
</ul>
<pre class="code bash"><span class="kw2">ip link</span> show</pre>
<ul>
<li class="level1"><div class="li"> Afișarea tabelei de rutare (e.g. pentru default gateway)</div>
</li>
</ul>
<pre class="code bash"><span class="kw2">ip route</span> show</pre>

<p>
<p><div class="notetip">Prima formă de troubleshooting când ceva nu merge este afișarea tabelei de rutare (<code><strong>ip route show</strong></code> sau prescurtat <code><strong>ip r s</strong></code>). Acolo vedem majoritatea celor mai frecvente greșeli:
</p>
<ul>
<li class="level1"><div class="li"> omiterea ridicării interfeței</div>
</li>
<li class="level1"><div class="li"> folosirea unei adrese greșite </div>
</li>
<li class="level1"><div class="li"> folosirea unei măști greșite</div>
</li>
<li class="level1"><div class="li"> omiterea configurării default gateway-ului</div>
</li>
<li class="level1"><div class="li"> folosirea unui gateway greșit</div>
</li>
</ul>

<p>

</div></p>
</p>

</div>
<!-- EDIT12 SECTION "4. Comenzi de verificare" [14111-14924] -->
<h1 class="sectionedit13" id="exercitii">Exerciții</h1>
<div class="level1">

<p>
<p><div class="notewarning">
La fiecare exercițiu citiți cu atenție care parte a exercițiului trebuie rezolvată <strong>pe mașina fizică</strong>, care trebuie rezolvată pe mașina virtuală <strong>dvorak</strong>, <strong>vivaldi</strong> sau <strong>verdi</strong>. 
</p>

<p>
Credențialele de autentificare pentru toate maşinile virtuale sunt: utilizator <code>student</code>, parola <code>student</code>.

</div></p>
</p>

<p>
<p><div class="notetip">
Dezactivarea/deconfigurarea completă a unsei interfețe, utilă pentru orice configurare de la zero (dinamică sau statică, temporară sau permanentă) se face cu ajutorul comenzilor:
</p>
<pre class="code bash"><span class="co4">student@uso:~$ </span><span class="kw2">sudo</span> <span class="kw2">ip</span> address flush dev <span class="sy0">&lt;</span>INTERFACE_NAME<span class="sy0">&gt;</span>
<span class="co4">student@uso:~$ </span><span class="kw2">sudo</span> <span class="kw2">ip link</span> <span class="kw1">set</span> dev <span class="sy0">&lt;</span>INTERFACE_NAME<span class="sy0">&gt;</span> down</pre>

<p>
E recomandat <strong>să executați aceste comenzi</strong> înainte de a vă apuca efectiv de exericțiile de configurare <strong>pe orice interfață</strong>

</div></p>
</p>

<p>
<p><div class="noteimportant">Orice configurare care necesită editarea unui fișier se va face folosind <code><strong>vim</strong></code> (sau <code>nano</code> dacă vă e mult mai ușor așa). Configurările făcute în editoare <abbr title="Graphical User Interface">GUI</abbr> nu vor fi punctate. 
</div></p>
</p>

</div>
<!-- EDIT13 SECTION "Exerciții" [14925-16344] -->
<h3 class="sectionedit14" id="pregatirea_setup-ului_15p">1. Pregătirea setup-ului (1.5p)</h3>
<div class="level3">

<p>
<p><div class="notewarning">De rezolvarea acestui exercițiu depind toate celelalte. Chemați asistentul de fiecare dată când întâmpinați probleme majore. La final asigurați-vă, pentru o bună funcționare a calculatoarelor, că cele trei mașini virtuale au 256 <abbr title="Megabyte">MB</abbr> RAM. 
</div></p>
</p>

<p>
Deschideți VirtualBox și importați cele <strong>trei fișiere <code>.ova</code></strong>. 
</p>

<p>
<p><div class="noteimportant">
<strong>Atenție</strong>: când importați mașina în VirtualBox, să bifați opțiunea <strong><em>Reinitialize the MAC address of all network cards</em></strong>!

</div></p>
</p>

<p>
De asemenea, pentru mașina virtuală <code>dvorak</code> avem nevoie de o <a href="https://www.virtualbox.org/manual/ch06.html#network_hostonly" class="urlextern" title="https://www.virtualbox.org/manual/ch06.html#network_hostonly"  rel="nofollow">interfață host-only</a>. E posibil ca atunci când importâm mașina virtuală să primim eroarea <code>Invalid settings detected</code>. Soluția este că trebuie să adăugăm o interfață virtuală de rețea care să conecteze mașina fizică de cea virtuală. Aceasta se face astfel: 
</p>
<ul>
<li class="level1"><div class="li"> Din VirtualBox mergem la <code>File</code> –&gt; <code>Preferences</code> –&gt; <code>Network</code>. Mergem la tab-ul <code>Host-only Networks</code> și apăsăm butonul de add. Urmăriți detalii din poza de mai jos: </div>
</li>
</ul>

<p>
<a href="../../../../lib/exe/fetch.php%3Fhash=179e8e&amp;media=http%253A%252F%252Focw.cs.pub.ro%252Fcourses%252F_media%252Fuso%252Flaboratoare%252F3dxym.png" class="media" title="http://ocw.cs.pub.ro/courses/_media/uso/laboratoare/3dxym.png"><img src="../../../../lib/exe/fetch.php%3Fhash=179e8e&amp;w=500&amp;tok=d7b19d&amp;media=http%253A%252F%252Focw.cs.pub.ro%252Fcourses%252F_media%252Fuso%252Flaboratoare%252F3dxym.png" class="media" alt="" width="500" /></a>
</p>
<ul>
<li class="level1"><div class="li"> Observați că s-a adăugat o nouă interfață <code>vboxnet0</code>. Inspectați informațiile despre aceasta <strong>pe mașina fizică</strong>:</div>
</li>
</ul>
<pre class="code bash"><span class="co4">student@uso:~$ </span><span class="kw2">ip</span> address show dev vboxnet0</pre>

<p>
<p><div class="noteimportant">Notați adresa IP și masca de rețea. Vom avea nevoie de acestea. 
</div></p>
</p>

<p>
Mergeți la setările fiecărei mașini virtuale și inspectați setările de rețea: Click pe VM –&gt; Settings –&gt; Network. Selectați și <code>Advanced</code> pentru fiecare Network Adapter. 
</p>

<p>
Deschideți cele trei mașini virtuale. Inspectați <strong>toate</strong> interfețele de pe acestea (inclusiv cele inactive). 
</p>

<p>
<p><div class="notetip">Încercați să identificați care interfață de rețea va fi utilă pentru <code>ssh</code> în mașina virtuală, respectiv ce adresă IP veți folosi. Veți avea oricum două exerciții pe <code>dvorak</code> care vă vor ajuta cu conexiunea <code>ssh</code>.
</div></p>
</p>

</div>
<!-- EDIT14 SECTION "1. Pregătirea setup-ului (1.5p)" [16345-18422] -->
<h3 class="sectionedit15" id="configurare_dinamica_temporara_05p">2. Configurare dinamică temporară (0.5p)</h3>
<div class="level3">

<p>
<p><div class="noteimportant">Exercițiul are loc pe mașina virtuală <strong>vivaldi</strong>. 
</div></p>
</p>

<p>
<strong>Pe mașina virtuală <code>vivaldi</code></strong> configurați interfața <code>eth0</code> în mod dinamic, temporar. 
</p>

<p>
După ce ați observat că ping-ul funcționează corect, afișați tabela de routare. Identificați <strong>default gateway</strong>. Testați conectivitatea către gateway, respectiv către <code>8.8.8.8</code>. Testați conectivitatea la Internet (către <code>google.com</code>). 
</p>

<p>
După ce ați demonstrat asistentului că aveți conectivitate la internet resetați mașina (comanda <code>sudo reboot</code>) mașina și rulați comanda <code>ping google.com</code> din nou. Observați că după reboot nu mai avem conectivitate la internet. Afișați din nou tabela de routare.
</p>

<p>
<p><div class="notetip">Prima formă de troubleshooting când ceva nu merge este afișarea tabelei de rutare (<code>ip route show</code>). Acolo vedem majoritatea greșelilor de configurare: 
</p>
<ul>
<li class="level1"><div class="li"> omiterea ridicării interfeței</div>
</li>
<li class="level1"><div class="li"> folosirea unei adrese greșite</div>
</li>
<li class="level1"><div class="li"> folosirea unei măști greșite</div>
</li>
<li class="level1"><div class="li"> omiterea configurării default gateway-ului</div>
</li>
<li class="level1"><div class="li"> folosirea unui gateway greșit.</div>
</li>
</ul>

<p>
De asemenea, conectivitatea trebuie testată între host și gateway (validarea link-ului către gateway), între host și un IP din Internet (validarea configurărilor de rețea: IP + default gateway) și între host și o adresă web (validarea configurărilor de <abbr title="Domain Name System">DNS</abbr>)

</div></p>
</p>

</div>
<!-- EDIT15 SECTION "2. Configurare dinamică temporară (0.5p)" [18423-20171] -->
<h3 class="sectionedit16" id="configurare_statica_temporara_05p">3. Configurare statică temporară (0.5p)</h3>
<div class="level3">

<p>
Inspectați configurațiile de rețea a interfeței <code>vboxnet0</code> <strong>de pe mașina fizică</strong>. 
</p>

<p>
<p><div class="noteimportant">
Exercițiul are loc pe mașina virtuală <strong>dvorak</strong>.

</div></p>
</p>

<p>
Rulați comenzile de ștergere a configurațiilor de pe interfața <code>eth1</code>.
</p>

<p>
<p><div class="notetip">
Este posibil să fie deja șterse configurațiile pe interfața <code>eth1</code>, caz în care nu mai trebuie să faceți nimic.

</div></p>
</p>

<p>
Apoi, configurați pe interfața de rețea <code>eth1</code> a mașinii virtuale <strong>dvorak</strong> o adresă asignabilă din spațiul adresei IP+netmask ale interfeței <code>vboxnet0</code> de pe mașina fizică. Apoi <em>ridicați</em> interfața de rețea.
</p>

<p>
<p><div class="notetip">
Adică dacă adresa IP a interfeței <code>vboxnet0</code> a <strong>sistemului fizic</strong> este <code>192.168.56.1</code>, puneți adresa IP <code>192.168.56.2/24</code> pe interfața <code>eth1</code> a mașinii virtuale <strong>dvorak</strong>.

</div></p>
</p>

<p>
<p><div class="noteimportant">
Dupa ce ati realizat configuratia, trebuie sa faceti bring-up interfetei <code>eth1</code> astfel (verificati apoi ca are stadiul link up si IP configurat):
</p>
<pre class="code bash"><span class="co4">student@dvorak:~$ </span><span class="kw2">sudo</span> <span class="kw2">ip link</span> <span class="kw1">set</span> dev eth1 up</pre>

<p>

</div></p>
</p>

<p>
Testați conectivitatea cu <code>vboxnet0</code> (dați <code>ping</code> în adresa IP de pe aceasta).
</p>

<p>
<p><div class="noteimportant">
Nu reporniți mașina virtuală și nu ștergeți configurația de pe <code>eth1</code>..

</div></p>
</p>

</div>
<!-- EDIT16 SECTION "3. Configurare statică temporară (0.5p)" [20172-21856] -->
<h3 class="sectionedit17" id="ssh_via_host-only_05p">4. ssh via host-only (0.5p)</h3>
<div class="level3">

<p>
<p><div class="noteimportant">Exercițiul are loc pe mașina virtuală <code><strong>dvorak</strong></code>
</div></p>
</p>

<p>
O altă metodă de a testa conectivitatea de la punctul anterior este de a face <code>ssh</code> în mașina virtuală <code>dvorak</code>. Pentru aceasta avem nevoie de IP-ul de pe <code>eth1</code>. Testați legătura dintre mașina fizică și mașina virtuală <code>dvorak</code> autentificându-vă prin <code>ssh</code> ca <code>student</code> și folosind ca host adresa IP de pe <code>eth1</code>. 
</p>

</div>
<!-- EDIT17 SECTION "4. ssh via host-only (0.5p)" [21857-22321] -->
<h3 class="sectionedit18" id="configurare_statica_temporara_completa_2p">5. Configurare statică temporară completă (2p)</h3>
<div class="level3">

<p>
<p><div class="noteimportant">
Exercițiul are loc pe mașina virtuală <code><strong>dvorak</strong></code>.

</div></p>
</p>

<p>
Configurați interfața de rețea <code>eth0</code> de pe <code>dvorak</code> static cu adresa ip <code>10.0.2.15/24</code>. Ridicați interfața. Testați conectivitatea la internet: <code>ping google.com</code>. Observați că nu funcționează! Mai avem nevoie de <em>default gateway</em> și de <abbr title="Domain Name System">DNS</abbr>. 
</p>

<p>
Adăugați o rută implicită via <code>10.0.2.2</code> pentru <code>eth0</code> (rețeaua <code>10.0.2.0/24</code>). Apoi configurați ca server <abbr title="Domain Name System">DNS</abbr> <code>8.8.4.4</code>. Testați din nou conectivitatea la internet: <code>ping google.com</code>. 
</p>

</div>
<!-- EDIT18 SECTION "5. Configurare statică temporară completă (2p)" [22322-23296] -->
<h3 class="sectionedit19" id="configurare_permanenta_pe_sistem_25p">6. Configurare permanentă pe sistem (2.5p)</h3>
<div class="level3">

<p>
<p><div class="noteimportant">Exercițiul se desfășoară pe mașina virtuală <code><strong>dvorak</strong></code>
</div></p>
</p>

<p>
<strong>[1p]</strong> Configurați <em>dinamic, permanent</em>, interfața <code>eth0</code> de pe <code>dvorak</code>. Activați interfața și testați conectivitatea la Internet cu comanda <code>ping google.com</code>.
</p>

<p>
<p><div class="notewarning">
Rețineți să activați interfața după ce ați făcut configurările. Ele ar putea fi corecte dar interfața să fie doar inactivă. Comenzile pentru activarea/dezactivarea unei intefețe sunt <code>ip link set dev IFNAME up</code>/<code>ip link set dev IFNAME down</code>.

</div></p>
</p>

<p>
<strong>[1p]</strong> Configurați <em>static, permanent</em>, interfața <code>eth1</code> cu adresa IP și masca de rețea folosite la exercițiul 3. Testați conectivitatea dând <code>ping</code> către IP-ul interfeței <code>vboxnet0</code> de pe mașina fizică. 
</p>

<p>
După ce ați făcut ambele configurații restartați mașina virtuală <code>dvorak</code> și re-verificați configurațiile de pe <code>eth0</code> și <code>eth1</code> precum și conectivitatea la internet și către mașina fizică prin <code>vboxnet0</code>. 
</p>

<p>
<strong>[0.5p]</strong> Afișați configurațiile <abbr title="Domain Name System">DNS</abbr> obținute de către mașina virtuală după reboot. 
</p>

<p>
<p><div class="notetip">Întotdeauna după configurări de rețea realizate prin fișiere trebuie făcute două lucruri:
</p>
<ul>
<li class="level1"><div class="li"> restartarea serviciului de networking (<code>sudo service networking restart</code>) sau reboot la mașină dacă acest restart nu funcționează</div>
</li>
<li class="level1"><div class="li"> validarea configurațiilor, afișând informații despre interfețe, tabela de routare și stadiul link-urilor:</div>
</li>
</ul>
<pre class="code bash"><span class="co4">student@uso:~$ </span><span class="kw2">ip addr</span> show
<span class="co4">student@uso:~$ </span><span class="kw2">ip route</span> show
<span class="co4">student@uso:~$ </span><span class="kw2">ip link</span> show</pre>

<p>

</div></p>
</p>

</div>
<!-- EDIT19 SECTION "6. Configurare permanentă pe sistem (2.5p)" [23297-25612] -->
<h3 class="sectionedit20" id="probleme_de_configurare_25p">7. Probleme de configurare (2.5p)</h3>
<div class="level3">

<p>
<p><div class="noteimportant">Exercițiul se desfășoară pe mașinile virtuale <code><strong>verdi</strong></code> și <code><strong>vivaldi</strong></code>
</div></p>
</p>

<p>
Ambele mașini virtuale <code><strong>verdi</strong></code> și <code><strong>vivaldi</strong></code> mai au o interfață de rețea, <code>eth1</code>. Scopul nostru este ca ele să poată comunica între ele prin această interfață (cum fac <code>dvorak</code> cu mașina fizică prin interfața host-only). 
</p>

<p>
Considerând că IP_A este adresa IP a interfeței <code>eth1</code> de pe mașina <code>vivaldi</code> și IP_B este adresa IP a interfeței <code>eth1</code> de pe mașina <code>verdi</code>, dorim să putem da ping de pe o mașină pe alta: de pe <code>vivaldi</code> să rulăm <code>ping IP_B</code> și de pe <code>verdi</code> să rulăm <code>ping IP_A</code>. Din păcate aceste interfețe sunt configurate greșit, și nu pot comunica între ele. Reparați greșeala de configurare astfel încât să meargă cele două comenzi <code>ping</code>. 
</p>

<p>
<p><div class="notetip">Ambele interfețe sunt configurate în mod static, permanent. Pentru ca mașinile să poată comunica între ele prin interfețele <code>eth1</code> trebuie ca acestea să aibă IP-uri din aceeași rețea.

</div></p>
</p>

<p>
<p><div class="notetip">
După ce schimbați configurația unei interfețe, dezactivați-o si reactivați-o pentru a încărca noile configurații.

</div></p>
</p>

</div>
<!-- EDIT20 SECTION "7. Probleme de configurare (2.5p)" [25613-27212] -->
<h3 class="sectionedit21" id="bonus_1_asocierea_unui_nume_cu_un_ip_1_karma_wouso">Bonus 1. Asocierea unui nume cu un IP (1 karma WoUSO)</h3>
<div class="level3">

<p>
<strong>Pe mașina <code>verdi</code></strong> faceți configurările necesare în fișierul <code>/etc/hosts</code> astfel încât să vă puteți conecta prin ssh la mașina virtuală <code>vivaldi</code> prin comanda <code>ssh student@antonio.vivaldi</code> (în loc să specificați adresa IP a mașinii scrieți numele <code>antonio.vivaldi</code>).
</p>

</div>
<!-- EDIT21 SECTION "Bonus 1. Asocierea unui nume cu un IP (1 karma WoUSO)" [27213-27771] -->
<h3 class="sectionedit22" id="bonus_2_nsswitch_2_karma_wouso">Bonus 2. Nsswitch (2 karma WoUSO)</h3>
<div class="level3">

<p>
<strong>Pe mașina fizică</strong> verificați că <code>ping google.com</code> merge. Adăugați linia <code>1.2.3.4 google.com</code> în fișierul <code>/etc/hosts</code>. Rulați <code>ping google.com</code>. Nu mai merge. Fără a mai modifica fișierul <code>/etc/hosts</code>, faceți configurările necesare astfel încât să meargă din nou comanda <code>ping google.com</code>
</p>

<p>
<p><div class="notetip">
Căutați în browser pe google.ro <code>linux change dns search order</code>. Hint: <code>nsswitch</code>. 

</div></p>
</p>

</div>
<!-- EDIT22 SECTION "Bonus 2. Nsswitch (2 karma WoUSO)" [27772-] --></div>
</body>
</html>

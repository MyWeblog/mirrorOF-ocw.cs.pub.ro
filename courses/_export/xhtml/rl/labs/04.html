    
    

<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8" />
  <title>rl:labs:04</title>
<meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="date" content="2015-10-05T23:49:13+0300"/>
<meta name="keywords" content="rl,labs,04"/>
<link rel="search" type="application/opensearchdescription+xml" href="../../../../lib/exe/opensearch.php" title="CS Open CourseWare"/>
<link rel="start" href="../../../../../courses.1.html"/>
<link rel="alternate" type="application/rss+xml" title="Recent Changes" href="../../../../feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current Namespace" href="../../../../feed.php%3Fmode=list&amp;ns=rl:labs"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="04.html"/>
<link rel="canonical" href="../../../../rl/labs/04.html"/>
<link rel="stylesheet" type="text/css" href="../../../../lib/exe/css.php%3Ft=arctic&amp;tseed=1476798676.css"/>
<script type="text/javascript">/*<![CDATA[*/var NS='rl:labs';var JSINFO = {"id":"rl:labs:04","namespace":"rl:labs","isadmin":0,"isauth":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="../../../../lib/exe/js.php%3Ftseed=1476798676"></script>
<script type="text/x-mathjax-config">/*<![CDATA[*/MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ["$","$"], ["\\(","\\)"] ],
        displayMath: [ ["$$","$$"], ["\\[","\\]"] ],
        processEscapes: true
    }
});
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
<script type="text/javascript">/*<![CDATA[*/
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
		  
/*!]]>*/</script>
<script type="text/javascript">/*<![CDATA[*/
var pageTracker = _gat._getTracker("UA-38383934-1");
pageTracker._initData();
pageTracker._trackPageview();
		  
/*!]]>*/</script>
</head>
<body>
<div class="dokuwiki export">



<h1 class="sectionedit1" id="laborator_4_vlan_virtual_lan">Laborator 4. VLAN (Virtual LAN)</h1>
<div class="level1">

</div>
<!-- EDIT1 SECTION "Laborator 4. VLAN (Virtual LAN)" [12-58] -->
<h2 class="sectionedit2" id="cunostinte_si_abilitati_ce_vor_fi_dobandite">Cunoștințe și abilități ce vor fi dobândite</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> Ce sunt rețelele locale virtuale (<em>Virtual Local Area Networks</em> – VLAN)?</div>
</li>
<li class="level1"><div class="li"> Tipuri de legături în VLAN-uri (access, trunk)</div>
</li>
<li class="level1"><div class="li"> Configurarea VLAN-urilor în Cisco IOS</div>
</li>
</ul>

</div>
<!-- EDIT2 SECTION "Cunoștințe și abilități ce vor fi dobândite" [59-298] -->
<h2 class="sectionedit3" id="navigare">Navigare</h2>
<div class="level2">

<p>
<strong><span class="curid"><a href="../../../../rl/labs/04.html" class="wikilink1" title="rl:labs:04">Laboratorul 4</a></span></strong>
</p>

</div>
<!-- EDIT4 PLUGIN_INCLUDE_START "rl:labs:04:meta:nav" [0-] --><div class="plugin_include_content plugin_include__rl:labs:04:meta:nav">
<div class="level2">

<div><div id="nojs_indexmenu_12344776415835607aa0763" data-jsajax="%26skipfile%3D%252B/sidebar/" class="indexmenu_nojs">

<ul class="idx">
<li class="level1"><div class="li"><a href="../../../../rl/labs/04/contents/00.html" class="wikilink1" title="rl:labs:04:contents:00">00. [5p] VLAN-uri în Cisco IOS</a></div></li>
<li class="level1"><div class="li"><a href="../../../../rl/labs/04/contents/01.html" class="wikilink1" title="rl:labs:04:contents:01">01. [10p] VLAN de management</a></div></li>
<li class="level1"><div class="li"><a href="../../../../rl/labs/04/contents/02.html" class="wikilink1" title="rl:labs:04:contents:02">02. [10p] Porturi în modul acces</a></div></li>
<li class="level1"><div class="li"><a href="../../../../rl/labs/04/contents/03.html" class="wikilink1" title="rl:labs:04:contents:03">03. [15p] Subnetare și VLAN-uri</a></div></li>
<li class="level1"><div class="li"><a href="../../../../rl/labs/04/contents/04.html" class="wikilink1" title="rl:labs:04:contents:04">04. [10p] Legătură de tip trunchi (trunk)</a></div></li>
<li class="level1"><div class="li"><a href="../../../../rl/labs/04/contents/05.html" class="wikilink1" title="rl:labs:04:contents:05">05. [20p] Extindere VLAN de management</a></div></li>
<li class="level1"><div class="li"><a href="../../../../rl/labs/04/contents/06.html" class="wikilink1" title="rl:labs:04:contents:06">06. [15p] Configurare legături de tip trunchi cascadate</a></div></li>
<li class="level1"><div class="li"><a href="../../../../rl/labs/04/contents/07.html" class="wikilink1" title="rl:labs:04:contents:07">07. [15p] Depanare probleme în lucrul cu VLAN-uri</a></div></li>
<li class="level1"><div class="li"><a href="../../../../rl/labs/04/contents/08.html" class="wikilink1" title="rl:labs:04:contents:08">08. [BONUS - 10p] VLAN nativ</a></div></li>
<li class="level1"><div class="li"><a href="../../../../rl/labs/04/contents/09.html" class="wikilink1" title="rl:labs:04:contents:09">09. [BONUS - 10p] Filtrare VLAN-uri pe legătura de tip trunchi</a></div></li>
</ul>
</div></div>

</div>
<!-- EDIT5 PLUGIN_INCLUDE_END "rl:labs:04:meta:nav" [0-] --></div>
<div class="level2">

</div>
<!-- EDIT3 SECTION "Navigare" [299-407] -->
<h2 class="sectionedit6" id="exercitii">Exerciții</h2>
<div class="level2">

</div>
<!-- EDIT7 PLUGIN_INCLUDE_START "rl:labs:04:contents:00" [0-] --><div class="plugin_include_content plugin_include__rl:labs:04:contents:00">

<h3 class="sectionedit9" id="p_vlan-uri_in_cisco_ios">00. [5p] VLAN-uri în Cisco IOS</h3>
<div class="level3">

<p>
Rețelele locale virtuale (<em>Virtual Local Area Networks</em> – VLANs) sunt moduri de a realiza o separație logică a unei rețele locale (<abbr title="Local Area Network">LAN</abbr>) în mai multe subrețele pe aceeași infrastructură fizică. Separația este realizată la nivelul Legătură de Date prin introducerea unui câmp suplimentar în antetul de nivel 2. VLAN-urile sunt identificate în cadrul frame-ului printr-un VLAN ID.
</p>

<p>
Configurarea VLAN-urilor se realizează pe switch-uri, mai exact pe interfețele/porturile switch-urilor. Stațiile nu au cunoaștere despre existența unor VLAN-uri; perspectiva lor este aceea a unei rețele locale, adică rețeaua virtuală aferentă unui VLAN ID. O stație se va găsi în VLAN-ul specific portului la care este conectată (configurație existentă pe switch).
</p>

<p>
În topologia Packet Tracer de la <a href="../../../../_media/rl/labs/04/contents/rl_lab-04_introducere-vlan.pkt" class="media mediafile mf_pkt" title="rl:labs:04:contents:rl_lab-04_introducere-vlan.pkt (6.4 KB)">această adresă</a> stațiile <code>PC0</code> și <code>PC2</code> fac parte din VLAN-ul <code>10</code>, iar stațiile <code>PC1</code> și <code>PC3</code> din VLAN-ul <code>20</code>. Observați că pot comunica doar două câte două, deși adresele lor IP sunt din același spațiu de adrese.
</p>

<p>
Configurarea celor două VLAN-uri a fost realizată pe switch-ul <code>Switch0</code>. Pentru a investiga configurația de VLAN-uri de pe switch-ul <code>Switch0</code>, rulați comenzile de mai jos și urmăriți output-ul acestora. Pentru a accesa intefața de configurare a switch-ului, urmații pașii:
</p>
<ol>
<li class="level1"><div class="li"> Dați click pe switch.</div>
</li>
<li class="level1"><div class="li"> Accesați tab-ul <code>CLI</code>.</div>
</li>
<li class="level1"><div class="li"> Apăsați tasta <code>Enter</code> pentru a apărea promptul de transmitere de comenzi pentru switch.</div>
</li>
<li class="level1"><div class="li"> Folosiți comanda <code>enable</code> (urmată de apăsarea tastei <code>Enter</code>) pentru a accesa modul privilegiat de configurare a switch-ului.</div>
</li>
</ol>

<p>
Comanda <code>show vlan brief</code><sup><a href="04.html#fn__1" id="fnt__1" class="fn_top">1)</a></sup> afișează informații despre VLAN-uri:
</p>
<pre class="code">Switch0#show vlan brief

VLAN Name                             Status    Ports
---- -------------------------------- --------- -------------------------------
1    default                          active    Fa4/1, Fa5/1
10   zece                             active    Fa0/1, Fa2/1
20   douazeci                         active    Fa1/1, Fa3/1
1002 fddi-default                     active    
1003 token-ring-default               active    
1004 fddinet-default                  active    
1005 trnet-default                    active  </pre>

<p>
Urmăriți că VLAN-ul cu ID-ul <code>10</code> (denumit și <code>zece</code>) conține porturile <code>Fa0/1</code> și <code>Fa2/1</code> adică porturile aferente stațiilor <code>PC0</code> și <code>PC2</code>. La fel, VLAN-ul cu ID-ul <code>20</code> (denumit și <code>douăzeci</code>) conține porturile <code>Fa1/1</code> și <code>Fa3/1</code> adică porturile aferente stațiilor <code>PC1</code> și <code>PC3</code>.
</p>

<p>
Pentru a observa configurația curentă a switch-ului, folosiți comanda <code>show running-config</code>:
</p>
<pre class="code">Switch0#show running-config
Building configuration...

Current configuration : 697 bytes
!
version 12.1
no service timestamps log datetime msec
no service timestamps debug datetime msec
no service password-encryption
!
hostname Switch0
!
no ip domain-lookup
!
spanning-tree mode pvst
!
interface FastEthernet0/1
 switchport access vlan 10
 switchport mode access
!
interface FastEthernet1/1
 switchport access vlan 20
 switchport mode access
!
interface FastEthernet2/1
 switchport access vlan 10
 switchport mode access
!
interface FastEthernet3/1
 switchport access vlan 20
 switchport mode access
!
[...]</pre>

<p>
Din output-ul comenzii observați că porturile sunt configurate în modul acces în VLAN-urile respective. Comenzile <code>switchport mode access</code> respectiv <code>switchport access VLAN &lt;VLAN-ID&gt;</code> au fost rulate în modul de configurare a fiecărui port pentru a adăuga respectivul port la VLAN.
</p>

</div>
<!-- EDIT9 SECTION "00. [5p] VLAN-uri în Cisco IOS" [1-] --><!-- EDIT8 PLUGIN_INCLUDE_END "rl:labs:04:contents:00" [0-] --></div>
<div class="level2">

</div>
<!-- EDIT10 PLUGIN_INCLUDE_START "rl:labs:04:contents:01" [0-] --><div class="plugin_include_content plugin_include__rl:labs:04:contents:01">

<h3 class="sectionedit12" id="p_vlan_de_management">01. [10p] VLAN de management</h3>
<div class="level3">

<p>
În topologia Packet Tracer de la <a href="../../../../_media/rl/labs/04/contents/rl_lab-04_de-ce-vlan.pkt" class="media mediafile mf_pkt" title="rl:labs:04:contents:rl_lab-04_de-ce-vlan.pkt (6.1 KB)">această adresă</a> se află o rețea cu un switch (<code>Switch0</code>) și trei stații. Toate stațiile sunt conectate una la cealaltă și inclusiv la switch-ul <code>Switch0</code> (și switch-ul are adresă IP).
</p>

<p>
<p><div class="noteimportant">
În Cisco IOS primul pachet trimis poate să nu fie de fapt trimis din cauza absenței tabelei ARP. De aceea când trimiteți un pachet în Packet Tracer la sau de la switch, prima oară nu va funcționa. Următoarele pachete, însă, vor funcționa. Detalii <a href="http://blog.ipspace.net/2007/04/why-is-first-ping-lost.html" class="urlextern" title="http://blog.ipspace.net/2007/04/why-is-first-ping-lost.html"  rel="nofollow">aici</a>.

</div></p>
</p>

<p>
În general un switch poate fi configurat direct în consola acestuia<sup><a href="04.html#fn__2" id="fnt__2" class="fn_top">2)</a></sup> sau de la distanță conectându-vă la switch folosind comanda <code>telnet</code> urmată de adresa IP a acestuia. Conectați-vă la switch-ul <code>Switch0</code> de pe fiecare dintre cele 3 stații urmând pașii:
</p>
<ol>
<li class="level1"><div class="li"> Dați click pe stație.</div>
</li>
<li class="level1"><div class="li"> Alegeți tab-ul <code>Desktop</code>.</div>
</li>
<li class="level1"><div class="li"> Dați click pe icon-ul <code>Command prompt</code>.</div>
</li>
<li class="level1"><div class="li"> Executați comanda <code>telnet 192.168.1.254</code>.</div>
<ul>
<li class="level2"><div class="li"> <code>192.168.1.254</code> este adresa IP a switch-ului.</div>
</li>
</ul>
</li>
</ol>

<p>
Observați că vă puteți conecta la switch-ul <code>Switch0</code> de pe oricare stație.
</p>

<p>
Dorim să securizăm accesul la switch-ul <code>Switch0</code>, permițând doar stației <code>Management</code> să se conecteze la acesta. Pentru acest lucru vom configura un nou VLAN, având ID-ul 100; din acest VLAN va face parte doar stația <code>Management</code>. Deseori acest VLAN poartă numele de <em>VLAN de management</em>.
</p>

<p>
Pentru a configura un VLAN pe un port al switch-ului, urmăm pașii:
</p>
<ol>
<li class="level1"><div class="li"> În consola de configurare rulăm comanda <code>enable</code> pentru activarea modului privilegiat (folosiți parola <code>student</code>).</div>
</li>
<li class="level1"><div class="li"> Intrăm în modul de configurare: <code>configure terminal</code></div>
</li>
<li class="level1"><div class="li"> Creăm VLAN-ul cu ID-ul 100: <code>vlan 100</code></div>
<ul>
<li class="level2"><div class="li"> Opțional putem configura și un nume pentru VLAN, să zicem <code>management</code>: <code>name management</code></div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Intrăm în modul de configurare al interfaței relevante: <code>interface Fa0/1</code></div>
</li>
<li class="level1"><div class="li"> Configurăm interfața/portul pentru modul acces: <code>switchport mode access</code></div>
</li>
<li class="level1"><div class="li"> Configurăm pe interfața de tip acces numărul VLAN-ului: <code>switchport access vlan 100</code></div>
</li>
</ol>

<p>
Succesiunea completă de comenzi este cea de mai jos (folosiți parola <code>student</code>):
</p>
<pre class="code">Switch0&gt;enable
Password: 
Switch0#configure terminal
Switch0(config)#vlan 100
Switch0(config-vlan)#name management
Switch0(config-vlan)#exit
Switch0(config)#interface Fa0/1
Switch0(config-if)#switchport mode access 
Switch0(config-if)#switchport access vlan 100</pre>

<p>
În acest moment stația <code>Management</code> se află în VLAN-ul 100. Trebuie să configurăm și switch-ul pentru a răspunde cererilor de configurare tot pe VLAN-ul 100. Pentru a putea fi configurat corespunzător, unui switch i se pot crea interfețe virtuale de forma <code>vlan X</code>, unde X este numărul VLAN-ului de pe care poate fi accesat în vederea configurării. Interfața implicită pentru orice switch este <code>vlan 1</code> pe care va trebui să o dezactivăm și să ștergem adresa IP:
</p>
<pre class="code">Switch0#configure terminal
Switch0(config)#interface vlan 1
Switch0(config-if)#shutdown
Switch0(config-if)#no ip address
Switch0(config-if)#exit</pre>

<p>
Vom configura adresa IP pe interfața <code>vlan 100</code> aferentă VLAN-ului 100:
</p>
<pre class="code">Switch0(config)#interface vlan 100
Switch0(config-if)#no shutdown
Switch0(config-if)#ip address 192.168.1.254 255.255.255.0</pre>

<p>
După această configurare, switch-ul <code>Switch0</code> va fi accesibil la adresa IP <code>192.168.1.254</code> doar de pe stația <code>Management</code>. Folosiți comanda <code>telnet 192.168.1.254</code> din interfața CLI a fiecărei stații pentru a verifica faptul că vă puteți conecta sau nu la switch-ul <code>Switch0</code>. Observați că doar de pe stația <code>Management</code> poate fi realizată conectarea.
</p>

<p>
<p><div class="noteclassic">
Conectivitatea între stații s-a păstrat. Nu a fost afectată de configurarea VLAN-ului de management.

</div></p>
</p>

</div>
<!-- EDIT12 SECTION "01. [10p] VLAN de management" [1-] --><!-- EDIT11 PLUGIN_INCLUDE_END "rl:labs:04:contents:01" [0-] --></div>
<div class="level2">

</div>
<!-- EDIT13 PLUGIN_INCLUDE_START "rl:labs:04:contents:02" [0-] --><div class="plugin_include_content plugin_include__rl:labs:04:contents:02">

<h3 class="sectionedit15" id="p_porturi_in_modul_acces">02. [10p] Porturi în modul acces</h3>
<div class="level3">

<p>
În topologia Packet Tracer de la <a href="../../../../_media/rl/labs/04/contents/rl_lab-04_vlan-access.pkt" class="media mediafile mf_pkt" title="rl:labs:04:contents:rl_lab-04_vlan-access.pkt (6.8 KB)">această adresă</a> se află o rețea cu un switch, o stație de management și 4 stații (<code>PC1</code>, <code>PC2</code>, <code>PC3</code>, <code>PC4</code>) folosite de utilizatori. Observați că cele 4 stații pot comunica între ele fiecare cu fiecare.
</p>

<p>
Dorim să izolăm <code>PC1</code> și <code>PC3</code> de celelalte două stații (<code>PC2</code> și <code>PC4</code>) astfel încât <code>PC1</code> să poată comunica doar cu <code>PC3</code>. Acest lucru se poate realiza configurând porturile aferente lui <code>PC1</code> și <code>PC3</code> să facă parte din VLAN-ul 10, iar porturile aferente lui <code>PC2</code> și <code>PC4</code> să facă parte din VLAN-ul 20. Vom crea cele două VLAN-uri:
</p>
<pre class="code">Switch0&gt;enable
Password: 
Switch0#configure terminal
Switch0(config)#vlan 10
Switch0(config-vlan)#name zece
Switch0(config-vlan)#exit
Switch0(config)#vlan 20
Switch0(config-vlan)#name douazeci
Switch0(config-vlan)#exit</pre>

<p>
Putem verifica adăugarea celor două VLAN-uri prin rularea comenzii <code>show vlan brief</code>. Comanda poate fi rulată și din modul de configurare dacă este prefixată de comanda <code>do</code>:
</p>
<pre class="code">Switch0(config)#do show vlan brief

VLAN Name                             Status    Ports
---- -------------------------------- --------- -------------------------------
1    default                          active    Fa1/1, Fa2/1, Fa3/1, Fa4/1
                                                Fa5/1, Fa6/1, Fa7/1
10   zece                             active    
20   douazeci                         active    
100  VLAN0100                         active    Fa0/1
1002 fddi-default                     active    
1003 token-ring-default               active    
1004 fddinet-default                  active    
1005 trnet-default                    active</pre>

<p>
Se observă adăugarea celor două noi VLAN-uri: <code>10</code> și <code>20</code>.
</p>

<p>
După ce am creat VLAN-urile în baza de date a switch-ului, trebuie să configurăm porturile să facă parte din acest VLAN-uri, după cum urmează:
</p>
<ul>
<li class="level1"><div class="li"> Fa1/1 - PC1 - VLAN 10</div>
</li>
<li class="level1"><div class="li"> Fa2/1 - PC2 - VLAN 20</div>
</li>
<li class="level1"><div class="li"> Fa6/1 - PC3 - VLAN 10</div>
</li>
<li class="level1"><div class="li"> Fa3/1 - PC4 - VLAN 20</div>
</li>
</ul>

<p>
Înainte de a fi configurate VLAN-urile porturile trebuie trecute în mod acces. Comenzile care trebuie rulate sunt cele de mai jos:
</p>
<pre class="code">Switch0#configure terminal
Switch0(config)#interface fa1/1
Switch0(config-if)#switchport mode access
Switch0(config-if)#switchport access vlan 10
Switch0(config-if)#exit
Switch0(config)#interface fa2/1
Switch0(config-if)#switchport mode access
Switch0(config-if)#switchport access vlan 20
Switch0(config-if)#exit
Switch0(config)#interface fa6/1
Switch0(config-if)#switchport mode access
Switch0(config-if)#switchport access vlan 10
Switch0(config-if)#exit
Switch0(config)#interface fa3/1
Switch0(config-if)#switchport mode access
Switch0(config-if)#switchport access vlan 20
Switch0(config-if)#exit</pre>

<p>
Pentru a verifica adăugarea porturilor în VLAN-uri, folosim, din nou, comanda <code>show vlan brief</code>:
</p>
<pre class="code">Switch0(config)#do show vlan brief

VLAN Name                             Status    Ports
---- -------------------------------- --------- -------------------------------
1    default                          active    Fa4/1, Fa5/1, Fa7/1
10   zece                             active    Fa1/1, Fa6/1
20   douazeci                         active    Fa2/1, Fa3/1
100  VLAN0100                         active    Fa0/1
1002 fddi-default                     active    
1003 token-ring-default               active    
1004 fddinet-default                  active    
1005 trnet-default                    active    
Switch0(config)#</pre>

<p>
Se poate observa că VLAN-ul <code>10</code> conține porturile <code>Fa1/1</code> și <code>Fa6/1</code>, iar VLAN-ul <code>20</code> conține porturile <code>Fa2/1</code> și <code>Fa3/1</code>, așa cum am dorit.
</p>

<p>
Verificați conectivitatea între fiecare pereche de două stații. Observați faptul că doar stațiile din același VLAN pot să comunice între ele.
</p>

</div>
<!-- EDIT15 SECTION "02. [10p] Porturi în modul acces" [1-] --><!-- EDIT14 PLUGIN_INCLUDE_END "rl:labs:04:contents:02" [0-] --></div>
<div class="level2">

</div>
<!-- EDIT16 PLUGIN_INCLUDE_START "rl:labs:04:contents:03" [0-] --><div class="plugin_include_content plugin_include__rl:labs:04:contents:03">

<h3 class="sectionedit18" id="p_subnetare_si_vlan-uri">03. [15p] Subnetare și VLAN-uri</h3>
<div class="level3">

<p>
În topologia Packet Tracer de la <a href="../../../../_media/rl/labs/04/contents/rl_lab-04_subnetare-vlan.pkt" class="media mediafile mf_pkt" title="rl:labs:04:contents:rl_lab-04_subnetare-vlan.pkt (8.7 KB)">această adresă</a> am mai adăugat un switch (<code>Switch1</code>) la care au fost conectate alte 4 stații (<code>PC5</code>, <code>PC6</code>, <code>PC7</code>, <code>PC8</code>). Configurați switch-ul <code>Switch1</code> astfel încât <code>PC5</code> și <code>PC7</code> să facă parte din VLAN-ul 10, iar celelalte 2 (<code>PC6</code> și <code>PC8</code>) din VLAN-ul 20.
</p>

<p>
Împărțiți spațiul 172.16.234.96/27 în două subrețele de dimensiuni egale și configurați stațiile (<code>PC1</code>, <code>PC3</code>, <code>PC5</code>, <code>PC7</code>) din VLAN-ul <code>10</code> cu adrese IP din prima subrețea obținută, iar cele din VLAN-ul 20 (<code>PC2</code>, <code>PC4</code>, <code>PC6</code>, <code>PC8</code>) cu adrese IP din a doua subrețea.
</p>

<p>
Verificați conectivitatea între stațiile din același VLAN, două câte două, precizând de ce nu funcționează atunci când este cazul.
</p>

<p>
<p><div class="notewarning">
Nu verificați conectivitatea între două stații din switch-uri diferite întrucât între aceste switch-uri NU există legătură fizică.

</div></p>
</p>

</div>
<!-- EDIT18 SECTION "03. [15p] Subnetare și VLAN-uri" [1-] --><!-- EDIT17 PLUGIN_INCLUDE_END "rl:labs:04:contents:03" [0-] --></div>
<div class="level2">

</div>
<!-- EDIT19 PLUGIN_INCLUDE_START "rl:labs:04:contents:04" [0-] --><div class="plugin_include_content plugin_include__rl:labs:04:contents:04">

<h3 class="sectionedit21" id="p_legatura_de_tip_trunchi_trunk">04. [10p] Legătură de tip trunchi (trunk)</h3>
<div class="level3">

<p>
Pe topologia de la exercițiul <a href="../../../../rl/labs/04/contents/03.html" class="wikilink1" title="rl:labs:04:contents:03">03. [15p] Subnetare și VLAN-uri</a>, realizați o legătură de fibră între switch-urile <code>Switch0</code> și <code>Switch1</code> pe portul <code>Fa4/1</code> al fiecărui switch. Testați conectivitatea între stații din același VLAN, dar switch-uri diferite. Observați că nu există conectivitate din cauză că nu există nici un mecanism activat prin care VLAN-urile de pe switch-uri diferite să comunice între ele.
</p>

<p>
Pentru a permite conectivitatea între stații aflate în același VLAN dar conectate switchuri diferite, trebuie să configurăm legătura dintre switch-uri în mod trunchi (<em>trunk</em>); această legătură permite încapsularea pachetelor cu VLAN-uri diferite. Identificați numărul portului de interconectare pe fiecare din switch-uri. Pe fiecare switch, intrați pe interfața aferentă și setați legătura în mod trunchi.
</p>

<p>
Pe switch-ul <code>Switch0</code> configurați interfața <code>Fa4/1</code>:
</p>
<pre class="code">Switch0&gt;enable
Password: 
Switch0#configure terminal
Switch0(config)#int fastEthernet 4/1
Switch0(config-if)#switchport mode trunk 
Switch0(config-if)#switchport trunk allowed vlan all 
Switch0(config-if)#</pre>

<p>
Pe switch-ul <code>Switch1</code> configurați interfața <code>Fa4/1</code>:
</p>
<pre class="code">Switch1&gt;enable
Password: 
Switch1#configure terminal
Switch1(config)#int fastEthernet 4/1
Switch1(config-if)#switchport mode trunk 
Switch1(config-if)#switchport trunk allowed vlan all 
Switch1(config-if)#</pre>

<p>
Investigați configurația de tip trunk prin rularea comenzii <code>show interfaces trunk</code> pe ambele switch-uri:
</p>
<pre class="code">Switch0#show interfaces trunk
Port        Mode         Encapsulation  Status        Native vlan
Fa4/1       on           802.1q         trunking      1

Port        Vlans allowed on trunk
Fa4/1       1-1005

Port        Vlans allowed and active in management domain
Fa4/1       1,10,20,100

Port        Vlans in spanning tree forwarding state and not pruned
Fa4/1       1,10,20,100
Switch0#

Switch1#show interfaces trunk 
Port        Mode         Encapsulation  Status        Native vlan
Fa4/1       on           802.1q         trunking      1

Port        Vlans allowed on trunk
Fa4/1       1-1005

Port        Vlans allowed and active in management domain
Fa4/1       1,10,20

Port        Vlans in spanning tree forwarding state and not pruned
Fa4/1       1,10,20
Switch1#</pre>

<p>
Se observă că interfața <code>Fa4/1</code> este o interfață de tip trunk care transportă VLAN-urile 1 (cel implicit), 10 și 20. În cazul switch-ului <code>Switch0</code> transferă și VLAN-ul de management (<code>100</code>). Aceasta se întâmplă întrucât ultimul argument al comenzii <code>switchport trunk …</code> a fost <code>all</code>, reprezentând toate VLAN-urile.
</p>

<p>
Verificați că stațiile din același VLAN pot comunica între ele indiferent de switch-ul la care sunt interconectate.
</p>

</div>
<!-- EDIT21 SECTION "04. [10p] Legătură de tip trunchi (trunk)" [1-] --><!-- EDIT20 PLUGIN_INCLUDE_END "rl:labs:04:contents:04" [0-] --></div>
<div class="level2">

</div>
<!-- EDIT22 PLUGIN_INCLUDE_START "rl:labs:04:contents:05" [0-] --><div class="plugin_include_content plugin_include__rl:labs:04:contents:05">

<h3 class="sectionedit24" id="p_extindere_vlan_de_management">05. [20p] Extindere VLAN de management</h3>
<div class="level3">

<p>
În topologia configurată la <a href="../../../../rl/labs/04/contents/04.html" class="wikilink1" title="rl:labs:04:contents:04">04. [10p] Legătură de tip trunchi (trunk)</a> dorim să putem configura și switch-ul <code>Switch1</code> de pe stația <code>Management</code>. Adică switch-ul <code>Switch1</code> trebuie să fie accesat prin <code>telnet</code> de pe stația <code>Management</code>.
</p>

<p>
Pentru aceasta configurați adresa IP <code>192.168.1.252</code> pe switch-ul <code>Switch1</code> pe interfața aferentă VLAN-ului de management (<code>vlan 100</code>).
</p>

<p>
<p><div class="noteimportant">
Trebuie să creați VLAN-ul 100. Nu este suficient să configurați interfața aferentă (<code>vlan 100</code>).

</div></p>
</p>

<p>
Testați prin conectarea prin <code>telnet</code> de pe stația <code>Management</code> la <code>Switch1</code>.
</p>

<p>
<p><div class="noteimportant">
Salvați topologia rezolvată dacă vreți să faceți exercițiile bonus, vă va trebui! ;) 

</div></p>
</p>

</div>
<!-- EDIT24 SECTION "05. [20p] Extindere VLAN de management" [1-] --><!-- EDIT23 PLUGIN_INCLUDE_END "rl:labs:04:contents:05" [0-] --></div>
<div class="level2">

</div>
<!-- EDIT25 PLUGIN_INCLUDE_START "rl:labs:04:contents:06" [0-] --><div class="plugin_include_content plugin_include__rl:labs:04:contents:06">

<h3 class="sectionedit27" id="p_configurare_legaturi_de_tip_trunchi_cascadate">06. [15p] Configurare legături de tip trunchi cascadate</h3>
<div class="level3">

<p>
Ne propunem să construim rețele locale virtuale (VLAN-uri) pe o topologie cu mai multe switch-uri. Vom folosi legături de tip trunchi între switch-uri.
</p>

<p>
Topologia PacketTracer de la <a href="../../../../_media/rl/labs/04/contents/rl_lab-04_vlan-trunchi-cascadat.pkt" class="media mediafile mf_pkt" title="rl:labs:04:contents:rl_lab-04_vlan-trunchi-cascadat.pkt (6.9 KB)">această adresă</a> conține 4 stații (<code>PC0</code>, <code>PC1</code>, <code>PC2</code>, <code>PC3</code>) și trei switch-uri (<code>Switch0</code>, <code>Switch1</code>, <code>Switch2</code>).
</p>

<p>
Cele patru stații au deja adresele IP configurate și trebuie să se găsească două câte două în VLAN-uri:
</p>
<ul>
<li class="level1"><div class="li"> VLAN 10: <code>PC0</code> și <code>PC2</code></div>
</li>
<li class="level1"><div class="li"> VLAN 20: <code>PC1</code> și <code>PC3</code></div>
</li>
</ul>

<p>
Pentru început, după ce switch-urile rulează STP, verificați conectivitatea între <strong>toate</strong> cele patru stații. Nefiind realizate configurații de VLAN pe switch-uri, stațiile pot comunica între ele, oricare două.
</p>

<p>
Configurați switch-urile astfel încât stațiile să poată comunica doar în cadrul VLAN-ului propriu (să existe separație la nivelul 2). Verificați transmițând pachete între oricare două stații.
</p>

</div>
<!-- EDIT27 SECTION "06. [15p] Configurare legături de tip trunchi cascadate" [1-] --><!-- EDIT26 PLUGIN_INCLUDE_END "rl:labs:04:contents:06" [0-] --></div>
<div class="level2">

</div>
<!-- EDIT28 PLUGIN_INCLUDE_START "rl:labs:04:contents:07" [0-] --><div class="plugin_include_content plugin_include__rl:labs:04:contents:07">

<h3 class="sectionedit30" id="p_depanare_probleme_in_lucrul_cu_vlan-uri">07. [15p] Depanare probleme în lucrul cu VLAN-uri</h3>
<div class="level3">

<p>
Ne propunem să discutăm despre cum depanăm problemele în lucrul cu VLAN-uri.
</p>

<p>
Topologia Packet Tracer de la <a href="../../../../_media/rl/labs/04/contents/rl_lab-04_depanare-vlan.pkt" class="media mediafile mf_pkt" title="rl:labs:04:contents:rl_lab-04_depanare-vlan.pkt (7.1 KB)">această adresă</a> conține cinci stații care se găsesc în două VLAN-uri, astfel:
</p>
<ul>
<li class="level1"><div class="li"> stațiile PC0, PC1 și PC3 se găsesc în VLAN-ul 10</div>
</li>
<li class="level1"><div class="li"> stațiile PC2, PC4 se găsesc în VLAN-ul 20</div>
</li>
</ul>

<p>
Pentru început verificați de ce nu există conectivitate între stațiile PC0 și PC1 deși se găsesc în același switch. Investigați porturile switch-ului <code>Switch0</code>.
</p>

<p>
Apoi verificați de ce nu există conectivitate între stațiile PC2 și PC4. Investigați configurația pentru VLAN-ul de trip trunchi de pe switch-ul <code>Switch1</code>.
</p>

<p>
<p><div class="noteclassic">
Pentru depanare urmăriți configurația curentă a switch-ului cu ajutorul comenzii
</p>
<pre class="code">show running-config</pre>

<p>

</div></p>
</p>

</div>
<!-- EDIT30 SECTION "07. [15p] Depanare probleme în lucrul cu VLAN-uri" [1-] --><!-- EDIT29 PLUGIN_INCLUDE_END "rl:labs:04:contents:07" [0-] --></div>
<div class="level2">

</div>
<!-- EDIT31 PLUGIN_INCLUDE_START "rl:labs:04:contents:08" [0-] --><div class="plugin_include_content plugin_include__rl:labs:04:contents:08">

<h3 class="sectionedit33" id="bonus_-_10p_vlan_nativ">08. [BONUS - 10p] VLAN nativ</h3>
<div class="level3">

<p>
Vom lucra cu noțiunea de VLAN nativ, care permite transferul fără tag VLAN într-o legătură de tip trunchi.
</p>

<p>
Folosiți topologia de la <a href="../../../../rl/labs/04/contents/05.html" class="wikilink1" title="rl:labs:04:contents:05">05. [20p] Extindere VLAN de management</a>. Urmăriți formatul cadrelor transmise între stații din VLAN-ul <code>10</code> conectate la switch-uri diferite.
</p>

<p>
Configurați apoi VLAN-ul 10 ca VLAN nativ pentru legătura trunchi dintre <code>Switch0</code> și <code>Switch1</code> și urmăriți din nou cadrele transmise între stații din VLAN-ul <code>10</code> conectate la switch-uri diferite. Dacă ați realizat configurația corectă, cadrele nu vor avea tag VLAN (<em>dot1q</em>), fiind vorba de VLAN-ul nativ.
</p>

<p>
<p><div class="noteclassic">
Puteți urmări formatul cadrelor în modul <code>Simulation</code> din Packet Tracer.

</div></p>
</p>

<p>
<p><div class="noteclassic">
Pentru documentație legată de configurarea unui VLAN nativ, urmăriți <a href="http://www.cisco.com/en/US/docs/switches/datacenter/nexus5000/sw/configuration/guide/cli_rel_4_0_1a/AccessTrunk.html#wp1207074" class="urlextern" title="http://www.cisco.com/en/US/docs/switches/datacenter/nexus5000/sw/configuration/guide/cli_rel_4_0_1a/AccessTrunk.html#wp1207074"  rel="nofollow">această secțiune</a>.

</div></p>
</p>

</div>
<!-- EDIT33 SECTION "08. [BONUS - 10p] VLAN nativ" [1-] --><!-- EDIT32 PLUGIN_INCLUDE_END "rl:labs:04:contents:08" [0-] --></div>
<div class="level2">

</div>
<!-- EDIT34 PLUGIN_INCLUDE_START "rl:labs:04:contents:09" [0-] --><div class="plugin_include_content plugin_include__rl:labs:04:contents:09">

<h3 class="sectionedit36" id="bonus_-_10p_filtrare_vlan-uri_pe_legatura_de_tip_trunchi">09. [BONUS - 10p] Filtrare VLAN-uri pe legătura de tip trunchi</h3>
<div class="level3">

<p>
Folosiți topologia de la <a href="../../../../rl/labs/04/contents/05.html" class="wikilink1" title="rl:labs:04:contents:05">05. [20p] Extindere VLAN de management</a> și configurați legătura de tip trunchi între switch-ul <code>Switch0</code> și <code>Switch1</code> să nu permită încapsularea pachetelor din VLAN-ul <code>20</code>; adică pachetele din VLAN-ul 20 să nu mai fie trimise pe legătura de trunchi. Astfel stațiile din VLAN-ul <code>20</code> conectate la switch-ul <code>Switch0</code> nu mai pot comunica cu cele din VLAN-ul <code>20</code> conectate la switch-ul <code>Switch1</code>. Stația <code>Management</code> trebuie să poată în continuare să acceseze <code>Switch1</code>, iar stațiile din VLAN-ul <code>10</code> să poată comunica indiferent de switch-ul la care sunt conectate.
</p>

<p>
<p><div class="noteclassic">
Pentru documentație legată de configurarea VLAN-urilor permise, urmăriți <a href="http://www.cisco.com/en/US/docs/switches/datacenter/nexus5000/sw/configuration/guide/cli_rel_4_0_1a/AccessTrunk.html#wp1207161" class="urlextern" title="http://www.cisco.com/en/US/docs/switches/datacenter/nexus5000/sw/configuration/guide/cli_rel_4_0_1a/AccessTrunk.html#wp1207161"  rel="nofollow">această secțiune</a>.

</div></p>
</p>

</div>
<!-- EDIT36 SECTION "09. [BONUS - 10p] Filtrare VLAN-uri pe legătura de tip trunchi" [1-] --><!-- EDIT35 PLUGIN_INCLUDE_END "rl:labs:04:contents:09" [0-] --></div>
<div class="level2">

</div>
<!-- EDIT37 PLUGIN_INCLUDE_START "rl:labs:04:contents:sidebar" [0-] --><div class="plugin_include_content plugin_include__rl:labs:04:contents:sidebar">

<h3 class="sectionedit39" id="navigare1">Navigare</h3>
<div class="level3">

<p>
<strong><span class="curid"><a href="../../../../rl/labs/04.html" class="wikilink1" title="rl:labs:04">Laboratorul 4</a></span></strong>
</p>

</div>
<!-- EDIT40 PLUGIN_INCLUDE_START "rl:labs:04:meta:nav" [0-] --><div class="plugin_include_content plugin_include__rl:labs:04:meta:nav">
<div class="level4">

<div><div id="nojs_indexmenu_12344776415835607aa0763" data-jsajax="%26skipfile%3D%252B/sidebar/" class="indexmenu_nojs">

<ul class="idx">
<li class="level1"><div class="li"><a href="../../../../rl/labs/04/contents/00.html" class="wikilink1" title="rl:labs:04:contents:00">00. [5p] VLAN-uri în Cisco IOS</a></div></li>
<li class="level1"><div class="li"><a href="../../../../rl/labs/04/contents/01.html" class="wikilink1" title="rl:labs:04:contents:01">01. [10p] VLAN de management</a></div></li>
<li class="level1"><div class="li"><a href="../../../../rl/labs/04/contents/02.html" class="wikilink1" title="rl:labs:04:contents:02">02. [10p] Porturi în modul acces</a></div></li>
<li class="level1"><div class="li"><a href="../../../../rl/labs/04/contents/03.html" class="wikilink1" title="rl:labs:04:contents:03">03. [15p] Subnetare și VLAN-uri</a></div></li>
<li class="level1"><div class="li"><a href="../../../../rl/labs/04/contents/04.html" class="wikilink1" title="rl:labs:04:contents:04">04. [10p] Legătură de tip trunchi (trunk)</a></div></li>
<li class="level1"><div class="li"><a href="../../../../rl/labs/04/contents/05.html" class="wikilink1" title="rl:labs:04:contents:05">05. [20p] Extindere VLAN de management</a></div></li>
<li class="level1"><div class="li"><a href="../../../../rl/labs/04/contents/06.html" class="wikilink1" title="rl:labs:04:contents:06">06. [15p] Configurare legături de tip trunchi cascadate</a></div></li>
<li class="level1"><div class="li"><a href="../../../../rl/labs/04/contents/07.html" class="wikilink1" title="rl:labs:04:contents:07">07. [15p] Depanare probleme în lucrul cu VLAN-uri</a></div></li>
<li class="level1"><div class="li"><a href="../../../../rl/labs/04/contents/08.html" class="wikilink1" title="rl:labs:04:contents:08">08. [BONUS - 10p] VLAN nativ</a></div></li>
<li class="level1"><div class="li"><a href="../../../../rl/labs/04/contents/09.html" class="wikilink1" title="rl:labs:04:contents:09">09. [BONUS - 10p] Filtrare VLAN-uri pe legătura de tip trunchi</a></div></li>
</ul>
</div></div>

</div>
<!-- EDIT41 PLUGIN_INCLUDE_END "rl:labs:04:meta:nav" [0-] --></div>
<div class="level4">

</div>
<!-- EDIT39 SECTION "Navigare" [1-] --><!-- EDIT38 PLUGIN_INCLUDE_END "rl:labs:04:contents:sidebar" [0-] --></div>
<div class="level2">

</div>
<!-- EDIT6 SECTION "Exerciții" [408-] --><div class="footnotes">
<div class="fn"><sup><a href="04.html#fnt__1" id="fn__1" class="fn_bot">1)</a></sup> 
mai multe detalii la <a href="http://www.cisco.com/en/US/docs/ios/lanswitch/command/reference/lsw_s2.html" class="urlextern" title="http://www.cisco.com/en/US/docs/ios/lanswitch/command/reference/lsw_s2.html"  rel="nofollow">http://www.cisco.com/en/US/docs/ios/lanswitch/command/reference/lsw_s2.html</a></div>
<div class="fn"><sup><a href="04.html#fnt__2" id="fn__2" class="fn_bot">2)</a></sup> 
dați click pe el și selectați tab-ul CLI</div>
</div>
</div>
</body>
</html>

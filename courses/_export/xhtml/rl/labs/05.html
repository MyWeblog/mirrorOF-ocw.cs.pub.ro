    
    

<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8" />
  <title>rl:labs:05</title>
<meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="date" content="2015-10-05T23:50:17+0300"/>
<meta name="keywords" content="rl,labs,05"/>
<link rel="search" type="application/opensearchdescription+xml" href="../../../../lib/exe/opensearch.php" title="CS Open CourseWare"/>
<link rel="start" href="../../../../../courses.1.html"/>
<link rel="alternate" type="application/rss+xml" title="Recent Changes" href="../../../../feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current Namespace" href="../../../../feed.php%3Fmode=list&amp;ns=rl:labs"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="05.html"/>
<link rel="canonical" href="../../../../rl/labs/05.html"/>
<link rel="stylesheet" type="text/css" href="../../../../lib/exe/css.php%3Ft=arctic&amp;tseed=1476798676.css"/>
<script type="text/javascript">/*<![CDATA[*/var NS='rl:labs';var JSINFO = {"id":"rl:labs:05","namespace":"rl:labs","isadmin":0,"isauth":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="../../../../lib/exe/js.php%3Ftseed=1476798676"></script>
<script type="text/x-mathjax-config">/*<![CDATA[*/MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ["$","$"], ["\\(","\\)"] ],
        displayMath: [ ["$$","$$"], ["\\[","\\]"] ],
        processEscapes: true
    }
});
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
<script type="text/javascript">/*<![CDATA[*/
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
		  
/*!]]>*/</script>
<script type="text/javascript">/*<![CDATA[*/
var pageTracker = _gat._getTracker("UA-38383934-1");
pageTracker._initData();
pageTracker._trackPageview();
		  
/*!]]>*/</script>
</head>
<body>
<div class="dokuwiki export">



<h1 class="sectionedit1" id="laborator_5_rutare">Laborator 5. Rutare</h1>
<div class="level1">

</div>
<!-- EDIT1 SECTION "Laborator 5. Rutare" [12-46] -->
<h2 class="sectionedit2" id="cunostinte_si_abilitati_ce_vor_fi_dobandite">Cunoștințe și abilități ce vor fi dobândite</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> Procesul de rutare, utilitatea procesului de rutare</div>
</li>
<li class="level1"><div class="li"> Rute, părțile componente ale unei rute: <em>rețea destinație</em>, <em>next hop</em>, <em>default gateway</em></div>
</li>
<li class="level1"><div class="li"> Adăugarea de rute statice pe Cisco IOS</div>
</li>
</ul>

</div>
<!-- EDIT2 SECTION "Cunoștințe și abilități ce vor fi dobândite" [47-313] -->
<h2 class="sectionedit3" id="navigare">Navigare</h2>
<div class="level2">

<p>
<strong><span class="curid"><a href="../../../../rl/labs/05.html" class="wikilink1" title="rl:labs:05">Laboratorul 5</a></span></strong>
</p>

</div>
<!-- EDIT4 PLUGIN_INCLUDE_START "rl:labs:05:meta:nav" [0-] --><div class="plugin_include_content plugin_include__rl:labs:05:meta:nav">
<div class="level2">

<div><div id="nojs_indexmenu_114696077858356083d536c" data-jsajax="%26skipfile%3D%252B/sidebar/" class="indexmenu_nojs">

<ul class="idx">
<li class="level1"><div class="li"><a href="../../../../rl/labs/05/contents/00.html" class="wikilink1" title="rl:labs:05:contents:00">00. [5p] Procesul de rutare</a></div></li>
<li class="level1"><div class="li"><a href="../../../../rl/labs/05/contents/01.html" class="wikilink1" title="rl:labs:05:contents:01">01. [10p] Configurare default gateway</a></div></li>
<li class="level1"><div class="li"><a href="../../../../rl/labs/05/contents/02.html" class="wikilink1" title="rl:labs:05:contents:02">02. [10p] Antetul pachetelor în procesul de rutare</a></div></li>
<li class="level1"><div class="li"><a href="../../../../rl/labs/05/contents/03.html" class="wikilink1" title="rl:labs:05:contents:03">03. [5p] Rute și pachete de reply</a></div></li>
<li class="level1"><div class="li"><a href="../../../../rl/labs/05/contents/04.html" class="wikilink1" title="rl:labs:05:contents:04">04. [10p] Adresare și default gateway</a></div></li>
<li class="level1"><div class="li"><a href="../../../../rl/labs/05/contents/05.html" class="wikilink1" title="rl:labs:05:contents:05">05. [10p] Configurare rute statice</a></div></li>
<li class="level1"><div class="li"><a href="../../../../rl/labs/05/contents/06.html" class="wikilink1" title="rl:labs:05:contents:06">06. [5p] Vizualizare tabelă de rutare</a></div></li>
<li class="level1"><div class="li"><a href="../../../../rl/labs/05/contents/07.html" class="wikilink1" title="rl:labs:05:contents:07">07. [15p] Adresare și configurare rute statice</a></div></li>
<li class="level1"><div class="li"><a href="../../../../rl/labs/05/contents/08.html" class="wikilink1" title="rl:labs:05:contents:08">08. [10p] Depanare probleme de configurare a rutării</a></div></li>
<li class="level1"><div class="li"><a href="../../../../rl/labs/05/contents/09.html" class="wikilink1" title="rl:labs:05:contents:09">09. [10p] Adresare și configurare rute statice (reiterare)</a></div></li>
<li class="level1"><div class="li"><a href="../../../../rl/labs/05/contents/10.html" class="wikilink1" title="rl:labs:05:contents:10">10. [10p] Rute implicite pe rutere</a></div></li>
<li class="level1"><div class="li"><a href="../../../../rl/labs/05/contents/11.html" class="wikilink1" title="rl:labs:05:contents:11">11. [BONUS - 10p] Adresare și configurare rute statice (avansat)</a></div></li>
<li class="level1"><div class="li"><a href="../../../../rl/labs/05/contents/12.html" class="wikilink1" title="rl:labs:05:contents:12">12. [BONUS - 10p] Rutare inter-VLAN</a></div></li>
</ul>
</div></div>

</div>
<!-- EDIT5 PLUGIN_INCLUDE_END "rl:labs:05:meta:nav" [0-] --></div>
<div class="level2">

</div>
<!-- EDIT3 SECTION "Navigare" [314-422] -->
<h2 class="sectionedit6" id="exercitii">Exerciții</h2>
<div class="level2">

</div>
<!-- EDIT7 PLUGIN_INCLUDE_START "rl:labs:05:contents:00" [0-] --><div class="plugin_include_content plugin_include__rl:labs:05:contents:00">

<h3 class="sectionedit9" id="p_procesul_de_rutare">00. [5p] Procesul de rutare</h3>
<div class="level3">

<p>
Pentru ca un dispozitiv să poată comunica în afara rețelei locale, în altă rețea, trebuie să cunoască modul în care ajunge la acea rețea. Acest mod este specificat prin <strong>rute</strong>. O rută descrie unui dispozitiv ce cale să urmeze pentru a ajunge la rețeaua destinație.
</p>

<p>
Procesul de rutare constă în primirea unui pachet, investigarea tabelei de rutare, descoprirea rutei corespunzătoare și rutarea pachetului, adică transmiterea pachetului mai departe conform rutei.
</p>

<p>
Rutele se găsesc în tabela de rutare și constau din două elemente:
</p>
<ol>
<li class="level1"><div class="li"> partea de match: adresa de rețea destinație (adresă și mască de rețea)</div>
</li>
<li class="level1"><div class="li"> partea de acțiune: următorul dispozitiv de rutare (<em>next hop</em>) (sau interfața de ieșire)</div>
</li>
</ol>

<p>
În momentul în care un dispozitiv care rutează (un <strong>ruter</strong>) primește un pachet, extrage adresa IP destinație, localizează adresa de rețea destinație în tabela de rutare și apoi <strong>rutează</strong> (dirijează, retransmite) pachetul către următorul ruter (<em>next hop</em>). Procesul se reia pe următorul ruter până când pachetul ajunge la destinație.
</p>

<p>
Rutarea este un proces care are loc la nivelul 3 (Rețea) din stiva OSI, lucrând cu adresa IP.
</p>

</div>
<!-- EDIT9 SECTION "00. [5p] Procesul de rutare" [1-] --><!-- EDIT8 PLUGIN_INCLUDE_END "rl:labs:05:contents:00" [0-] --></div>
<div class="level2">

</div>
<!-- EDIT10 PLUGIN_INCLUDE_START "rl:labs:05:contents:01" [0-] --><div class="plugin_include_content plugin_include__rl:labs:05:contents:01">

<h3 class="sectionedit12" id="p_configurare_default_gateway">01. [10p] Configurare default gateway</h3>
<div class="level3">

<p>
În topologia de la <a href="../../../../_media/rl/labs/05/contents/rl_lab-05_default_gw.pkt" class="media mediafile mf_pkt" title="rl:labs:05:contents:rl_lab-05_default_gw.pkt (7.5 KB)">această adresă</a> se află două rețele interconectate printr-un ruter.
</p>

<p>
Observați că există conectivitate între ruter și oricare stație; folosiți comanda <code>ping</code> de pe ruter sau mesajele din Packet Tracer (vezi <a href="../../../../rl/labs/02/contents/00.html" class="wikilink1" title="rl:labs:02:contents:00">00. [5p] Introducere în Packet Tracer</a>).
</p>

<p>
<p><div class="noteimportant">
În Cisco IOS primul pachet trimis poate să nu fie de fapt trimis din cauza absenței tabelei ARP. De aceea când trimiteți un pachet în Packet Tracer la sau de la ruter, prima oară nu va funcționa. Următoarele pachete, însă, vor funcționa. Detalii <a href="http://blog.ipspace.net/2007/04/why-is-first-ping-lost.html" class="urlextern" title="http://blog.ipspace.net/2007/04/why-is-first-ping-lost.html"  rel="nofollow">aici</a>.

</div></p>
</p>

<p>
Observați că <strong>nu</strong> există conectivitate între stații din rețele diferite, deși adresele IP și măștile de rețea sunt configurate pe ruter și pe toate stațiile. Nu există conectivitate pentru că o stație nu are configurată rută către rețeaua cealaltă. Pentru a asigura conectivitate între stații din rețele diferite, va trebui să adăugăm, pe fiecare stație, rută către cealaltă rețea având ca next hop ruterul. Vom realiza în continuare acest lucru – conectivitatea între toate stațiile.
</p>

<p>
Pentru a asigura conectivitate între toate stațiile, indiferent din ce rețea fac parte trebuie să configurăm o rută implicită (<em>default gateway</em>) pe fiecare stație. Pașii urmați vor fi:
</p>
<ol>
<li class="level1"><div class="li"> Determinăm adresele IP ale interfețelor ruterului.</div>
</li>
<li class="level1"><div class="li"> Pentru fiecare stație, adăugăm o rută implicită (de tip <em>default gateway</em>) având ca next hop adresa IP a interfeței ruterului din rețeaua din care face parte stația.</div>
</li>
<li class="level1"><div class="li"> Folosim comanda <code>ping</code> de pe ruter sau mesajele din Packet Tracer pentru a vedea conectivitatea între oricare două stații, chiar aflate în rețele diferite.</div>
</li>
</ol>

<p>
Pentru început, vrem să aflăm adresele IP configurate pe fiecare interfață a ruterului. Dați click pe <code>Router0</code>, și mergeți pe tab-ul <code>CLI</code>, unde aveți acces la consola ruterului, și rulați comenzile:
</p>
<pre class="code">Router&gt;enable
Router#show ip interface brief
Interface              IP-Address      OK? Method Status                Protocol
 
FastEthernet0/0        172.16.100.1    YES manual up                    up
 
FastEthernet1/0        192.168.100.1   YES manual up                    up</pre>

<p>
Interfața <code>FastEthernet0/0</code> este conectată la rețeaua din care fac parte stațiile <code>PC0</code> și <code>PC1</code>. Adresa IP a acestei interfețe este <code>172.16.100.1</code>. Pentru a asigura conectivitate cu stațiile din cealaltă rețea, pe stațiile <code>PC0</code> și <code>PC1</code> vom configura o rută implicită (de tip <em>default gateway</em>) având ca next hop adresa <code>172.16.100.1</code>. Pentru a configura <em>default gateway</em>, faceți click în Packet Tracer pe stația dorită (<code>PC0</code> sau <code>PC1</code>), mergeți pe tab-ul <code>Desktop</code> și apăsați pe iconița <code>IP Configuration</code>. În zona de text cu eticheta <em>Default gateway</em> completați adresa <code>172.16.100.1</code>.
</p>

<p>
În mod similar, configurați pe stațiile <code>PC2</code> și <code>PC3</code> adresa <code>192.168.100.1</code> (adresa interfeței <code>FastEthernet1/0</code>) pe post de <em>default gateway</em>.
</p>

<p>
Observați conectivitatea între oricare două stații indiferent de rețeaua de care aparțin.
</p>

</div>
<!-- EDIT12 SECTION "01. [10p] Configurare default gateway" [1-] --><!-- EDIT11 PLUGIN_INCLUDE_END "rl:labs:05:contents:01" [0-] --></div>
<div class="level2">

</div>
<!-- EDIT13 PLUGIN_INCLUDE_START "rl:labs:05:contents:02" [0-] --><div class="plugin_include_content plugin_include__rl:labs:05:contents:02">

<h3 class="sectionedit15" id="p_antetul_pachetelor_in_procesul_de_rutare">02. [10p] Antetul pachetelor în procesul de rutare</h3>
<div class="level3">

<p>
Vrem să urmărim antetul pachetelor în timpul procesului de rutare. Vom trimite un pachet între stații din rețele diferite și vom observa modificarea antetului.
</p>

<p>
Folosiți în continuare topologia de la <a href="../../../../rl/labs/05/contents/01.html" class="wikilink1" title="rl:labs:05:contents:01">01. [10p] Configurare default gateway</a>. Intrați în modul <code>Simulation</code> și trimiteți un mesaj Packet Tracer de la stația <code>PC0</code> la stația <code>PC2</code>. Urmăriți antetul celor două pachete transmise:
</p>
<ul>
<li class="level1"><div class="li"> pachetul trimis de stația <code>PC0</code> și primit de ruter (îl vom denumi <code>pkt1</code>)</div>
</li>
<li class="level1"><div class="li"> pachetul trimis de ruter și primit de stația <code>PC2</code> (îl vom denumi <code>pkt2</code>)</div>
</li>
</ul>

<p>
Pentru a urmări antetul unui pachet folosiți lista de evenimente din dreapta spațiului de lucru (<code>Event list</code>); faceți click pe pătrățelul colorat al fiecărui eveniment din listă.
</p>

<p>
Observați următoarele efecte ale procesului de rutare.
</p>
<ul>
<li class="level1"><div class="li"> Pachetul <code>pkt1</code> are ca adresă MAC sursă adresa MAC a stației <code>PC0</code> iar ca adresă MAC destinație adresa MAC a interfeței <code>FastEthernet0/0</code> a ruterului.</div>
</li>
<li class="level1"><div class="li"> Pachetul <code>pkt2</code> are ca adresă MAC sursă adresa MAC a interfeței <code>FastEthernet1/0</code> a ruterului iar ca adresă MAC destinație adresa MAC a stației <code>PC2</code>.</div>
</li>
<li class="level1"><div class="li"> Se decrementează câmpul <code>TTL</code> (<em>Time To Live</em>) din antetul IP în pachetul <code>pkt2</code> față de pachetul <code>pkt1</code>.</div>
</li>
<li class="level1"><div class="li"> Adresa IP sursă respectiv adresa IP destinație rămân nemodificate între cele două pachete.</div>
</li>
</ul>

<p>
În concluzie, procesul de rutare folosește adresele MAC specifice fiecărei rețele locale în care este trimis pachetul, lasă nemodificate adresele IP (sursă și destinație) și decrementează câmpul <code>TTL</code> (un contor al numărului de hop-uri).
</p>

<p>
<p><div class="noteclassic">
Decrementarea câmpului <code>TTL</code> are rolul de a atenua efectele unor posibile bucle de rutare. În momentul în care câmpul <code>TTL</code> ajunge la valoarea <code>0</code> pachetul este aruncat (<em>dropped</em>).

</div></p>
</p>

</div>
<!-- EDIT15 SECTION "02. [10p] Antetul pachetelor în procesul de rutare" [1-] --><!-- EDIT14 PLUGIN_INCLUDE_END "rl:labs:05:contents:02" [0-] --></div>
<div class="level2">

</div>
<!-- EDIT16 PLUGIN_INCLUDE_START "rl:labs:05:contents:03" [0-] --><div class="plugin_include_content plugin_include__rl:labs:05:contents:03">

<h3 class="sectionedit18" id="p_rute_si_pachete_de_reply">03. [5p] Rute și pachete de reply</h3>
<div class="level3">

<p>
Vrem să urmărim de ce sunt necesare rute pe ambele stații care comunică din rețele diferite. Vom folosi în continuare topologia de la <a href="../../../../rl/labs/05/contents/01.html" class="wikilink1" title="rl:labs:05:contents:01">01. [10p] Configurare default gateway</a>.
</p>

<p>
Intrați în modul <code>Simulation</code> și trimiteți un mesaj Packet Tracer de la stația <code>PC0</code> la stația <code>PC2</code>. Observați drumul parcurs de mesaj. Pachetul urmează drumul <code>PC0</code> → ruter → <code>PC2</code> → ruter → <code>PC0</code>. Este vorba de un pachet transmis și un pachet de răspuns (de tip <em>reply</em>).
</p>

<p>
Ștergeți de pe stația <code>PC2</code> configurația de <em>Default Gateway</em> și, în modul <code>Simulation</code>, trimiteți încă o dată un mesaj Packet Tracer de la stația <code>PC0</code> la stația <code>PC2</code>. Observați drumul parcurs de mesaj. Observați că pachetul este aruncat (<em>dropped</em>) de stația PC2. De ce se întâmplă acest lucru și nu se trimite pachet de răspuns (de tip <em>reply</em>)?
</p>

<p>
<p><div class="notewarning">
Înainte de a trece la exercițiul următor, refaceți configurația de <em>Default Gateway</em> pe stația <code>PC2</code>.

</div></p>
</p>

</div>
<!-- EDIT18 SECTION "03. [5p] Rute și pachete de reply" [1-] --><!-- EDIT17 PLUGIN_INCLUDE_END "rl:labs:05:contents:03" [0-] --></div>
<div class="level2">

</div>
<!-- EDIT19 PLUGIN_INCLUDE_START "rl:labs:05:contents:04" [0-] --><div class="plugin_include_content plugin_include__rl:labs:05:contents:04">

<h3 class="sectionedit21" id="p_adresare_si_default_gateway">04. [10p] Adresare și default gateway</h3>
<div class="level3">

<p>
Dorim să extindem topologia anterioară cu încă o rețea și să asigurăm conectivitatea stațiilor din această rețea la stațiile existente.
</p>

<p>
Folosiți în continuare topologia de la <a href="../../../../rl/labs/05/contents/01.html" class="wikilink1" title="rl:labs:05:contents:01">01. [10p] Configurare default gateway</a>. Adăugați un nou switch și conectați-l la una dintre interfețele libere ale ruterului.
</p>

<p>
<p><div class="noteimportant">
Folosiți un switch de tip <code>Generic</code>, <code>Switch-PT</code> (<strong>nu</strong> <code>Switch-PT-Empty</code>).
</p>

<p>
Ruterul nu are un port Ethernet suplimentar pentru a conecta noul switch. Pentru conectarea noului switch la ruter sunt două opțiuni (alegeți <strong>una</strong> dintre cele două opțiuni):
</p>
<ol>
<li class="level1"><div class="li"> Realizați o legătură de fibră optică între switch și ruter (adică între unul dintre porturile <code>FastEthernet4/1</code> și <code>FastEthernet5/1</code> ale switch-ului și unul dintre porturile <code>FastEthernet4/0</code> și <code>FastEthernet5/0</code> ale ruterului).</div>
</li>
<li class="level1"><div class="li"> Adăugați un nou modul de tip <code>PT-ROUTER-NM-1CFE</code> ruterului. Folosiți tab-ul <code>Physical</code> din meniul de configurare a ruterului. Apoi realizați o legătură de cablu de cupru <em>straight</em> (<code>Copper Straight-Through</code>) între switch și ruter.</div>
</li>
</ol>

<p>

</div></p>
</p>

<p>
Adăugați două stații noi și conectați-le la noul switch. Folosind 3 adrese IP din spațiul <code>10.0.100.0/24</code>, configurați cele două stații proaspăt adăugate și interfață cea nouă a ruterului.
</p>

<p>
<p><div class="notetip">
Un model de configurare al adresei IP pe interfața unui ruter îl găsiți în <a href="../../../../rl/labs/03/contents/12.html" class="wikilink1" title="rl:labs:03:contents:12">Laboratorul 3</a>
</p>

<p>
Pentru a activa o interfață a ruterului, accesați modul de configurare a interfeței și folosiți comanda <code>no shutdown</code>.

</div></p>
</p>

<p>
Pe cele două stații proaspăt adăugate configurați  adresa IP a interfeței celei noi a ruterului ca adresă pentru <em>default gateway</em>.
</p>

<p>
Dacă aveți o configurație corespunzătoare, veți avea conectivitate între toate stațiile din topologie.
</p>

</div>
<!-- EDIT21 SECTION "04. [10p] Adresare și default gateway" [1-] --><!-- EDIT20 PLUGIN_INCLUDE_END "rl:labs:05:contents:04" [0-] --></div>
<div class="level2">

</div>
<!-- EDIT22 PLUGIN_INCLUDE_START "rl:labs:05:contents:05" [0-] --><div class="plugin_include_content plugin_include__rl:labs:05:contents:05">

<h3 class="sectionedit24" id="p_configurare_rute_statice">05. [10p] Configurare rute statice</h3>
<div class="level3">

<p>
În topologia de la <a href="../../../../_media/rl/labs/05/contents/rl_lab-05_rute-statice.pkt" class="media mediafile mf_pkt" title="rl:labs:05:contents:rl_lab-05_rute-statice.pkt (7.9 KB)">această adresă</a> se află două rețele interconectate prin două rutere cascadate. Fiecare rețea conține un switch și două stații. Observați că există conectivitate între stațiile din aceeași rețea și ruterul conectat la acea rețea.
</p>

<p>
Observați că nu există conectivitate între stații din rețele diferite. Mai mult nu există conectivate între cele două rutere: trimiteți mesaje Packet Tracer între rutere.
</p>

<p>
Pentru a asigura conectivitate completă în cadrul topologie vom realiza următorii pași:
</p>
<ol>
<li class="level1"><div class="li"> Vom configura adrese IP în rețeaua formată de cele două rutere, adică pe legătura <code>Router0(Fa1/0)</code> ↔ <code>Router1(Fa1/0)</code>. După acest pas ruterele vor comunica între ele.</div>
</li>
<li class="level1"><div class="li"> Vom configura, pe fiecare ruter, o rută către rețeaua la care nu are acces. Ruta va trece prin celălalt ruter. În acest moment vom avea conectivitate la nivelul întregii topologii.</div>
</li>
</ol>

<p>
Pentru început observăm că ruterele nu au configurate adrese IP pe interfețele de legătură între ele. În cazul ruterului <code>Router0</code>, interfața <code>FastEthernet1/0</code> nu are adresă IP:
</p>
<pre class="code">Router0&gt;enable
Router0#show ip interface brief 
Interface              IP-Address      OK? Method Status                Protocol
 
FastEthernet0/0        14.14.14.1      YES manual up                    up
 
FastEthernet1/0        unassigned      YES unset  up                    down</pre>

<p>
Vom folosi spațiul <code>30.30.30.32/30</code> pentru a aloca două adrese IP în vederea conectării celor două rutere. Vom configura adresa IP <code>30.30.30.33</code> cu masca <code>255.255.255.252</code> pe interfața <code>FastEthernet1/0</code> a ruterului <code>Router0</code> și adresa IP <code>30.30.30.34</code> cu masca <code>255.255.255.252</code> pe interfața <code>FastEthernet1/0</code> ruterului <code>Router1</code>:
</p>
<pre class="code">Router0#configure terminal
Router0(config)#interface fastEthernet 1/0
Router0(config-if)#ip address 30.30.30.33 255.255.255.252
Router0(config-if)#no shutdown 

Router1#configure terminal
Router1(config)#interface fastEthernet 1/0
Router1(config-if)#ip address 30.30.30.34 255.255.255.252
Router1(config-if)#no shutdown </pre>

<p>
Observați că acum există conectivitate între cele două rutere: puteți folosi comanda <code>ping</code> din consola ruterului sau mesaje de tip Packet Tracer. Există de asemenea, conectivitate între stații și ruterul direct conectat la rețeaua lor.
</p>

<p>
Nu există însă conectivitate între stațiile din rețele diferite. Intrați în modul <code>Simulation</code> și observați că pachetele trimise de la <code>PC0</code> la <code>PC2</code> se opresc la <code>Router0</code> întrucât acesta nu șite unde se află rețeaua din care face parte <code>PC2</code> (<code>15.15.15.0/24</code>); adică nu are rută către rețeaua <code>15.15.15.0/24</code>. Pentru această trebuie să adăugăm pe fiecare ruter o rută către rețeaua la care nu este conectat în mod direct:
</p>
<ul>
<li class="level1"><div class="li"> pe ruterul <code>Router0</code> o rută către rețeaua <code>15.15.15.0/24</code> având ca next hop ruterul <code>Router1</code> (mai precis prin interfața <code>FastEthernet1/0</code> a ruterului <code>Router1</code>)</div>
</li>
<li class="level1"><div class="li"> pe ruterul <code>Router1</code> o rută către rețeaua <code>14.14.14.0/24</code> având ca next hop ruterul <code>Router0</code> (mai precis prin interfața <code>FastEthernet1/0</code> a ruterului <code>Router0</code>)</div>
</li>
</ul>

<p>
Adică vom realiza următoarele configurări:
</p>
<ul>
<li class="level1"><div class="li"> Pe ruterul <code>Router0</code> vom adăuga o rută statică în care specificăm că toate pachete destinate rețelei <code>15.15.15.0/24</code> să fie trimise către adresa <code>30.30.30.34</code> (adresa IP a interfeței <code>FastEthernet1/0</code> a ruterului <code>Router1</code>):<pre class="code">Router0#configure terminal
Router0(config)#ip route 15.15.15.0 255.255.255.0 30.30.30.34</pre>
</div>
</li>
<li class="level1"><div class="li"> Pe ruterul <code>Router1</code> vom adăuga o rută statică în care specificăm că toate pachete destinate rețelei <code>14.14.14.0/24</code> să fie trimise către adresa <code>30.30.30.33</code> (adresa IP a interfeței <code>FastEthernet1/0</code> a ruterului <code>Router0</code>):<pre class="code">Router1#configure terminal
Router1(config)#ip route 14.14.14.0 255.255.255.0 30.30.30.33</pre>
</div>
</li>
</ul>

<p>
Formatul comenzii de adăugare de rute este următorul:
</p>
<ul>
<li class="level1"><div class="li"> șirul <code>ip route</code></div>
</li>
<li class="level1"><div class="li"> adresa de rețea: <code>15.15.15.0</code> respectiv <code>14.14.14.0</code></div>
</li>
<li class="level1"><div class="li"> masca de rețea: <code>255.255.255.0</code></div>
</li>
<li class="level1"><div class="li"> next hop-ul, adică adresa către care trebuie să fie trimise pachetele: <code>30.30.30.34</code> respectiv <code>30.30.30.33</code></div>
</li>
</ul>

<p>
Dacă aveți o configurație corespunzătoare, veți avea conectivitate între toate stațiile din topologie.
</p>

<p>
<p><div class="notetip">
În modul <code>Simulation</code> puteți observa cum se modifică la fiecare pas cum se modifică adresele MAC ale pachetului (adresa MAC sursă și adresa MAC destinație) și câmpul <code>TTL</code>.

</div></p>
</p>

</div>
<!-- EDIT24 SECTION "05. [10p] Configurare rute statice" [1-] --><!-- EDIT23 PLUGIN_INCLUDE_END "rl:labs:05:contents:05" [0-] --></div>
<div class="level2">

</div>
<!-- EDIT25 PLUGIN_INCLUDE_START "rl:labs:05:contents:06" [0-] --><div class="plugin_include_content plugin_include__rl:labs:05:contents:06">

<h3 class="sectionedit27" id="p_vizualizare_tabela_de_rutare">06. [5p] Vizualizare tabelă de rutare</h3>
<div class="level3">

<p>
Rutele adăugate anterior sunt rute statice: rute adăugate manual de utilizator. Pentru a vizualiza tabela de rutare (conținând rute statice, dinamice sau direct conectate) folosiți comanda <code>show ip route</code>:
</p>
<pre class="code">Router1#show ip route
Codes: C - connected, S - static, I - IGRP, R - RIP, M - mobile, B - BGP
       D - EIGRP, EX - EIGRP external, O - OSPF, IA - OSPF inter area
       N1 - OSPF NSSA external type 1, N2 - OSPF NSSA external type 2
       E1 - OSPF external type 1, E2 - OSPF external type 2, E - EGP
       i - IS-IS, L1 - IS-IS level-1, L2 - IS-IS level-2, ia - IS-IS inter area
       * - candidate default, U - per-user static route, o - ODR
       P - periodic downloaded static route

Gateway of last resort is not set

     14.0.0.0/24 is subnetted, 1 subnets
S       14.14.14.0 [1/0] via 30.30.30.33
     15.0.0.0/24 is subnetted, 1 subnets
C       15.15.15.0 is directly connected, FastEthernet0/0
     30.0.0.0/30 is subnetted, 1 subnets
C       30.30.30.32 is directly connected, FastEthernet1/0</pre>

<p>
Fiecare dintre cele două rutere din topologie va avea în tabela de rutare trei rute:
</p>
<ul>
<li class="level1"><div class="li"> două rute <strong>direct conectate</strong> (marcate cu <code>C</code>)</div>
</li>
<li class="level1"><div class="li"> o rută <strong>statică</strong> (marcată cu <code>S</code>)</div>
</li>
</ul>

<p>
Rutele direct conectate (marcate cu <code>C</code>) sunt adăugate de sistemul de operare la configurarea unei adrese IP pe ruter și asigură conectivitatea la alte stații din rețeaua respectivă. Pentru a permite conectivitate la alte rețele (care nu sunt direct conectate), trebuie adăugate alte rute. Aceste rute sunt adăugate de administrator (manual, rute statice) sau de un protocol de rutare (automat, rute dinamice). Pe Cisco IOS, rutele statice sunt marcat cu <code>S</code> iar rutele dinamice sunt marcate cu o literă specifică protocolului (<code>O</code> pentru OSPF, <code>R</code> pentru RIP). În tabela de rutare de mai sus avem o singură rută statică, adăugată manual pentru a permite conectivitatea la rețeaua care nu era direct conectată la ruter.
</p>

</div>
<!-- EDIT27 SECTION "06. [5p] Vizualizare tabelă de rutare" [1-] --><!-- EDIT26 PLUGIN_INCLUDE_END "rl:labs:05:contents:06" [0-] --></div>
<div class="level2">

</div>
<!-- EDIT28 PLUGIN_INCLUDE_START "rl:labs:05:contents:07" [0-] --><div class="plugin_include_content plugin_include__rl:labs:05:contents:07">

<h3 class="sectionedit30" id="p_adresare_si_configurare_rute_statice">07. [15p] Adresare și configurare rute statice</h3>
<div class="level3">

<p>
Dorim să configurăm rutarea într-o topologie cu trei rutere.
</p>

<p>
În topologia de la <a href="../../../../_media/rl/labs/05/contents/rl_lab-05_adresare-rutare-linie.pkt" class="media mediafile mf_pkt" title="rl:labs:05:contents:rl_lab-05_adresare-rutare-linie.pkt (8 KB)">această adresă</a> se află două rețele interconectate prin trei rutere cascadate. Dorim să asigurăm conectivitate completă între toate stațiile.
</p>

<p>
Pe moment sunt configurate:
</p>
<ul>
<li class="level1"><div class="li"> adresă IP pe fiecare stație</div>
</li>
<li class="level1"><div class="li"> default gateway pe fiecare stație: ruterul din rețea (de fapt adresa IP a ruterului din rețea)</div>
</li>
<li class="level1"><div class="li"> adresă IP pe fiecare interfață de ruter dintr-o rețea cu stații: <code>Router0(Fa0/0)</code>, <code>Router1(Fa1/0)</code></div>
</li>
</ul>

<p>
<p><div class="notetip">
Glisați (<em>hover</em>) mouse-ul deasupra stațiilor și ruterelor pentru a afla adresa IP a fiecărei stații și a interfeței configurate a fiecărui ruter.

</div></p>
</p>

<p>
Folosiți <code>ping</code> de pe fiecare din ruterele cu interfețele în rețele cu stații (<code>Router0</code> și <code>Router1</code>) pentru verificarea conectivității la stațiile din rețea. La fel, pentru stații, folosiți <code>ping</code> pentru a verifica conectivtatea la ruterul din rețea și la cealaltă stație. Pentru stații, pentru a folosi <code>ping</code>, accesați tab-ul <code>Desktop</code> și opțiunea <code>Command Prompt</code>.
</p>

<p>
Veți realiza următori pași:
</p>
<ol>
<li class="level1"><div class="li"> Veți configura adrese IP pe cele două rețele dintre rutere (<code>Router0(Fa1/0)</code> ↔ <code>Router2(Fa0/0)</code>, <code>Router2(Fa1/0)</code> ↔ <code>Router1(Fa0/0)</code>).</div>
</li>
<li class="level1"><div class="li"> Veți adăuga rutele necesare pe fiecare ruter (vor trebui adăugate câte două rute).</div>
</li>
<li class="level1"><div class="li"> Veți verifica faptul că toate stațiile sunt conectate cu ajutorul comenzii <code>ping</code> și veți depana problemele întâlnite.</div>
</li>
</ol>

<p>
Pentru cele două rețele dintre rutere configurați adresele astfel:
</p>
<ol>
<li class="level1"><div class="li"> Pentru rețeaua <code>Router0(Fa1/0)</code> ↔ <code>Router2(Fa0/0)</code> configurați adrese din spațiul <code>4.4.4.0/30</code>.</div>
</li>
<li class="level1"><div class="li"> Pentru rețeaua <code>Router2(Fa1/0)</code> ↔ <code>Router1(Fa0/0)</code> configurați adrese din spațiul <code>4.4.4.4/30</code>.</div>
</li>
</ol>

<p>
Pentru a asigura conectivitate între toate stațiile va trebui să adăugați rute statice pe rutere. Întrucât există patru rețele în topologie, fiecare ruter va avea în final patru rute. Momentan, fiecare ruter are câte două rute, ambele direct conectate. Verificați acest lucru prin rularea comenzii <code>show ip route</code>.
</p>

<p>
Vor trebui adăugate pe fiecare ruter câte două rute statice către rețelele care nu sunt direct conectate. Veți adăuga astfel:
</p>
<ul>
<li class="level1"><div class="li"> pe ruterul <code>Router0</code></div>
<ol>
<li class="level2"><div class="li"> o rută către rețeaua <code>Router2(Fa1/0)</code> ↔ <code>Router1(Fa0/0)</code> (adică <code>4.4.4.4/30</code>) având ca next hop adresa IP a interfeței <code>Fa0/0</code> a ruterului <code>Router2</code></div>
</li>
<li class="level2"><div class="li"> o rută către rețeaua stațiilor <code>PC2</code> și <code>PC3</code> (adică <code>172.16.100.0/24</code>) având ca next hop <strong>tot</strong> adresa IP a interfeței <code>Fa0/0</code> a ruterului <code>Router2</code></div>
</li>
</ol>
</li>
<li class="level1"><div class="li"> pe ruterul <code>Router1</code></div>
<ol>
<li class="level2"><div class="li"> o rută către rețeaua <code>Router0(Fa1/0)</code> ↔ <code>Router2(Fa0/0)</code> (adică <code>4.4.4.0/30</code>) având ca next hop adresa IP a interfeței <code>Fa1/0</code> a ruterului <code>Router2</code></div>
</li>
<li class="level2"><div class="li"> o rută către rețeaua stațiilor <code>PC0</code> și <code>PC1</code> (adică <code>192.168.100.0/24</code>) având ca next hop <strong>tot</strong> adresa IP a interfeței <code>Fa1/0</code> a ruterului <code>Router2</code></div>
</li>
</ol>
</li>
<li class="level1"><div class="li"> pe ruterul <code>Router2</code></div>
<ol>
<li class="level2"><div class="li"> o rută către rețeaua stațiilor <code>PC0</code> și <code>PC1</code> (adică <code>192.168.100.0/24</code>) având ca next hop adresa IP a interfeței <code>Fa1/0</code> a ruterului <code>Router0</code></div>
</li>
<li class="level2"><div class="li"> o rută către rețeaua stațiilor <code>PC2</code> și <code>PC3</code> (adică <code>172.16.100.0/24</code>) având ca next hop adresa IP a interfeței <code>Fa0/0</code> a ruterului <code>Router1</code></div>
</li>
</ol>
</li>
</ul>

<p>
În final, fiecare ruter va avea patru rute: două rute direct conectate și două rute statice conform configurației de mai sus. Folosiți comanda <code>show ip route</code> pentru a verifica acest lucru.
</p>

<p>
<p><div class="notetip">
Dacă ați greșit o rută, folosiți <code>no</code> în fața comenzii de adăugare de rute. De exemplu, dacă dorim să ștergem ruta către rețeaua <code>10.0.100.0/24</code> având ca next hop adresa IP <code>3.3.3.3</code>, vom folosi comanda:
</p>
<pre class="code">Router(config)#no ip route 10.0.100.0 255.255.255.0 3.3.3.3</pre>

<p>
Puteți căuta în istoria de comenzi, găsi comanda cu care ați adăugat ruta greșită și pune <code>no</code> în fața comenzii pentru a anula efectul acesteia.

</div></p>
</p>

<p>
După o configurare corectă veți avea conectivitate între toate stațiile din topologie. Pentru verificare folosiți comanda <code>ping</code> din meniul unei stații și transmiteți pachete către celelalte stații.
</p>

<p>
<p><div class="noteimportant">
În Cisco IOS primul pachet trimis poate să nu fie de fapt trimis din cauza absenței tabelei ARP. De aceea este posibil ca un set întreg de pachete trimise la rularea unei comenzi <code>ping</code> pe stație (sunt trimise patru în mod implicit) să eșueze, întrucât traversează multe rutere. A doua comandă <code>ping</code> pe stație va reuși, în cazul unei configurări corecte.

</div></p>
</p>

<p>
Dacă aveți probleme de conectivitate, verificați din aproape în aproape între ce dispozitive aveți sau nu conectivitate. Verificare din aproape în aproape înseamnă folosirea comenzii <code>ping</code> către adrese IP aflate la început aproape și apoi din ce în ce mai departe de stația care le-a generat. O verificare din aproape în aproape a conectivității între stațiile <code>PC0</code> și <code>PC2</code> înseamnă folosirea stația <code>PC0</code> a comenzii <code>ping</code> cu următoarele argumente:
</p>
<ol>
<li class="level1"><div class="li"> adresa IP a interfeței <code>Fa0/0</code> a ruterului <code>Router0</code>, adică <code>192.168.100.1</code></div>
</li>
<li class="level1"><div class="li"> adresa IP a interfeței <code>Fa1/0</code> a ruterului <code>Router0</code>, adică o adresă din rețeaua <code>4.4.4.0/30</code></div>
</li>
<li class="level1"><div class="li"> adresa IP a interfeței <code>Fa0/0</code> a ruterului <code>Router2</code>, adică cealaltă adresă din rețeaua <code>4.4.4.0/30</code></div>
</li>
<li class="level1"><div class="li"> adresa IP a interfeței <code>Fa1/0</code> a ruterului <code>Router2</code>, adică o adresă din rețeaua <code>4.4.4.4/30</code></div>
</li>
<li class="level1"><div class="li"> adresa IP a interfeței <code>Fa0/0</code> a ruterului <code>Router1</code>, adică cealaltă adresă din rețeaua <code>4.4.4.4/30</code></div>
</li>
<li class="level1"><div class="li"> adresa IP a interfeței <code>Fa1/0</code> a ruterului <code>Router1</code>, adică <code>172.16.100.1</code></div>
</li>
<li class="level1"><div class="li"> adresa IP a stației <code>PC2</code>, adică <code>172.16.100.2</code></div>
</li>
</ol>

<p>
În caz de probleme, urmăriți pe rutere adresele IP configurate (folosiți comanda <code>show ip interface brief</code>) și tabela de rutare (folosiți comanda <code>show ip route</code>) pentru fiecare ruter și identificați cauza problemei.
</p>

</div>
<!-- EDIT30 SECTION "07. [15p] Adresare și configurare rute statice" [1-] --><!-- EDIT29 PLUGIN_INCLUDE_END "rl:labs:05:contents:07" [0-] --></div>
<div class="level2">

</div>
<!-- EDIT31 PLUGIN_INCLUDE_START "rl:labs:05:contents:08" [0-] --><div class="plugin_include_content plugin_include__rl:labs:05:contents:08">

<h3 class="sectionedit33" id="p_depanare_probleme_de_configurare_a_rutarii">08. [10p] Depanare probleme de configurare a rutării</h3>
<div class="level3">

<p>
În topologia de la <a href="../../../../_media/rl/labs/05/contents/rl_lab-05_depanare.pkt" class="media mediafile mf_pkt" title="rl:labs:05:contents:rl_lab-05_depanare.pkt (9.2 KB)">această adresă</a> se află două rețele interconectate prin trei rutere cascadate. Există câteva probleme în cadrul toplogiei pe care ne propunem să le rezolvăm.
</p>

<p>
Pentru început, aflați adresele stațiilor și a interfețelor ruterelor glisând mouse-ul (<em>hover</em>) peste fiecare dispozitiv. Din tab-ul <code>Desktop</code> și opțiunea <code>Command prompt</code> (pe stații) sau din consolă (pe rutere) folosiți <code>ping</code> pentru a verifica unde există conectivitate.
</p>

<p>
De pe stația <code>PC0</code> verificați conectivitatea la stația <code>PC2</code>, adică adresa IP <code>15.15.15.2</code>. Comanda <code>ping</code> oferă răspunsul <code>Destination host unreachable.</code> deci există o problemă pe parcurs.
</p>

<p>
De pe stația <code>PC0</code> verificați conectivitatea la ruterul <code>Router2</code>, adică adresa IP <code>30.30.30.38</code>. Comanda <code>ping</code> nu reușește. Înseamnă că există o problemă la un ruter pe parcurs.
</p>

<p>
Afișați tabela de rutare a ruterului <code>Router0</code>, folosind comanda <code>show ip route</code>:
</p>
<pre class="code">Router0#show ip route
[...]
     14.0.0.0/24 is subnetted, 1 subnets
C       14.14.14.0 is directly connected, FastEthernet0/0
     30.0.0.0/30 is subnetted, 2 subnets
C       30.30.30.32 is directly connected, FastEthernet1/0
S       30.30.30.36 [1/0] via 30.30.30.34</pre>

<p>
Observați că ruterul <code>Router0</code> nu are rută către rețeaua <code>15.15.15.0/24</code>, rețea care conține stațiile <code>PC2</code> și <code>PC3</code>. Adăugați ruta corespunzătoare din meniul de configurare:
</p>
<pre class="code">Router0#configure terminal
Enter configuration commands, one per line.  End with CNTL/Z.
Router0(config)#ip route 15.15.15.0 255.255.255.0 30.30.30.34</pre>

<p>
Pe stația <code>PC0</code> folosiți <code>ping</code> pentru a verifica acum conectivitatea la stația <code>PC2</code> (adresa IP <code>15.15.15.2</code>) și la stația <code>PC3</code> (<code>15.15.15.254</code>). Există conectivitate deci această problemă este rezolvată.
</p>

<p>
Să verificăm și că ruterele au, de asemenea, conectivitate la toate celelalte rutere și la stații. De pe ruterul <code>Router0</code> verificăm conectivitatea la stația <code>PC2</code> (adresa IP <code>15.15.15.2</code>):
</p>
<pre class="code">Router0#ping 15.15.15.2

Type escape sequence to abort.
Sending 5, 100-byte ICMP Echos to 15.15.15.2, timeout is 2 seconds:
.....
Success rate is 0 percent (0/5)</pre>

<p>
Observați că nu există conectivitate. Pare ciudat, pentru că stația <code>PC0</code> are conectivitate la stația <code>PC2</code> dar ruterul <code>Router0</code> nu are. În continuare, verificăm conectivitatea la ruterul <code>Router2</code> (adresele <code>15.15.15.1</code> și <code>30.30.30.38</code>) și la ruterul <code>Router1</code> (adresele <code>30.30.30.37</code> și <code>30.30.30.34</code>):
</p>
<pre class="code">Router0#ping 15.15.15.1 

Type escape sequence to abort.
Sending 5, 100-byte ICMP Echos to 15.15.15.1, timeout is 2 seconds:
.....
Success rate is 0 percent (0/5)

Router0#ping 30.30.30.38

Type escape sequence to abort.
Sending 5, 100-byte ICMP Echos to 30.30.30.38, timeout is 2 seconds:
.....
Success rate is 0 percent (0/5)

Router0#ping 30.30.30.37

Type escape sequence to abort.
Sending 5, 100-byte ICMP Echos to 30.30.30.37, timeout is 2 seconds:
!!!!!
Success rate is 100 percent (5/5), round-trip min/avg/max = 1/4/7 ms

Router0#ping 30.30.30.34

Type escape sequence to abort.
Sending 5, 100-byte ICMP Echos to 30.30.30.34, timeout is 2 seconds:
!!!!!
Success rate is 100 percent (5/5), round-trip min/avg/max = 3/4/6 ms</pre>

<p>
Observați că avem conectivitate între ruterul <code>Router0</code> și ruterul <code>Router1</code> dar nu între ruterul <code>Router0</code> și ruterul <code>Router2</code>. Investigăm tabela de rutare a ruterului <code>Router1</code> și a ruterului <code>Router2</code>:
</p>
<pre class="code">Router1#sh ip route
[...]
     14.0.0.0/24 is subnetted, 1 subnets
S       14.14.14.0 [1/0] via 30.30.30.33
     15.0.0.0/24 is subnetted, 1 subnets
S       15.15.15.0 [1/0] via 30.30.30.38
     30.0.0.0/30 is subnetted, 2 subnets
C       30.30.30.32 is directly connected, FastEthernet1/0
C       30.30.30.36 is directly connected, FastEthernet0/0

Router2#sh ip route
[...]
     14.0.0.0/24 is subnetted, 1 subnets
S       14.14.14.0 [1/0] via 30.30.30.37
     15.0.0.0/24 is subnetted, 1 subnets
C       15.15.15.0 is directly connected, FastEthernet1/0
     30.0.0.0/30 is subnetted, 1 subnets
C       30.30.30.36 is directly connected, FastEthernet0/0</pre>

<p>
Observați că ruterul <code>Router2</code> nu are rută către rețeaua <code>30.30.30.32/30</code>, rețeaua dintre ruterele <code>Router0</code> și <code>Router1</code>. Adăugați ruta corespunzătoare din meniul de configurare:
</p>
<pre class="code">Router2#configure terminal
Enter configuration commands, one per line.  End with CNTL/Z.
Router2(config)#ip route 30.30.30.32 255.255.255.252 30.30.30.37</pre>

<p>
În acest moment există conectivitate între toate dispozitivele (stații și rutere) din topologie. Puteți verifica folosind comanda <code>ping</code>.
</p>

</div>
<!-- EDIT33 SECTION "08. [10p] Depanare probleme de configurare a rutării" [1-] --><!-- EDIT32 PLUGIN_INCLUDE_END "rl:labs:05:contents:08" [0-] --></div>
<div class="level2">

</div>
<!-- EDIT34 PLUGIN_INCLUDE_START "rl:labs:05:contents:09" [0-] --><div class="plugin_include_content plugin_include__rl:labs:05:contents:09">

<h3 class="sectionedit36" id="p_adresare_si_configurare_rute_statice_reiterare">09. [10p] Adresare și configurare rute statice (reiterare)</h3>
<div class="level3">

<p>
Dorim să suplimentăm tabelele de rutare de la <a href="../../../../rl/labs/05/contents/07.html" class="wikilink1" title="rl:labs:05:contents:07">07. [15p] Adresare și configurare rute statice</a>. Pentru aceasta, în topologia (funcțională) de la <a href="../../../../rl/labs/05/contents/07.html" class="wikilink1" title="rl:labs:05:contents:07">07. [15p] Adresare și configurare rute statice</a> adăugați un switch și două stații și conectați switch-ul la interfața <code>Fa2/0</code> a ruterului <code>Router2</code>.
</p>

<p>
Atribuiți celor două stații și interfeței <code>Fa2/0</code> a ruterului <code>Router2</code> adrese IP din rețeaua <code>10.0.100.0/24</code>. Apoi asiguarați conectivitate cu restul stațiilor din topologie.
</p>

<p>
Întrucât topologia conține acum cinci rețele, fiecare ruter va trebui să aibă cinci rute. Va trebui să adăugați încă o rută pe ruterele <code>Router0</code>, respectiv <code>Router1</code> către rețeaua <code>10.0.100.0/24</code>, rută ce va avea ca next hop adresa IP a interfeței corespunzătoare a ruterului <code>Router2</code>.
</p>

<p>
După o configurare corectă veți avea conectivitate între toate stațiile din topologie. Pentru verificare folosiți comanda <code>ping</code> din meniul unei stații și transmiteți pachete către celelalte stații.
</p>

<p>
<p><div class="noteimportant">
În Cisco IOS primul pachet trimis poate să nu fie de fapt trimis din cauza absenței tabelei ARP. De aceea este posibil ca un set întreg de pachete trimise la rularea unei comenzi <code>ping</code> pe stație (sunt trimise patru în mod implicit) să eșueze, întrucât traversează multe rutere. A doua comandă <code>ping</code> pe stație va reuși, în cazul unei configurări corecte.

</div></p>
</p>

<p>
Dacă aveți probleme de conectivitate, verificați din aproape în aproape între ce dispozitive aveți sau nu conectivitate. În caz de probleme, urmăriți pe rutere adresele IP configurate (folosiți comanda <code>show ip interface brief</code>) și tabela de rutare (folosiți comanda <code>show ip route</code>) pentru fiecare ruter și identificați cauza problemei.
</p>

</div>
<!-- EDIT36 SECTION "09. [10p] Adresare și configurare rute statice (reiterare)" [1-] --><!-- EDIT35 PLUGIN_INCLUDE_END "rl:labs:05:contents:09" [0-] --></div>
<div class="level2">

</div>
<!-- EDIT37 PLUGIN_INCLUDE_START "rl:labs:05:contents:10" [0-] --><div class="plugin_include_content plugin_include__rl:labs:05:contents:10">

<h3 class="sectionedit39" id="p_rute_implicite_pe_rutere">10. [10p] Rute implicite pe rutere</h3>
<div class="level3">

<p>
Dorim să simplificăm configurarea rutelor în topologia de la <a href="../../../../rl/labs/05/contents/07.html" class="wikilink1" title="rl:labs:05:contents:07">07. [15p] Adresare și configurare rute statice</a>, actualizată la <a href="../../../../rl/labs/05/contents/09.html" class="wikilink1" title="rl:labs:05:contents:09">09. [10p] Adresare și configurare rute statice (reiterare)</a>, prin folosirea rutelor implicite (<em>default route</em> și <em>default gateway</em>). Pentru aceasta, continuați pe topologia (funcțională) de la <a href="../../../../rl/labs/05/contents/07.html" class="wikilink1" title="rl:labs:05:contents:07">07. [15p] Adresare și configurare rute statice</a>, actualizată la <a href="../../../../rl/labs/05/contents/09.html" class="wikilink1" title="rl:labs:05:contents:09">09. [10p] Adresare și configurare rute statice (reiterare)</a>. O rută implicită este ruta care va fi aleasă pentru toate pachetele dacă nu există o altă rută care se potrivește.
</p>

<p>
Pentru aceasta veți urma doi pași:
</p>
<ol>
<li class="level1"><div class="li"> Pe ruterele <code>Router0</code> și <code>Router1</code> veți șterge cele trei rute statice adăugate anterior (două la <a href="../../../../rl/labs/05/contents/07.html" class="wikilink1" title="rl:labs:05:contents:07">07. [15p] Adresare și configurare rute statice</a> și una la <a href="../../../../rl/labs/05/contents/09.html" class="wikilink1" title="rl:labs:05:contents:09">09. [10p] Adresare și configurare rute statice (reiterare)</a>).</div>
</li>
<li class="level1"><div class="li"> Pe ruterele <code>Router0</code> respectiv <code>Router1</code> veți configura rute implicite pe ruterele având ca next hop ruterul <code>Router2</code></div>
</li>
</ol>

<p>
Pentru ștergerea unei rute, prefixați comanda de adăugare a unei rute cu <code>no</code>. De exemplu, dacă dorim să ștergem ruta către rețeaua <code>10.0.100.0/24</code> având ca next hop adresa IP <code>3.3.3.3</code>, vom folosi comanda:
</p>
<pre class="code">Router(config)#no ip route 10.0.100.0 255.255.255.0 3.3.3.3</pre>

<p>
Puteți căuta în istoria de comenzi, găsi comanda cu care ați adăugat ruta greșită și pune <code>no</code> în fața comenzii pentru a anula efectul acesteia.
</p>

<p>
Adăugarea rutelor implicite, înseamnă detaliat:
</p>
<ol>
<li class="level1"><div class="li"> Pe ruterul <code>Router0</code> veți adăuga rută implicită având ca next hop adresa IP a interfeței <code>Fa0/0</code> a ruterului <code>Router2</code>.</div>
</li>
<li class="level1"><div class="li"> Pe ruterul <code>Router1</code> veți adăuga rută implicită având ca next hop adresa IP a interfeței <code>Fa1/0</code> a ruterului <code>Router2</code>.</div>
</li>
</ol>

<p>
O rută implicită se configurează prin specificarea rutei către rețeaua <code>0.0.0.0/0</code> (sau rețeaua <code>0.0.0.0</code> cu masca <code>0.0.0.0</code>). De exemplu, dacă dorim să adăugăm o rută implicită care să aibă ca next hop adresa IP <code>3.3.3.3</code> vom folosi comanda:
</p>
<pre class="code">Router(config)#ip route 0.0.0.0 0.0.0.0 3.3.3.3</pre>

<p>
<p><div class="notetip">
Detalii despre configurarea rutei implicite (<em>default gateway</em>) în Cisco IOS se găsesc <a href="http://www.cisco.com/en/US/docs/routers/access/2900/hardware/installation/guide/Configure.html#wp1057229" class="urlextern" title="http://www.cisco.com/en/US/docs/routers/access/2900/hardware/installation/guide/Configure.html#wp1057229"  rel="nofollow">aici</a>.

</div></p>
</p>

<p>
O configurație corectă va înseamna conectivitate între toate stațiile din rețea. Dacă întâmpinați probleme:
</p>
<ol>
<li class="level1"><div class="li"> Verificați din aproape în aproape conectivitatea între dispozitive (stații sau rutere) și identificați dispozitivul cu probleme.</div>
</li>
<li class="level1"><div class="li"> Verificați adresele IP de pe ruterul problematic folosind comanda <code>show ip interface brief</code>.</div>
</li>
<li class="level1"><div class="li"> Verificați tabele de rutare de pe ruterul problematic folosind comanda <code>show ip route</code>.</div>
</li>
</ol>

</div>
<!-- EDIT39 SECTION "10. [10p] Rute implicite pe rutere" [1-] --><!-- EDIT38 PLUGIN_INCLUDE_END "rl:labs:05:contents:10" [0-] --></div>
<div class="level2">

</div>
<!-- EDIT40 PLUGIN_INCLUDE_START "rl:labs:05:contents:11" [0-] --><div class="plugin_include_content plugin_include__rl:labs:05:contents:11">

<h3 class="sectionedit42" id="bonus_-_10p_adresare_si_configurare_rute_statice_avansat">11. [BONUS - 10p] Adresare și configurare rute statice (avansat)</h3>
<div class="level3">

<p>
În topologia de la <a href="../../../../_media/rl/labs/05/contents/rl_lab-05_adresare-rute.pkt" class="media mediafile mf_pkt" title="rl:labs:05:contents:rl_lab-05_adresare-rute.pkt (8.8 KB)">această adresă</a> se află trei rețele interconectate prin patru rutere în stea. Dorim să asigurăm conectivate completă între toate stațiile.
</p>

<p>
Pe moment sunt configurate:
</p>
<ul>
<li class="level1"><div class="li"> adresă IP pe fiecare stație</div>
</li>
<li class="level1"><div class="li"> default gateway pe fiecare stație: ruterul din rețea (de fapt adresa IP a ruterului din rețea)</div>
</li>
<li class="level1"><div class="li"> adresă IP pe fiecare interfață de ruter dintr-o rețea cu stații: <code>Router0(Fa1/0)</code>, <code>Router1(Fa1/0)</code>, <code>Router2(Fa1/0)</code></div>
</li>
</ul>

<p>
<p><div class="notetip">
Glisați (<em>hover</em>) mouse-ul deasupra stațiilor și ruterelor pentru a afla adresa IP a fiecărei stații și a interfeței configurate a fiecărui ruter.

</div></p>
</p>

<p>
Folosiți <code>ping</code> de pe fiecare din ruterele cu interfețele în rețele cu stații (<code>Router0</code>, <code>Router1</code> și <code>Router2</code>) pentru a valida conectivitatea la stațiile din rețeaua proprie.
</p>

<p>
Pentru cele trei rețele dintre rutere (<code>Router0</code> ↔ <code>Router3</code>, <code>Router1</code> ↔ <code>Router3</code>, <code>Router2</code> ↔ <code>Router3</code>) împărțiți spațiul <code>32.32.32.32/28</code> în rețele cu masca <code>/30</code> (adică <code>255.255.255.252</code>). Atribuiți adrese interfețelor neconfigurate ale celor trei rutere.
</p>

<p>
Pentru a asigura conectivitate între toate stațiile va trebui să adăugați rute statice pe rutere. Recomandăm să adăugați astfel:
</p>
<ul>
<li class="level1"><div class="li"> pe ruterul <code>Router0</code> o rută implicită (<em>default gateway</em>) trecând prin ruterul <code>Router3</code> (adică adresa interfeței <code>Fa0/0</code> a ruterului <code>Router3</code>)</div>
</li>
<li class="level1"><div class="li"> pe ruterul <code>Router1</code> o rută implicită (<em>default gateway</em>) trecând prin ruterul <code>Router3</code> (adică adresa interfeței <code>Fa1/0</code> a ruterului <code>Router3</code>)</div>
</li>
<li class="level1"><div class="li"> pe ruterul <code>Router2</code> o rută implicită (<em>default gateway</em>) trecând prin ruterul <code>Router3</code> (adică adresa interfeței <code>Fa2/0</code> a ruterului <code>Router3</code>)</div>
</li>
<li class="level1"><div class="li"> pe ruterul <code>Router3</code> trei rute statice către fiecare dintre cele trei rețele cu stații, trecând respectiv prin ruterele <code>Router0</code>, <code>Router1</code> și <code>Router2</code> (adică adresele IP ale interfețelor <code>Fa0/0</code> ale celor trei rutere)</div>
</li>
</ul>

<p>
<p><div class="notetip">
Configurarea <em>default route/gateway</em> în Cisco IOS se realizează folosind adresa de rețea <code>0.0.0.0/0</code>. Detalii <a href="http://www.cisco.com/en/US/docs/routers/access/2900/hardware/installation/guide/Configure.html#wp1057229" class="urlextern" title="http://www.cisco.com/en/US/docs/routers/access/2900/hardware/installation/guide/Configure.html#wp1057229"  rel="nofollow">aici</a>.

</div></p>
</p>

<p>
După o configurare corectă veți avea conectivitate între toate stațiile din topologie. Pentru verificare folosiți comanda <code>ping</code> din meniul unei stații și transmiteți pachete către celelalte stații: accesați tab-ul <code>Desktop</code>, icon-ul <code>Command Prompt</code>.
</p>

<p>
<p><div class="noteimportant">
În Cisco IOS primul pachet trimis poate să nu fie de fapt trimis din cauza absenței tabelei ARP. De aceea este posibil ca un set întreg de pachete trimise la rularea unei comenzi <code>ping</code> pe stație (sunt trimise patru în mod implicit) să eșueze, întrucât traversează multe rutere. A doua comandă <code>ping</code> pe stație va reuși, în cazul unei configurări corecte.

</div></p>
</p>

<p>
Dacă aveți probleme de conectivitate, verificați din aproape în aproape între ce dispozitive aveți sau nu conectivitate. Urmăriți adresele IP configurate (folosiți comanda <code>show ip interface brief</code>) și tabela de rutare (folosiți comanda <code>show ip route</code>) pentru fiecare ruter și identificați cauza problemei.
</p>

</div>
<!-- EDIT42 SECTION "11. [BONUS - 10p] Adresare și configurare rute statice (avansat)" [1-] --><!-- EDIT41 PLUGIN_INCLUDE_END "rl:labs:05:contents:11" [0-] --></div>
<div class="level2">

</div>
<!-- EDIT43 PLUGIN_INCLUDE_START "rl:labs:05:contents:12" [0-] --><div class="plugin_include_content plugin_include__rl:labs:05:contents:12">

<h3 class="sectionedit45" id="bonus_-_10p_rutare_inter-vlan">12. [BONUS - 10p] Rutare inter-VLAN</h3>
<div class="level3">

<p>
În cazul în care avem o configurație cu mai multe VLAN-uri care sunt colectate în același switch se pune problema rutării pachetelor din acele VLAN-uri, eventual chiar posibilitatea comunicării între VLAN-uri (<em>inter-VLAN routing</em>). Pentru aceasta putem configura o legătură de tip trunchi între un switch care colectează VLAN-uri și un ruter care poate ruta pachetele încapsulate. Un astfel de ruter are nevoie de o singură interfață care să permită rutarea între VLAN-uri, motiv pentru care se mai cheamă <em>router on a stick</em> sau <em>one-armed router</em><sup><a href="05.html#fn__1" id="fnt__1" class="fn_top">1)</a></sup>.
</p>

<p>
În topologia de la <a href="../../../../_media/rl/labs/05/contents/rl_lab-05_rutare-inter-vlan.pkt" class="media mediafile mf_pkt" title="rl:labs:05:contents:rl_lab-05_rutare-inter-vlan.pkt (8 KB)">această adresă</a> se găsește o rețea cu două VLAN-uri (VLAN <code>10</code> și VLAN <code>20</code>). Stațiile <code>PC0</code> și <code>PC1</code> fac parte din VLAN-ul <code>10</code>, iar stațiile <code>PC2</code> și <code>PC3</code> fac parte din VLAN-ul <code>20</code>. Stațiile au configurate adrese IP și pot comunica în cadrul aceluiași VLAN.
</p>

<p>
Switch-ul <code>Switch1</code> are configurate două porturi în modul acces:
</p>
<ul>
<li class="level1"><div class="li"> portul <code>Fa0/1</code> în VLAN-ul <code>10</code></div>
</li>
<li class="level1"><div class="li"> portul <code>Fa1/1</code> în VLAN-ul <code>20</code></div>
</li>
</ul>

<p>
Switch-urile <code>Switch0</code> și <code>Switch2</code> nu au configurate VLAN-uri; fac simple operații de comutare.
</p>

<p>
Legătura dintre switch-ul <code>Switch1</code> și ruterul <code>Router0</code> este o legătură de tip trunchi, cu ruterul <code>Router0</code> pe post de <em>router on a stick</em>.
</p>

<p>
Realizați configurările necesare pentru a permite rutarea inter-VLAN și, deci, stațiilor din VLAN-uri diferite să comunice unele cu celelalte. Va trebui să configurați <em>Default Gateway</em> pe stații.
</p>

<p>
<p><div class="noteclassic">
Va trebui să configurați interfața <code>FastEthernet2/1</code> a switch-ului <code>Switch1</code> în modul <code>trunk</code>.

</div></p>
</p>

<p>
<p><div class="notetip">
Informații despre configurarea încapsulării <code>dot1Q</code> pe un ruter se găsesc <a href="http://www.cisco.com/en/US/tech/tk389/tk815/technologies_configuration_example09186a00800949fd.shtml#configs" class="urlextern" title="http://www.cisco.com/en/US/tech/tk389/tk815/technologies_configuration_example09186a00800949fd.shtml#configs"  rel="nofollow">aici</a>: frame-ul <code>2600 Router</code>.

</div></p>
</p>

</div>
<!-- EDIT45 SECTION "12. [BONUS - 10p] Rutare inter-VLAN" [1-] --><!-- EDIT44 PLUGIN_INCLUDE_END "rl:labs:05:contents:12" [0-] --></div>
<div class="level2">

</div>
<!-- EDIT46 PLUGIN_INCLUDE_START "rl:labs:05:contents:sidebar" [0-] --><div class="plugin_include_content plugin_include__rl:labs:05:contents:sidebar">

<h3 class="sectionedit48" id="navigare1">Navigare</h3>
<div class="level3">

<p>
<strong><span class="curid"><a href="../../../../rl/labs/05.html" class="wikilink1" title="rl:labs:05">Laboratorul 5</a></span></strong>
</p>

</div>
<!-- EDIT49 PLUGIN_INCLUDE_START "rl:labs:05:meta:nav" [0-] --><div class="plugin_include_content plugin_include__rl:labs:05:meta:nav">
<div class="level4">

<div><div id="nojs_indexmenu_114696077858356083d536c" data-jsajax="%26skipfile%3D%252B/sidebar/" class="indexmenu_nojs">

<ul class="idx">
<li class="level1"><div class="li"><a href="../../../../rl/labs/05/contents/00.html" class="wikilink1" title="rl:labs:05:contents:00">00. [5p] Procesul de rutare</a></div></li>
<li class="level1"><div class="li"><a href="../../../../rl/labs/05/contents/01.html" class="wikilink1" title="rl:labs:05:contents:01">01. [10p] Configurare default gateway</a></div></li>
<li class="level1"><div class="li"><a href="../../../../rl/labs/05/contents/02.html" class="wikilink1" title="rl:labs:05:contents:02">02. [10p] Antetul pachetelor în procesul de rutare</a></div></li>
<li class="level1"><div class="li"><a href="../../../../rl/labs/05/contents/03.html" class="wikilink1" title="rl:labs:05:contents:03">03. [5p] Rute și pachete de reply</a></div></li>
<li class="level1"><div class="li"><a href="../../../../rl/labs/05/contents/04.html" class="wikilink1" title="rl:labs:05:contents:04">04. [10p] Adresare și default gateway</a></div></li>
<li class="level1"><div class="li"><a href="../../../../rl/labs/05/contents/05.html" class="wikilink1" title="rl:labs:05:contents:05">05. [10p] Configurare rute statice</a></div></li>
<li class="level1"><div class="li"><a href="../../../../rl/labs/05/contents/06.html" class="wikilink1" title="rl:labs:05:contents:06">06. [5p] Vizualizare tabelă de rutare</a></div></li>
<li class="level1"><div class="li"><a href="../../../../rl/labs/05/contents/07.html" class="wikilink1" title="rl:labs:05:contents:07">07. [15p] Adresare și configurare rute statice</a></div></li>
<li class="level1"><div class="li"><a href="../../../../rl/labs/05/contents/08.html" class="wikilink1" title="rl:labs:05:contents:08">08. [10p] Depanare probleme de configurare a rutării</a></div></li>
<li class="level1"><div class="li"><a href="../../../../rl/labs/05/contents/09.html" class="wikilink1" title="rl:labs:05:contents:09">09. [10p] Adresare și configurare rute statice (reiterare)</a></div></li>
<li class="level1"><div class="li"><a href="../../../../rl/labs/05/contents/10.html" class="wikilink1" title="rl:labs:05:contents:10">10. [10p] Rute implicite pe rutere</a></div></li>
<li class="level1"><div class="li"><a href="../../../../rl/labs/05/contents/11.html" class="wikilink1" title="rl:labs:05:contents:11">11. [BONUS - 10p] Adresare și configurare rute statice (avansat)</a></div></li>
<li class="level1"><div class="li"><a href="../../../../rl/labs/05/contents/12.html" class="wikilink1" title="rl:labs:05:contents:12">12. [BONUS - 10p] Rutare inter-VLAN</a></div></li>
</ul>
</div></div>

</div>
<!-- EDIT50 PLUGIN_INCLUDE_END "rl:labs:05:meta:nav" [0-] --></div>
<div class="level4">

</div>
<!-- EDIT48 SECTION "Navigare" [1-] --><!-- EDIT47 PLUGIN_INCLUDE_END "rl:labs:05:contents:sidebar" [0-] --></div>
<div class="level2">

</div>
<!-- EDIT6 SECTION "Exerciții" [423-] --><div class="footnotes">
<div class="fn"><sup><a href="05.html#fnt__1" id="fn__1" class="fn_bot">1)</a></sup> 
<a href="http://en.wikipedia.org/wiki/One-armed_router" class="urlextern" title="http://en.wikipedia.org/wiki/One-armed_router"  rel="nofollow">http://en.wikipedia.org/wiki/One-armed_router</a></div>
</div>
</div>
</body>
</html>

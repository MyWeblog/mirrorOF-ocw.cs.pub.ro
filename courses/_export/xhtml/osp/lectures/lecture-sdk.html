    
    

<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="utf-8" />
  <title>osp:lectures:lecture-sdk</title>
<meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="date" content="2016-11-06T18:44:52+0200"/>
<meta name="keywords" content="osp,lectures,lecture-sdk"/>
<link rel="search" type="application/opensearchdescription+xml" href="../../../../lib/exe/opensearch.php" title="CS Open CourseWare"/>
<link rel="start" href="../../../../../courses.1.html"/>
<link rel="alternate" type="application/rss+xml" title="Recent Changes" href="../../../../feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current Namespace" href="../../../../feed.php%3Fmode=list&amp;ns=osp:lectures"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="lecture-sdk.html"/>
<link rel="canonical" href="../../../../osp/lectures/lecture-sdk.html"/>
<link rel="stylesheet" type="text/css" href="../../../../lib/exe/css.php%3Ft=arctic&amp;tseed=1476798676.css"/>
<script type="text/javascript">/*<![CDATA[*/var NS='osp:lectures';var JSINFO = {"id":"osp:lectures:lecture-sdk","namespace":"osp:lectures","isadmin":0,"isauth":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="../../../../lib/exe/js.php%3Ftseed=1476798676"></script>
<script type="text/x-mathjax-config">/*<![CDATA[*/MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ["$","$"], ["\\(","\\)"] ],
        displayMath: [ ["$$","$$"], ["\\[","\\]"] ],
        processEscapes: true
    }
});
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
<script type="text/javascript">/*<![CDATA[*/
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
		  
/*!]]>*/</script>
<script type="text/javascript">/*<![CDATA[*/
var pageTracker = _gat._getTracker("UA-38383934-1");
pageTracker._initData();
pageTracker._trackPageview();
		  
/*!]]>*/</script>
</head>
<body>
<div class="dokuwiki export">
<!-- TOC START -->
<div id="dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level2"><div class="li"><a href="lecture-sdk.html#android_sdk">02 - Android SDK</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="lecture-sdk.html#lecture">Lecture</a></div></li>
<li class="level3"><div class="li"><a href="lecture-sdk.html#practical">Practical</a></div>
<ul class="toc">
<li class="level4"><div class="li"><a href="lecture-sdk.html#resources">Resources</a></div></li>
<li class="level4"><div class="li"><a href="lecture-sdk.html#files">Files</a></div></li>
<li class="level4"><div class="li"><a href="lecture-sdk.html#task_0_-_setting_up_the_environment">Task 0 - Setting up the environment</a></div></li>
<li class="level4"><div class="li"><a href="lecture-sdk.html#task_1_-_create_and_run_an_application">Task 1 - Create and run an application</a></div></li>
<li class="level4"><div class="li"><a href="lecture-sdk.html#task_2_-_creating_a_virtual_device">Task 2 - Creating a virtual device</a></div></li>
<li class="level4"><div class="li"><a href="lecture-sdk.html#task_3_-_add_a_button">Task 3 - Add a button</a></div></li>
<li class="level4"><div class="li"><a href="lecture-sdk.html#task_4_-_use_logcat_for_debugging">Task 4 - Use logcat for debugging</a></div></li>
<li class="level4"><div class="li"><a href="lecture-sdk.html#task_5_-_view_weight">Task 5 - View weight</a></div></li>
<li class="level4"><div class="li"><a href="lecture-sdk.html#task_6_-_use_adb_to_transfer_files_and_install_apps">Task 6 - Use ADB to transfer files and install apps</a></div></li>
</ul></li>
</ul></li>
</ul>
</div>
</div>
<!-- TOC END -->

<h2 class="sectionedit1" id="android_sdk">02 - Android SDK</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> Description: Development environment on Android, overview of the Android SDK</div>
</li>
<li class="level1"><div class="li"> Practical part: Android SDK development</div>
</li>
</ul>

</div>
<!-- EDIT1 SECTION "02 - Android SDK" [1-157] -->
<h3 class="sectionedit2" id="lecture">Lecture</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"><a href="../../../../_media/osp/lectures/lecture-sdk.pdf" class="media mediafile mf_pdf" title="osp:lectures:lecture-sdk.pdf (1.1 MB)"> Lecture Slides</a></div>
</li>
<li class="level1"><div class="li"><a href="../../../../_media/osp/lectures/2.sdk_notes.pdf" class="media mediafile mf_pdf" title="osp:lectures:2.sdk_notes.pdf (79.4 KB)"> Lecture Notes</a></div>
</li>
</ul>

<p>
<iframe title="" src="../../../../_media/osp/lectures/lecture-sdk.pdf" style="width:98%; height:400px"></iframe>
</p>

</div>
<!-- EDIT2 SECTION "Lecture" [158-359] -->
<h3 class="sectionedit3" id="practical">Practical</h3>
<div class="level3">

</div>

<h4 id="resources">Resources</h4>
<div class="level4">
<ul>
<li class="level1"><div class="li"> Android Studio: <a href="http://developer.android.com/sdk/index.html#top" class="urlextern" title="http://developer.android.com/sdk/index.html#top"  rel="nofollow">http://developer.android.com/sdk/index.html#top</a></div>
</li>
<li class="level1"><div class="li"> Android Developers: <a href="https://developer.android.com/index.html" class="urlextern" title="https://developer.android.com/index.html"  rel="nofollow">https://developer.android.com/index.html</a></div>
</li>
</ul>

</div>

<h4 id="files">Files</h4>
<div class="level4">

<p>
<a href="../../../../_media/ndk/courses/lab-1.zip" class="media mediafile mf_zip" title="ndk:courses:lab-1.zip (860.3 KB)">lab-1.zip</a>
</p>

</div>

<h4 id="task_0_-_setting_up_the_environment">Task 0 - Setting up the environment</h4>
<div class="level4">

<p>
To install Android Studio on your own machine follow the step here: <a href="http://developer.android.com/sdk/installing/index.html?pkg=studio" class="urlextern" title="http://developer.android.com/sdk/installing/index.html?pkg=studio"  rel="nofollow">Installing Android Studio</a>. Android studio is already installed on the workstations in the lab.
</p>

</div>

<h4 id="task_1_-_create_and_run_an_application">Task 1 - Create and run an application</h4>
<div class="level4">

<p>
Create a new Android Project in Android Studio (<strong>Start a new Android Studio Project</strong>). Choose a name and leave other options as they are. On the next screen choose <strong>Phone and Tablet</strong> and choose <abbr title="Application Programming Interface">API</abbr> level 15 or higher. Choose <strong>Empty Activity</strong> on the next screen. Continue to the next screen and click finish. On the sidebar on the left choose project and open <strong> java &gt; student.example.com &gt; MainActivity</strong>. This activity is very simple right now.
</p>

<p>
Run the project by clicking the green arrow on the toolbar above the editing area. Android Studio will prompt you to choose a device. Follow the steps in the next tasks to create a new virtual device.
</p>

</div>

<h4 id="task_2_-_creating_a_virtual_device">Task 2 - Creating a virtual device</h4>
<div class="level4">

<p>
Create a virtual device:
</p>
<ol>
<li class="level1"><div class="li"> Click <strong>…</strong> next to the <strong>Android Virtual Device</strong> list under the <strong>Launch emulator</strong> option</div>
</li>
<li class="level1"><div class="li"> Click <strong>Create Virtual Device</strong>.</div>
</li>
<li class="level1"><div class="li"> Choose Nexus 4 or Galaxy Nexus screen resolution. Click Next.</div>
</li>
<li class="level1"><div class="li"> Choose Marshmallow x86 image. Download if needed. Click next.</div>
</li>
<li class="level1"><div class="li"> Give the device 512-1024 MBs of RAM and 64 <abbr title="Megabyte">MB</abbr> VM Heap (Under Advance Options)</div>
</li>
<li class="level1"><div class="li"> Give the device 200 <abbr title="Megabyte">MB</abbr> SD Card.</div>
</li>
<li class="level1"><div class="li"> Select Use Host GPU.</div>
</li>
</ol>

<p>
On Windows, if HAXM service is started, Android Virtual Devices will run virtualized. On Linux KVM is required for this.
</p>

<p>
On Linux you have to specify emulator launch parameters to use virtualization:
</p>
<ol>
<li class="level1"><div class="li"> Click  <strong>Run &gt; Edit Configurations</strong> in the top menu</div>
</li>
<li class="level2"><div class="li"> Select the <strong>Emulator</strong> tab and in the <strong>Additional command line options</strong> field, enter: -qemu -m 1024 -enable-kvm</div>
</li>
</ol>

<p>
You can also add this to the general setup by following the previous steps, but selecting: <strong>Defaults &gt; Android Application</strong> between the two steps.
</p>

<p>
You can also launch the emulator from the terminal, assuming default location:
</p>
<pre class="code">./Android/Sdk/tools/emulator -avd Nexus_4_API_23 -gpu on -qemu -m 1024 -enable-kvm</pre>

<p>
Close the AVD Manager window, select the newly created device from the list. Wait for the emulator to boot and check that your empty application starts.
</p>

</div>

<h4 id="task_3_-_add_a_button">Task 3 - Add a button</h4>
<div class="level4">

<p>
The MainActivity.java file should be displayed. If not, open it using the <strong>Package Explorer</strong> pane. You will find it in the <strong>src</strong> folder.
</p>

<p>
The Activity should be very simple. It has an onCreate method which gets called when the Activity gets started.
</p>

<p>
In the onCreate method the Activity calls
</p>
<pre class="code">setContentView(R.layout.activity_main);</pre>

<p>
This sets the layout for the Activity. <strong>R</strong> is a class generated by the SDK and it maps every resource to a number. It contains subclasses for every folder found in the <strong>res</strong> folder, in this case <strong>layout</strong>.
</p>

<p>
Open the <em>res/layout/activity_main.xml</em> file. You will see the layout editor. In the <strong>Palette</strong> pane, find the button and drag it to the activity. You will see the <strong>Outline</strong> pane to the right of the screen change to reflect this. Select the button and check its ID field in the <strong>Properties</strong> panel, under the list of UI elements. Change the text of the button to “Press me!”. Also check the ID field of the TextView element.
</p>

<p>
Go back to MainActivity.java.
</p>

<p>
Add the following code to the onCreate method. Make sure the ids match the ones in your layout.
</p>
<pre class="code Java">        <span class="kw1">final</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+button"><span class="kw3">Button</span></a> b1 <span class="sy0">=</span> <span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+button"><span class="kw3">Button</span></a><span class="br0">&#41;</span> findViewById<span class="br0">&#40;</span>R.<span class="me1">id</span>.<span class="me1">button</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="coMULTI">/* make sure the button ID matches */</span>
        <span class="kw1">final</span> TextView tv1 <span class="sy0">=</span> <span class="br0">&#40;</span>TextView<span class="br0">&#41;</span> findViewById<span class="br0">&#40;</span>R.<span class="me1">id</span>.<span class="me1">textView</span><span class="br0">&#41;</span><span class="sy0">;</span> <span class="coMULTI">/* make sure the textView ID matches */</span>
&nbsp;
        b1.<span class="me1">setOnClickListener</span><span class="br0">&#40;</span><span class="kw1">new</span> OnClickListener<span class="br0">&#40;</span><span class="br0">&#41;</span> <span class="br0">&#123;</span>
        	<span class="kw4">int</span> n <span class="sy0">=</span> <span class="nu0">1</span><span class="sy0">;</span>
&nbsp;
		@Override
		<span class="kw1">public</span> <span class="kw4">void</span> onClick<span class="br0">&#40;</span><a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+view"><span class="kw3">View</span></a> v<span class="br0">&#41;</span> <span class="br0">&#123;</span>
			tv1.<span class="me1">setText</span><span class="br0">&#40;</span><span class="st0">&quot;Hello again! &quot;</span> <span class="sy0">+</span> <a href="http://www.google.com/search?hl=en&amp;q=allinurl%3Adocs.oracle.com+javase+docs+api+integer"><span class="kw3">Integer</span></a>.<span class="me1">toString</span><span class="br0">&#40;</span>n<span class="sy0">++</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy0">;</span>
		<span class="br0">&#125;</span>
	<span class="br0">&#125;</span><span class="br0">&#41;</span><span class="sy0">;</span></pre>

<p>
The <strong>findViewById</strong> calls are used to get the objects corresponding to the Button and the TextView that were already declared. These objects are declared as final variables in order for them to be visible inside the <strong>OnClickListener</strong> call (anonymous class). The <strong>OnClickListener</strong> object contains an onClick method which gets executed when the button is pressed. In this case, it updates the TextView to reflect the number of clicks on the button.
</p>

</div>

<h4 id="task_4_-_use_logcat_for_debugging">Task 4 - Use logcat for debugging</h4>
<div class="level4">

<p>
Start the application installed in Task 2. Make sure the <strong>Android Monitor</strong> tab is expanded at the panel at the bottom and that <strong>logcat</strong> tab is selected inside this tab. Type any text in the box and then click one of the buttons. A new line containing your text should appear in the <strong>Logcat</strong>. Depending on what button you press, the line color will vary. It is also possible to filter these log entries: above the logs themselves there is a text entry input which allows textual filtering. It allows you to limit scope by prefixing searches with pid:, tag:, app: or text: and it accepts Java-style regular expressions. To the left of this text field there is a drop-down which allows you to select verbosity. Choosing a level will only allow messages of that level or higher to be displayed.
</p>

<p>
Import the LogLevel project into Android Studio (<strong>File &gt; New &gt; Import Project</strong> and navigate to the project in the archive. Look over the code. Each button has a method attached which calls a static method from the Log class. These methods generate log entries on different levels of importance: d=debug, i=info, w=warning, e=error.
</p>

<p>
Add another two buttons to the application: one that generates an assert level log entry and one that repeats the previously generated log entry, but with a higher level of importance (e.g. previously a debug entry was created, now the button click should generate an info entry). For the second button if the previous entry was an assert entry, then the next entry will also be an assert entry. 
</p>

</div>

<h4 id="task_5_-_view_weight">Task 5 - View weight</h4>
<div class="level4">

<p>
Use the LogLevel project as a start. Notice that the EditText box only takes up one line of the screen and there should be some screen space left at the bottom of the screen. Make the EditText box take up all available space. To do this, you should set the weight parameter of the EditText view to 1 (or any integer).
</p>

<p>
The weight parameter is used to distribute empty screen space to the elements which need it. First, the layout builder will place all the elements for which the size is easy to determine. Then, the empty space will be distributed to the elements with weight, based on their weight: if the total weight of all elements is 4, an element with a weight of 1 will get 1/4 of the empty screen space, an element with 2 weight will get 2/4, and so on.
</p>

</div>

<h4 id="task_6_-_use_adb_to_transfer_files_and_install_apps">Task 6 - Use ADB to transfer files and install apps</h4>
<div class="level4">

<p>
Connect to it using ADB. ADB can be used from a terminal on all operating systems.
To get a list of connected devices use can use:
</p>
<pre class="code">adb devices</pre>

<p>
To get a shell on the connected device use:
</p>
<pre class="code">adb shell</pre>

<p>
Android devices normally come with a more limited set of commands, so a text editor might not be available.
</p>

<p>
Create a text file on your machine. Copy it to the connected device using:
</p>
<pre class="code">adb push &lt;local&gt; &lt;remote&gt;</pre>

<p>
The file should be copied to the /sdcard/ partition on the phone. Connect to the device using adb shell, and use cat to check the contents of the file.
To copy from the device use:
</p>
<pre class="code">adb pull &lt;remote&gt; [&lt;local&gt;]</pre>

<p>
Both push and pull can be used with both directories and files.
</p>

<p>
To install an application through adb use:
</p>
<pre class="code">adb install &lt;file&gt;</pre>

<p>
Install LogLevel.apk (in the laboratory archive).
</p>

<p>
To check all available options of the ADB use:
</p>
<pre class="code">adb --help</pre>

</div>
<!-- EDIT3 SECTION "Practical" [360-] --></div>
</body>
</html>

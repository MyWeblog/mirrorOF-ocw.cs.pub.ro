    
    

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
 lang="en" dir="ltr">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>
    Lab 6: Connect and use an LCD    [CS Open CourseWare]
  </title>

  <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="date" content="2016-07-13T14:59:43+0300"/>
<meta name="keywords" content="iotcluj,labs,06"/>
<link rel="search" type="application/opensearchdescription+xml" href="../../lib/exe/opensearch.php" title="CS Open CourseWare"/>
<link rel="start" href="../../../courses.1.html"/>
<link rel="alternate" type="application/rss+xml" title="Recent Changes" href="../../feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current Namespace" href="../../feed.php%3Fmode=list&amp;ns=iotcluj:labs"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="../../_export/xhtml/iotcluj/labs/06.html"/>
<link rel="canonical" href="06.html"/>
<link rel="stylesheet" type="text/css" href="../../lib/exe/css.php%3Ft=arctic&amp;tseed=1479898000.css"/>
<script type="text/javascript">/*<![CDATA[*/var NS='iotcluj:labs';var JSINFO = {"id":"iotcluj:labs:06","namespace":"iotcluj:labs","isadmin":0,"isauth":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="../../lib/exe/js.php%3Ftseed=1479898000"></script>
<script type="text/x-mathjax-config">/*<![CDATA[*/MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ["$","$"], ["\\(","\\)"] ],
        displayMath: [ ["$$","$$"], ["\\[","\\]"] ],
        processEscapes: true
    }
});
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
<script type="text/javascript">/*<![CDATA[*/
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
		  
/*!]]>*/</script>
<script type="text/javascript">/*<![CDATA[*/
var pageTracker = _gat._getTracker("UA-38383934-1");
pageTracker._initData();
pageTracker._trackPageview();
		  
/*!]]>*/</script>

  <link rel="shortcut icon" href="../../lib/tpl/arctic/images/favicon.ico" />

  
</head>
<body>
<div id="wrapper" class='show'>
  <div class="dokuwiki">

    
    <div class="stylehead">
      <div class="header">
        <div class="pagename">
          <a href="../../iot/index.html"><img height="70" src="../../res/sigla_iot.png"/> </a>        </div>
        <div class="logo">
          <a style="color: #AAA !important;" href="http://innovationlabs.ro"/><img height="70" src="../../res/sigla_ilabs.png" name="dokuwiki__top"/></a>        </div>
      </div>
    
       
      <div class="breadcrumbs">
              </div>
      
            </div>

                  <div class="bar" id="bar__top">
        <div class="bar-left">
                  </div>
        <div class="bar-right">
          <a href="06%3Fdo=recent.html"  class="action recent" accesskey="r" rel="nofollow" title="Recent changes [R]">Recent changes</a><a href="06%3Fdo=login&amp;sectok=f62420cf5b01253da4b50505d148181b.html"  class="action login" rel="nofollow" title="Login">Login</a>        </div>
    </div>
        
    
    
    
              <div class="left_page">
          
<h1 class="sectionedit1" id="lab_6connect_and_use_an_lcd">Lab 6: Connect and use an LCD</h1>
<div class="level1">

<p>
In this project you are going to connect an LCD to your board and write a short message on it.
</p>

</div>

<h2 class="sectionedit2" id="what_you_need">What you need</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li">  One Raspberry Pi connected to Wyliodrin STUDIO;</div>
</li>
<li class="level1"><div class="li">  One 16&times;2 LCD;</div>
</li>
<li class="level1"><div class="li">  One breadboard;</div>
</li>
<li class="level1"><div class="li"> Jumper wires;</div>
</li>
</ul>

</div>

<h2 class="sectionedit3" id="the_setup">The Setup</h2>
<div class="level2">

<p>
<a href="../../_detail/iot/labs/lcd-expander.jpg%3Fid=iotcluj%253Alabs%253A06.html" class="media" title="iot:labs:lcd-expander.jpg"><img src="../../_media/iot/labs/lcd-expander.jpg%3Fw=500&amp;tok=8a27b7" class="mediacenter" alt="" width="500" /></a>
The LCD in the kit is connected to a port expander (MCP23008). This allows the LCD to be controlled via the I2C protocol, thus reducing the number of pins you need to connect the LCD to. In this case, you just need to connect the expander to GND, 5V, SCL and SDA pins, according to the indicators on the expander. You can find the appropriate pins in the <strong>Pin Layout</strong> tab. You just need to connect the SDA port on the port expander with the SDA pin on the board and so on.
</p>

</div>

<h2 class="sectionedit4" id="the_code">The Code</h2>
<div class="level2">

<p>
<a href="../../_detail/iot/labs/lcd-simple-example.png%3Fid=iotcluj%253Alabs%253A06.html" class="media" title="iot:labs:lcd-simple-example.png"><img src="../../_media/iot/labs/lcd-simple-example.png%3Fw=600&amp;tok=5c6854" class="mediacenter" alt="" width="600" /></a>
You go to the Wyliodrin Applications page and create a new application. You name it and select Streams as programming language. Once created, you click on the new application&#039;s name to open it.
</p>

<p>
First of all, you need to initialise the LCD. For this, you drag the <strong>run</strong> node and select <strong>Fire once at start</strong> so you make sure that once you run the application a first message is sent. This is only required to trigger the <strong>init LCD</strong> node, so you can assure there is no other message being sent again. For this, drag the <strong>trigger</strong> node and double click on it.
</p>

<p>
<a href="../../_detail/iot/labs/trigger-block.png%3Fid=iotcluj%253Alabs%253A06.html" class="media" title="iot:labs:trigger-block.png"><img src="../../_media/iot/labs/trigger-block.png%3Fw=400&amp;tok=d8d3ee" class="mediacenter" alt="" width="400" /></a>
</p>

<p>
You need to set this node to <strong>wait until reset</strong>. This will make the node to send the first message and then wait until it receives a message containing the property <strong>reset</strong>, which will never happen. 
Next, the <strong>init LCD</strong> node initializes the LCD.
</p>

<p>
First of all, you need to require the <strong>wyliodrin</strong> module, which exposes some simple functions in order to control the LCD. Otherwise you would need to implement the protocol in order to control it. 
</p>

<p>
Once you have the <strong>wyliodrin</strong> variable, call the <strong>LiquidCrystal</strong> constructor in order to obtain a <strong>LiquidCrystal</strong> object. The constructor receives 0 as parameter.
</p>

<p>
Why is the value 0 the parameter of the constructor? This type of LCD communicates with the Raspberry Pi board via that I2C protocol. Taking into account how the I2C protocol behaves, you would need to mention the bus specific to the LCD, that usually is 32. However, in order to be able to connect multiple LCDs at once, they have three jumpers which can be connected in order to represent values from 0 to 7, thus being able to identify eight different LCDs. This is the value you need to pass to the constructor, in this case, no jumper is connected so we passed the value 0.
</p>

<p>
<a href="../../_detail/iot/labs/init-lcd.png%3Fid=iotcluj%253Alabs%253A06.html" class="media" title="iot:labs:init-lcd.png"><img src="../../_media/iot/labs/init-lcd.png%3Fw=400&amp;tok=9f30ca" class="mediacenter" alt="" width="400" /></a>
</p>

<p>
What is new at the code presented above is the <strong>context.global.lcd</strong> structure. You need to use this because you want the <strong>lcd</strong> variable to be available from other nodes also (Display on LCD node) and <strong>context.global</strong> is a variable accessible to all the nodes, so you just set the lcd property and you will be able to use it from any other node.
</p>

<p>
<a href="../../_detail/iot/labs/display-lcd-simple.png%3Fid=iotcluj%253Alabs%253A06.html" class="media" title="iot:labs:display-lcd-simple.png"><img src="../../_media/iot/labs/display-lcd-simple.png%3Fw=400&amp;tok=f3edf7" class="mediacenter" alt="" width="400" /></a>
</p>

<p>
The <strong>display LCD</strong> node is another function node which first clears the LCD, then prints a string on it. Notice that the global <strong>lcd</strong> variable is used.
</p>

</div>

<h2 class="sectionedit5" id="exercises">Exercises</h2>
<div class="level2">
<ol>
<li class="level1"><div class="li"> Use a temperature sensor and display the temperature on the LCD.</div>
</li>
<li class="level1"><div class="li"> Together with the temperature computed with the sensor, display the temperature you get using a web service.</div>
</li>
<li class="level1"><div class="li"> Build a weather station consisting of an LCD, a light sensor, a temperature sensor, a gas sensor and a button. At the press of the button you can change which of the three values is displayed on the LCD.</div>
</li>
</ol>

</div>

        </div>
        <div class="right_sidebar">
          <form action="../../start.html" accept-charset="utf-8" class="search" id="dw__search" method="get"><div class="no"><input type="hidden" name="do" value="search" /><input type="text" id="qsearch__in" accesskey="f" name="id" class="edit" title="[F]" /><input type="submit" value="Search" class="button" title="Search" /><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>          <div class="namespace_sidebar sidebar_box">

<h1 class="sectionedit1" id="lectures">Lectures</h1>
<div class="level1">

<div><div id="nojs_indexmenu_2093493903583579ec1d4ac" data-jsajax="" class="indexmenu_nojs">

<ul class="idx">
<li class="level1"><div class="li"><a href="../courses/01.html" class="wikilink1" title="iotcluj:courses:01">Lecture 1: Introduction to IoT</a></div></li>
<li class="level1"><div class="li"><a href="../courses/02.html" class="wikilink1" title="iotcluj:courses:02">Lecture 2: Electronics for the Internet of Things</a></div></li>
<li class="level1"><div class="li"><a href="../courses/03.html" class="wikilink1" title="iotcluj:courses:03">Lecture 3: Software for the Internet of Things</a></div></li>
</ul>
</div></div>

</div>
<!-- EDIT1 SECTION "Lectures" [1-55] -->
<h1 class="sectionedit2" id="labs">Labs</h1>
<div class="level1">

<div><div id="nojs_indexmenu_749976398583579ec1f3ec" data-jsajax="" class="indexmenu_nojs">

<ul class="idx">
<li class="level1"><div class="li"><a href="01.html" class="wikilink1" title="iotcluj:labs:01">Lab 1: Raspberry Pi Setup</a></div></li>
<li class="level1"><div class="li"><a href="02.html" class="wikilink1" title="iotcluj:labs:02">Lab 2: Linux</a></div></li>
<li class="level1"><div class="li"><a href="03.html" class="wikilink1" title="iotcluj:labs:03">Lab 3: Light Blink</a></div></li>
<li class="level1"><div class="li"><a href="04.html" class="wikilink1" title="iotcluj:labs:04">Lab 4: Programming with Streams</a></div></li>
<li class="level1"><div class="li"><a href="05.html" class="wikilink1" title="iotcluj:labs:05">Lab 5: Sensors and Dashboard</a></div></li>
<li class="level1"><div class="li"><span class="curid"><a href="06.html" class="wikilink1" title="iotcluj:labs:06">Lab 6: Connect and use an LCD</a></span></div></li>
<li class="level1"><div class="li"><a href="07.html" class="wikilink1" title="iotcluj:labs:07">Lab 7: Web server</a></div></li>
</ul>
</div></div>

</div>
<!-- EDIT2 SECTION "Labs" [56-105] -->
<h1 class="sectionedit3" id="others">Others</h1>
<div class="level1">

<div><div id="nojs_indexmenu_795656184583579ec21328" data-jsajax="" class="indexmenu_nojs">

<ul class="idx">
<li class="level1"><div class="li"><a href="../res/bilbiografie.html" class="wikilink1" title="iotcluj:res:bilbiografie">Bibliography</a></div></li>
<li class="level1"><div class="li"><a href="../res/components.html" class="wikilink1" title="iotcluj:res:components">Components</a></div></li>
<li class="level1"><div class="li"><a href="../res/electronics.html" class="wikilink1" title="iotcluj:res:electronics">Electronics</a></div></li>
<li class="level1"><div class="li"><a href="../res/resistors.html" class="wikilink1" title="iotcluj:res:resistors">Resistor Color Code</a></div></li>
<li class="level1"><div class="li"><a href="../res/streams.html" class="wikilink1" title="iotcluj:res:streams">Streams nodes</a></div></li>
<li class="level1"><div class="li"><a href="../res/tipsandtricks.html" class="wikilink1" title="iotcluj:res:tipsandtricks">Tips &amp; Tricks</a></div></li>
<li class="level1"><div class="li"><a href="../res/wyliodrin.html" class="wikilink1" title="iotcluj:res:wyliodrin">Wyliodrin STUDIO</a></div></li>
</ul>
</div></div>



</div>
<!-- EDIT3 SECTION "Others" [106-] -->
</div>
<div class="toc_sidebar sidebar_box">
<!-- TOC START -->
<div id="sb__right__dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="06.html#lab_6connect_and_use_an_lcd">Lab 6: Connect and use an LCD</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="06.html#what_you_need">What you need</a></div></li>
<li class="level2"><div class="li"><a href="06.html#the_setup">The Setup</a></div></li>
<li class="level2"><div class="li"><a href="06.html#the_code">The Code</a></div></li>
<li class="level2"><div class="li"><a href="06.html#exercises">Exercises</a></div></li>
</ul></li>
</ul>
</div>
</div>
<!-- TOC END -->
</div>
        </div>
      
    
      <div class="stylefoot">
        <div class="meta">
          <div class="user">
                    </div>
          <div class="doc">
          iotcluj/labs/06.txt · Last modified: 2016/07/13 14:59 by ioana_maria.culic          </div>
        </div>
      </div>

    <div class="clearer"></div>

    
                <div class="bar" id="bar__bottom">
      <div class="bar-left">
        <a href="06%3Fdo=revisions.html"  class="action revs" accesskey="o" rel="nofollow" title="Old revisions [O]">Old revisions</a>      </div>
      <div class="bar-right">
        <a href="06%3Fdo=media&amp;ns=iotcluj%253Alabs.html"  class="action media" rel="nofollow" title="Media Manager">Media Manager</a><a href="06.html#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Back to top [T]">Back to top</a>      </div>
    </div>
    <div class="clearer"></div>
            
    <div align="center" class="footerinc">
  <div class="license"><a href="http://creativecommons.org/licenses/by-sa/3.0/" rel="license"><img src="../../lib/images/license/button/cc-by-sa.png" alt="CC Attribution-Share Alike 3.0 Unported" /></a></div>
  <a target="_blank" href="http://www.chimeric.de" title="www.chimeric.de"><img src="../../lib/tpl/arctic/images/button-chimeric-de.png" width="80" height="15" alt="www.chimeric.de" border="0" /></a>

  <a target="_blank" href="http://jigsaw.w3.org/css-validator/check/referer" title="Valid CSS"><img src="../../lib/tpl/arctic/images/button-css.png" width="80" height="15" alt="Valid CSS" border="0" /></a>

  <a target="_blank" href="http://wiki.splitbrain.org/wiki:dokuwiki" title="Driven by DokuWiki"><img src="../../lib/tpl/arctic/images/button-dw.png" width="80" height="15" alt="Driven by DokuWiki" border="0" /></a>

  <a target="_blank" href="http://www.firefox-browser.de" title="do yourself a favour and use a real browser - get firefox"><img src="../../lib/tpl/arctic/images/button-firefox.png" width="80" height="15" alt="do yourself a favour and use a real browser - get firefox!!" border="0" /></a>
  
  <a target="_blank" href="../../feed.php" title="Recent changes RSS feed"><img src="../../lib/tpl/arctic/images/button-rss.png" width="80" height="15" alt="Recent changes RSS feed" border="0" /></a>

  <a target="_blank" href="http://validator.w3.org/check/referer" title="Valid XHTML 1.0"><img src="../../lib/tpl/arctic/images/button-xhtml.png" width="80" height="15" alt="Valid XHTML 1.0" border="0" /></a>
</div>

  </div>
</div>

<div class="no"><img src="../../lib/exe/indexer.php%3Fid=iotcluj%253Alabs%253A06&amp;1479899628" width="2" height="1" alt="" /></div>
</body>
</html>

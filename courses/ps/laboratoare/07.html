    
    

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
 lang="en" dir="ltr">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>
    Laboratorul 07.    [CS Open CourseWare]
  </title>

  <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="noindex,nofollow"/>
<meta name="date" content="2016-11-21T17:52:13+0200"/>
<meta name="keywords" content="ps,laboratoare,07"/>
<link rel="search" type="application/opensearchdescription+xml" href="../../lib/exe/opensearch.php" title="CS Open CourseWare"/>
<link rel="start" href="../../../courses.1.html"/>
<link rel="alternate" type="application/rss+xml" title="Recent Changes" href="../../feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current Namespace" href="../../feed.php%3Fmode=list&amp;ns=ps:laboratoare"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="http://ocw.cs.pub.ro/courses/_export/xhtml/ps/laboratoare/07"/>
<link rel="canonical" href="07.html"/>
<link rel="stylesheet" type="text/css" href="../../lib/exe/css.php%3Ft=arctic&amp;tseed=1476798676.css"/>
<script type="text/javascript">/*<![CDATA[*/var NS='ps:laboratoare';var JSINFO = {"id":"ps:laboratoare:07","namespace":"ps:laboratoare","isadmin":0,"isauth":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="../../lib/exe/js.php%3Ftseed=1476798676"></script>
<script type="text/x-mathjax-config">/*<![CDATA[*/MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ["$","$"], ["\\(","\\)"] ],
        displayMath: [ ["$$","$$"], ["\\[","\\]"] ],
        processEscapes: true
    }
});
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
<script type="text/javascript">/*<![CDATA[*/
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
		  
/*!]]>*/</script>
<script type="text/javascript">/*<![CDATA[*/
var pageTracker = _gat._getTracker("UA-38383934-1");
pageTracker._initData();
pageTracker._trackPageview();
		  
/*!]]>*/</script>

  <link rel="shortcut icon" href="../../lib/tpl/arctic/images/favicon.ico" />

  
</head>
<body>
<div id="wrapper" class='show'>
  <div class="dokuwiki">

    
    <div class="stylehead">
      <div class="header">
        <div class="pagename">
          <a href="../index.html"><img height="70" src="../../res/sigla_cs.png"/> </a>        </div>
        <div class="logo">
          <a style="color: #AAA !important;" href="../../../courses.1.html"/>Open CourseWare</a>        </div>
      </div>
    
       
      <div class="breadcrumbs">
              </div>
      
            </div>

                  <div class="bar" id="bar__top">
        <div class="bar-left">
                  </div>
        <div class="bar-right">
          <a href="http://ocw.cs.pub.ro/courses/ps/laboratoare/07?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Recent changes [R]">Recent changes</a><a href="http://ocw.cs.pub.ro/courses/ps/laboratoare/07?do=login&amp;sectok=f62420cf5b01253da4b50505d148181b"  class="action login" rel="nofollow" title="Login">Login</a>        </div>
    </div>
        
    
    
    
              <div class="left_page">
          
<h2 class="sectionedit1" id="laboratorul_07">Laboratorul 07.</h2>
<div class="level2">

</div>

<h3 class="sectionedit2" id="snr_decibeli_si_dft">SNR, decibeli și DFT</h3>
<div class="level3">

<p>
În acest laborator vom rezolva câteva exerciții legate de calcularea raportului semnal-zgomot( signal-to-noise ratio - SNR), vom exprima acest raport în decibeli și vom căpăta experiență cu transformarea Fourier discretă (DFT). Deși nu am discutat prea mult despre ea, în toate exercițiile care folosesc DFT vom utiliza funcția fft (Fast Fourier Transform) și inversa acesteia ifft.
</p>

<p>
Materiale utile:
</p>
<ul>
<li class="level1"><div class="li"> <a href="http://www.ece.rice.edu/~dhj/courses/elec241/col10040.pdf" class="urlextern" title="http://www.ece.rice.edu/~dhj/courses/elec241/col10040.pdf"  rel="nofollow">D. Johnson&#039;s book</a>, secțiunile 5.4‐5.7</div>
</li>
</ul>

<p>
În exercițiile din acest laborator vom considera ca semnalul DFT are același număr de componente ca și semnalul de intrare. Din curs știm formulele pentru DFT:
</p>

<p>
DFT: $S(k) = \sum^{N-1}_{n = 0}{s(n)e^{\frac{-j 2 \pi n k}{K}}}$, $k = 0, ..., K-1$
</p>

<p>
IDFT (inversa DFT): $s(n) = \frac{1}{K}\sum^{K-1}_{k = 0}{S(k)e^{\frac{j 2 \pi n k}{K}}}$, $n = 0, ..., N-1$
</p>

</div>

<h4 id="exercitiul_1_‐‐_unde_cu_zgomot_6p">Exercițiul 1 ‐‐ unde cu zgomot [6p]</h4>
<div class="level4">

<p>
În acest exercițiu aveți dat un semnal cu zgomot, (<a href="http://ocw.cs.pub.ro/courses/_media/ps/laboratoare/noisy_signal.mat" class="media mediafile mf_mat" title="ps:laboratoare:noisy_signal.mat (1.2 KB)">click aici</a>), pentru care știți că informația de interes se află în primele 10 componente DTF, corespunzătoare de fapt cu $k \in \{ -9, ..., 9\}$, adică componenta continua / directă (DC: $k = 0$) și componentele frecvențelor pozitive $k = 1, ..., 9$ și negative $k = −1, ... , −9$.
</p>

<p>
Mai jos puteți vedea semnalul cu zgomot precum și spectrul pozitiv( folosind doar $k = \{0, 1, ..., N/2 - 1\}$).
</p>

<p>
<a href="http://ocw.cs.pub.ro/courses/_detail/ps/laboratoare/noisy_signal.png?id=ps%3Alaboratoare%3A07" class="media" title="ps:laboratoare:noisy_signal.png"><img src="http://ocw.cs.pub.ro/courses/_media/ps/laboratoare/noisy_signal.png?w=300&amp;tok=06c81e" class="media" alt="" width="300" /></a>
<a href="http://ocw.cs.pub.ro/courses/_detail/ps/laboratoare/noisy_signal_fftpos.png?id=ps%3Alaboratoare%3A07" class="media" title="ps:laboratoare:noisy_signal_fftpos.png"><img src="http://ocw.cs.pub.ro/courses/_media/ps/laboratoare/noisy_signal_fftpos.png?w=300&amp;tok=91108f" class="media" alt="" width="300" /></a>
</p>

<p>
Vrem să calculam SNR în domeniul frecvența și apoi să eliminăm zgomotul din semnal folosind DFT și păstrând doar frecvențele de interes. Pentru aceasta va trebui să urmați pașii următori:
</p>

<p>
1. Încărcați semnalul zgomotos și plotați-l. Folosiți acest cod ca sa încărcați semnalul:
</p>
<pre class="code">load(&#039;noisy_signal.mat&#039;)</pre>

<p>
Acest semnal are $N = 128$ eșantioane și puteți considera ca frecvența de esantionare este $f_s = N = 128$ Hz.
</p>

<p>
2. Calculați DFT pentru semnalul zgomotos. Folosiți funcția fft. Plotați spectrul, atât în forma data de fft, cât și în forma centrată în zero formată aplicând funcția <em>fftshift</em> pe ieșirea de la fft. Ne amintim ca ieșirea DFT(fft) conține coeficienții pentru frecvențele pozitive între  $0$ și $N/2 - 1$ iar următorii coeficienți aparțin defapt spectrului negativ, de la $-N/2$ la $-1$. 
</p>

<p>
3. Calculați raportul semnal-zgomot în domeniul frecvență, ca raportul dintre puterea semnalului și puterea zgomotului. Pentru aceasta vom considera ca semnalul util se afla doar în componentele de frecventa $k \in \{-9, ..., 9\}$ pe când zgomotul se afla în toate componentele de frecvență. Formula pentru calcularea puterii unui semnal este: $power = \frac{1}{N}\sum^{N-1}_{k = 0}{S(k)^2}$, unde N este numărul total de componente considerate în semnal.
</p>

<p>
4. Care este echivalentul acestui SNR in decibeli(dB).
</p>

<p>
5. Din ieșirea funcției fft eliminați frecvențele din afara zonei de interes(faceți-le zero). Aveți grijă la indicii frecventelor pozitive și negative și luați în considerare ca primul element corespunde componentei directe, care nu are corespondent negativ.
</p>

<p>
6. Folosiți transformata Fourier discretă inversă (<em>ifft</em> în MATLAB) pentru a reconstrui semnalul corespunzător acestui spectru care are componente diferite de zero doar pentru frecvențele de interes. Plotați acest semnal și comparați-l cu originalul zgomotos. Astfel practic ați implementat un tip foarte simplu de filtru trece-jos.
</p>

<p>
Aici aveți o imagine cu semnalul cu și fără zgomot. 
<a href="http://ocw.cs.pub.ro/courses/_detail/ps/laboratoare/waves_signal.png?id=ps%3Alaboratoare%3A07" class="media" title="ps:laboratoare:waves_signal.png"><img src="http://ocw.cs.pub.ro/courses/_media/ps/laboratoare/waves_signal.png?w=300&amp;tok=f55d07" class="media" alt="" width="300" /></a>
</p>

<p>
Arată precum semnalul vostru reconstruit?
<p><div class="noteclassic">
O posibila soluție:
</p>
<dl class="file">
<dt><a href="http://ocw.cs.pub.ro/courses/_export/code/ps/laboratoare/07?codeblock=1" title="Download Snippet" class="mediafile mf_m">noisy_waves.m</a></dt>
<dd><pre class="code file matlab"><a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/close.html"><span class="kw2">close</span></a> <a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/all.html"><span class="kw2">all</span></a>;
<a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/clear.html"><span class="kw2">clear</span></a>;
&nbsp;
<span class="co1">%% Load noisy signal</span>
<a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/load.html"><span class="kw2">load</span></a><span class="br0">&#40;</span><span class="co2">'noisy_signal'</span><span class="br0">&#41;</span>;
N = <a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/length.html"><span class="kw2">length</span></a><span class="br0">&#40;</span>noisy_signal<span class="br0">&#41;</span>;
t = <a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/linspace.html"><span class="kw2">linspace</span></a><span class="br0">&#40;</span><span class="nu0">0</span>, <span class="nu0">1</span>, N<span class="br0">&#41;</span>;
h = <a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/figure.html"><span class="kw2">figure</span></a>;
<a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/plot.html"><span class="kw2">plot</span></a><span class="br0">&#40;</span>t, noisy_signal<span class="br0">&#41;</span>;
<a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/xlabel.html"><span class="kw2">xlabel</span></a><span class="br0">&#40;</span><span class="co2">'Time (s)'</span><span class="br0">&#41;</span>;
<a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/title.html"><span class="kw2">title</span></a><span class="br0">&#40;</span><span class="co2">'Signal with noise'</span><span class="br0">&#41;</span>;
<a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/print.html"><span class="kw2">print</span></a><span class="br0">&#40;</span>h, <span class="co2">'-dpng'</span>, <span class="co2">'noisy_signal.png'</span><span class="br0">&#41;</span>;
&nbsp;
<span class="co1">%% Check fft of noisy signal</span>
fss = <a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/fft.html"><span class="kw2">fft</span></a><span class="br0">&#40;</span>noisy_signal<span class="br0">&#41;</span>;
fs = <span class="nu0">128</span>;
fidx = <span class="nu0">0</span>:<span class="nu0">127</span>;
h = <a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/figure.html"><span class="kw2">figure</span></a>;
<a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/stem.html"><span class="kw2">stem</span></a><span class="br0">&#40;</span>fidx, <a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/abs.html"><span class="kw2">abs</span></a><span class="br0">&#40;</span>fss<span class="br0">&#41;</span><span class="br0">&#41;</span>;
<a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/xlabel.html"><span class="kw2">xlabel</span></a><span class="br0">&#40;</span><span class="co2">'DFT frequency index'</span><span class="br0">&#41;</span>;
<a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/title.html"><span class="kw2">title</span></a><span class="br0">&#40;</span><span class="co2">'Frequency spectrum of noisy signal'</span><span class="br0">&#41;</span>;
<a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/print.html"><span class="kw2">print</span></a><span class="br0">&#40;</span>h, <span class="co2">'-dpng'</span>, <span class="co2">'noisy_signal_fft.png'</span><span class="br0">&#41;</span>;
&nbsp;
<span class="co1">%% Plot only the positive spectrum</span>
h = <a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/figure.html"><span class="kw2">figure</span></a>;
<a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/stem.html"><span class="kw2">stem</span></a><span class="br0">&#40;</span>fidx<span class="br0">&#40;</span><span class="nu0">1</span>:N/<span class="nu0">2</span>-<span class="nu0">1</span><span class="br0">&#41;</span>, <a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/abs.html"><span class="kw2">abs</span></a><span class="br0">&#40;</span>fss<span class="br0">&#40;</span><span class="nu0">1</span>:N/<span class="nu0">2</span>-<span class="nu0">1</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;
<a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/xlabel.html"><span class="kw2">xlabel</span></a><span class="br0">&#40;</span><span class="co2">'DFT frequency index'</span><span class="br0">&#41;</span>;
<a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/title.html"><span class="kw2">title</span></a><span class="br0">&#40;</span><span class="co2">'Frequency spectrum of noisy signal'</span><span class="br0">&#41;</span>;
<a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/print.html"><span class="kw2">print</span></a><span class="br0">&#40;</span>h, <span class="co2">'-dpng'</span>, <span class="co2">'noisy_signal_fftpos.png'</span><span class="br0">&#41;</span>;
&nbsp;
<span class="co1">%% Plot spectrum centred at zero</span>
h = <a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/figure.html"><span class="kw2">figure</span></a>;
fidx = <a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/linspace.html"><span class="kw2">linspace</span></a><span class="br0">&#40;</span>-N/<span class="nu0">2</span>, N/<span class="nu0">2</span>-<span class="nu0">1</span>, N<span class="br0">&#41;</span>;
<a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/stem.html"><span class="kw2">stem</span></a><span class="br0">&#40;</span>fidx, <a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/abs.html"><span class="kw2">abs</span></a><span class="br0">&#40;</span><a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/fftshift.html"><span class="kw2">fftshift</span></a><span class="br0">&#40;</span>fss<span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;
<a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/xlabel.html"><span class="kw2">xlabel</span></a><span class="br0">&#40;</span><span class="co2">'DFT frequency index'</span><span class="br0">&#41;</span>;
<a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/title.html"><span class="kw2">title</span></a><span class="br0">&#40;</span><span class="co2">'zero-centred Frequency spectrum of noisy signal'</span><span class="br0">&#41;</span>;
<a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/print.html"><span class="kw2">print</span></a><span class="br0">&#40;</span>h, <span class="co2">'-dpng'</span>, <span class="co2">'noisy_signal_fftcentered.png'</span><span class="br0">&#41;</span>;
&nbsp;
<span class="co1">%% Compute snr</span>
NS = <span class="nu0">10</span>;
psignal = <span class="br0">&#40;</span>fss<span class="br0">&#40;</span><span class="nu0">1</span>:NS<span class="br0">&#41;</span>*fss<span class="br0">&#40;</span><span class="nu0">1</span>:NS<span class="br0">&#41;</span>' + fss<span class="br0">&#40;</span>end-NS+<span class="nu0">2</span>:<span class="kw1">end</span><span class="br0">&#41;</span>*fss<span class="br0">&#40;</span>end-NS+<span class="nu0">2</span>:<span class="kw1">end</span><span class="br0">&#41;</span>'<span class="br0">&#41;</span> / <span class="br0">&#40;</span><span class="nu0">2</span>*NS<span class="br0">&#41;</span>;
pnoise = fss*fss' / N;
snr = psignal / pnoise
snr_db = <span class="nu0">10</span>*<a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/log10.html"><span class="kw2">log10</span></a><span class="br0">&#40;</span>snr<span class="br0">&#41;</span>
&nbsp;
<span class="co1">%% Filter out frequencies above k=10</span>
ffsf = <a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/zeros.html"><span class="kw2">zeros</span></a><span class="br0">&#40;</span><span class="nu0">1</span>,N<span class="br0">&#41;</span>;
ffsf<span class="br0">&#40;</span><span class="nu0">1</span>:<span class="nu0">11</span><span class="br0">&#41;</span> = fss<span class="br0">&#40;</span><span class="nu0">1</span>:<span class="nu0">11</span><span class="br0">&#41;</span>;
ffsf<span class="br0">&#40;</span>end-<span class="nu0">9</span>:<span class="kw1">end</span><span class="br0">&#41;</span> = fss<span class="br0">&#40;</span>end-<span class="nu0">9</span>:<span class="kw1">end</span><span class="br0">&#41;</span>;
<a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/figure.html"><span class="kw2">figure</span></a>;
<a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/stem.html"><span class="kw2">stem</span></a><span class="br0">&#40;</span><span class="nu0">0</span>:<span class="nu0">127</span>, <a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/abs.html"><span class="kw2">abs</span></a><span class="br0">&#40;</span>ffsf<span class="br0">&#41;</span><span class="br0">&#41;</span>;
<a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/xlabel.html"><span class="kw2">xlabel</span></a><span class="br0">&#40;</span><span class="co2">'DFT frequency index'</span><span class="br0">&#41;</span>;
<a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/title.html"><span class="kw2">title</span></a><span class="br0">&#40;</span><span class="co2">'Frequency spectrum after removing high freqs'</span><span class="br0">&#41;</span>;
&nbsp;
<span class="co1">%% Reconstruct signal</span>
sr = <a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/ifft.html"><span class="kw2">ifft</span></a><span class="br0">&#40;</span>ffsf<span class="br0">&#41;</span>;
<a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/figure.html"><span class="kw2">figure</span></a>;
<a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/plot.html"><span class="kw2">plot</span></a><span class="br0">&#40;</span>t, sr<span class="br0">&#41;</span>;
<a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/xlabel.html"><span class="kw2">xlabel</span></a><span class="br0">&#40;</span><span class="co2">'Time (s)'</span><span class="br0">&#41;</span>;
<a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/title.html"><span class="kw2">title</span></a><span class="br0">&#40;</span><span class="co2">'Reconstructed signal after removing high freqs'</span><span class="br0">&#41;</span>;</pre>
</dd></dl>

<p>

</div></p>
</p>

</div>

<h4 id="exercitiul_2_‐‐_sunet_cu_zgomot_4p">Exercițiul 2 ‐‐ sunet cu zgomot [4p]</h4>
<div class="level4">

<p>
Acest exercițiu este similar cu cel precedent. Acum aveți dat o înregistrare a unei secvențe vorbite (<a href="http://ocw.cs.pub.ro/courses/_media/ps/laboratoare/noisy_sound.mat" class="media mediafile mf_mat" title="ps:laboratoare:noisy_sound.mat (180.4 KB)">click aici</a>) care a fost amestecată cu zgomot de frecvență înaltă. Trebuie sa aplicați pasii precedenți pentru a elimina zgomotul și pentru a determina secvența vorbită.
</p>

<p>
Aici aveți ploturile sunetului cu zgomot precum și spectrul său pozitiv:
</p>

<p>
<a href="http://ocw.cs.pub.ro/courses/_detail/ps/laboratoare/noisy_sound.png?id=ps%3Alaboratoare%3A07" class="media" title="ps:laboratoare:noisy_sound.png"><img src="http://ocw.cs.pub.ro/courses/_media/ps/laboratoare/noisy_sound.png?w=300&amp;tok=bdb8d0" class="media" alt="" width="300" /></a>
<a href="http://ocw.cs.pub.ro/courses/_detail/ps/laboratoare/noisy_sound_fftpos.png?id=ps%3Alaboratoare%3A07" class="media" title="ps:laboratoare:noisy_sound_fftpos.png"><img src="http://ocw.cs.pub.ro/courses/_media/ps/laboratoare/noisy_sound_fftpos.png?w=300&amp;tok=5e3c4b" class="media" alt="" width="300" /></a>
</p>

<p>
Pentru acest sunet știm ca semnalul de interes se află în intervalul 0-500 Hz și ca sunetul a fost înregistrat la i frecvență de eșantionare de $f_s = 8000$ Hz. Observați că trebuie să convertiți indecșii DFT (adică  $k = 0, 1, ..., N-1$) în frecvențe știind ca fiecare element DFT corespunde unei frecvențe  $\frac{k \cdot f_s}{N}$. Folosind această informație ar trebui sa determinați ce frecvente sa păstrați astfel încât sa filtrați zgomotul, precum în exercițiul anterior.
</p>

<p>
Pentru a încărca sunetul și frecvența de eșantionare folosiți următorul cod:
</p>
<pre class="code">S = load(&#039;noisy_sound.mat&#039;);
s = S.noisy_sound;
fs = S.fs;</pre>

<p>
Pentru a asculta sunetul stocat în vectorul <em>s</em>, folosiți codul următor:
</p>
<pre class="code">sound(s)</pre>

<p>
Ascultați sunetul înainte și după eliminarea zgomotului. Dacă ați eliminat zgomotul într-un mod corect, atunci veți putea determina secvența vorbită.
</p>

<p>
<strong>Atenție</strong> la redarea semnalului înaintea procesării pentru ca zgomotul înalt poate fi foarte neplăcut. Asa ca setați volumul foarte jos pentru această etapă. După filtrare puteți mării volumul pentru a auzii secvența vorbita.
<p><div class="noteclassic">
</p>

<p>
O posibila soluție:
</p>
<dl class="file">
<dt><a href="http://ocw.cs.pub.ro/courses/_export/code/ps/laboratoare/07?codeblock=4" title="Download Snippet" class="mediafile mf_m">noisy_sound.m</a></dt>
<dd><pre class="code file matlab"><a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/close.html"><span class="kw2">close</span></a> <a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/all.html"><span class="kw2">all</span></a>;
<a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/clear.html"><span class="kw2">clear</span></a>;
&nbsp;
<span class="co1">%% Load noisy signal</span>
S = <a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/load.html"><span class="kw2">load</span></a><span class="br0">&#40;</span><span class="co2">'noisy_sound.mat'</span><span class="br0">&#41;</span>;
s = S.<span class="me1">noisy_sound</span>;
fs = S.<span class="me1">fs</span>;
N = <a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/length.html"><span class="kw2">length</span></a><span class="br0">&#40;</span>s<span class="br0">&#41;</span>;
t = <a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/linspace.html"><span class="kw2">linspace</span></a><span class="br0">&#40;</span><span class="nu0">0</span>, N/fs, N<span class="br0">&#41;</span>;
h = <a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/figure.html"><span class="kw2">figure</span></a>;
<a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/plot.html"><span class="kw2">plot</span></a><span class="br0">&#40;</span>t, s<span class="br0">&#41;</span>;
<a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/xlabel.html"><span class="kw2">xlabel</span></a><span class="br0">&#40;</span><span class="co2">'Time (s)'</span><span class="br0">&#41;</span>;
<a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/title.html"><span class="kw2">title</span></a><span class="br0">&#40;</span><span class="co2">'Signal with noise'</span><span class="br0">&#41;</span>;
<a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/print.html"><span class="kw2">print</span></a><span class="br0">&#40;</span>h, <span class="co2">'-dpng'</span>, <span class="co2">'noisy_sound.png'</span><span class="br0">&#41;</span>;
&nbsp;
<span class="co1">%% Play noisy sound</span>
<a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/sound.html"><span class="kw2">sound</span></a><span class="br0">&#40;</span>s<span class="br0">&#41;</span>;
<a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/pause.html"><span class="kw2">pause</span></a><span class="br0">&#40;</span><span class="nu0">3</span><span class="br0">&#41;</span>;
&nbsp;
<span class="co1">%% Plot fft of noisy sound</span>
ys = <a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/fft.html"><span class="kw2">fft</span></a><span class="br0">&#40;</span>s<span class="br0">&#41;</span>;
fidx = <a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/linspace.html"><span class="kw2">linspace</span></a><span class="br0">&#40;</span><span class="nu0">0</span>,fs,N<span class="br0">&#41;</span>;
h = <a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/figure.html"><span class="kw2">figure</span></a>;
<a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/stem.html"><span class="kw2">stem</span></a><span class="br0">&#40;</span>fidx, <a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/abs.html"><span class="kw2">abs</span></a><span class="br0">&#40;</span>ys<span class="br0">&#41;</span><span class="br0">&#41;</span>;
<a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/xlabel.html"><span class="kw2">xlabel</span></a><span class="br0">&#40;</span><span class="co2">'Frequency (Hz)'</span><span class="br0">&#41;</span>;
<a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/title.html"><span class="kw2">title</span></a><span class="br0">&#40;</span><span class="co2">'Frequency spectrum of noisy sound'</span><span class="br0">&#41;</span>;
<a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/print.html"><span class="kw2">print</span></a><span class="br0">&#40;</span>h, <span class="co2">'-dpng'</span>, <span class="co2">'noisy_sound_fft.png'</span><span class="br0">&#41;</span>;
&nbsp;
<span class="co1">%% Plot only the positive spectrum</span>
fidx = <span class="br0">&#40;</span>fs/N<span class="br0">&#41;</span>*<a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/linspace.html"><span class="kw2">linspace</span></a><span class="br0">&#40;</span><span class="nu0">0</span>,N/<span class="nu0">2</span>-<span class="nu0">1</span>,N/<span class="nu0">2</span><span class="br0">&#41;</span>;
h = <a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/figure.html"><span class="kw2">figure</span></a>;
<a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/stem.html"><span class="kw2">stem</span></a><span class="br0">&#40;</span>fidx, <a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/abs.html"><span class="kw2">abs</span></a><span class="br0">&#40;</span>ys<span class="br0">&#40;</span><span class="nu0">1</span>:N/<span class="nu0">2</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;
<a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/xlabel.html"><span class="kw2">xlabel</span></a><span class="br0">&#40;</span><span class="co2">'Frequency (Hz)'</span><span class="br0">&#41;</span>;
<a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/title.html"><span class="kw2">title</span></a><span class="br0">&#40;</span><span class="co2">'Positive frequency spectrum of noisy sound'</span><span class="br0">&#41;</span>;
<a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/print.html"><span class="kw2">print</span></a><span class="br0">&#40;</span>h, <span class="co2">'-dpng'</span>, <span class="co2">'noisy_sound_fftpos.png'</span><span class="br0">&#41;</span>;
&nbsp;
<span class="co1">%% Plot spectrum centred at zero</span>
h = <a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/figure.html"><span class="kw2">figure</span></a>;
fidx = <span class="br0">&#40;</span>fs/N<span class="br0">&#41;</span>*<a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/linspace.html"><span class="kw2">linspace</span></a><span class="br0">&#40;</span>-N/<span class="nu0">2</span>, N/<span class="nu0">2</span>-<span class="nu0">1</span>, N<span class="br0">&#41;</span>;
<a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/stem.html"><span class="kw2">stem</span></a><span class="br0">&#40;</span>fidx, <a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/abs.html"><span class="kw2">abs</span></a><span class="br0">&#40;</span><a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/fftshift.html"><span class="kw2">fftshift</span></a><span class="br0">&#40;</span>ys<span class="br0">&#41;</span><span class="br0">&#41;</span><span class="br0">&#41;</span>;
<a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/xlabel.html"><span class="kw2">xlabel</span></a><span class="br0">&#40;</span><span class="co2">'Frequency (Hz)'</span><span class="br0">&#41;</span>;
<a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/title.html"><span class="kw2">title</span></a><span class="br0">&#40;</span><span class="co2">'zero-centred Frequency spectrum of noisy sound'</span><span class="br0">&#41;</span>;
<a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/print.html"><span class="kw2">print</span></a><span class="br0">&#40;</span>h, <span class="co2">'-dpng'</span>, <span class="co2">'noisy_sound_fftcentered.png'</span><span class="br0">&#41;</span>;
&nbsp;
<span class="co1">%% Compute snr</span>
kratio = <span class="nu0">500</span> / <span class="nu0">8000</span>;
nk = <a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/floor.html"><span class="kw2">floor</span></a><span class="br0">&#40;</span>N * kratio<span class="br0">&#41;</span>;
psignal = <span class="br0">&#40;</span>ys<span class="br0">&#40;</span><span class="nu0">1</span>:nk<span class="br0">&#41;</span>*ys<span class="br0">&#40;</span><span class="nu0">1</span>:nk<span class="br0">&#41;</span>' + ys<span class="br0">&#40;</span>end-nk+<span class="nu0">2</span>:<span class="kw1">end</span><span class="br0">&#41;</span>*ys<span class="br0">&#40;</span>end-nk+<span class="nu0">2</span>:<span class="kw1">end</span><span class="br0">&#41;</span>'<span class="br0">&#41;</span> / <span class="br0">&#40;</span><span class="nu0">2</span>*nk<span class="br0">&#41;</span>;
pnoise = ys<span class="br0">&#40;</span>nk+<span class="nu0">1</span>:end-nk<span class="br0">&#41;</span>*ys<span class="br0">&#40;</span>nk+<span class="nu0">1</span>:end-nk<span class="br0">&#41;</span>' / <span class="br0">&#40;</span>N-<span class="nu0">2</span>*nk<span class="br0">&#41;</span>;
snr = psignal / pnoise
snr_db = <span class="nu0">10</span>*<a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/log10.html"><span class="kw2">log10</span></a><span class="br0">&#40;</span>snr<span class="br0">&#41;</span>
&nbsp;
<span class="co1">%% Filter out frequencies above f=500 Hz</span>
sf = <a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/zeros.html"><span class="kw2">zeros</span></a><span class="br0">&#40;</span><span class="nu0">1</span>,N<span class="br0">&#41;</span>;
sf<span class="br0">&#40;</span><span class="nu0">1</span>:nk<span class="br0">&#41;</span> = ys<span class="br0">&#40;</span><span class="nu0">1</span>:nk<span class="br0">&#41;</span>;
sf<span class="br0">&#40;</span>end-nk+<span class="nu0">2</span>:<span class="kw1">end</span><span class="br0">&#41;</span> = ys<span class="br0">&#40;</span>end-nk+<span class="nu0">2</span>:<span class="kw1">end</span><span class="br0">&#41;</span>;
&nbsp;
<span class="co1">%% Plot filtered spectrum</span>
fidx = <a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/linspace.html"><span class="kw2">linspace</span></a><span class="br0">&#40;</span><span class="nu0">0</span>,fs,N<span class="br0">&#41;</span>;
h = <a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/figure.html"><span class="kw2">figure</span></a>;
<a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/stem.html"><span class="kw2">stem</span></a><span class="br0">&#40;</span>fidx, <a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/abs.html"><span class="kw2">abs</span></a><span class="br0">&#40;</span>sf<span class="br0">&#41;</span><span class="br0">&#41;</span>;
<a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/xlabel.html"><span class="kw2">xlabel</span></a><span class="br0">&#40;</span><span class="co2">'Frequency (Hz)'</span><span class="br0">&#41;</span>;
<a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/title.html"><span class="kw2">title</span></a><span class="br0">&#40;</span><span class="co2">'Frequency spectrum after removing high freqs'</span><span class="br0">&#41;</span>;
&nbsp;
<span class="co1">%% Reconstruct signal</span>
sr = <a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/ifft.html"><span class="kw2">ifft</span></a><span class="br0">&#40;</span>sf<span class="br0">&#41;</span>;
h = <a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/figure.html"><span class="kw2">figure</span></a>;
<a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/plot.html"><span class="kw2">plot</span></a><span class="br0">&#40;</span>t, sr<span class="br0">&#41;</span>;
<a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/xlabel.html"><span class="kw2">xlabel</span></a><span class="br0">&#40;</span><span class="co2">'Time (s)'</span><span class="br0">&#41;</span>;
<a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/title.html"><span class="kw2">title</span></a><span class="br0">&#40;</span><span class="co2">'Reconstructed signal after removing high freqs'</span><span class="br0">&#41;</span>;
<a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/print.html"><span class="kw2">print</span></a><span class="br0">&#40;</span>h, <span class="co2">'-dpng'</span>, <span class="co2">'reconstructed_sound.png'</span><span class="br0">&#41;</span>;
&nbsp;
<span class="co1">%% Play reconstructed sound</span>
<a href="http://www.mathworks.com/access/helpdesk/help/techdoc/ref/sound.html"><span class="kw2">sound</span></a><span class="br0">&#40;</span>sr<span class="br0">&#41;</span>;</pre>
</dd></dl>

<p>

</div></p>
</p>

</div>

        </div>
        <div class="right_sidebar">
          <form action="../../start.html" accept-charset="utf-8" class="search" id="dw__search" method="get"><div class="no"><input type="hidden" name="do" value="search" /><input type="text" id="qsearch__in" accesskey="f" name="id" class="edit" title="[F]" /><input type="submit" value="Search" class="button" title="Search" /><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>          <div class="namespace_sidebar sidebar_box">

<h1 class="sectionedit1" id="cursuri">Cursuri</h1>
<div class="level1">

<div><div id="nojs_indexmenu_23248649758355b3d3859e" data-jsajax="" class="indexmenu_nojs">

<ul class="idx">
<li class="level1"><div class="li"><a href="../cursuri/01.html" class="wikilink1" title="ps:cursuri:01">Cursul 01.</a></div></li>
<li class="level1"><div class="li"><a href="../cursuri/02.html" class="wikilink1" title="ps:cursuri:02">Cursul 02.</a></div></li>
<li class="level1"><div class="li"><a href="../cursuri/03.html" class="wikilink1" title="ps:cursuri:03">Cursul 03.</a></div></li>
<li class="level1"><div class="li"><a href="../cursuri/04.html" class="wikilink1" title="ps:cursuri:04">Cursul 04.</a></div></li>
<li class="level1"><div class="li"><a href="../cursuri/05.html" class="wikilink1" title="ps:cursuri:05">Cursul 05.</a></div></li>
<li class="level1"><div class="li"><a href="../cursuri/06.html" class="wikilink1" title="ps:cursuri:06">Cursul 06.</a></div></li>
<li class="level1"><div class="li"><a href="../cursuri/07.html" class="wikilink1" title="ps:cursuri:07">Cursul 07.</a></div></li>
<li class="level1"><div class="li"><a href="../cursuri/08.html" class="wikilink1" title="ps:cursuri:08">Cursul 08.</a></div></li>
<li class="level1"><div class="li"><a href="../cursuri/09.html" class="wikilink1" title="ps:cursuri:09">Cursul 09.</a></div></li>
<li class="level1"><div class="li"><a href="../cursuri/10.html" class="wikilink1" title="ps:cursuri:10">Cursul 10.</a></div></li>
<li class="level1"><div class="li"><a href="../cursuri/11.html" class="wikilink1" title="ps:cursuri:11">Cursul 11.</a></div></li>
<li class="level1"><div class="li"><a href="../cursuri/12.html" class="wikilink1" title="ps:cursuri:12">Cursul 12.</a></div></li>
</ul>
</div></div>

</div>
<!-- EDIT1 SECTION "Cursuri" [1-49] -->
<h1 class="sectionedit2" id="laboratoare">Laboratoare</h1>
<div class="level1">

<div><div id="nojs_indexmenu_128145804758355b3d3a4df" data-jsajax="" class="indexmenu_nojs">

<ul class="idx">
<li class="level1"><div class="li"><a href="01.html" class="wikilink1" title="ps:laboratoare:01">Laboratorul 01.</a></div></li>
<li class="level1"><div class="li"><a href="02.html" class="wikilink1" title="ps:laboratoare:02">Laboratorul 02.</a></div></li>
<li class="level1"><div class="li"><a href="03.html" class="wikilink1" title="ps:laboratoare:03">Laboratorul 03.</a></div></li>
<li class="level1"><div class="li"><a href="04.html" class="wikilink1" title="ps:laboratoare:04">Laboratorul 04.</a></div></li>
<li class="level1"><div class="li"><a href="05.html" class="wikilink1" title="ps:laboratoare:05">Laboratorul 05.</a></div></li>
<li class="level1"><div class="li"><a href="06.html" class="wikilink1" title="ps:laboratoare:06">Laboratorul 06.</a></div></li>
<li class="level1"><div class="li"><span class="curid"><a href="07.html" class="wikilink1" title="ps:laboratoare:07">Laboratorul 07.</a></span></div></li>
<li class="level1"><div class="li"><a href="08.html" class="wikilink1" title="ps:laboratoare:08">Laboratorul 08.</a></div></li>
<li class="level1"><div class="li"><a href="09.html" class="wikilink1" title="ps:laboratoare:09">Laboratorul 09.</a></div></li>
<li class="level1"><div class="li"><a href="10.html" class="wikilink1" title="ps:laboratoare:10">Laboratorul 10.</a></div></li>
<li class="level1"><div class="li"><a href="11.html" class="wikilink1" title="ps:laboratoare:11">Laboratorul 11.</a></div></li>
<li class="level1"><div class="li"><a href="12.html" class="wikilink1" title="ps:laboratoare:12">Laboratorul 12.</a></div></li>
</ul>
</div></div>

</div>
<!-- EDIT2 SECTION "Laboratoare" [50-108] -->
<h1 class="sectionedit3" id="resurse">Resurse</h1>
<div class="level1">

</div>
<!-- EDIT3 SECTION "Resurse" [109-] -->
</div>
<div class="toc_sidebar sidebar_box">
<!-- TOC START -->
<div id="sb__right__dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level2"><div class="li"><a href="07.html#laboratorul_07">Laboratorul 07.</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="07.html#snr_decibeli_si_dft">SNR, decibeli și DFT</a></div>
<ul class="toc">
<li class="level4"><div class="li"><a href="07.html#exercitiul_1_‐‐_unde_cu_zgomot_6p">Exercițiul 1 ‐‐ unde cu zgomot [6p]</a></div></li>
<li class="level4"><div class="li"><a href="07.html#exercitiul_2_‐‐_sunet_cu_zgomot_4p">Exercițiul 2 ‐‐ sunet cu zgomot [4p]</a></div></li>
</ul></li>
</ul></li>
</ul>
</div>
</div>
<!-- TOC END -->
</div>
        </div>
      
    
      <div class="stylefoot">
        <div class="meta">
          <div class="user">
                    </div>
          <div class="doc">
          ps/laboratoare/07.txt · Last modified: 2016/11/21 17:52 by ionut.gorgos          </div>
        </div>
      </div>

    <div class="clearer"></div>

    
                <div class="bar" id="bar__bottom">
      <div class="bar-left">
              </div>
      <div class="bar-right">
        <a href="http://ocw.cs.pub.ro/courses/ps/laboratoare/07?do=media&amp;ns=ps%3Alaboratoare"  class="action media" rel="nofollow" title="Media Manager">Media Manager</a><a href="07.html#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Back to top [T]">Back to top</a>      </div>
    </div>
    <div class="clearer"></div>
            
    <div align="center" class="footerinc">
  <div class="license"><a href="http://creativecommons.org/licenses/by-sa/3.0/" rel="license"><img src="../../lib/images/license/button/cc-by-sa.png" alt="CC Attribution-Share Alike 3.0 Unported" /></a></div>
  <a target="_blank" href="http://www.chimeric.de" title="www.chimeric.de"><img src="../../lib/tpl/arctic/images/button-chimeric-de.png" width="80" height="15" alt="www.chimeric.de" border="0" /></a>

  <a target="_blank" href="http://jigsaw.w3.org/css-validator/check/referer" title="Valid CSS"><img src="../../lib/tpl/arctic/images/button-css.png" width="80" height="15" alt="Valid CSS" border="0" /></a>

  <a target="_blank" href="http://wiki.splitbrain.org/wiki:dokuwiki" title="Driven by DokuWiki"><img src="../../lib/tpl/arctic/images/button-dw.png" width="80" height="15" alt="Driven by DokuWiki" border="0" /></a>

  <a target="_blank" href="http://www.firefox-browser.de" title="do yourself a favour and use a real browser - get firefox"><img src="../../lib/tpl/arctic/images/button-firefox.png" width="80" height="15" alt="do yourself a favour and use a real browser - get firefox!!" border="0" /></a>
  
  <a target="_blank" href="../../feed.php" title="Recent changes RSS feed"><img src="../../lib/tpl/arctic/images/button-rss.png" width="80" height="15" alt="Recent changes RSS feed" border="0" /></a>

  <a target="_blank" href="http://validator.w3.org/check/referer" title="Valid XHTML 1.0"><img src="../../lib/tpl/arctic/images/button-xhtml.png" width="80" height="15" alt="Valid XHTML 1.0" border="0" /></a>
</div>

  </div>
</div>

<div class="no"><img src="http://ocw.cs.pub.ro/courses/lib/exe/indexer.php?id=ps%3Alaboratoare%3A07&amp;1479891773" width="2" height="1" alt="" /></div>
</body>
</html>

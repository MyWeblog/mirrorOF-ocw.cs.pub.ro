    
    

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
 lang="en" dir="ltr">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>
    01. Introduction to Flex    [CS Open CourseWare]
  </title>

  <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="date" content="2016-10-03T21:56:18+0300"/>
<meta name="keywords" content="cpl,labs,01"/>
<link rel="search" type="application/opensearchdescription+xml" href="../../lib/exe/opensearch.php" title="CS Open CourseWare"/>
<link rel="start" href="../../../courses.1.html"/>
<link rel="alternate" type="application/rss+xml" title="Recent Changes" href="../../feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current Namespace" href="../../feed.php%3Fmode=list&amp;ns=cpl:labs"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="../../_export/xhtml/cpl/labs/01.html"/>
<link rel="canonical" href="01.html"/>
<link rel="stylesheet" type="text/css" href="../../lib/exe/css.php%3Ft=arctic&amp;tseed=1476798676.css"/>
<script type="text/javascript">/*<![CDATA[*/var NS='cpl:labs';var JSINFO = {"id":"cpl:labs:01","namespace":"cpl:labs","isadmin":0,"isauth":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="../../lib/exe/js.php%3Ftseed=1476798676"></script>
<script type="text/x-mathjax-config">/*<![CDATA[*/MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ["$","$"], ["\\(","\\)"] ],
        displayMath: [ ["$$","$$"], ["\\[","\\]"] ],
        processEscapes: true
    }
});
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
<script type="text/javascript">/*<![CDATA[*/
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
		  
/*!]]>*/</script>
<script type="text/javascript">/*<![CDATA[*/
var pageTracker = _gat._getTracker("UA-38383934-1");
pageTracker._initData();
pageTracker._trackPageview();
		  
/*!]]>*/</script>

  <link rel="shortcut icon" href="../../lib/tpl/arctic/images/favicon.ico" />

  
</head>
<body>
<div id="wrapper" class='show'>
  <div class="dokuwiki">

    
    <div class="stylehead">
      <div class="header">
        <div class="pagename">
          <a href="../index.html"><img height="70" src="../../res/sigla_cpl.png"/> </a>        </div>
        <div class="logo">
          <a style="color: #AAA !important;" href="../../../courses.1.html"/>Open CourseWare</a>        </div>
      </div>
    
       
      <div class="breadcrumbs">
              </div>
      
            </div>

                  <div class="bar" id="bar__top">
        <div class="bar-left">
                  </div>
        <div class="bar-right">
          <a href="01%3Fdo=recent.html"  class="action recent" accesskey="r" rel="nofollow" title="Recent changes [R]">Recent changes</a><a href="01%3Fdo=login&amp;sectok=f62420cf5b01253da4b50505d148181b.html"  class="action login" rel="nofollow" title="Login">Login</a>        </div>
    </div>
        
    
    
    
              <div class="left_page">
          
<h1 class="sectionedit1" id="introduction_to_flex">01. Introduction to Flex</h1>
<div class="level1">

</div>

<h2 class="sectionedit2" id="introducere">Introducere</h2>
<div class="level2">

<p>
De-a lungul acestui semestru, veți studia în cadrul cursului modul de implementare al unui compilator. La nivel conceptual, compilatorul este un program ce face translatarea dintr-un limbaj în altul. Cel mai adesea, compilatorul face translatarea dintr-un limbaj de nivel înalt (C, C++, Java), ce este scris și înteles de un programator, într-un limbaj low level (bytecode, limbaj asamblare, cod mașina) ce poate fi mai apoi executat de procesor (eventual după aplicarea unei noi translatări).
</p>

<p>
Operația de compilare a unui limbaj se face în general în mai mulți pași. Fiecare pas produce ca output o translatare a datelor de intrare primite, output ce servește ca input pentru pasul următor. Principalii pași ce se disting, în mod conceptual, pentru majoritatea compilatoarelor se pot vedea în figura urmatoare, împreuna cu inputul si outputul aferent, precum și tool-urile pe care le vom folosi în cadrul laboratorului și temelor pentru implementare.
</p>

<p>
<a href="../../_detail/cpl/labs/lab1better.png%3Fid=cpl%253Alabs%253A01.html" class="media" title="cpl:labs:lab1better.png"><img src="../../_media/cpl/labs/lab1better.png%3Fw=600&amp;tok=a78372" class="mediacenter" alt="" width="600" /></a>
</p>

</div>

<h2 class="sectionedit3" id="nice_to_read">Nice to read</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> <a href="http://flex.sourceforge.net/manual/" class="urlextern" title="http://flex.sourceforge.net/manual/"  rel="nofollow">Flex</a> manual</div>
</li>
<li class="level1"><div class="li"> <a href="http://web.iitd.ac.in/~sumeet/flex__bison.pdf" class="urlextern" title="http://web.iitd.ac.in/~sumeet/flex__bison.pdf"  rel="nofollow">flex &amp; bison</a> O&#039;Reilly book</div>
</li>
</ul>

</div>

<h2 class="sectionedit4" id="prezentare_teoretica">Prezentare teoretică</h2>
<div class="level2">

<p>
Analiza lexicală este primul pas în înțelegerea de către compilator a fișierelor sursă. Scopul său este de a identifica atomii lexicali (“tokens”). Exemple de atomi lexicali în C sunt constantele întregi (<code>42</code>, <code>-8l</code>, <code>0xff</code>), șirurile de caractere (<code>“ana are mere”</code>) sau identificatorii (<code>my_awesome_function</code>).
</p>

<p>
<code>flex</code> este un generator de analizoare lexicale. Acesta primește la intrare un fișier ce conține o specificație a atomilor pe care urmează să-i recunoască analizorul generat, precum și o serie de acțiuni semantice de executat. Specificațiile vor fi scrise într-un fișier text ce poate avea orice denumire/extensie. De regulă se folosește extensia <code>.lex</code>.
</p>

<p>
Pe baza spcificațiilor, <code>flex</code> generează un program C ce conține tabele de analiză și o funcție de analiză numită <code>yylex</code>. Numele implicit al fișierului astfel generat este <code>lex.yy.c</code>. Acesta urmează să fie compilat (<code>gcc</code> sau un alt compilator) pentru a se obține fișierul executabil. 
</p>

<p>
<a href="../../_detail/cpl/labs/flex.png%3Fid=cpl%253Alabs%253A01.html" class="media" title="cpl:labs:flex.png"><img src="../../_media/cpl/labs/flex.png%3Fw=300&amp;tok=b4217c" class="mediacenter" alt="" width="300" /></a>
</p>

</div>

<h2 class="sectionedit5" id="instalare_flex">Instalare flex</h2>
<div class="level2">

<p>
În cadrul acestui laborator vom folosi pachetul <code>flex</code> standard oferit de distribuție. Pentru mașina virtuală CPL pusă la dispoziție versiunea pachetului <code>flex</code> este <code>2.5.35</code>.
</p>
<pre class="code">sudo apt-get install flex</pre>

</div>

<h2 class="sectionedit6" id="utilizare_flex">Utilizare flex</h2>
<div class="level2">
<pre class="code bash"><span class="kw2">flex</span> <span class="br0">&#91;</span>OPTIONS<span class="br0">&#93;</span> <span class="br0">&#91;</span>FILE<span class="br0">&#93;</span> ...</pre>

<p>
Implicit, rulând programul fără nicio opțiune, va aștepta introducerea de specificații de la intrarea standard (stdin).
</p>

<p>
Comanda dispune de o varietate de parametri și opțiuni (<a href="http://www.manpagez.com/man/1/flex/" class="urlextern" title="http://www.manpagez.com/man/1/flex/"  rel="nofollow">man flex</a>) dintre care amintim:
</p>
<ul>
<li class="level1"><div class="li"> <em>-d</em> - activarea modului <strong>debugging</strong>; variabila globală <code>yy_flex_debug</code> trebuie să fie setată pe o valoare nenulă, implicit având valoarea 0</div>
</li>
<li class="level1"><div class="li"> <em>-i</em> - analizorul generat va fi case-insensitive</div>
</li>
<li class="level1"><div class="li"> <em>-o</em> - schimbă numele implicit al fișierului de ieșire <code>lex.yy.c</code></div>
</li>
</ul>

</div>

<h2 class="sectionedit7" id="structura_fisierului_de_specificatii">Structura fișierului de specificații</h2>
<div class="level2">

<p>
Fișierul de specificații conține expresiile regulate ce descriu atomii limbajului sursă, precum și acțiunile pe care analizorul trebuie să le execute la recunoașterea fiecărui atom.
</p>
<pre class="code bash">definitions
<span class="sy0">%%</span>
rules
<span class="sy0">%%</span>
user_code</pre>

<p>
Se pot adăuga <strong> /* comentarii ca în C */ </strong> cât timp sunt precedate de cel puțin un spațiu.
</p>

</div>

<h3 class="sectionedit8" id="sectiunea_de_definitii">Secțiunea de definiții</h3>
<div class="level3">

<p>
Această secțiune apare înainte de prima secvență de <code>%%</code> și este utilizată pentru a simplifica scanarea expresiilor prin asocierea de nume expresiilor regulate. În această secțiune pot să apară:
</p>
<ul>
<li class="level1"><div class="li"> opțiuni</div>
</li>
<li class="level1"><div class="li"> stări de start</div>
</li>
<li class="level1"><div class="li"> secvențe de cod C</div>
</li>
</ul>

<p>
Asocierea de nume cu expresiile regulate se face prin construcții de forma:
</p>
<pre class="code bash">name definition</pre>

<p>
unde:
</p>
<ul>
<li class="level1"><div class="li"> <em>name</em> - cuvânt compus din litere, cifre, <code>-</code> și/sau <code>_</code>; primul caracter trebuie să fie literă sau <code>_</code>;</div>
</li>
<li class="level1"><div class="li"> <em>definition</em> - expresie regulată (până la sfârșit de rând);</div>
</li>
</ul>

<p>
Numele astfel asociate pot fi folosite în definirea altor expresii regulate folosind construcția <code>{name}</code>. Comportamentul este similar celui obținut cu ajutorul directivei de preprocesor <code>define</code> din C.
</p>

</div>

<h4 id="optiuni">Opțiuni</h4>
<div class="level4">

<p>
Directivele <strong><code>%option</code></strong> permit precizarea unor comportamente specifice legate de analizorul generat. 
</p>

<p>
În continuare o să prezentăm câteva dintre cele mai des întâlnite astfel de opțiuni.
</p>
<ul>
<li class="level1"><div class="li"> <em>%option main</em> - generează o funcție <code>main</code> care doar apelează funcția de analiză <code>yylex</code>;</div>
</li>
<li class="level1"><div class="li"> <em>%option debug</em> - activează modul debugging;</div>
</li>
<li class="level1"><div class="li"> <em>%option case-insensitive</em> - analizatorul va fi case insensitive;</div>
</li>
<li class="level1"><div class="li"> <em>%option yylineno</em> - activează variabila globală <code>yylineno</code> ce va conține numărul liniei corespunzătoare din codul sursă;</div>
</li>
</ul>

</div>

<h4 id="stari_de_start">Stări de start</h4>
<div class="level4">

<p>
<code>flex</code> este capabil să lucreze simultan cu mai multe seturi de reguli diferite. Acest lucru poate fi util spre exemplu dacă se dorește analiza unui fișier sursă în care apar secvențe de cod scrise în limbaje diferite, cărora le corespund seturi de expresii regulate diferite. Astfel, există un mecanism ce permite activarea dinamică a unui anumit set de reguli în funcție de startea de start.
</p>

<p>
Stările de start trebuie declarate în secțiunea de definiții, folosind una dintre următoarele două metode:
</p>
<pre class="code bash"><span class="sy0">%</span>s inclusive_start_state1,inclusive_start_state2,...,inclusive_start_stateN
<span class="sy0">%</span>x exclusive_start_states1,exclusive_start_states2,...,exclusive_start_statesN </pre>

<p>
Numele stărilor de start vor fi atașate anumitor reguli din secțiunea de reguli și vor putea fi folosite ca argumente ale directivelor <code>BEGIN</code>. Prin execuția unei directive <code>BEGIN</code>, analizorul trece în starea de start ce apare ca argument al directivei și va folosi regulile ce corespund condiției respective astfel:
</p>
<ul>
<li class="level1"><div class="li"> condiție inclusivă (declarată cu <code>%s</code>) - regulile acceptate sunt atât cele neetichetate cât și cele etichetate cu numele condiției;</div>
</li>
<li class="level1"><div class="li"> condiție exclusivă (declarată cu <code>%x</code>) - regulile acceptate sunt doar cele etichetate cu numele condiției;</div>
</li>
</ul>

<p>
O regulă poate fi etichetată cu una sau mai multe stări de start, astfel:
</p>
<pre class="code bash"><span class="sy0">&lt;</span>state1,state2,...,stateN<span class="sy0">&gt;</span>rule</pre>

<p>
Un exemplu <a href="http://pastebin.com/uaCe7CxS" class="urlextern" title="http://pastebin.com/uaCe7CxS"  rel="nofollow">aici</a>.
</p>

</div>

<h4 id="secvente_de_cod_c_in_sectiunea_de_definitii">Secvențe de cod C în secțiunea de definiții</h4>
<div class="level4">

<p>
Secțiunea de definiții poate conține secvențe de cod C definite de utilizator. Pentru a introduce astfel de secvențe, ele trebuie să fie incluse între perechile de caractere <code>%{</code>, respectiv <code>%}</code>. Cele două perechi trebuie să apară pe linii separate și neindentate.
</p>

<p>
Codul cuprins între <code>%{</code> și <code>%}</code> va fi copiat în analizorul generat, în spațiul de vizibilitate extern (global) funcției <code>yylex</code>. 
</p>

</div>

<h3 class="sectionedit9" id="sectiunea_de_reguli">Secțiunea de reguli</h3>
<div class="level3">

<p>
Secțiunea de reguli este folosită pentru a asocia acțiuni semantice expresilor regulate folosind construcții de forma:
</p>
<pre class="code bash">template action</pre>

<p>
unde,
</p>
<ul>
<li class="level1"><div class="li"> <em>template</em> - expresie regulată al cărei prim caracter trebuie să se afle pe prima poziție a liniei;</div>
</li>
<li class="level1"><div class="li"> <em>action</em> - secvență formată din una sau mai multe instrucțiuni C; trebuie să înceapă pe aceeași linie cu <em>template</em>; pentru mai multe instrucțiuni se va folosi definirea unui bloc de instrucțiuni (adică linii de cod împrejmuite de acolade); <em>action</em> poate fi inclusiv instrucțiunea vidă;</div>
</li>
</ul>

<p>
Analizorul generat va executa secvența descrisă ca acțiune de fiecare dată când va recunoaște în textul sursă un șir care se potrivește cu <em>template</em>. Dacă o acțiune se termină cu instrucțiunea <code>return</code>, acest lucru va determina ieșirea din funcția <code>yylex</code>, deci va trece automat la căutarea următoarelor potriviri. 
</p>

<p>
Spre exemplu, dacă ne dorim ca analizorul lexical să prelucreze câte un singur atom la fiecare apel, va trebui să prevedem instrucțiuni de return la toate acțiunile care corespund unor atomi valizi (fără comentarii și whitespaces). Pentru compilatoarele care lucrează în mai multe faze (analiza lexicală fiind o fază distinctă), acțiunile se vor termina prin instrucțiuni de scriere (ex: directiva <code>ECHO</code>) a codurilor lexicale într-un fișier de ieșire (<code>yyout</code>) pentru a putea fi prelucrate în fazele ulterioare.
</p>

</div>

<h4 id="expresii_regulate">Expresii regulate</h4>
<div class="level4">
<div class="table sectionedit10"><table class="inline">
	<tr class="row0">
		<th class="col0 centeralign">  Șablon  </th><th class="col1 centeralign">  Descriere  </th>
	</tr>
	<tr class="row1">
		<td class="col0 centeralign">  a  </td><td class="col1"> caracterul <em>a</em> </td>
	</tr>
	<tr class="row2">
		<td class="col0 centeralign">  .  </td><td class="col1"> orice caracter mai puțin sfârșitul de linie </td>
	</tr>
	<tr class="row3">
		<td class="col0 centeralign">  \a  </td><td class="col1"> escapează caracterul <em>a</em> sau definește un caracter special (<em>\n</em>, <em>\b</em>, etc.) </td>
	</tr>
	<tr class="row4">
		<td class="col0 centeralign">  \042  </td><td class="col1"> caracterul cu codul ascii 42 în octal </td>
	</tr>
	<tr class="row5">
		<td class="col0 centeralign">  \x42  </td><td class="col1"> caracterul cu codul ascii 42 în hexa </td>
	</tr>
	<tr class="row6">
		<td class="col0 centeralign">  [abc]  </td><td class="col1"> oricare dintre caracterele <em>a</em>, <em>b</em> sau <em>c</em> </td>
	</tr>
	<tr class="row7">
		<td class="col0 centeralign">  [a-z]  </td><td class="col1"> oricare dintre caracterele din intervalul <em>a-z</em> </td>
	</tr>
	<tr class="row8">
		<td class="col0 centeralign">  [a-zA-Z]  </td><td class="col1"> orice literă </td>
	</tr>
	<tr class="row9">
		<td class="col0 centeralign">  [^a]  </td><td class="col1"> orice în afară de caracterul <em>a</em> </td>
	</tr>
	<tr class="row10">
		<td class="col0 centeralign">  [^a-z]  </td><td class="col1"> orice în afară de litere mici </td>
	</tr>
	<tr class="row11">
		<td class="col0 centeralign">  r*  </td><td class="col1"> zero sau mai multe apariții succesive ale expresiei regulate <em>r</em> </td>
	</tr>
	<tr class="row12">
		<td class="col0 centeralign">  r+  </td><td class="col1"> una sau mai multe apariții succesive ale expresiei regulate <em>r</em> </td>
	</tr>
	<tr class="row13">
		<td class="col0 centeralign">  r?  </td><td class="col1"> maxim o apariție a expresiei regulate <em>r</em> </td>
	</tr>
	<tr class="row14">
		<td class="col0 centeralign">  r{2,5}  </td><td class="col1"> 2, 3, 4 sau 5 apariții succesive ale expresiei regulate <em>r</em> </td>
	</tr>
	<tr class="row15">
		<td class="col0 centeralign">  r{2,}  </td><td class="col1"> 2 sau mai multe apariții succesive ale expresiei regulate <em>r</em> </td>
	</tr>
	<tr class="row16">
		<td class="col0 centeralign">  r{2}  </td><td class="col1"> 2 apariții succesive ale expresiei regulate <em>r</em> </td>
	</tr>
	<tr class="row17">
		<td class="col0 centeralign">  {xxx}  </td><td class="col1"> se expandează la expresia regulată căreia i s-a asociat numele <em>xxx</em> în secțiunea de definiții </td>
	</tr>
	<tr class="row18">
		<td class="col0 centeralign">  (r)  </td><td class="col1"> expresia regulată <em>r</em>, evaluarea ei având prioritate </td>
	</tr>
	<tr class="row19">
		<td class="col0 centeralign">  rs  </td><td class="col1"> concatenarea expresiilor regulate <em>r</em> și <em>s</em> </td>
	</tr>
	<tr class="row20">
		<td class="col0 centeralign">  r|s  </td><td class="col1"> una dintre expresiile regulate <em>r</em> sau <em>s</em> </td>
	</tr>
	<tr class="row21">
		<td class="col0 centeralign">  r/s  </td><td class="col1"> expresia regulată <em>r</em>, cu condiția ca aceasta să fie urmată de expresia regulată <em>s</em> </td>
	</tr>
	<tr class="row22">
		<td class="col0 centeralign">  ^r  </td><td class="col1"> expresia regulată <em>r</em>, cu condiția ca această să apară la început de linie </td>
	</tr>
	<tr class="row23">
		<td class="col0 centeralign">  r$  </td><td class="col1"> expresia regulată <em>r</em>, cu condiția ca această să apară la sfârșit de linie </td>
	</tr>
	<tr class="row24">
		<td class="col0 centeralign">  &lt;&lt;EOF&gt;&gt;  </td><td class="col1"> marcaj de sfârșit de fișier </td>
	</tr>
	<tr class="row25">
		<td class="col0 centeralign">  &lt;s&gt;r  </td><td class="col1"> expresia regulată <em>r</em>, dar numai în condiția de start <em>s</em> și în condițiile inclusive</td>
	</tr>
</table></div>

</div>

<h4 id="secvente_de_cod_c_in_sectiunea_de_reguli">Secvențe de cod C în secțiunea de reguli</h4>
<div class="level4">

<p>
În secțiunea de reguli, la fel ca în cea de <a href="01.html#secvente_de_cod_c_in_sectiunea_de_definitii" class="urlextern" title="http://ocw.cs.pub.ro/courses/cpl/labs/01#secvente_de_cod_c_in_sectiunea_de_definitii"  rel="nofollow">definiții</a>, utilizatorul poate să plaseze secvențe de cod C, altele decât cele care reprezintă acțiuni atașate expresiilor regulate. Sintaxa este aceeași ca în cazul <a href="01.html#secvente_de_cod_c_in_sectiunea_de_definitii" class="urlextern" title="http://ocw.cs.pub.ro/courses/cpl/labs/01#secvente_de_cod_c_in_sectiunea_de_definitii"  rel="nofollow">secțiunii de definiții</a>.
</p>

<p>
Codul din secțiunea de reguli va fi copiat în analizorul generat în interiorul funcției <code>yylex</code>. Recomandăm plasarea unor astfel de secvențe înainte de prima regulă; acestea vor conține de obicei declarații locale în raport cu funcția <code>yylex</code>, inițializări etc.
</p>

</div>

<h3 class="sectionedit11" id="sectiunea_de_cod">Secțiunea de cod</h3>
<div class="level3">

<p>
Secțiunea de cod este opțională, iar în cazul în care există are ca efect copierea codului la sfârșitul fișierului <code>lex.yy.c</code>. 
</p>

<p>
În mod normal, în această secțiune poate să apară funcția <code>main</code> care să conțină apeluri către funcția <code>yylex</code> sau alte funcții utile pentru a fi apelate din interiorul funcției <code>yylex</code>.
</p>

</div>

<h4 id="variabile_si_macro-uri_utile">Variabile și macro-uri utile</h4>
<div class="level4">

<p>
În această secțiune vom defini un set de variabile și macro-uri utile oferite de <code>flex</code>. Acestea pot fi folosite în cadrul secțiunii de cod, dar și în momentul inserării de cod în cadrul secțiunii de definiții sau de reguli.
</p>
<ul>
<li class="level1"><div class="li"> <em>char *yytext</em> - adresa zonei în care sunt reținute caracterele ce compun atomul curent;</div>
</li>
<li class="level1"><div class="li"> <em>int yyleng</em> - lungimea atomului curent;</div>
</li>
<li class="level1"><div class="li"> <em>FILE *yyin</em> - pointer către fișierul deschis ce conține textul curent analizat;</div>
</li>
<li class="level1"><div class="li"> <em>FILE *yyout</em> - pointer către fișierul deschis în care se poate scrie cu ajutorul macro-ului <code>ECHO</code>;</div>
</li>
<li class="level1"><div class="li"> <em>ECHO</em> - realizează scrierea conținutului <code>yytext</code> în <code>yyout</code>;</div>
</li>
<li class="level1"><div class="li"> <em>BEGIN(start_state)</em> - comută analizorul în <code>start_state</code>;</div>
</li>
<li class="level1"><div class="li"> <em>REJECT</em> - caută următoarea regulă al cărei șablon se potrivește cu atomul în curs de prelucrare (sau cu un prefix) și execută acțiunea asociată regulii găsite;</div>
</li>
<li class="level1"><div class="li"> <em>YY_START</em> - starea curentă (un număr);</div>
</li>
<li class="level1"><div class="li"> <em>yyterminate()</em> - termină procesul de analiză și întoarce valoarea 0 către apelantul funcției <code>yylex</code>;</div>
</li>
<li class="level1"><div class="li"> <em>yymore()</em> - concatenează următorul atom la atomul existent în <code>yytext</code>;</div>
</li>
<li class="level1"><div class="li"> <em>yyless(int n)</em> - lasă în <code>yytext</code> primele <em>n caractere</em> ale atomului curent, restituind în șirul de intrare caracterele de pe pozițiile n+1 până la sfârșit; actualizează <code>yyleng</code> la n;</div>
</li>
<li class="level1"><div class="li"> <em>unput(char c)</em> - forțează plasarea în șirul de intrare a caracterului <code>c</code>;</div>
</li>
<li class="level1"><div class="li"> <em>input()</em> - citește și returnează următorul caracter din șirul de intrare;</div>
</li>
</ul>

</div>

<h2 class="sectionedit12" id="functia_yylex">Funcția yylex</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> se aplică acțiunile corespunzătoare din specificație (secțiunea de reguli) care pot genera text specific în fișierul <code>yyout</code> sau pot întoarce coduri lexicale;</div>
</li>
<li class="level1"><div class="li"> textul din fișierul sursă care nu se potrivește cu niciun șablon este copiat automat în <code>yyout</code>;</div>
</li>
<li class="level1"><div class="li"> dacă pentru un text se potrivesc mai multe șabloane, se alege potrivirea <strong>cea mai lungă</strong>;</div>
</li>
<li class="level1"><div class="li"> dacă pentru un text se potrivesc mai multe șabloane de aceeași lungime, se alege <strong>prima potrivire în ordine textuală</strong> din specificație;</div>
</li>
<li class="level1"><div class="li"> textul corespunzător potrivirii este copiat în <code>yytext</code>, iar lungimea acestuia este reținută în <code>yyleng</code>;</div>
</li>
<li class="level1"><div class="li"> când analizorul întâlnește marcajul <code><abbr title="End of file">EOF</abbr></code>, verifică rezultatul funcției <code>yywrap</code>; dacă rezultatul este fals (zero), înseamnă că analiza trebuie să continue cu noul fișier desemnat de <code>yyin</code>; dacă rezultatul este nenul, analiza se termină și se întoarce valoarea zero spre apelantul funcției <code>yylex</code>;</div>
</li>
</ul>

<p>
Absența funcției <code>yywrap</code> poate fi suplinită de opțiunea <code>%option noyywrap</code> sau prin opțiunea <code>-lfl</code> la linkare. 
</p>

</div>

<h1 class="sectionedit13" id="exercitii_de_laborator_10p">Exerciții de laborator (10p)</h1>
<div class="level1">

<p>
În rezolvarea laboratorului folosiți arhiva de sarcini <a href="../../_media/cpl/labs/lab01_num_lines.zip" class="media mediafile mf_zip" title="cpl:labs:lab01_num_lines.zip (70.9 KB)"> lab01_num_lines.zip </a>
</p>

</div>

<h1 class="sectionedit14" id="exercitiul_0">Exercițiul 0</h1>
<div class="level1">

<p>
Înscrieți-vă pe <a href="../info/lista-discutii.html" class="wikilink1" title="cpl:info:lista-discutii"> Lista de discuții de CPL</a>.
</p>

</div>

<h2 class="sectionedit15" id="exercitiul_1_-_num_lines_3p">Exercițiul 1 - num lines (3p)</h2>
<div class="level2">

<p>
Intrați în directorul <code>1-num-lines</code>. 
</p>

<p>
Fișierul <code>example.lex</code> este un exemplu de fișier de specificație ce definește o variabilă globală, <code>num_lines</code>, iar de fiecare dată când identifică caracterul <code>\n</code> (newline) incrementează valoarea variabilei globale. Setul de specificații conține și o zonă definită de cod în care utilizatorul a definit funcția main, apelează funcția de parsare <code>yylex</code> și afișează numărul total de linii.
</p>

<p>
Generați cu ajutorul comenzii <code>flex</code> fișierul C <code>lex.yy.c</code>. Compilați și generați fișierul executabil. Folosiți drept fișier de input <code>unabom.txt</code>.
</p>

</div>

<h2 class="sectionedit16" id="exercitiul_2_-_num_words_3p">Exercițiul 2 - num words (3p)</h2>
<div class="level2">

<p>
Modificați exercițiul anterior pentru a număra câte cuvinte se află într-un fișier dat.
Cuvintele pot conține literali și cratime și sunt separate prin spații albe (enter, spațiu, tab, etc.) sau semne de punctuație.
</p>

</div>

<h2 class="sectionedit17" id="exercitiul_3_-_names_2p">Exercițiul 3 - names (2p)</h2>
<div class="level2">

<p>
Scrieți un fișier de specificație <code>.lex</code> care identifică toate cuvintele care încep cu majusculă.
</p>

</div>

<h2 class="sectionedit18" id="exercitiul_4_-_appearances_2p">Exercițiul 4 - appearances (2p)</h2>
<div class="level2">

<p>
Scrieți un fișier de specificație <code>.lex</code> care identifică de câte ori se regăsește un cuvânt dat într-un text.
</p>

</div>

        </div>
        <div class="right_sidebar">
          <form action="../../start.html" accept-charset="utf-8" class="search" id="dw__search" method="get"><div class="no"><input type="hidden" name="do" value="search" /><input type="text" id="qsearch__in" accesskey="f" name="id" class="edit" title="[F]" /><input type="submit" value="Search" class="button" title="Search" /><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>          <div class="namespace_sidebar sidebar_box">



<h1 class="sectionedit1" id="informatii_generale_cpl">Informații generale CPL</h1>
<div class="level1">

<div><div id="nojs_indexmenu_49889156558355b057ba21" data-jsajax="" class="indexmenu_nojs">

<ul class="idx">
<li class="level1"><div class="li"><a href="../info/documentatie.html" class="wikilink1" title="cpl:info:documentatie">Documentație și alte resurse</a></div></li>
<li class="level1"><div class="li"><a href="../info/lista-discutii.html" class="wikilink1" title="cpl:info:lista-discutii">Listă de discuții</a></div></li>
<li class="level1"><div class="li"><a href="../info/trimitere-teme.html" class="wikilink1" title="cpl:info:trimitere-teme">Trimitere teme</a></div></li>
<li class="level1"><div class="li"><a href="../info/vm.html" class="wikilink1" title="cpl:info:vm">Mașina virtuală</a></div></li>
</ul>
</div></div>

</div>
<!-- EDIT1 SECTION "Informații generale CPL" [12-86] -->
<h1 class="sectionedit2" id="informatii_cpl_2016-2017">Informații CPL 2016-2017</h1>
<div class="level1">

<div><div id="nojs_indexmenu_59018255958355b057c9c1" data-jsajax="" class="indexmenu_nojs">

<ul class="idx">
<li class="open"><div class="li"><a href="../meta/notare.html" class="indexmenu_idx_head">Reguli generale și notare</a></div>
<ul class="idx">
<li class="level2"><div class="li"><a href="../meta/notare/reguli-notare.html" class="wikilink1" title="cpl:meta:notare:reguli-notare">Notare</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="../meta/anunturi.html" class="wikilink1" title="cpl:meta:anunturi">Anunțuri</a></div></li>
<li class="level1"><div class="li"><a href="../meta/calendar.html" class="wikilink1" title="cpl:meta:calendar">Calendar</a></div></li>
<li class="level1"><div class="li"><a href="../meta/catalog.html" class="wikilink1" title="cpl:meta:catalog">Catalog</a></div></li>
<li class="level1"><div class="li"><a href="../meta/examen.html" class="wikilink1" title="cpl:meta:examen">Examen</a></div></li>
<li class="level1"><div class="li"><a href="../meta/need-to-know.html" class="wikilink1" title="cpl:meta:need-to-know">CPL Need to Know</a></div></li>
<li class="level1"><div class="li"><a href="../meta/orar.html" class="wikilink1" title="cpl:meta:orar">Orar și împărțire pe semigrupe</a></div></li>
</ul>
</div></div>

</div>
<!-- EDIT2 SECTION "Informații CPL 2016-2017" [87-155] -->
<h1 class="sectionedit3" id="laboratoare">Laboratoare</h1>
<div class="level1">

<div><div id="nojs_indexmenu_123879582158355b057d95a" data-jsajax="" class="indexmenu_nojs">

<ul class="idx">
<li class="level1"><div class="li"><span class="curid"><a href="01.html" class="wikilink1" title="cpl:labs:01">01. Introduction to Flex</a></span></div></li>
<li class="level1"><div class="li"><a href="02.html" class="wikilink1" title="cpl:labs:02">02. Introduction to Bison</a></div></li>
<li class="level1"><div class="li"><a href="03.html" class="wikilink1" title="cpl:labs:03">03. Bison Advanced</a></div></li>
<li class="level1"><div class="li"><a href="04.html" class="wikilink1" title="cpl:labs:04">04. Introduction to LLVM</a></div></li>
<li class="level1"><div class="li"><a href="05.html" class="wikilink1" title="cpl:labs:05">05. LLVM IR - C++ API</a></div></li>
<li class="level1"><div class="li"><a href="06.html" class="wikilink1" title="cpl:labs:06">06. Code generation. Structure of data and objects in memory</a></div></li>
<li class="level1"><div class="li"><a href="07.html" class="wikilink1" title="cpl:labs:07">07. Code generation. Function calls and stack frames</a></div></li>
<li class="level1"><div class="li"><a href="08.html" class="wikilink1" title="cpl:labs:08">08. LLVM backend</a></div></li>
<li class="level1"><div class="li"><a href="09.html" class="wikilink1" title="cpl:labs:09">09. LLVM Passes - displaying code structure</a></div></li>
<li class="level1"><div class="li"><a href="10.html" class="wikilink1" title="cpl:labs:10">10. LLVM Passes - code analysis</a></div></li>
<li class="level1"><div class="li"><a href="11.html" class="wikilink1" title="cpl:labs:11">11. LLVM Passes - code optimizations</a></div></li>
<li class="level1"><div class="li"><a href="12.html" class="wikilink1" title="cpl:labs:12">12. Linkers and Loaders</a></div></li>
<li class="level1"><div class="li"><a href="llvm-pass.html" class="wikilink1" title="cpl:labs:llvm-pass">LLVM Passes</a></div></li>
</ul>
</div></div>

</div>
<!-- EDIT3 SECTION "Laboratoare" [156-209] -->
<h1 class="sectionedit4" id="cursuri">Cursuri</h1>
<div class="level1">

<div><div id="nojs_indexmenu_17099072258355b057e8fc" data-jsajax="" class="indexmenu_nojs">

<ul class="idx">
<li class="level1"><div class="li"><a href="../courses/01.html" class="wikilink1" title="cpl:courses:01">Cursul 01. Introducere</a></div></li>
<li class="level1"><div class="li"><a href="../courses/02.html" class="wikilink1" title="cpl:courses:02">Cursul 02. Analiză sintatică LL</a></div></li>
<li class="level1"><div class="li"><a href="../courses/03.html" class="wikilink1" title="cpl:courses:03">Cursul 03. Analiză sintatică LR</a></div></li>
<li class="level1"><div class="li"><a href="../courses/04.html" class="wikilink1" title="cpl:courses:04">Cursul 04. Analiză semantică</a></div></li>
<li class="level1"><div class="li"><a href="../courses/05.html" class="wikilink1" title="cpl:courses:05">Cursul 05. Generarea codului obiect. Arhitectura setului de instrucțiuni</a></div></li>
<li class="level1"><div class="li"><a href="../courses/06.html" class="wikilink1" title="cpl:courses:06">Cursul 06. Generarea apelurilor de funcții și a codului orientat obiect.</a></div></li>
<li class="level1"><div class="li"><a href="../courses/07.html" class="wikilink1" title="cpl:courses:07">Cursul 07. Optimizări. Analiza fluxului de control (CFA)</a></div></li>
<li class="level1"><div class="li"><a href="../courses/08.html" class="wikilink1" title="cpl:courses:08">Cursul 08. Analiza fluxului de date (DFA)</a></div></li>
<li class="level1"><div class="li"><a href="../courses/09.html" class="wikilink1" title="cpl:courses:09">Cursul 09. Analiza fluxului de date. Forma SSA. Extragerea codului invariant din bucle. Variabile de inducție.</a></div></li>
<li class="level1"><div class="li"><a href="../courses/10.html" class="wikilink1" title="cpl:courses:10">Cursul 10. Arhitectura Calculatoarelor. Dependență. Planificarea instrucțiunilor</a></div></li>
<li class="level1"><div class="li"><a href="../courses/11.html" class="wikilink1" title="cpl:courses:11">Cursul 11. Garbage Collection</a></div></li>
<li class="level1"><div class="li"><a href="../courses/12.html" class="wikilink1" title="cpl:courses:12">Cursul 12. Alocarea de registre. Linkers.</a></div></li>
<li class="level1"><div class="li"><a href="../courses/13.html" class="wikilink1" title="cpl:courses:13">Cursul 13. Just in Time Compilers (JIT)</a></div></li>
</ul>
</div></div>

</div>
<!-- EDIT4 SECTION "Cursuri" [210-262] -->
<h1 class="sectionedit5" id="teme">Teme</h1>
<div class="level1">

<div><div id="nojs_indexmenu_44566092058355b057f89a" data-jsajax="" class="indexmenu_nojs">

<ul class="idx">
<li class="level1"><div class="li"><a href="../teme/concurs.html" class="wikilink1" title="cpl:teme:concurs">Concurs</a></div></li>
<li class="level1"><div class="li"><a href="../teme/general.html" class="wikilink1" title="cpl:teme:general">Indicații generale teme</a></div></li>
<li class="level1"><div class="li"><a href="../teme/tema1.html" class="wikilink1" title="cpl:teme:tema1">Tema de casă 1 - Analiza sintactică</a></div></li>
<li class="level1"><div class="li"><a href="../teme/tema2.html" class="wikilink1" title="cpl:teme:tema2">Tema de casă 2 - Generarea de cod</a></div></li>
<li class="level1"><div class="li"><a href="../teme/tema3.html" class="wikilink1" title="cpl:teme:tema3">Tema de casa 3 - Backend</a></div></li>
</ul>
</div></div>

</div>
<!-- EDIT5 SECTION "Teme" [263-310] -->
<h1 class="sectionedit6" id="resurse">Resurse</h1>
<div class="level1">

<div><div id="nojs_indexmenu_144261190958355b058083d" data-jsajax="" class="indexmenu_nojs">

<ul class="idx">
<li class="level1"><div class="li"><a href="../res/materiale.html" class="wikilink1" title="cpl:res:materiale">Nice to read</a></div></li>
</ul>
</div></div>

</div>
<!-- EDIT6 SECTION "Resurse" [311-] -->
</div>
<div class="toc_sidebar sidebar_box">
<!-- TOC START -->
<div id="sb__right__dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="01.html#introduction_to_flex">01. Introduction to Flex</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="01.html#introducere">Introducere</a></div></li>
<li class="level2"><div class="li"><a href="01.html#nice_to_read">Nice to read</a></div></li>
<li class="level2"><div class="li"><a href="01.html#prezentare_teoretica">Prezentare teoretică</a></div></li>
<li class="level2"><div class="li"><a href="01.html#instalare_flex">Instalare flex</a></div></li>
<li class="level2"><div class="li"><a href="01.html#utilizare_flex">Utilizare flex</a></div></li>
<li class="level2"><div class="li"><a href="01.html#structura_fisierului_de_specificatii">Structura fișierului de specificații</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="01.html#sectiunea_de_definitii">Secțiunea de definiții</a></div>
<ul class="toc">
<li class="level4"><div class="li"><a href="01.html#optiuni">Opțiuni</a></div></li>
<li class="level4"><div class="li"><a href="01.html#stari_de_start">Stări de start</a></div></li>
<li class="level4"><div class="li"><a href="01.html#secvente_de_cod_c_in_sectiunea_de_definitii">Secvențe de cod C în secțiunea de definiții</a></div></li>
</ul>
</li>
<li class="level3"><div class="li"><a href="01.html#sectiunea_de_reguli">Secțiunea de reguli</a></div>
<ul class="toc">
<li class="level4"><div class="li"><a href="01.html#expresii_regulate">Expresii regulate</a></div></li>
<li class="level4"><div class="li"><a href="01.html#secvente_de_cod_c_in_sectiunea_de_reguli">Secvențe de cod C în secțiunea de reguli</a></div></li>
</ul>
</li>
<li class="level3"><div class="li"><a href="01.html#sectiunea_de_cod">Secțiunea de cod</a></div>
<ul class="toc">
<li class="level4"><div class="li"><a href="01.html#variabile_si_macro-uri_utile">Variabile și macro-uri utile</a></div></li>
</ul>
</li>
</ul>
</li>
<li class="level2"><div class="li"><a href="01.html#functia_yylex">Funcția yylex</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="01.html#exercitii_de_laborator_10p">Exerciții de laborator (10p)</a></div></li>
<li class="level1"><div class="li"><a href="01.html#exercitiul_0">Exercițiul 0</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="01.html#exercitiul_1_-_num_lines_3p">Exercițiul 1 - num lines (3p)</a></div></li>
<li class="level2"><div class="li"><a href="01.html#exercitiul_2_-_num_words_3p">Exercițiul 2 - num words (3p)</a></div></li>
<li class="level2"><div class="li"><a href="01.html#exercitiul_3_-_names_2p">Exercițiul 3 - names (2p)</a></div></li>
<li class="level2"><div class="li"><a href="01.html#exercitiul_4_-_appearances_2p">Exercițiul 4 - appearances (2p)</a></div></li>
</ul></li>
</ul>
</div>
</div>
<!-- TOC END -->
</div>
        </div>
      
    
      <div class="stylefoot">
        <div class="meta">
          <div class="user">
                    </div>
          <div class="doc">
          cpl/labs/01.txt · Last modified: 2016/10/03 21:56 by bogdan.nitulescu          </div>
        </div>
      </div>

    <div class="clearer"></div>

    
                <div class="bar" id="bar__bottom">
      <div class="bar-left">
              </div>
      <div class="bar-right">
        <a href="01%3Fdo=media&amp;ns=cpl%253Alabs.html"  class="action media" rel="nofollow" title="Media Manager">Media Manager</a><a href="01.html#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Back to top [T]">Back to top</a>      </div>
    </div>
    <div class="clearer"></div>
            
    <div align="center" class="footerinc">
  <div class="license"><a href="http://creativecommons.org/licenses/by-sa/3.0/" rel="license"><img src="../../lib/images/license/button/cc-by-sa.png" alt="CC Attribution-Share Alike 3.0 Unported" /></a></div>
  <a target="_blank" href="http://www.chimeric.de" title="www.chimeric.de"><img src="../../lib/tpl/arctic/images/button-chimeric-de.png" width="80" height="15" alt="www.chimeric.de" border="0" /></a>

  <a target="_blank" href="http://jigsaw.w3.org/css-validator/check/referer" title="Valid CSS"><img src="../../lib/tpl/arctic/images/button-css.png" width="80" height="15" alt="Valid CSS" border="0" /></a>

  <a target="_blank" href="http://wiki.splitbrain.org/wiki:dokuwiki" title="Driven by DokuWiki"><img src="../../lib/tpl/arctic/images/button-dw.png" width="80" height="15" alt="Driven by DokuWiki" border="0" /></a>

  <a target="_blank" href="http://www.firefox-browser.de" title="do yourself a favour and use a real browser - get firefox"><img src="../../lib/tpl/arctic/images/button-firefox.png" width="80" height="15" alt="do yourself a favour and use a real browser - get firefox!!" border="0" /></a>
  
  <a target="_blank" href="../../feed.php" title="Recent changes RSS feed"><img src="../../lib/tpl/arctic/images/button-rss.png" width="80" height="15" alt="Recent changes RSS feed" border="0" /></a>

  <a target="_blank" href="http://validator.w3.org/check/referer" title="Valid XHTML 1.0"><img src="../../lib/tpl/arctic/images/button-xhtml.png" width="80" height="15" alt="Valid XHTML 1.0" border="0" /></a>
</div>

  </div>
</div>

<div class="no"><img src="../../lib/exe/indexer.php%3Fid=cpl%253Alabs%253A01&amp;1479891717" width="2" height="1" alt="" /></div>
</body>
</html>

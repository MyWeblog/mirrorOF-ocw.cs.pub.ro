    
    

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
 lang="en" dir="ltr">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>
    Tema de casă 2 - Generarea de cod    [CS Open CourseWare]
  </title>

  <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="noindex,nofollow"/>
<meta name="date" content="2016-11-22T19:35:05+0200"/>
<meta name="keywords" content="cpl,teme,tema2"/>
<link rel="search" type="application/opensearchdescription+xml" href="../../lib/exe/opensearch.php" title="CS Open CourseWare"/>
<link rel="start" href="../../../courses.1.html"/>
<link rel="alternate" type="application/rss+xml" title="Recent Changes" href="../../feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current Namespace" href="../../feed.php%3Fmode=list&amp;ns=cpl:teme"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="http://ocw.cs.pub.ro/courses/_export/xhtml/cpl/teme/tema2"/>
<link rel="canonical" href="tema2.html"/>
<link rel="stylesheet" type="text/css" href="../../lib/exe/css.php%3Ft=arctic&amp;tseed=1476798676.css"/>
<script type="text/javascript">/*<![CDATA[*/var NS='cpl:teme';var JSINFO = {"id":"cpl:teme:tema2","namespace":"cpl:teme","isadmin":0,"isauth":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="../../lib/exe/js.php%3Ftseed=1476798676"></script>
<script type="text/x-mathjax-config">/*<![CDATA[*/MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ["$","$"], ["\\(","\\)"] ],
        displayMath: [ ["$$","$$"], ["\\[","\\]"] ],
        processEscapes: true
    }
});
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
<script type="text/javascript">/*<![CDATA[*/
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
		  
/*!]]>*/</script>
<script type="text/javascript">/*<![CDATA[*/
var pageTracker = _gat._getTracker("UA-38383934-1");
pageTracker._initData();
pageTracker._trackPageview();
		  
/*!]]>*/</script>

  <link rel="shortcut icon" href="../../lib/tpl/arctic/images/favicon.ico" />

  
</head>
<body>
<div id="wrapper" class='show'>
  <div class="dokuwiki">

    
    <div class="stylehead">
      <div class="header">
        <div class="pagename">
          <a href="../index.html"><img height="70" src="../../res/sigla_cpl.png"/> </a>        </div>
        <div class="logo">
          <a style="color: #AAA !important;" href="../../../courses.1.html"/>Open CourseWare</a>        </div>
      </div>
    
       
      <div class="breadcrumbs">
              </div>
      
            </div>

                  <div class="bar" id="bar__top">
        <div class="bar-left">
                  </div>
        <div class="bar-right">
          <a href="http://ocw.cs.pub.ro/courses/cpl/teme/tema2?do=recent"  class="action recent" accesskey="r" rel="nofollow" title="Recent changes [R]">Recent changes</a><a href="http://ocw.cs.pub.ro/courses/cpl/teme/tema2?do=login&amp;sectok=f62420cf5b01253da4b50505d148181b"  class="action login" rel="nofollow" title="Login">Login</a>        </div>
    </div>
        
    
    
    
              <div class="left_page">
          
<h1 class="sectionedit1" id="tema_de_casa_2_-_generarea_de_cod">Tema de casă 2 - Generarea de cod</h1>
<div class="level1">

<p>
În cadrul acestei teme veti implementa generarea de cod pentru limbajul LCPL.
</p>

</div>

<h3 class="sectionedit2" id="informatii_organizatorice">Informații organizatorice</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> <strong>Deadline</strong>: Termenul limită până când se pot trimite temele fără depunctări de întârziere este <strong>vineri, 2 decembrie 2016, ora 23:59</strong>. Pentru mai multe detalii, consultaţi <a href="general.html" class="wikilink1" title="cpl:teme:general">regulamentul</a> aferent temelor de casă.</div>
</li>
<li class="level1"><div class="li"> <strong>Colaborare</strong>: Tema va fi rezolvată <strong>individual</strong>.</div>
</li>
<li class="level1"><div class="li"> <strong>Punctare</strong>: <strong>250p</strong>, distribuite astfel:</div>
<ul>
<li class="level2"><div class="li"> <strong>Testele publice (225p)</strong></div>
<ul>
<li class="level3"><div class="li"> Testele <code>simple</code> (120p)</div>
</li>
<li class="level3"><div class="li"> Testele <code>advanced</code> (75p)</div>
</li>
<li class="level3"><div class="li"> Testele <code>complex</code> (30p) </div>
</li>
</ul>
</li>
<li class="level2"><div class="li"> <strong>Calitatea implementării (25p)</strong></div>
<ul>
<li class="level3"><div class="li"> Organizarea codului sursă</div>
</li>
<li class="level3"><div class="li"> Comentariile din cod</div>
</li>
<li class="level3"><div class="li"> Explicațiile din README - acestea trebuie să conţină o prezentare extinsă a modului de implementare a temei şi a problemelor întâmpinate pe parcurs. </div>
</li>
</ul>
</li>
</ul>
</li>
</ul>

</div>

<h2 class="sectionedit3" id="enunt">Enunţ</h2>
<div class="level2">

<p>
Va trebui să realizaţi, în limbajul C++, porţiunea responsabilă cu generarea de cod LLVM IR, preferabil folosind IRBuilder. Programul vostru va trebui să primească la intrare output-ul temei 1 şi să genereze un fișier cu cod corect LLVM IR. Rezultatul programului realizat de voi poate folosi tool-urile LLVM pentru a genera cod pentru x86 și pentru a se executa.
</p>

<p>
Documentaţia principală în cadrul acestei teme va fi <a href="http://llvm.org/releases/3.8.0/docs/LangRef.html" class="urlextern" title="http://llvm.org/releases/3.8.0/docs/LangRef.html"  rel="nofollow">LLVM IR</a> și <abbr title="Application Programming Interface">API</abbr>-ul clasei IRBuilder.
</p>

</div>

<h2 class="sectionedit4" id="generarea_de_cod">Generarea de cod</h2>
<div class="level2">

<p>
Pentru generarea de cod e recomandat să folosiți clasa IRBuilder, similar cu ceea ce ați învățat în cadrul laboratorului. De asemenea, puteți să studiați și tutorialul de generare de cod de <a href="../../lib/exe/fetch.php%3Fhash=948f56&amp;media=http%253A%252F%252Fllvm.org%252Freleases%252F3.8.0%252Fdocs%252Ftutorial%252FLangImpl3.html" class="urlextern" title="http://llvm.org/releases/3.8.0/docs/tutorial/LangImpl3.html"  rel="nofollow">aici</a>.
</p>

<p>
Primul pas ar trebui să fie înțelegerea documentației:
</p>
<ul>
<li class="level1"><div class="li"> Semantica și comportamentul programelor LCPL</div>
</li>
<li class="level1"><div class="li"> LLVM IR / IRBuilder <abbr title="Application Programming Interface">API</abbr> pentru generarea de LLVM IR</div>
</li>
<li class="level1"><div class="li"> Suportul pentru runtime</div>
</li>
</ul>

</div>

<h2 class="sectionedit5" id="arhiva_de_pornire">Arhiva de pornire</h2>
<div class="level2">

<p>
Arhiva de pornire conține:
</p>
<ul>
<li class="level1"><div class="li"> Directoarele <code>include</code> și <code>src</code>, în care găsiți implementarea analizei semantice și un schelet de cod pentru generarea de IR</div>
</li>
<li class="level1"><div class="li"> Directorul <code>lcpl-AST</code>, în care se află AST-ul limbajului LCPL</div>
</li>
<li class="level1"><div class="li"> Directorul <code>runtime</code>, în care găsiți biblioteca de runtime pentru limbajul LCPL, alcătuită din clasele speciale definite în limbaj, precum și câteva funcții ajutătoare</div>
</li>
<li class="level1"><div class="li"> Fișierul <code>lcpl-driver.sh.in</code>, care este configurat de CMake cu path-urile necesare pentru a servi ca driver pentru un compilator de LCPL ce ia ca input un fișier JSON (output-ul temei 1), îl trece prin generatorul de cod scris de voi, linkează cu biblioteca de runtime și în final rulează interpretorul LLVM (<code>lli</code>) pe fișierul rezultat</div>
</li>
<li class="level1"><div class="li"> Fișierul <code>CMakeLists.txt</code></div>
</li>
</ul>

<p>
Pentru a compila proiectul, va trebui să creați un director de build și să rulați
</p>
<pre class="code">cmake -DPATH_TO_LLVM_CONFIG=&quot;/path/to/the/llvm-config/tool&quot; -DCMAKE_BUILD_TYPE=Debug /path/to/skel/</pre>

<p>
Opțional puteți adăuga și un generator, ca de exemplu <code>-G Ninja</code>.
</p>

<p>
în momentul de față, scheletul de cod pus la dispoziție este hardcodat pentru a genera IR-ul pentru testul <code>hello.lcpl.json</code>. Va trebui să generalizați pentru a putea procesa AST-uri din ce în ce mai complexe (ordinea recomandată de implementare este cea urmată de teste - încercați să faceți câte un test să treacă și refactorizați pe parcurs).
</p>

<p>
Scheletul de cod este descris în detaliu mai jos.
</p>

</div>

<h2 class="sectionedit6" id="suportul_de_executie_pentru_lcpl">Suportul de execuție pentru LCPL</h2>
<div class="level2">

</div>

<h5 id="reprezentarea_datelor">Reprezentarea datelor</h5>
<div class="level5">

<p>
După apelul către CMake, directorul de build va conține un fișier <code>lcpl_runtime.ll</code>. Acesta este IR-ul corespunzător claselor speciale din limbajul LCPL. Puteți folosi acest fișier ca referință pentru reprezentarea datelor în limbajul LCPL. Aceasta va fi descrisă în cadrul acestei secțiuni.
</p>

<p>
<p><div class="notewarning">Deși scheletul de cod pus la dispoziție generează IR care funcționează, acesta nu respectă întru totul convențiile LCPL. Cade în sarcina voastră să îl reparați (vedeți TODO-urile din scheletul de cod).
</div></p>
</p>
<ul>
<li class="level1"><div class="li"> întregii sunt reprezentați pe 4 bytes (<code>i32</code>)</div>
</li>
<li class="level1"><div class="li"> Reprezentarea unui obiect în memorie arată astfel:</div>
</li>
</ul>
<div class="table sectionedit7"><table class="inline">
	<tr class="row0">
		<th class="col0"> Offset </th><th class="col1 centeralign">  Descriere                                     </th>
	</tr>
	<tr class="row1">
		<td class="col0 centeralign">   +0   </td><td class="col1 leftalign"> Pointer către RTTI-ul clasei din care face parte obiectul           </td>
	</tr>
	<tr class="row2">
		<td class="col0 centeralign">   +4   </td><td class="col1"> Atributele obiectului - întregi pe 4 bytes sau referinţe către alte obiecte. </td>
	</tr>
</table></div>

<p>
Referinţa la un obiect este adresa din memorie a acelui obiect.
</p>
<ul>
<li class="level1"><div class="li"> Reprezentarea RTTI în memorie arată astfel</div>
</li>
</ul>
<div class="table sectionedit8"><table class="inline">
	<tr class="row0">
		<th class="col0"> Offset </th><th class="col1 centeralign">  Descriere                                     </th>
	</tr>
	<tr class="row1">
		<td class="col0 centeralign">   +0   </td><td class="col1 leftalign"> Pointer către obiectul String care reprezintă numele clasei           </td>
	</tr>
	<tr class="row2">
		<td class="col0 centeralign">   +4   </td><td class="col1 leftalign"> Dimensiunea în bytes a obiectului, incluzând informația de runtime           </td>
	</tr>
	<tr class="row3">
		<td class="col0 centeralign">   +8   </td><td class="col1 leftalign"> Pointer către informația de runtime a clasei părinte, NULL pentru Object           </td>
	</tr>
	<tr class="row4">
		<td class="col0 centeralign">   +12   </td><td class="col1"> Tabela de metode </td>
	</tr>
</table></div>

<p>
în tabela de metode se găsesc adresele metodelor din clasa părinte, urmate de metodele clasei. Atunci când o metodă a clasei ascunde metoda din clasa părinte, îi va ocupa locul în tabela de metode.
</p>

</div>

<h5 id="exemple_de_reprezentare">Exemple de reprezentare</h5>
<div class="level5">

<p>
Pentru:
</p>
<pre class="code">class Main inherits IO
 main : 
  [out &quot;Hello world!&quot;];
 end;
end;</pre>

<p>
se generează următoarele:
</p>
<ul>
<li class="level1"><div class="li"> Obiectul de tip <code>String</code> care reprezintă numele clasei</div>
</li>
</ul>
<pre class="code">@0 = global [5 x i8] c&quot;Main\00&quot;
@NMain = global %struct.TString { %struct.__lcpl_rtti* @RString, i32 4, i8* getelementptr inbounds ([5 x i8], [5 x i8]* @0, i32 0, i32 0) }</pre>
<ul>
<li class="level1"><div class="li"> Informația de runtime pentru clasa <code>Main</code></div>
</li>
</ul>
<pre class="code">@RMain = global { %struct.TString*, i32, %struct.__lcpl_rtti*, [6 x i8*] } {
             %struct.TString* @NMain,
             i32 8,
             %struct.__lcpl_rtti* @RIO,
             [6 x i8*] [
                 i8* bitcast (void (%struct.TObject*)* @M6_Object_abort to i8*),
                 i8* bitcast (%struct.TString* (%struct.TObject*)* @M6_Object_typeName to i8*),
                 i8* bitcast (%struct.TObject* (%struct.TObject*)* @M6_Object_copy to i8*),
                 i8* bitcast (%struct.TString* (%struct.TIO*)* @M2_IO_in to i8*),
                 i8* bitcast (%struct.TIO* (%struct.TIO*, %struct.TString*)* @M2_IO_out to i8*),
                 i8* bitcast (void (%struct.TMain*)* @M4_Main_main to i8*)
             ]}</pre>

<p>
Clasa <code>Main</code> nu are atribute proprii, prin urmare dimensiunea ei este de 8 bytes, dimensiunea pointerului la RTTI. <code>Main</code> este derivată din clasa <code>IO</code>, deci informația de parent va arăta către RTTI-ul clasei <code>IO</code> (@RIO). În tabela de funcții a clasei <code>Main</code> se află metodele clasei părinte <code>IO</code> și metoda <code>main</code> a clasei <code>Main</code>.
</p>

<p>
<p><div class="notetip">Dimensiunile tipurilor de date depind de platforma pe care rulați (de exemplu pointerii pot avea 8 sau 4 bytes). De aceea, este indicat să folosiți metoda <code>DataLayout::getTypeAllocSize()</code>. Puteți obține DataLayout-ul cu metoda <code>getDataLayout</code> a modulului LLVM pe care îl generați.
</div></p>
</p>
<ul>
<li class="level1"><div class="li"> Constructorul clasei</div>
</li>
</ul>
<pre class="code">define void @Main_init(%struct.TMain*) {
entry:
  %1 = bitcast %struct.TMain* %0 to %struct.TIO*
  call void @IO_init(%struct.TIO* %1)
  ret void
}</pre>

<p>
Din constructorul clasei <code>Main</code> se apelează constructorul clasei părinte, pentru a se inițializa atributele clasei părinte. Pentru clase care au atribute declarate cu inițializări, constructorul trebuie să conțină și codul necesar acestor inițializări.
</p>
<ul>
<li class="level1"><div class="li"> Metodele clasei </div>
</li>
</ul>
<pre class="code">define void @M4_Main_main(%struct.TMain* %self) {
 ; Prologue - save parameters
 %1 = alloca %struct.TMain*
 store %struct.TMain* %self, %struct.TMain** %1
 ...
}</pre>

</div>

<h5 id="conventia_de_apel">Convenţia de apel</h5>
<div class="level5">

<p>
Primul parametru pentru orice funcție generată va conține adresa obiectului de care aceasta aparține (<strong>self</strong>).
Variabilele LCPL pot fi pe stivă sau în registre. Structurile precum tabelele virtuale sau informațiile de runtime sunt variabile globale LLVM IR. 
</p>

</div>

<h5 id="conventia_de_nume">Convenţia de nume</h5>
<div class="level5">
<ul>
<li class="level1"><div class="li"> Obiectele de tip String care reprezintă numele claselor din programul de intrare vor avea forma <code>N&lt;NumeClasă&gt;</code>.  </div>
</li>
<li class="level1"><div class="li"> Structurile care definesc layoutul obiectelor in memorie vor avea forma <code>T&lt;NumeClasă&gt;</code></div>
</li>
<li class="level1"><div class="li"> Informația de runtime va avea forma <code>R&lt;NumeClasă&gt;</code></div>
</li>
<li class="level1"><div class="li"> Metodele de inițializare vor avea forma <code>&lt;NumeClasă&gt;_init</code></div>
</li>
<li class="level1"><div class="li"> Restul metodelor se vor genera pe principiul <code>M&lt;N&gt;_&lt;NumeClasă&gt;_&lt;NumeMetodă&gt;</code>, unde N este numărul de caractere al numelui clasei</div>
</li>
</ul>

</div>

<h5 id="functii_si_date_predefinite_pentru_lcpl">Funcţii şi date predefinite pentru LCPL</h5>
<div class="level5">

<p>
Biblioteca de runtime LCPL implementează funcţionalitatea claselor de bază aşa cum este descrisă în <a href="../../_media/cpl/teme/lcpl-manual.pdf" class="media mediafile mf_pdf" title="cpl:teme:lcpl-manual.pdf (123.1 KB)"> manualul limbajului LCPL</a>. În codul generat metodele din bibliotecă pot fi folosite respectând convenţia ca obiectul apelant să fie primul parametru al apelului. Este foarte recomandat să folosiţi această convenţie pentru toate clasele şi metodele, nu doar pentru clasele de bază.
</p>

</div>

<h5 id="secventa_de_initializare">Secvenţa de iniţializare</h5>
<div class="level5">

<p>
Punctul de intrare în program este funcția <code>main</code> generată de scheletul de cod. Aceasta trebuie să facă următorii pași:
</p>
<ul>
<li class="level1"><div class="li"> să creeze un obiect de tip <code>Main</code> (pentru asta trebuie apelată funcția ajutătoare <code>__lcpl_new</code>, apoi pe obiectul nou obținut trebuie apelat constructorul clasei <code>Main</code>)</div>
</li>
<li class="level1"><div class="li"> să apeleze metoda <code>main</code> a acestui obiect</div>
</li>
</ul>

</div>

<h2 class="sectionedit9" id="scheletul_de_cod">Scheletul de cod</h2>
<div class="level2">

</div>

<h3 class="sectionedit10" id="runtime-ul_limbajului_lcpl">Runtime-ul limbajului LCPL</h3>
<div class="level3">

<p>
Runtime-ul limbajului LCPL conține definițiile claselor speciale din limbaj, precum și câteva funcții / structuri de date ajutătoare (vedeți fișierul <code>runtime/lcpl_runtime.h</code> din arhiva de pornire):
</p>

</div>

<h5 id="structura_lcpl_rtti">Structura __lcpl_rtti</h5>
<div class="level5">

<p>
Reprezintă informația de RTTI asociată fiecărei clase: numele clasei, dimensiunea obiectelor din clasa respectivă, pointer către RTTI-ul clasei părinte și tabela de metode virtuale. Fiecare obiect din program (în afară de întregi, desigur) va conține ca primul membru un pointer către structura <code>__lcpl_rtti</code> corespunzătoare clasei din care face parte.
</p>

</div>

<h5 id="definitiile_claselor_speciale">Definițiile claselor speciale</h5>
<div class="level5">

<p>
Definiții pentru clasele <code>Object</code>, <code>String</code> și <code>IO</code>:
</p>
<ul>
<li class="level1"><div class="li"> Structurile de date corespunzătoare</div>
</li>
<li class="level1"><div class="li"> Obiectele de tip <code>__lcpl_rtti</code> corespunzătoare</div>
</li>
<li class="level1"><div class="li"> Constructorii</div>
</li>
<li class="level1"><div class="li"> Metodele definite în manual:</div>
<ul>
<li class="level3"><div class="li"> Pentru clasa <code>Object</code>: <code>M6_Object_abort</code>, <code>M6_Object_typeName</code> și <code>M6_Object_copy</code></div>
</li>
<li class="level3"><div class="li"> Pentru clasa <code>IO</code>: <code>M2_IO_in</code> și <code>M2_IO_out</code></div>
</li>
<li class="level3"><div class="li"> Pentru clasa <code>String</code>: <code>M6_String_length</code> și <code>M6_String_toInt</code></div>
</li>
</ul>
</li>
<li class="level1"><div class="li"> Funcții ajutătoare pentru clasa <code>String</code>:</div>
<ul>
<li class="level3"><div class="li"> <code>M6_String_substring</code>: folosită pentru implementarea funcționalității de substring (primește ca parametri un obiect de tip <code>String</code> și 2 indici)</div>
</li>
<li class="level3"><div class="li"> <code>M6_String_concat</code>: folosită pentru concatenarea stringurilor (primește ca parametri 2 obiecte de tip <code>String</code>)</div>
</li>
<li class="level3"><div class="li"> <code>M6_String_equal</code>: folosită pentru verificarea egalității a 2 obiecte de tip <code>String</code> (primite ca parametri)</div>
</li>
</ul>
</li>
</ul>

</div>

<h5 id="alte_functii_ajutatoare">Alte funcții ajutătoare</h5>
<div class="level5">
<ul>
<li class="level1"><div class="li"> <code>__lcpl_new</code>: alocă memorie pentru un obiect dintr-o clasă al cărei RTTI îl primește ca parametru; după apelarea acestei funcții trebuie invocat constructorul respectiv pe zona de memorie obținută.</div>
</li>
<li class="level1"><div class="li"> <code>__lcpl_checkNull</code>: verifică dacă un obiect este <code>null</code> și aruncă o eroare dacă da; această funcție ar trebui apelată înainte de a face dispatch pe un obiect.</div>
</li>
<li class="level1"><div class="li"> <code>__lcpl_cast</code>: realizează un cast explicit sau aruncă o eroare dacă nu se poate realiza castul; primește ca parametri obiectul care trebuie castat și RTTI-ul clasei către care se face cast.</div>
</li>
<li class="level1"><div class="li"> <code>__lcpl_intToString</code>: realizează conversia implicită de la un întreg la <code>String</code>.</div>
</li>
</ul>

</div>

<h3 class="sectionedit11" id="analiza_semantica">Analiza semantică</h3>
<div class="level3">

<p>
Analiza semantică se asigură de corectitudinea semantică a programului, și în același timp adună informații utile pentru generarea de IR. Este implementată ca un vizitator la nivelul AST-ului (<code>ASTVisitor</code>). în cadrul temei nu va fi nevoie să modificați partea de analiză semantică, dar vă veți folosi de câteva informații puse la dispoziție de aceasta.
</p>

</div>

<h5 id="typetable">TypeTable</h5>
<div class="level5">

<p>
Menține informații legate de tipuri; de exemplu, pentru a afla tipul corespunzător unui nod din AST folosiți metoda <code>getType(TreeNode *)</code>.
</p>

<p>
Există câteva tipuri speciale: cele corepunzătoare claselor speciale (<code>Object</code>, <code>IO</code>, <code>String</code>), tipul corespunzător întregilor (<code>Int</code>), tipul corespunzător constantelor <code>null</code> și tipul vid (<code>Void</code>). Aveți acces la aceste tipuri speciale prin intermediul metodelor <code>getIntType</code>, <code>getStringType</code> etc.
</p>

<p>
Pentru a compara tipuri, puteți compara direct pointerii întorși de <code>TypeTable</code>.
</p>

<p>
Alte metode care pot fi utile sunt <code>getParentClass</code>, <code>getAttribute</code>, <code>getMethod</code>.
</p>

</div>

<h5 id="symbolmap">SymbolMap</h5>
<div class="level5">

<p>
Reține pentru fiecare nod de tip <code>Symbol</code> nodul din AST corespunzător definiției acestuia (poate fi un <code>LocalDefinition</code>, <code>Attribute</code>, <code>FormalParam</code> sau simbolul special pentru self (vedeți metoda <code>isSelf</code> din nodul <code>Class</code>).
</p>

</div>

<h3 class="sectionedit12" id="generatorul_de_cod">Generatorul de cod</h3>
<div class="level3">

<p>
Generatorul de cod (<code>IRGenerator</code>) pus la dispoziție este unul naiv, care știe să genereze cod pentru un singur lucru: “Hello world”. îl găsiți în fișierele <code>include/IRGenerator.h</code> și <code>src/IRGenerator.cpp</code>. Va trebui să organizați și să generalizați codul respectiv pentru a putea genera IR valid pentru orice program LCPL.
</p>

<p>
Generatorul de cod este la rândul său un <code>ASTVisitor</code>, cu o metodă <code>visit</code> pentru fiecare tip de nod (în scheletul de cod sunt adăugate doar cele necesare pentru “Hello world”, va trebui să le adăugați voi pe celelalte). în plus, conține:
</p>
<ul>
<li class="level1"><div class="li"> un <code>TypeTable</code>(<code>ASTTypes</code>) și un <code>SymbolMap</code>(<code>DefinitionsMap</code>) în care se găsesc informațiile de la analiza semantică</div>
</li>
<li class="level1"><div class="li"> un obiect de tip <code>RuntimeInterface</code> care conține informații legate de runtime-ul LCPL (tipuri, declarații de funcții etc - doar declarații, întrucât definițiile sunt în biblioteca de runtime)</div>
</li>
<li class="level1"><div class="li"> un map care asociază fiecărui nod din AST o valoare din IR (<code>NodeMap</code>)</div>
</li>
<li class="level1"><div class="li"> un IRBuilder și alte obiecte care pot fi utile (modulul curent etc)</div>
</li>
</ul>

<p>
Puteți modifica structura generatorului de cod oricum doriți și puteți adăuga oricâte clase ajutătoare. De exemplu, scheletul de cod conține și un <code>ClassVisitor</code>, care vă permite să vizitați clasele din program într-o ordine topologică (clasele părinte sunt vizitate întotdeauna înaintea celor care le moștenesc). Puteți moșteni din aceast vizitator oricând aveți nevoie de prelucrări pentru fiecare clasă (la generarea layout-ului, la generarea constructorilor etc).
</p>

</div>

<h3 class="sectionedit13" id="programul_principal">Programul principal</h3>
<div class="level3">

<p>
Toate clasele de mai sus sunt puse cap la cap în <code>main.cpp</code>: AST-ul primit ca input este deserializat, apoi este trecut prin analiza semantică și prin generatorul de cod. Modulul obținut este scris în fișierul de output și apoi verificat (astfel, aveți acces la codul generat chiar daca nu este valid). Partea de verificare presupune doar faptul că IR-ul generat respectă constrângerile LLVM IR-ului (ex: fiecare BasicBlock se termină cu o instrucțiune de tip terminator - branch, return etc).
</p>

<p>
în principiu fișierul <code>main.cpp</code> nu ar trebui modificat - conține deja tot ce vă trebuie, inclusiv legătura între analiza semantică și generatorul de cod.
</p>

</div>

<h2 class="sectionedit14" id="api_llvm_pe_scurt">API LLVM pe scurt</h2>
<div class="level2">

<p>
Pentru crearea de tipuri puteți folosi metodele statice ale claselor <code>llvm::StructType</code>, <code>llvm::FunctionType</code>, <code>llvm::ArrayType</code> etc. Uneori poate fi util să creați structuri goale și apoi să apelați <code>setBody</code>. Pentru tipuri simple puteți folosi metodele din <code>IRBuilder</code>: <code>getInt32Ty</code>, <code>getVoidTy</code>, <code>getInt8PtrTy</code> (acesta din urmă e util pentru a reprezenta <code>void *</code> din C) etc. Tipurile LLVM au o metodă <code>getPointerTo</code> pe care o puteți folosi pentru a crea tipuri pointer.
</p>

<p>
<code>IRBuilder</code> conține metode convenabile și pentru adăugarea de constante: <code>getInt32</code>, <code>CreateGlobalStringPtr</code>. 
</p>

<p>
Cea mai substanțială parte a <code>IRBuilder</code> este crearea de instrucțiuni: <code>CreateCall</code>, <code>CreateLoad</code>, <code>CreateRetVoid</code>, <code>CreateGEP</code>, <code>CreateBitCast</code> etc. Va trebui însă să aveți grijă unde sunt create aceste instrucțiuni: <code>IRBuilder</code> are un InsertPoint care trebuie setat în locul unde doriți să inserați. Pentru asta puteți folosi <code>GetInsertPoint</code> / <code>SetInsertPoint</code>.
</p>

<p>
Nu uitați de forma SSA - o valoare poate fi scrisă o singură dată. De aceea, poate fi util să alocați spațiu pe stivă (<code>CreateAlloca</code>) pentru valori care pot fi scrise mai mult de o dată (de exemplu, vedeți ce generează <code>clang</code> pentru parametri la -O0). Nu încercați să generați cod optim, important e să fie corect (puteți avea oricâte perechi load/store redundante etc).
</p>

<p>
Este util să folosiți un build de debug al LLVM pentru rezolvarea temei. Buildurile de debug conțin assert-uri care vă pot ajuta să faceți debug atunci când generați IR greșit. De asemenea, clasele derivate din <code>llvm::Value</code> au o metodă <code>dump</code> care poate fi invocată dintr-un debugger atunci când vreți să vedeți care valori duc la declanșarea assert-urilor.
</p>

</div>

<h2 class="sectionedit15" id="testare_automata_si_punctaj">Testare automată și punctaj</h2>
<div class="level2">

<p>
Testarea temei de casă va folosi o serie de teste ce vor fi disponibile pe vmchecker. Aceleași teste sunt disponibile în arhiva de teste.
</p>

<p>
Testele pot fi rulate prin intermediul scriptului <code>eval.sh</code>, care ia ca parametri calea către directorul de teste și calea către <code>lcpl-driver.sh</code> (care se află în directorul de build după ce rulați CMake). Dacă doriți să rulați un singur test, puteți pasa numele acestuia ca al treilea argument pentru <code>eval.sh</code>:
</p>
<pre class="code">eval.sh /path/to/tests /path/to/lcpl-driver.sh advanced/stack</pre>

<p>
Dacă un test pică, <code>eval.sh</code> va păstra următoarele fișiere:
</p>
<ul>
<li class="level1"><div class="li"> <code>&lt;test&gt;.out</code> și <code>&lt;test&gt;.err</code> - conțin stream-urile de output și error pentru compilarea și rularea testului.</div>
</li>
<li class="level1"><div class="li"> <code>&lt;test&gt;.lcpl.json.ll</code> - modulul IR generat de programul vostru.</div>
</li>
<li class="level1"><div class="li"> <code>&lt;test&gt;.lcpl.json.bc</code> - bitcode-ul rezultat după linkarea cu runtime-ul LCPL. Pentru a vedea IR-ul corespunzător, folosiți <code>llvm-dis</code>.</div>
</li>
</ul>

</div>

<h2 class="sectionedit16" id="instructiuni_de_predare_a_temei">Instrucţiuni de predare a temei</h2>
<div class="level2">

<p>
Arhiva trebuie să aibă structura din arhiva de start:
</p>
<ul>
<li class="level1"><div class="li"> CMakeLists.txt în rădăcină</div>
</li>
<li class="level1"><div class="li"> să producă un executabil <strong>lcpl-irgen</strong></div>
</li>
<li class="level1"><div class="li"> nu puneți în arhivă fișiere obiect/executabile</div>
</li>
</ul>

</div>

<h2 class="sectionedit17" id="resurse">Resurse</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> <a href="../../_media/cpl/teme/lcpl-manual.pdf" class="media mediafile mf_pdf" title="cpl:teme:lcpl-manual.pdf (123.1 KB)"> manualul limbajului LCPL</a></div>
</li>
<li class="level1"><div class="li"> <a href="../../lib/exe/fetch.php%3Fhash=948f56&amp;media=http%253A%252F%252Fllvm.org%252Freleases%252F3.8.0%252Fdocs%252Ftutorial%252FLangImpl3.html" class="media mediafile mf_html" title="http://llvm.org/releases/3.8.0/docs/tutorial/LangImpl3.html"> Tutorial generare de LLVM IR </a></div>
</li>
<li class="level1"><div class="li"> <a href="../../_media/cpl/teme/tema2-archive.zip" class="media mediafile mf_zip" title="cpl:teme:tema2-archive.zip (158 KB)"> Arhiva de start</a></div>
</li>
<li class="level1"><div class="li"> <a href="../../_media/cpl/teme/tema2-tests.zip" class="media mediafile mf_zip" title="cpl:teme:tema2-tests.zip (150.6 KB)"> Arhiva cu teste</a></div>
</li>
<li class="level1"><div class="li"> <a href="../../_media/cpl/teme/tema2-tests-original.zip" class="media mediafile mf_zip" title="cpl:teme:tema2-tests-original.zip (34.8 KB)"> Arhiva cu testele în limbaj LCPL</a></div>
</li>
</ul>

</div>

<h2 class="sectionedit18" id="f_a_q">F A Q</h2>
<div class="level2">

</div>

<h2 class="sectionedit19" id="change_log">Change Log</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> <em><del>2016.11.13</del>2016.11.22</em>: Adăugare punctaj</div>
</li>
<li class="level1"><div class="li"> <em><del>2016.11.13</del>2016.11.22</em>: Adăugare arhivă cu codul original LCPL din care au fost generate testele</div>
</li>
</ul>

</div>

        </div>
        <div class="right_sidebar">
          <form action="../../start.html" accept-charset="utf-8" class="search" id="dw__search" method="get"><div class="no"><input type="hidden" name="do" value="search" /><input type="text" id="qsearch__in" accesskey="f" name="id" class="edit" title="[F]" /><input type="submit" value="Search" class="button" title="Search" /><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>          <div class="namespace_sidebar sidebar_box">



<h1 class="sectionedit1" id="informatii_generale_cpl">Informații generale CPL</h1>
<div class="level1">

<div><div id="nojs_indexmenu_115469527858355b1125b74" data-jsajax="" class="indexmenu_nojs">

<ul class="idx">
<li class="level1"><div class="li"><a href="../info/documentatie.html" class="wikilink1" title="cpl:info:documentatie">Documentație și alte resurse</a></div></li>
<li class="level1"><div class="li"><a href="../info/lista-discutii.html" class="wikilink1" title="cpl:info:lista-discutii">Listă de discuții</a></div></li>
<li class="level1"><div class="li"><a href="../info/trimitere-teme.html" class="wikilink1" title="cpl:info:trimitere-teme">Trimitere teme</a></div></li>
<li class="level1"><div class="li"><a href="../info/vm.html" class="wikilink1" title="cpl:info:vm">Mașina virtuală</a></div></li>
</ul>
</div></div>

</div>
<!-- EDIT1 SECTION "Informații generale CPL" [12-86] -->
<h1 class="sectionedit2" id="informatii_cpl_2016-2017">Informații CPL 2016-2017</h1>
<div class="level1">

<div><div id="nojs_indexmenu_33796016658355b1126b1d" data-jsajax="" class="indexmenu_nojs">

<ul class="idx">
<li class="open"><div class="li"><a href="../meta/notare.html" class="indexmenu_idx_head">Reguli generale și notare</a></div>
<ul class="idx">
<li class="level2"><div class="li"><a href="../meta/notare/reguli-notare.html" class="wikilink1" title="cpl:meta:notare:reguli-notare">Notare</a></div></li>
</ul>
</li>
<li class="level1"><div class="li"><a href="../meta/anunturi.html" class="wikilink1" title="cpl:meta:anunturi">Anunțuri</a></div></li>
<li class="level1"><div class="li"><a href="../meta/calendar.html" class="wikilink1" title="cpl:meta:calendar">Calendar</a></div></li>
<li class="level1"><div class="li"><a href="../meta/catalog.html" class="wikilink1" title="cpl:meta:catalog">Catalog</a></div></li>
<li class="level1"><div class="li"><a href="../meta/examen.html" class="wikilink1" title="cpl:meta:examen">Examen</a></div></li>
<li class="level1"><div class="li"><a href="../meta/need-to-know.html" class="wikilink1" title="cpl:meta:need-to-know">CPL Need to Know</a></div></li>
<li class="level1"><div class="li"><a href="../meta/orar.html" class="wikilink1" title="cpl:meta:orar">Orar și împărțire pe semigrupe</a></div></li>
</ul>
</div></div>

</div>
<!-- EDIT2 SECTION "Informații CPL 2016-2017" [87-155] -->
<h1 class="sectionedit3" id="laboratoare">Laboratoare</h1>
<div class="level1">

<div><div id="nojs_indexmenu_20587746658355b1127ab8" data-jsajax="" class="indexmenu_nojs">

<ul class="idx">
<li class="level1"><div class="li"><a href="../labs/01.html" class="wikilink1" title="cpl:labs:01">01. Introduction to Flex</a></div></li>
<li class="level1"><div class="li"><a href="../labs/02.html" class="wikilink1" title="cpl:labs:02">02. Introduction to Bison</a></div></li>
<li class="level1"><div class="li"><a href="../labs/03.html" class="wikilink1" title="cpl:labs:03">03. Bison Advanced</a></div></li>
<li class="level1"><div class="li"><a href="../labs/04.html" class="wikilink1" title="cpl:labs:04">04. Introduction to LLVM</a></div></li>
<li class="level1"><div class="li"><a href="../labs/05.html" class="wikilink1" title="cpl:labs:05">05. LLVM IR - C++ API</a></div></li>
<li class="level1"><div class="li"><a href="../labs/06.html" class="wikilink1" title="cpl:labs:06">06. Code generation. Structure of data and objects in memory</a></div></li>
<li class="level1"><div class="li"><a href="../labs/07.html" class="wikilink1" title="cpl:labs:07">07. Code generation. Function calls and stack frames</a></div></li>
<li class="level1"><div class="li"><a href="../labs/08.html" class="wikilink1" title="cpl:labs:08">08. LLVM backend</a></div></li>
<li class="level1"><div class="li"><a href="../labs/09.html" class="wikilink1" title="cpl:labs:09">09. LLVM Passes - displaying code structure</a></div></li>
<li class="level1"><div class="li"><a href="../labs/10.html" class="wikilink1" title="cpl:labs:10">10. LLVM Passes - code analysis</a></div></li>
<li class="level1"><div class="li"><a href="../labs/11.html" class="wikilink1" title="cpl:labs:11">11. LLVM Passes - code optimizations</a></div></li>
<li class="level1"><div class="li"><a href="../labs/12.html" class="wikilink1" title="cpl:labs:12">12. Linkers and Loaders</a></div></li>
<li class="level1"><div class="li"><a href="../labs/llvm-pass.html" class="wikilink1" title="cpl:labs:llvm-pass">LLVM Passes</a></div></li>
</ul>
</div></div>

</div>
<!-- EDIT3 SECTION "Laboratoare" [156-209] -->
<h1 class="sectionedit4" id="cursuri">Cursuri</h1>
<div class="level1">

<div><div id="nojs_indexmenu_111870782258355b1128a59" data-jsajax="" class="indexmenu_nojs">

<ul class="idx">
<li class="level1"><div class="li"><a href="../courses/01.html" class="wikilink1" title="cpl:courses:01">Cursul 01. Introducere</a></div></li>
<li class="level1"><div class="li"><a href="../courses/02.html" class="wikilink1" title="cpl:courses:02">Cursul 02. Analiză sintatică LL</a></div></li>
<li class="level1"><div class="li"><a href="../courses/03.html" class="wikilink1" title="cpl:courses:03">Cursul 03. Analiză sintatică LR</a></div></li>
<li class="level1"><div class="li"><a href="../courses/04.html" class="wikilink1" title="cpl:courses:04">Cursul 04. Analiză semantică</a></div></li>
<li class="level1"><div class="li"><a href="../courses/05.html" class="wikilink1" title="cpl:courses:05">Cursul 05. Generarea codului obiect. Arhitectura setului de instrucțiuni</a></div></li>
<li class="level1"><div class="li"><a href="../courses/06.html" class="wikilink1" title="cpl:courses:06">Cursul 06. Generarea apelurilor de funcții și a codului orientat obiect.</a></div></li>
<li class="level1"><div class="li"><a href="../courses/07.html" class="wikilink1" title="cpl:courses:07">Cursul 07. Optimizări. Analiza fluxului de control (CFA)</a></div></li>
<li class="level1"><div class="li"><a href="../courses/08.html" class="wikilink1" title="cpl:courses:08">Cursul 08. Analiza fluxului de date (DFA)</a></div></li>
<li class="level1"><div class="li"><a href="../courses/09.html" class="wikilink1" title="cpl:courses:09">Cursul 09. Analiza fluxului de date. Forma SSA. Extragerea codului invariant din bucle. Variabile de inducție.</a></div></li>
<li class="level1"><div class="li"><a href="../courses/10.html" class="wikilink1" title="cpl:courses:10">Cursul 10. Arhitectura Calculatoarelor. Dependență. Planificarea instrucțiunilor</a></div></li>
<li class="level1"><div class="li"><a href="../courses/11.html" class="wikilink1" title="cpl:courses:11">Cursul 11. Garbage Collection</a></div></li>
<li class="level1"><div class="li"><a href="../courses/12.html" class="wikilink1" title="cpl:courses:12">Cursul 12. Alocarea de registre. Linkers.</a></div></li>
<li class="level1"><div class="li"><a href="../courses/13.html" class="wikilink1" title="cpl:courses:13">Cursul 13. Just in Time Compilers (JIT)</a></div></li>
</ul>
</div></div>

</div>
<!-- EDIT4 SECTION "Cursuri" [210-262] -->
<h1 class="sectionedit5" id="teme">Teme</h1>
<div class="level1">

<div><div id="nojs_indexmenu_12547546558355b11299f5" data-jsajax="" class="indexmenu_nojs">

<ul class="idx">
<li class="level1"><div class="li"><a href="concurs.html" class="wikilink1" title="cpl:teme:concurs">Concurs</a></div></li>
<li class="level1"><div class="li"><a href="general.html" class="wikilink1" title="cpl:teme:general">Indicații generale teme</a></div></li>
<li class="level1"><div class="li"><a href="tema1.html" class="wikilink1" title="cpl:teme:tema1">Tema de casă 1 - Analiza sintactică</a></div></li>
<li class="level1"><div class="li"><span class="curid"><a href="tema2.html" class="wikilink1" title="cpl:teme:tema2">Tema de casă 2 - Generarea de cod</a></span></div></li>
<li class="level1"><div class="li"><a href="tema3.html" class="wikilink1" title="cpl:teme:tema3">Tema de casa 3 - Backend</a></div></li>
</ul>
</div></div>

</div>
<!-- EDIT5 SECTION "Teme" [263-310] -->
<h1 class="sectionedit6" id="resurse">Resurse</h1>
<div class="level1">

<div><div id="nojs_indexmenu_42286647858355b112a995" data-jsajax="" class="indexmenu_nojs">

<ul class="idx">
<li class="level1"><div class="li"><a href="../res/materiale.html" class="wikilink1" title="cpl:res:materiale">Nice to read</a></div></li>
</ul>
</div></div>

</div>
<!-- EDIT6 SECTION "Resurse" [311-] -->
</div>
<div class="toc_sidebar sidebar_box">
<!-- TOC START -->
<div id="sb__right__dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="tema2.html#tema_de_casa_2_-_generarea_de_cod">Tema de casă 2 - Generarea de cod</a></div>
<ul class="toc">
<li class="clear">
<ul class="toc">
<li class="level3"><div class="li"><a href="tema2.html#informatii_organizatorice">Informații organizatorice</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="tema2.html#enunt">Enunţ</a></div></li>
<li class="level2"><div class="li"><a href="tema2.html#generarea_de_cod">Generarea de cod</a></div></li>
<li class="level2"><div class="li"><a href="tema2.html#arhiva_de_pornire">Arhiva de pornire</a></div></li>
<li class="level2"><div class="li"><a href="tema2.html#suportul_de_executie_pentru_lcpl">Suportul de execuție pentru LCPL</a></div></li>
<li class="level2"><div class="li"><a href="tema2.html#scheletul_de_cod">Scheletul de cod</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="tema2.html#runtime-ul_limbajului_lcpl">Runtime-ul limbajului LCPL</a></div></li>
<li class="level3"><div class="li"><a href="tema2.html#analiza_semantica">Analiza semantică</a></div></li>
<li class="level3"><div class="li"><a href="tema2.html#generatorul_de_cod">Generatorul de cod</a></div></li>
<li class="level3"><div class="li"><a href="tema2.html#programul_principal">Programul principal</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="tema2.html#api_llvm_pe_scurt">API LLVM pe scurt</a></div></li>
<li class="level2"><div class="li"><a href="tema2.html#testare_automata_si_punctaj">Testare automată și punctaj</a></div></li>
<li class="level2"><div class="li"><a href="tema2.html#instructiuni_de_predare_a_temei">Instrucţiuni de predare a temei</a></div></li>
<li class="level2"><div class="li"><a href="tema2.html#resurse">Resurse</a></div></li>
<li class="level2"><div class="li"><a href="tema2.html#f_a_q">F A Q</a></div></li>
<li class="level2"><div class="li"><a href="tema2.html#change_log">Change Log</a></div></li>
</ul></li>
</ul>
</div>
</div>
<!-- TOC END -->
</div>
        </div>
      
    
      <div class="stylefoot">
        <div class="meta">
          <div class="user">
                    </div>
          <div class="doc">
          cpl/teme/tema2.txt · Last modified: 2016/11/22 19:35 by diana.vasile          </div>
        </div>
      </div>

    <div class="clearer"></div>

    
                <div class="bar" id="bar__bottom">
      <div class="bar-left">
              </div>
      <div class="bar-right">
        <a href="http://ocw.cs.pub.ro/courses/cpl/teme/tema2?do=media&amp;ns=cpl%3Ateme"  class="action media" rel="nofollow" title="Media Manager">Media Manager</a><a href="tema2.html#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Back to top [T]">Back to top</a>      </div>
    </div>
    <div class="clearer"></div>
            
    <div align="center" class="footerinc">
  <div class="license"><a href="http://creativecommons.org/licenses/by-sa/3.0/" rel="license"><img src="../../lib/images/license/button/cc-by-sa.png" alt="CC Attribution-Share Alike 3.0 Unported" /></a></div>
  <a target="_blank" href="http://www.chimeric.de" title="www.chimeric.de"><img src="../../lib/tpl/arctic/images/button-chimeric-de.png" width="80" height="15" alt="www.chimeric.de" border="0" /></a>

  <a target="_blank" href="http://jigsaw.w3.org/css-validator/check/referer" title="Valid CSS"><img src="../../lib/tpl/arctic/images/button-css.png" width="80" height="15" alt="Valid CSS" border="0" /></a>

  <a target="_blank" href="http://wiki.splitbrain.org/wiki:dokuwiki" title="Driven by DokuWiki"><img src="../../lib/tpl/arctic/images/button-dw.png" width="80" height="15" alt="Driven by DokuWiki" border="0" /></a>

  <a target="_blank" href="http://www.firefox-browser.de" title="do yourself a favour and use a real browser - get firefox"><img src="../../lib/tpl/arctic/images/button-firefox.png" width="80" height="15" alt="do yourself a favour and use a real browser - get firefox!!" border="0" /></a>
  
  <a target="_blank" href="../../feed.php" title="Recent changes RSS feed"><img src="../../lib/tpl/arctic/images/button-rss.png" width="80" height="15" alt="Recent changes RSS feed" border="0" /></a>

  <a target="_blank" href="http://validator.w3.org/check/referer" title="Valid XHTML 1.0"><img src="../../lib/tpl/arctic/images/button-xhtml.png" width="80" height="15" alt="Valid XHTML 1.0" border="0" /></a>
</div>

  </div>
</div>

<div class="no"><img src="http://ocw.cs.pub.ro/courses/lib/exe/indexer.php?id=cpl%3Ateme%3Atema2&amp;1479891729" width="2" height="1" alt="" /></div>
</body>
</html>

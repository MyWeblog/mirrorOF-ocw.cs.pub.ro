    
    

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
 lang="en" dir="ltr">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>
    Debugging    [CS Open CourseWare]
  </title>

  <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="date" content="2016-10-31T08:57:58+0200"/>
<meta name="keywords" content="programare,debugging"/>
<link rel="search" type="application/opensearchdescription+xml" href="../lib/exe/opensearch.php" title="CS Open CourseWare"/>
<link rel="start" href="../../courses.1.html"/>
<link rel="alternate" type="application/rss+xml" title="Recent Changes" href="../feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current Namespace" href="../feed.php%3Fmode=list&amp;ns=programare"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="../_export/xhtml/programare/debugging.html"/>
<link rel="canonical" href="debugging.html"/>
<link rel="stylesheet" type="text/css" href="../lib/exe/css.php%3Ft=arctic&amp;tseed=1476798676.css"/>
<script type="text/javascript">/*<![CDATA[*/var NS='programare';var JSINFO = {"id":"programare:debugging","namespace":"programare","isadmin":0,"isauth":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="../lib/exe/js.php%3Ftseed=1476798676"></script>
<script type="text/x-mathjax-config">/*<![CDATA[*/MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ["$","$"], ["\\(","\\)"] ],
        displayMath: [ ["$$","$$"], ["\\[","\\]"] ],
        processEscapes: true
    }
});
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
<script type="text/javascript">/*<![CDATA[*/
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
		  
/*!]]>*/</script>
<script type="text/javascript">/*<![CDATA[*/
var pageTracker = _gat._getTracker("UA-38383934-1");
pageTracker._initData();
pageTracker._trackPageview();
		  
/*!]]>*/</script>

  <link rel="shortcut icon" href="../lib/tpl/arctic/images/favicon.ico" />

  
</head>
<body>
<div id="wrapper" class='show'>
  <div class="dokuwiki">

    
    <div class="stylehead">
      <div class="header">
        <div class="pagename">
          <a href="index.html"><img height="70" src="../res/sigla_pc.png"/> </a>        </div>
        <div class="logo">
          <a style="color: #AAA !important;" href="../../courses.1.html"/>Open CourseWare</a>        </div>
      </div>
    
       
      <div class="breadcrumbs">
              </div>
      
            </div>

                  <div class="bar" id="bar__top">
        <div class="bar-left">
                  </div>
        <div class="bar-right">
          <a href="debugging%3Fdo=recent.html"  class="action recent" accesskey="r" rel="nofollow" title="Recent changes [R]">Recent changes</a><a href="debugging%3Fdo=login&amp;sectok=f62420cf5b01253da4b50505d148181b.html"  class="action login" rel="nofollow" title="Login">Login</a>        </div>
    </div>
        
    
    
    
              <div class="left_page">
          
<h2 class="sectionedit1" id="debugging">Debugging</h2>
<div class="level2">

<p>
Programele pot să nu meargă din mai multe motive. Pagina aceasta prezintă câteva abordări pe care să le urmați pentru a face <strong>debugging</strong> atunci când programele voastre nu funcționează. Lista nu este exhaustivă, ci doar prezintă câteva erori frecvente și moduri în care ați putea să le rezolvați.
</p>

</div>

<h3 class="sectionedit2" id="erori_de_compilare">Erori de compilare</h3>
<div class="level3">

<p>
Dacă programul vostru nu este scris corect din punct de vedere sintactic, atunci acesta va da erori la compilare.
</p>

<p>
<strong>gcc generează un excutabil</strong> doar dacă <strong>NU</strong> au existat erori de compilare. Dacă generează output, înseamnă că există probleme. Trebuie să vă asigurați întotdeauna că <em>gcc</em> nu a generat niciun output, pentru a fi siguri că aveți un executabil nou generat.
</p>

<p>
<p><div class="noteclassic">
Uneori <em>gcc</em> generează erori și astfel nu se generează fișierul executabil dorit. Dacă totuși există un executabil, înseamnă că este cel creat înainte ca compilarea să înceapă să genereze erori. Aceasta este o greșeală frecventă.

</div></p>
<p><div class="notewarning">
Asigurați-vă întotdeauna de faptul că <strong>gcc nu produce niciun output</strong>.<br/>


</div></p>
</p>

</div>

<h3 class="sectionedit3" id="warning-uri_de_compilare">Warning-uri de compilare</h3>
<div class="level3">

<p>
<em>gcc</em> poate identifica unele probleme, dar care nu generează erori, ci warning-uri. În cazul acesta, compilarea reușește și generează un executabil nou.
</p>

<p>
Warning-urile nu sunt erori pentru că sunt cazuri în care programatorul consecințele acestora și pot face parte din rezolvarea voită a programului.
</p>

<p>
Pentru a forța compilatorul să afișeze toate warning-urile folosiți paramentrul <strong>-Wall</strong>. Exemplu:
</p>
<pre class="code">gcc -Wall ex1.c -o exe</pre>

<p>
În cadrul cursului de programare nu vom avea niciodată nevoie de construcții ce sunt ok chiar dacă compilatorul arată warning-uri. De aceea vă încurajăm să scăpați întotdeauna de ele.
</p>

<p>
Warning-urile pot duce la rezultate eronate. Exemplu de posibile warning-uri:
</p>
<ul>
<li class="level1"><div class="li"> folosirea unei variabile neinițializate</div>
</li>
<li class="level1"><div class="li"> atribuirea de număr cu semn unui întreg fără semn</div>
</li>
<li class="level1"><div class="li"> cast-uri de la int la char (deci cu diminuare de spațiu)</div>
</li>
<li class="level1"><div class="li"> atribuirea de pointeri la variabile numerice</div>
</li>
<li class="level1"><div class="li"> etc.</div>
</li>
</ul>

<p>
<p><div class="notewarning">
Toate aceste warning-uri pot face ca rezultatul calculat să nu fie cel dorit. <br/>

Amintiți-vă de exemplele din <a href="laboratoare/lab02.html#exercitii_laborator_cbcd" class="urlextern" title="http://ocw.cs.pub.ro/courses/programare/laboratoare/lab02#exercitii_laborator_cbcd"  rel="nofollow">laboratorul 02</a>.

</div></p>
</p>

</div>

<h3 class="sectionedit4" id="segmentation_faultstack_smashing_detected">Segmentation fault / stack smashing detected</h3>
<div class="level3">

<p>
Erorile de genul aceasta înseamnă, pe scurt, că undeva faceți un acces nevalid de memorie. Cel mai frecvent, cauza poate să fie una din următoarele:
</p>
<ul>
<li class="level1"><div class="li"> accesați printr-un indice un element într-un vector nealocat (exemplu: dacă vectorul a fost declarat <em>int v[100]</em>, iar voi accesați <em>v[100]</em> sau chiar cu un indice mai mare sau cu unul negativ)</div>
</li>
<li class="level1"><div class="li"> folosiți o funcție recursivă care nu are condiție de oprire, sau condiția acesteia nu funcționează corect sau nu acoperă cazul din testul rulat</div>
</li>
<li class="level1"><div class="li"> apelați funcția <em>free</em> pe o zonă de memorie nealocată sau pe una care a fost eliberată anterior</div>
</li>
<li class="level1"><div class="li"> etc.</div>
</li>
</ul>

<p>
Pentru a identifica problemele în cazul acesta puteți să folosiți <a href="debugging%3F&amp;.html#other" class="urlextern" title="http://ocw.cs.pub.ro/courses/programare/debugging?&amp;#other"  rel="nofollow">printf stylel debugging</a>, cu mențiunea de <a href="debugging%3F&amp;.html#pun_printf_dar_nu_apare_iar_apoi_crapa_programul" class="urlextern" title="http://ocw.cs.pub.ro/courses/programare/debugging?&amp;#pun_printf_dar_nu_apare_iar_apoi_crapa_programul"  rel="nofollow">a fi atenți cum folosiți afișarea</a>.
</p>

<p>
Pentru a identifica mai ușor punctul în care se întâmplă eroarea recomandăm folosirea <a href="https://www.cs.cmu.edu/~gilpin/tutorial/" class="urlextern" title="https://www.cs.cmu.edu/~gilpin/tutorial/"  rel="nofollow">gdb</a> sau <a href="http://valgrind.org/docs/manual/QuickStart.html" class="urlextern" title="http://valgrind.org/docs/manual/QuickStart.html"  rel="nofollow">valgrind</a>.
</p>

<p>
Pentru ambele tool-uri vom avea nevoie să adăugăm la compilare flag-ul <strong>-g</strong> pentru a activa simbolurile de debugging. Astfel:
</p>
<pre class="code">gcc -g -Wall ex1.c -o exe </pre>

<p>
Spre exemplu, o rulare simplă cu <em>valgrind</em> ar arăta așa (dacă programul are argumente le adăugați în continuare):
</p>
<pre class="code">valgrind ./exe</pre>

<p>
Urmăriți output-ul generat. Ar trebui să vă spună exact linia pe care se întâmplă eroarea și cauza acesteia. Mai multe detalii în tutoriale.
</p>

</div>

<h3 class="sectionedit5" id="pun_printf_dar_nu_apare_iar_apoi_crapa_programul">Pun printf dar nu apare, iar apoi crapă programul</h3>
<div class="level3">

<p>
<strong>printf</strong> este o funcție care înainte de a afișa datele pe ecran le scrie într-un buffer intern pe care-l afișează pe ecran <strong>doar în următoarele cazuri</strong>:
</p>
<ul>
<li class="level1"><div class="li"> se umple bufferul (este destul de mare!)</div>
</li>
<li class="level1"><div class="li"> este forțată afișarea (folosind apelul: <em>fflush(stdout);</em>)</div>
</li>
<li class="level1"><div class="li"> este afișat caracterul newline (adică <em>&#039;\n&#039;</em>)</div>
</li>
</ul>

<p>
Dacă voi scrieți ceva în buffer (exemplu: <em>printf(“Hello!”);</em>) iar după aceea apare o eroare de genul <em>segmentation fault</em>, nu înseamnă că programul vostru nu a ajuns să execute instrucțiunea printf. Înseamnă doar că buffer-ul respectiv nu a ajuns să fie afișat pe ecran.
</p>

<p>
<p><div class="notewarning">
Recomandăm să folosiți caracterul newline întotdeauna pentru debugging. Astfel:
</p>
<pre class="code">printf(&quot;Hello\n&quot;);</pre>

<p>

</div></p>
</p>

<p>
Ieșirea standard de eroare nu bufferează datele, ci le afișează imediat pe ecran. Puteți folosi acest flux, dacă doriți, astfel:
</p>
<pre class="code">printf(&quot;Hello&quot;);</pre>

<p>
devine:
</p>
<pre class="code">fprintf(stderr, &quot;Hello&quot;);</pre>

</div>

<h3 class="sectionedit6" id="other">Other</h3>
<div class="level3">

<p>
Dacă rezultatul nu este cel așteptat, înseamnă că undeva s-a produs o eroare în cod.
De multe ori poate fi un indice pus prost, sau o relație de inegalitate greșită. Pentru aceste cazuri, recomandăm să faceți verificări în diversele puncte ale programului.
</p>

<p>
Puteți fie să folosiți un debugger pentru a verifica ce valori iau diversele variabile pe parcursul execuției programului, fie să folosiți așa numitul <strong>printf style debugging</strong>. Pentru aceasta încercați să afișați valorile în diverse puncte ale programului pentru a identifica zona în care rezultatul <em>se strică</em>. 
</p>

<p>
Recomandăm să începeți să afișați diversele valori esențiale de sus în jos. Cel mai probabil primul pas de verificat este imediat după citirea datelor de intrare. Asigurați-vă că ati citit valorile corect. Este o greșeală des întâlnită, mai ales printre începători, pentru că folosesc funcția <em>scanf</em> cu diverse formate fără să înțeleagă pe deplin ce se întâmplă.
</p>

<p>
După ce ați verificat că ați citit corect datele, afișați valorile esențiale după fiecare secvență care le modifică în programul vostru. Nu puneți printf peste tot încă de la început, abordați incremental. Pentru bucle recomandăm să afișați indicele pentru fiecare iterație alături de alte valori pentru a putea urmări cum evoluează acestea.
</p>

</div>

        </div>
        <div class="right_sidebar">
          <form action="../start.html" accept-charset="utf-8" class="search" id="dw__search" method="get"><div class="no"><input type="hidden" name="do" value="search" /><input type="text" id="qsearch__in" accesskey="f" name="id" class="edit" title="[F]" /><input type="submit" value="Search" class="button" title="Search" /><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>          <div class="namespace_sidebar sidebar_box">

<h2 class="sectionedit1" id="resurse_generale">Resurse generale</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> <a href="regulament-ca.html" class="wikilink1" title="programare:regulament-ca">Regulament: seria CA</a> <br/>
</div>
</li>
<li class="level1"><div class="li"> <a href="regulament-cb-cd.html" class="wikilink1" title="programare:regulament-cb-cd">Regulament: seria CB/CD</a> <br/>
</div>
</li>
<li class="level1"><div class="li"> <a href="punctaj.html" class="wikilink1" title="programare:punctaj">Punctaj seria CA</a> <br/>
</div>
</li>
<li class="level1"><div class="li"> <a href="calendar.html" class="wikilink1" title="programare:calendar">Calendar</a> <br/>
</div>
</li>
<li class="level1"><div class="li"> <a href="catalog.html" class="wikilink1" title="programare:catalog">Catalog laborator</a> <br/>
</div>
</li>
<li class="level1"><div class="li"> <span class="curid"><a href="debugging.html" class="wikilink1" title="programare:debugging">Debugging</a></span> <br/>
</div>
</li>
<li class="level1"><div class="li"> <a href="coding-style.html" class="wikilink1" title="programare:coding-style">Coding style</a> <br/>
</div>
</li>
</ul>

</div>
<!-- EDIT1 SECTION "Resurse generale" [1-375] -->
<h2 class="sectionedit2" id="cursuri">Cursuri</h2>
<div class="level2">

</div>
<!-- EDIT3 PLUGIN_INCLUDE_START "programare:cursuri" [0-] --><div class="plugin_include_content plugin_include__programare:cursuri">
<div class="level2">

<p>
<a href="cursuri/sylabus.html" class="wikilink1" title="programare:cursuri:sylabus">Continutul Tematic</a> <br/>

</p>

</div>
<!-- EDIT5 PLUGIN_INCLUDE_EDITBTN "programare:cursuri" [0-] --><!-- EDIT4 PLUGIN_INCLUDE_END "programare:cursuri" [0-] --></div>
<div class="level2">

</div>
<!-- EDIT2 SECTION "Cursuri" [376-444] -->
<h2 class="sectionedit6" id="laboratoare">Laboratoare</h2>
<div class="level2">

</div>
<!-- EDIT7 PLUGIN_INCLUDE_START "programare:laboratoare" [0-] --><div class="plugin_include_content plugin_include__programare:laboratoare">
<div class="level2">

<p>
<a href="laboratoare/lab01.html" class="wikilink1" title="programare:laboratoare:lab01">01. Unelte de programare</a> <br/>

<a href="laboratoare/lab02.html" class="wikilink1" title="programare:laboratoare:lab02">02. Tipuri de date. Operatori.</a> <br/>

<a href="laboratoare/lab03.html" class="wikilink1" title="programare:laboratoare:lab03">03. Instrucțiunile limbajului C</a> <br/>

<a href="laboratoare/lab04.html" class="wikilink1" title="programare:laboratoare:lab04">04. Funcții</a> <br/>

<a href="laboratoare/lab05.html" class="wikilink1" title="programare:laboratoare:lab05">05. Tablouri. Particularizare - vectori</a> <br/>

<a href="laboratoare/lab06.html" class="wikilink1" title="programare:laboratoare:lab06">06. Matrice. Operații cu matrice</a> <br/>

<a href="laboratoare/lab07.html" class="wikilink1" title="programare:laboratoare:lab07">07. Pointeri. Abordarea lucrului cu tablouri folosind pointeri</a> <br/>

<a href="laboratoare/lab08.html" class="wikilink1" title="programare:laboratoare:lab08">08. Alocarea dinamică a memoriei. Aplicaţii folosind tablouri şi matrice</a> <br/>

<a href="laboratoare/lab09.html" class="wikilink1" title="programare:laboratoare:lab09">09. Prelucrarea şirurilor de caractere. Funcţii. Aplicaţii</a> <br/>

<a href="laboratoare/lab10.html" class="wikilink1" title="programare:laboratoare:lab10">10. Structuri. Uniuni. Aplicație: Matrice rare</a> <br/>

<a href="laboratoare/lab11.html" class="wikilink1" title="programare:laboratoare:lab11">11. Operatii cu fişiere. Aplicaţii folosind fişiere.</a> <br/>

<a href="laboratoare/lab12.html" class="wikilink1" title="programare:laboratoare:lab12">12. Parametrii liniei de comandă. Preprocesorul. Funcţii cu număr variabil de parametri</a> <br/>

<a href="laboratoare/lab13.html" class="wikilink1" title="programare:laboratoare:lab13">13. Recapitulare</a> <br/>

<a href="laboratoare/lab14.html" class="wikilink1" title="programare:laboratoare:lab14">14. Probleme diverse</a> <br/>

<a href="laboratoare/lab12cb.html" class="wikilink1" title="programare:laboratoare:lab12cb">12.(CB) Laborator final</a> <br/>

<a href="laboratoare/python.html" class="wikilink1" title="programare:laboratoare:python">Extra: python</a> <br/>

</p>

</div>
<!-- EDIT9 PLUGIN_INCLUDE_EDITBTN "programare:laboratoare" [0-] --><!-- EDIT8 PLUGIN_INCLUDE_END "programare:laboratoare" [0-] --></div>
<div class="level2">

</div>
<!-- EDIT6 SECTION "Laboratoare" [445-522] -->
<h2 class="sectionedit10" id="teme_de_casa_general">Teme de casa (general)</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> <a href="regulament.html#reguli_de_trimitere_a_temelor" class="wikilink2" title="programare:regulament" rel="nofollow">Trimitere teme</a> <br/>
</div>
</li>
<li class="level1"><div class="li"> <a href="teme/general.html" class="wikilink1" title="programare:teme:general"> Indicații generale</a> <br/>
</div>
</li>
</ul>

</div>
<!-- EDIT10 SECTION "Teme de casa (general)" [523-752] -->
<h2 class="sectionedit11" id="teme_de_casaseria_ca">Teme de casă: seria CA</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> <a href="teme_2016/tema1_2016_ca.html" class="wikilink1" title="programare:teme_2016:tema1_2016_ca">Tema 1</a> <br/>
</div>
</li>
<li class="level1"><div class="li"> <a href="teme_2016/tema2_2016_ca.html" class="wikilink1" title="programare:teme_2016:tema2_2016_ca">Tema 2</a> <br/>
</div>
</li>
<li class="level1"><div class="li"> <a href="teme_2016/tema3_2016_ca.html" class="wikilink1" title="programare:teme_2016:tema3_2016_ca">Tema 3</a> <br/>
</div>
</li>
<li class="level1"><div class="li"> <a href="teme_2016/tema4_2016_ca.html" class="wikilink1" title="programare:teme_2016:tema4_2016_ca">Tema 4</a> <br/>
</div>
</li>
</ul>

</div>
<!-- EDIT11 SECTION "Teme de casă: seria CA" [753-1946] -->
<h2 class="sectionedit12" id="teme_de_casaseria_cbcd">Teme de casă: seria CB/CD</h2>
<div class="level2">
<ul>
<li class="level1"><div class="li"> <a href="teme_2016/tema1_2016_cbd.html" class="wikilink1" title="programare:teme_2016:tema1_2016_cbd">Tema 1</a> <br/>
</div>
</li>
</ul>

</div>
<!-- EDIT12 SECTION "Teme de casă: seria CB/CD" [1947-] -->
</div>
<div class="toc_sidebar sidebar_box">
<!-- TOC START -->
<div id="sb__right__dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level2"><div class="li"><a href="debugging.html#debugging">Debugging</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="debugging.html#erori_de_compilare">Erori de compilare</a></div></li>
<li class="level3"><div class="li"><a href="debugging.html#warning-uri_de_compilare">Warning-uri de compilare</a></div></li>
<li class="level3"><div class="li"><a href="debugging.html#segmentation_faultstack_smashing_detected">Segmentation fault / stack smashing detected</a></div></li>
<li class="level3"><div class="li"><a href="debugging.html#pun_printf_dar_nu_apare_iar_apoi_crapa_programul">Pun printf dar nu apare, iar apoi crapă programul</a></div></li>
<li class="level3"><div class="li"><a href="debugging.html#other">Other</a></div></li>
</ul></li>
</ul>
</div>
</div>
<!-- TOC END -->
</div>
        </div>
      
    
      <div class="stylefoot">
        <div class="meta">
          <div class="user">
                    </div>
          <div class="doc">
          programare/debugging.txt · Last modified: 2016/10/31 08:57 by laura.vasilescu          </div>
        </div>
      </div>

    <div class="clearer"></div>

    
                <div class="bar" id="bar__bottom">
      <div class="bar-left">
              </div>
      <div class="bar-right">
        <a href="debugging%3Fdo=media&amp;ns=programare.html"  class="action media" rel="nofollow" title="Media Manager">Media Manager</a><a href="debugging.html#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Back to top [T]">Back to top</a>      </div>
    </div>
    <div class="clearer"></div>
            
    <div align="center" class="footerinc">
  <div class="license"><a href="http://creativecommons.org/licenses/by-sa/3.0/" rel="license"><img src="../lib/images/license/button/cc-by-sa.png" alt="CC Attribution-Share Alike 3.0 Unported" /></a></div>
  <a target="_blank" href="http://www.chimeric.de" title="www.chimeric.de"><img src="../lib/tpl/arctic/images/button-chimeric-de.png" width="80" height="15" alt="www.chimeric.de" border="0" /></a>

  <a target="_blank" href="http://jigsaw.w3.org/css-validator/check/referer" title="Valid CSS"><img src="../lib/tpl/arctic/images/button-css.png" width="80" height="15" alt="Valid CSS" border="0" /></a>

  <a target="_blank" href="http://wiki.splitbrain.org/wiki:dokuwiki" title="Driven by DokuWiki"><img src="../lib/tpl/arctic/images/button-dw.png" width="80" height="15" alt="Driven by DokuWiki" border="0" /></a>

  <a target="_blank" href="http://www.firefox-browser.de" title="do yourself a favour and use a real browser - get firefox"><img src="../lib/tpl/arctic/images/button-firefox.png" width="80" height="15" alt="do yourself a favour and use a real browser - get firefox!!" border="0" /></a>
  
  <a target="_blank" href="../feed.php" title="Recent changes RSS feed"><img src="../lib/tpl/arctic/images/button-rss.png" width="80" height="15" alt="Recent changes RSS feed" border="0" /></a>

  <a target="_blank" href="http://validator.w3.org/check/referer" title="Valid XHTML 1.0"><img src="../lib/tpl/arctic/images/button-xhtml.png" width="80" height="15" alt="Valid XHTML 1.0" border="0" /></a>
</div>

  </div>
</div>

<div class="no"><img src="../lib/exe/indexer.php%3Fid=programare%253Adebugging&amp;1479891464" width="2" height="1" alt="" /></div>
</body>
</html>

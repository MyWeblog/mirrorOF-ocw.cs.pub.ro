    
    

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
 lang="en" dir="ltr">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>
    Laboratorul 03    [CS Open CourseWare]
  </title>

  <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="date" content="2016-11-10T16:21:15+0200"/>
<meta name="keywords" content="egc,laboratoare,03"/>
<link rel="search" type="application/opensearchdescription+xml" href="../../lib/exe/opensearch.php" title="CS Open CourseWare"/>
<link rel="start" href="../../../courses.1.html"/>
<link rel="alternate" type="application/rss+xml" title="Recent Changes" href="../../feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current Namespace" href="../../feed.php%3Fmode=list&amp;ns=egc:laboratoare"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="../../_export/xhtml/egc/laboratoare/03.html"/>
<link rel="canonical" href="03.html"/>
<link rel="stylesheet" type="text/css" href="../../lib/exe/css.php%3Ft=arctic&amp;tseed=1476798676.css"/>
<script type="text/javascript">/*<![CDATA[*/var NS='egc:laboratoare';var JSINFO = {"id":"egc:laboratoare:03","namespace":"egc:laboratoare","isadmin":0,"isauth":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="../../lib/exe/js.php%3Ftseed=1476798676"></script>
<script type="text/x-mathjax-config">/*<![CDATA[*/MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ["$","$"], ["\\(","\\)"] ],
        displayMath: [ ["$$","$$"], ["\\[","\\]"] ],
        processEscapes: true
    }
});
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
<script type="text/javascript">/*<![CDATA[*/
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
		  
/*!]]>*/</script>
<script type="text/javascript">/*<![CDATA[*/
var pageTracker = _gat._getTracker("UA-38383934-1");
pageTracker._initData();
pageTracker._trackPageview();
		  
/*!]]>*/</script>

  <link rel="shortcut icon" href="../../lib/tpl/arctic/images/favicon.ico" />

  
</head>
<body>
<div id="wrapper" class='show'>
  <div class="dokuwiki">

    
    <div class="stylehead">
      <div class="header">
        <div class="pagename">
          <a href="../index.html"><img height="70" src="../../res/sigla_cs.png"/> </a>        </div>
        <div class="logo">
          <a style="color: #AAA !important;" href="../../../courses.1.html"/>Open CourseWare</a>        </div>
      </div>
    
       
      <div class="breadcrumbs">
              </div>
      
            </div>

                  <div class="bar" id="bar__top">
        <div class="bar-left">
                  </div>
        <div class="bar-right">
          <a href="03%3Fdo=recent.html"  class="action recent" accesskey="r" rel="nofollow" title="Recent changes [R]">Recent changes</a><a href="03%3Fdo=login&amp;sectok=f62420cf5b01253da4b50505d148181b.html"  class="action login" rel="nofollow" title="Login">Login</a>        </div>
    </div>
        
    
    
    
              <div class="left_page">
          
<h1 class="sectionedit1" id="laboratorul_03">Laboratorul 03</h1>
<div class="level1">

</div>

<h2 class="sectionedit2" id="transformari_2d">Transformari 2D</h2>
<div class="level2">

<p>
Obiectele 2D sunt definite intr-un sistem de coordonate carteziene 2D, de exemplu, XOY, XOZ sau YOZ.
In cadrul acestui laborator vom implementa diferite tipuri de transformari ce pot fi aplicate obiectelor definite in planul XOY: translatii, rotatii si scalari. Aceastea sunt definite in format matriceal, in coordonate omgene, asa cum ati invatat deja la curs. Matricile acestor transformari sunt urmatoarele:
</p>

</div>

<h3 class="sectionedit3" id="translatia">Translatia</h3>
<div class="level3">

<p>
$$
\begin{bmatrix}
{x}&#039;\\ 
{y}&#039;\\ 
1
\end{bmatrix} = \begin{bmatrix}
1 &amp; 0 &amp; t_x\\ 
0 &amp; 1 &amp; t_y\\ 
0 &amp; 0 &amp; 1
\end{bmatrix}

\begin{bmatrix}
x\\ 
y\\ 
1
\end{bmatrix} 
$$
</p>

</div>

<h3 class="sectionedit4" id="rotatia">Rotatia</h3>
<div class="level3">

</div>

<h4 id="rotatia_fata_de_origine">Rotatia fata de origine</h4>
<div class="level4">

<p>
$$
\begin{bmatrix}
{x}&#039;\\ 
{y}&#039;\\ 
1
\end{bmatrix} = \begin{bmatrix}
cos(u) &amp; -sin(u) &amp; 0\\ 
sin(u) &amp; cos(u) &amp; 0\\ 
0 &amp; 0 &amp; 1
\end{bmatrix}

\begin{bmatrix}
x\\ 
y\\ 
1
\end{bmatrix} 
$$
</p>

</div>

<h4 id="rotatia_fata_de_un_punct_oarecare">Rotatia fata de un punct oarecare</h4>
<div class="level4">

<p>
Rotatia relativa la un punct oarecare se rezolva in cel mai simplu mod prin:
</p>
<ol>
<li class="level1"><div class="li"> translatarea atat a punctului asupra carui se aplica rotatia cat si a punctului in jurul caruia se face rotatia a.i. cel din urma sa fie originea sistemului de coordonate.</div>
</li>
<li class="level1"><div class="li"> rotatia normala (in jurul originii),</div>
</li>
<li class="level1"><div class="li"> translatarea rezultatului a.i. punctul in jurul caruia s-a facut rotatia sa ajunga in pozitia sa initiala</div>
</li>
</ol>

</div>

<h3 class="sectionedit5" id="scalarea">Scalarea</h3>
<div class="level3">

</div>

<h4 id="scalarea_fata_de_origine">Scalarea fata de origine</h4>
<div class="level4">

<p>
$$
\begin{bmatrix}
{x}&#039;\\ 
{y}&#039;\\ 
1
\end{bmatrix} = \begin{bmatrix}
s_x &amp; 0 &amp; 0\\ 
0 &amp; s_y &amp; 0\\ 
0 &amp; 0 &amp; 1
\end{bmatrix}

\begin{bmatrix}
x\\ 
y\\ 
1
\end{bmatrix} 
$$
</p>

<p>
Daca $sx = sy$ atunci avem scalare uniforma, altfel avem scalare neuniforma.
</p>

</div>

<h4 id="scalarea_fata_de_un_punct_oarecare">Scalarea fata de un punct oarecare</h4>
<div class="level4">

<p>
Scalarea relativa la un punct oarecare se rezolva similar cu rotatia relativa la un punct oarecare.
</p>

</div>

<h2 class="sectionedit6" id="utilizarea_bibliotecii_glm">Utilizarea bibliotecii GLM</h2>
<div class="level2">

<p>
In cadrul laboratorului folosim biblioteca GLM care este o biblioteca implementata cu matrici in forma coloana, exact acelasi format ca OpenGL. Forma coloana difera de forma linie prin ordinea de stocare a elementelor maricei in memorie, Matricea de translatie arata in modul urmator in memorie:
</p>
<pre class="code cpp">glm<span class="sy4">::</span><span class="me2">mat3</span> Translate<span class="br0">&#40;</span><span class="kw4">float</span> tx, <span class="kw4">float</span> ty<span class="br0">&#41;</span>
<span class="br0">&#123;</span>
	<span class="kw1">return</span> glm<span class="sy4">::</span><span class="me2">mat3</span><span class="br0">&#40;</span> 
        	 <span class="nu0">1</span>,  <span class="nu0">0</span>, <span class="nu0">0</span>,     <span class="co1">// coloana 1 in memorie </span>
		 <span class="nu0">0</span>,  <span class="nu0">1</span>, <span class="nu0">0</span>,     <span class="co1">// coloana 2 in memorie </span>
		tx, ty, <span class="nu0">1</span><span class="br0">&#41;</span><span class="sy4">;</span>    <span class="co1">// coloana 3 in memorie </span>
&nbsp;
<span class="br0">&#125;</span></pre>

<p>
Din aceasta cauza, este convenabil ca matricile sa fie scrise manual in forma aceasta:
</p>
<pre class="code cpp">glm<span class="sy4">::</span><span class="me2">mat3</span> Translate<span class="br0">&#40;</span><span class="kw4">float</span> tx, <span class="kw4">float</span> ty<span class="br0">&#41;</span>
<span class="br0">&#123;</span>
	<span class="kw1">return</span> glm<span class="sy4">::</span><span class="me2">transpose</span><span class="br0">&#40;</span>
		glm<span class="sy4">::</span><span class="me2">mat3</span><span class="br0">&#40;</span> <span class="nu0">1</span>, <span class="nu0">0</span>, tx, 
			   <span class="nu0">0</span>, <span class="nu0">1</span>, ty, 
			   <span class="nu0">0</span>, <span class="nu0">0</span>, <span class="nu0">1</span><span class="br0">&#41;</span>
	<span class="br0">&#41;</span><span class="sy4">;</span> 
<span class="br0">&#125;</span></pre>

<p>
<p><div class="noteclassic">
In cadrul framework-ului de laborator, in fisierul <code>Transform2D.h</code> sunt definite functiile pentru calculul matricilor de translatie, rotatie si scalare. In momentul acesta toate functiile intorc matricea identitate. In cadrul laboratorului va trebui sa modificati codul pentru a calcula matricile respective. 

</div></p>
</p>

</div>

<h3 class="sectionedit7" id="transformari_compuse">Transformari compuse</h3>
<div class="level3">

<p>
De ce sunt necesare matricile? Pentru a reprezenta printr-o singura matrice de transformari o secventa de transformari elementare, in locul aplicarii unei secvente de transformari elementare pe un anume obiect.
</p>

<p>
Deci, daca dorim sa aplicam o rotatie, o scalare si o translatie pe un obiect, nu facem rotatia obiectului, scalarea obiectului urmata de translatia lui, ci calculam o matrice care reprezinta transformarea compusa (de rotatie, scalare si translatie), dupa care aplicam aceasta transformare compusa pe obiectul care se doreste a fi transformat.
</p>

<p>
Astfel, daca dorim sa aplicam o rotatie (cu matricea de rotatie $R$), urmata de o scalare ($S$), urmata de o translatie ($T$) pe un punct ($x$,$y$), punctul transformat (${x}&#039;$,${y}&#039;$) se va calcula astfel:
</p>

<p>
$$
\begin{bmatrix}
{x}&#039;\\ 
{y}&#039;\\ 
1
\end{bmatrix} = \begin{bmatrix}
1 &amp; 0 &amp; t_x\\ 
0 &amp; 1 &amp; t_y\\ 
0 &amp; 0 &amp; 1
\end{bmatrix}

\begin{bmatrix}
sx &amp; 0 &amp; 0\\ 
0 &amp; sy &amp; 0\\ 
0 &amp; 0 &amp; 1
\end{bmatrix}

\begin{bmatrix}
cos(u) &amp; -sin(u) &amp; 0\\ 
sin(u) &amp; cos(u) &amp; 0\\ 
0 &amp; 0 &amp; 1
\end{bmatrix}

\begin{bmatrix}
x\\ 
y\\ 
1
\end{bmatrix} 
$$
</p>

<p>
Deci, matricea de transformari compuse $M$ este $M = T * S * R$.
</p>

<p>
<p><div class="noteclassic">
In cadrul laboratorului, in fisierul <code>Laborator3.cpp</code>, exista o serie de obiecte (patrate) pentru care, in functia <code>Update()</code>, inainte de desenare, se definesc matricile de transformari. Comanda de desenare se da prin functia <code>RenderMesh2D()</code>.
</p>
<pre class="code cpp">   modelMatrix <span class="sy1">=</span> glm<span class="sy4">::</span><span class="me2">mat3</span><span class="br0">&#40;</span><span class="nu0">1</span><span class="br0">&#41;</span><span class="sy4">;</span>
   modelMatrix <span class="sy2">*</span><span class="sy1">=</span> Transform2D<span class="sy4">::</span><span class="me2">Translate</span><span class="br0">&#40;</span><span class="nu0">150</span>, <span class="nu0">250</span><span class="br0">&#41;</span><span class="sy4">;</span>
   RenderMesh2D<span class="br0">&#40;</span>meshes<span class="br0">&#91;</span><span class="st0">&quot;square1&quot;</span><span class="br0">&#93;</span>, shaders<span class="br0">&#91;</span><span class="st0">&quot;VertexColor&quot;</span><span class="br0">&#93;</span>, modelMatrix<span class="br0">&#41;</span><span class="sy4">;</span></pre>

<p>
Pentru exemplul anterior, matricea de translatie creata va avea ca efect translatarea patratului curent cu (150, 250). Pentru efecte de animatie continua, pasii de translatie ar trebui sa se modifice in timp.
</p>

<p>
Exemplu:
</p>
<pre class="code cpp">tx <span class="sy2">+</span><span class="sy1">=</span> deltaTimeSeconds <span class="sy2">*</span> <span class="nu0">100</span><span class="sy4">;</span>
ty <span class="sy2">+</span><span class="sy1">=</span> deltaTimeSeconds <span class="sy2">*</span> <span class="nu0">100</span><span class="sy4">;</span>
model_matrix <span class="sy2">*</span><span class="sy1">=</span> Transform2D<span class="sy4">::</span><span class="me2">Translate</span><span class="br0">&#40;</span>tx, ty<span class="br0">&#41;</span><span class="sy4">;</span></pre>

<p>

</div></p>
</p>

<p>
<p><div class="notetip">
<strong>Retineti:</strong> daca la animatie nu tineti cont de timpul de rulare al unui frame (<code>deltaTimeSeconds</code>), veti crea animatii dependente de platforma. 
</p>

<p>
<strong>Exemplu:</strong> daca la fiecare frame cresteti pe tx cu un pas constant (ex: <code>tx += 0.01</code>), atunci animatia se va comporta diferit pe un calculator care merge mai repede fata de unul care merge mai incet. Pe un calculator care ruleaza la 50 FPS, obiectul se va deplasa 0.01 * 50 = 0.5 unitati in dreapta intr-o secunda. In schimb, pe un calculator mai incet, care ruleaza la 10 FPS, obiectul se va deplasa 0.01 * 10 = 0.1 unitati in dreapta intr-o secunda, deci animatia va fi de 5 ori mai lenta. 
</p>

<p>
Din acest motiv este bine sa tineti cont de viteza de rulare a fiecarui calculator (data prin <code>deltaTimeSeconds</code>, care reprezinta timpul de rulare al frame-ului anterior) si sa modificati pasii de translatie, unghiurile de rotatie si factorii de scalare in functie de aceasta variabila.

</div></p>
</p>

</div>

<h2 class="sectionedit8" id="transformarea_fereastra-poarta">Transformarea fereastra-poarta</h2>
<div class="level2">

<p>
Desenele reprezentate intr-un program de aplicatie grafica (2D sau 3D) sunt, de regula, raportate la un sistem de coordonate diferit de cel al suprafetei de afisare.
</p>

<p>
<p><div class="noteclassic">
In exercitiile anterioare din acest laborator, coordonatele obiectelor au fost raportate la dimensiunea ferestrei definita prin <code>glViewport()</code>. 
</p>

<p>
Exemplu: Daca viewport-ul meu are coltul din stanga jos (0, 0) si are latimea 1280 si inaltimea 720, atunci toate obiectele ar trebui desenate in acest interval, daca vreau sa fie vizibile. Acest lucru ma conditioneaza sa imi gandesc toata scena in (0, 0) - (1280, 720). Daca vreau sa scap de aceasta limitare, pot sa imi gandesc scena intr-un spatiu logic (de exemplu imi creez toate obiectele in spatiul (-1, -1) - (1, 1), si apoi sa le desenez in poarta de afisare, dar aplicand ceea ce se numeste <strong>transformarea fereastra poarta</strong>.
</p>

<p>
In cele ce urmeaza vedem ce presupune aceasta transformare si cum pot sa imi gandesc scena fara sa fiu limitat de dimensiunea viewport-ului.
</p>

<p>

</div></p>
</p>

<p>
<a href="../../_detail/egc/laboratoare/transf_fer_poarta1.png%3Fid=egc%253Alaboratoare%253A03.html" class="media" title="egc:laboratoare:transf_fer_poarta1.png"><img src="../../_media/egc/laboratoare/transf_fer_poarta1.png%3Fw=600&amp;tok=aad277" class="mediacenter" alt="" width="600" /></a>
</p>

</div>

<h3 class="sectionedit9" id="definitia_matematica">Definitia matematica:</h3>
<div class="level3">

<p>
<a href="../../_detail/egc/laboratoare/transf_fer_poarta2.png%3Fid=egc%253Alaboratoare%253A03.html" class="media" title="egc:laboratoare:transf_fer_poarta2.png"><img src="../../_media/egc/laboratoare/transf_fer_poarta2.png%3Fw=550&amp;tok=ccce9b" class="mediacenter" alt="" width="550" /></a>
</p>

<p>
$$ \frac{xp - xpmin}{xpmax - xpmin} = \frac{xf - xfmin}{xfmax - xfmin} $$
$$ \frac{yp - ypmin}{ypmax - ypmin} = \frac{yf - yfmin}{yfmax - yfmin} $$
</p>

<p>
Transformarea este definita prin 2 dreptunghiuri, in cele doua sisteme de coordonate, numite fereastra sau spatiul logic si poarta, sau spatiul de afisare. De aici numele de transformarea fereastra-poarta sau transformarea de vizualizare 2D.
</p>

<p>
F: un punct din fereastra
</p>

<p>
P: punctul in care se transforma F prin transformarea de vizualizare
</p>

<p>
Pozitia relativa a lui P in poarta de afisare trebuie sa fie aceeasi cu pozitia relativa a lui F in fereastra.
</p>

<p>
$$ sx = \frac{xpmax - xpmin}{xfmax - xfmin} $$
</p>

<p>
$$ sy = \frac{ypmax - ypmin}{yfmax - yfmin} $$
</p>
<ul>
<li class="level1"><div class="li"> sx, sy depind de dimensiunile celor doua ferestre</div>
</li>
<li class="level1"><div class="li"> tx, ty depind de pozitiile celor doua ferestre fata de originea sistemului de coordonate in care sunt definite.</div>
</li>
</ul>

<p>
$$ tx = xpmin - sx * xfmin $$
$$ ty = ypmin - sy * yfmin $$
</p>

<p>
In final, transformarea fereastra poarta are urmatoarele ecuatii:
</p>

<p>
$$ xp = xf * sx + tx $$
$$ yp = yf * sy + ty $$
</p>

<p>
Consideram o aceeasi orientare a axelor celor doua sisteme de coordonate. Daca acestea au orientari diferite (ca in prima imagine), trebuie aplicata o transformare suplimentara de corectie a coordonatei y.
</p>

</div>

<h3 class="sectionedit10" id="efectele_transformarii">Efectele transformarii</h3>
<div class="level3">
<ul>
<li class="level1"><div class="li"> marire/micsorare, in functie de dimensiunile ferestrei si ale portii</div>
</li>
<li class="level1"><div class="li"> deformare daca fereastra si poarta nu sunt dreptunghiuri asemenea</div>
</li>
<li class="level1"><div class="li"> pentru scalare uniforma, $s=min(sx,sy)$, afisarea centrata in poarta presupune o translatie suplimentara pe axa Ox sau pe axa Oy:</div>
</li>
</ul>

<p>
$$Tsx = (xpmax - xpmin - s*(xfmax - xfmin)) / 2$$
$$Tsy = (ypmax - ypmin - s*(yfmax - yfmin)) / 2$$
</p>
<ul>
<li class="level1"><div class="li"> decuparea primitivelor aflate in afara ferestrei vizuale</div>
</li>
</ul>

</div>

<h3 class="sectionedit11" id="matricea_transformarii_fereastra-poarta">Matricea transformarii fereastra-poarta</h3>
<div class="level3">

<p>
De retinut este ca transformarea fereastra poarta presupune o scalare si o translatie. Ea are urmatoarea expresie, cu formulele de calcul pentru sx, sy, tx, ty prezentate anterior:
</p>

<p>
$$
\begin{bmatrix}
xp\\ 
yp\\ 
1
\end{bmatrix} = \begin{bmatrix}
sx &amp; 0 &amp; tx\\ 
0 &amp; sy &amp; ty\\ 
0 &amp; 0 &amp; 1
\end{bmatrix}

\begin{bmatrix}
xf\\ 
yf\\ 
1
\end{bmatrix} 
$$
</p>

<p>
<p><div class="noteclassic">
Transformarea de vizualizare este deja implementata in clasa <code>Laborator3_Vis2D</code>:
</p>
<pre class="code cpp"><span class="co1">//2D vizualization matrix</span>
glm<span class="sy4">::</span><span class="me2">mat3</span> Laborator3_Vis2D<span class="sy4">::</span><span class="me2">VisualizationTransf2D</span><span class="br0">&#40;</span><span class="kw4">const</span> LogicSpace <span class="sy3">&amp;</span> logicSpace, <span class="kw4">const</span> ViewportSpace <span class="sy3">&amp;</span> viewSpace<span class="br0">&#41;</span>
<span class="br0">&#123;</span>
	<span class="kw4">float</span> sx, sy, tx, ty<span class="sy4">;</span>
	sx <span class="sy1">=</span> viewSpace.<span class="me1">width</span> <span class="sy2">/</span> logicSpace.<span class="me1">width</span><span class="sy4">;</span>
	sy <span class="sy1">=</span> viewSpace.<span class="me1">height</span> <span class="sy2">/</span> logicSpace.<span class="me1">height</span><span class="sy4">;</span>
	tx <span class="sy1">=</span> viewSpace.<span class="me1">x</span> <span class="sy2">-</span> sx <span class="sy2">*</span> logicSpace.<span class="me1">x</span><span class="sy4">;</span>
	ty <span class="sy1">=</span> viewSpace.<span class="me1">y</span> <span class="sy2">-</span> sy <span class="sy2">*</span> logicSpace.<span class="me1">y</span><span class="sy4">;</span>
&nbsp;
	<span class="kw1">return</span> glm<span class="sy4">::</span><span class="me2">transpose</span><span class="br0">&#40;</span>glm<span class="sy4">::</span><span class="me2">mat3</span><span class="br0">&#40;</span>
		sx, <span class="nu17">0.0f</span>, tx,
		<span class="nu17">0.0f</span>, sy, ty,
		<span class="nu17">0.0f</span>, <span class="nu17">0.0f</span>, <span class="nu17">1.0f</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy4">;</span>
<span class="br0">&#125;</span></pre>

<p>

</div></p>
</p>

<p>
<p><div class="noteclassic">
In cadrul laboratorului, in clasa <code>Laborator3_Vis2D</code>, este creat un patrat, in spatiul logic (0,0) - (4,4). De retinut este faptul ca acum nu mai trebuie sa raportam coordonatele patratului la spatiul de vizualizare (cum se intampla in exercitiile anterioare), ci la spatiul logic pe care l-am definit noi.
</p>
<pre class="code cpp">logicSpace.<span class="me1">x</span> <span class="sy1">=</span> <span class="nu0">0</span><span class="sy4">;</span>	<span class="co1">// logic x</span>
logicSpace.<span class="me1">y</span> <span class="sy1">=</span> <span class="nu0">0</span><span class="sy4">;</span>	<span class="co1">// logic y</span>
logicSpace.<span class="me1">width</span> <span class="sy1">=</span> <span class="nu0">4</span><span class="sy4">;</span>	<span class="co1">// logic width</span>
logicSpace.<span class="me1">height</span> <span class="sy1">=</span> <span class="nu0">4</span><span class="sy4">;</span>	<span class="co1">// logic height</span>
&nbsp;
glm<span class="sy4">::</span><span class="me2">vec3</span> corner <span class="sy1">=</span> glm<span class="sy4">::</span><span class="me2">vec3</span><span class="br0">&#40;</span><span class="nu16">0.001</span>, <span class="nu16">0.001</span>, <span class="nu0">0</span><span class="br0">&#41;</span><span class="sy4">;</span>
length <span class="sy1">=</span> <span class="nu17">0.99f</span><span class="sy4">;</span>
&nbsp;
Mesh<span class="sy2">*</span> square1 <span class="sy1">=</span> Object2D<span class="sy4">::</span><span class="me2">CreateSquare</span><span class="br0">&#40;</span><span class="st0">&quot;square1&quot;</span>, corner, length, glm<span class="sy4">::</span><span class="me2">vec3</span><span class="br0">&#40;</span><span class="nu0">1</span>, <span class="nu0">0</span>, <span class="nu0">0</span><span class="br0">&#41;</span><span class="br0">&#41;</span><span class="sy4">;</span>
AddMeshToList<span class="br0">&#40;</span>square1<span class="br0">&#41;</span><span class="sy4">;</span></pre>

<p>
In functia <code>Update()</code> se deseneaza acelasi patrat creat anterior, de 5 ori: patru patrate in cele patru colturi si un patrat in mijlocul spatiului logic. Se definesc 2 viewport-uri, ambele continand aceleasi obiecte. Primul viewport este definit in jumatatea din stanga a ferestrei de afisare, iar al doilea, in jumatatea din dreapta. Pentru primul viewport se defineste transformarea fereastra poarta default si pentru al doilea viewport, cea uniforma. Observati ca in al doilea viewport patratele raman intotdeauna patrate, pe cand in primul viewport se vad ca dreptunghiuri (adica sunt deformate), daca spatiul logic si spatiul de vizualizare nu sunt reprezentate prin dreptunghiuri asemenea.
</p>

<p>

</div></p>
</p>

</div>

<h3 class="sectionedit12" id="utilizare">Utilizare</h3>
<div class="level3">

<p>
Unde se poate folosi aceasta transformare fereastra poarta? De exemplu, intr-un joc 2D cu masini de curse, se doreste in dreapta-jos a ecranului vizualizarea masinii proprii, intr-un minimap. Acest lucru se face prin desenarea scenei de doua ori. 
</p>

<p>
Daca de exemplu toata scena (traseul si toate masinile) este gandita in spatiul logic (-10,-10) - (10,10) (care are dimensiunea 20&times;20) si spatiul de afisare este (0,0) - (1280, 720), prima data se deseneaza toata scena cu parametrii functiei fereastra-poarta anterior mentionati:
</p>
<pre class="code cpp">LogicSpace logic_space <span class="sy1">=</span> LogicSpace<span class="br0">&#40;</span><span class="sy2">-</span><span class="nu0">10</span>, <span class="sy2">-</span><span class="nu0">10</span>, <span class="nu0">20</span>, <span class="nu0">20</span><span class="br0">&#41;</span><span class="sy4">;</span>
ViewportSpace view_space <span class="sy1">=</span> ViewportSpace<span class="br0">&#40;</span><span class="nu0">0</span>, <span class="nu0">0</span>, <span class="nu0">1280</span>, <span class="nu0">720</span><span class="br0">&#41;</span><span class="sy4">;</span>
vis_matrix <span class="sy2">*</span><span class="sy1">=</span> VisualizationTransf2D<span class="br0">&#40;</span>logic_space, view_space<span class="br0">&#41;</span><span class="sy4">;</span></pre>

<p>
Daca la un moment dat masina proprie este in spatiul (2,2) - (5,5), adica de dimensiune 3&times;3 si vreau sa creez un minimap in coltul din dreapta jos al ecranului de rezolutie 280&times;220, pot desena din nou aceeasi scena, dar cu urmatoarea transformare fereastra-poarta:
</p>
<pre class="code cpp">LogicSpace logic_space <span class="sy1">=</span> LogicSpace<span class="br0">&#40;</span><span class="nu0">2</span>, <span class="nu0">2</span>, <span class="nu0">3</span>, <span class="nu0">3</span><span class="br0">&#41;</span><span class="sy4">;</span>
ViewportSpace view_space <span class="sy1">=</span> ViewportSpace<span class="br0">&#40;</span><span class="nu0">1000</span>, <span class="nu0">500</span>, <span class="nu0">280</span>, <span class="nu0">220</span><span class="br0">&#41;</span><span class="sy4">;</span>
vis_matrix <span class="sy2">*</span><span class="sy1">=</span> VisualizationTransf2D<span class="br0">&#40;</span>logic_space, view_space<span class="br0">&#41;</span><span class="sy4">;</span></pre>

</div>

<h2 class="sectionedit13" id="laboratorul_3">Laboratorul 3</h2>
<div class="level2">

</div>

<h3 class="sectionedit14" id="descriere_laborator">Descriere laborator</h3>
<div class="level3">

<p>
<p><div class="notetip">
In cadrul acestui laborator aveti de programat in doua clase:
</p>
<ul>
<li class="level1"><div class="li"> <code>Laborator3.cpp</code>, pentru familiarizarea cu transformarile 2D de translatie, rotatie si scalare</div>
</li>
<li class="level1"><div class="li"> <code>Laborator3_Vis2D.cpp</code>, pentru familiarizarea cu transformarea fereastra-poarta</div>
</li>
</ul>

<p>
Din clasa <code>Main</code> puteti sa alegeti ce laborator rulati:
</p>
<pre class="code cpp">World <span class="sy2">*</span>world <span class="sy1">=</span> <span class="kw3">new</span> Laborator3<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy4">;</span></pre>

<p>
sau 
</p>
<pre class="code cpp">World <span class="sy2">*</span>world <span class="sy1">=</span> <span class="kw3">new</span> Laborator3_Vis2D<span class="br0">&#40;</span><span class="br0">&#41;</span><span class="sy4">;</span></pre>

<p>

</div></p>
</p>

<p>
<p><div class="noteclassic">
OpenGL este un <abbr title="Application Programming Interface">API</abbr> 3D. Desenarea obiectelor 2D si aplicarea transformarilor 2D sunt simulate prin faptul ca facem abstractie de coordonata z.
</p>

<p>
Transformarea fereastra-poarta este si ea simulata pentru acest framework, dar veti invata pe parcurs ca ea este de fapt inclusa in lantul de 
transformari OpenGL si ca nu trebuie definita explicit. 

</div></p>
</p>

</div>

<h3 class="sectionedit15" id="cerinte_laborator">Cerinte laborator</h3>
<div class="level3">
<ol>
<li class="level1"><div class="li"> Descarcati <a href="https://github.com/UPB-Graphics/Framework-EGC/archive/master.zip" class="urlextern" title="https://github.com/UPB-Graphics/Framework-EGC/archive/master.zip"  rel="nofollow">framework-ul de laborator</a></div>
</li>
<li class="level1"><div class="li"> Completati functiile de translatie, rotatie, scalare din <code>/Laborator3/Transform2D.h</code></div>
</li>
<li class="level1"><div class="li"> Asteptati restul task-urilor oferite de asistent</div>
</li>
<li class="level1"><div class="li"> Sa modifice pasii de translatie si rotatie si scalare pentru cele trei patrate ca sa creeze animatie.</div>
</li>
<li class="level1"><div class="li"> Cu tastele W, A, S, D sa translateze fereastra logica <code>Laborator3_Vis2D</code> (sa inteleaga ca atunci cand se duce fereastra in jos, pare ca obiectele scenei se duc in sus, cand se duce fereastra in stanga, obiectele se duc in dreapta, etc.). Cu tastele Z si X sa faca zoom in si zoom out pe fereastra logica (sa se inteleaga ca atunci cand micsorezi fereastra, pare ca se maresc obiectele si invers).</div>
</li>
</ol>

</div>

        </div>
        <div class="right_sidebar">
          <form action="../../start.html" accept-charset="utf-8" class="search" id="dw__search" method="get"><div class="no"><input type="hidden" name="do" value="search" /><input type="text" id="qsearch__in" accesskey="f" name="id" class="edit" title="[F]" /><input type="submit" value="Search" class="button" title="Search" /><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>          <div class="namespace_sidebar sidebar_box">

<h1 class="sectionedit1" id="info_curs">Info curs</h1>
<div class="level1">
<ul>
<li class="level1"><div class="li"> <a href="../index.html" class="wikilink1" title="egc">Elemente de Grafică pe Calculator</a></div>
</li>
</ul>

</div>
<!-- EDIT1 SECTION "Info curs" [1-38] -->
<h1 class="sectionedit2" id="egc">EGC</h1>
<div class="level1">
<ul>
<li class="level1"><div class="li"> <a href="../seria_ca.html" class="wikilink1" title="egc:seria_ca">Seria CA</a></div>
</li>
<li class="level1"><div class="li"> <a href="../seria_cb.html" class="wikilink1" title="egc:seria_cb">Seria CB</a></div>
</li>
<li class="level1"><div class="li"> <a href="../seria_cc.html" class="wikilink1" title="egc:seria_cc">Seria CC</a></div>
</li>
</ul>

</div>
<!-- EDIT2 SECTION "EGC" [39-123] -->
<h1 class="sectionedit3" id="laboratoare">Laboratoare</h1>
<div class="level1">
<ul>
<li class="level1"><div class="li"> <a href="01.html" class="wikilink1" title="egc:laboratoare:01">Laboratorul 01</a></div>
</li>
<li class="level1"><div class="li"> <a href="02.html" class="wikilink1" title="egc:laboratoare:02">Laboratorul 02</a></div>
</li>
<li class="level1"><div class="li"> <span class="curid"><a href="03.html" class="wikilink1" title="egc:laboratoare:03">Laboratorul 03</a></span></div>
</li>
<li class="level1"><div class="li"> <a href="04.html" class="wikilink1" title="egc:laboratoare:04">Laboratorul 04</a></div>
</li>
<li class="level1"><div class="li"> <a href="05.html" class="wikilink1" title="egc:laboratoare:05">Laboratorul 05</a></div>
</li>
<li class="level1"><div class="li"> <a href="06.html" class="wikilink1" title="egc:laboratoare:06">Laboratorul 06</a></div>
</li>
<li class="level1"><div class="li"> <a href="07.html" class="wikilink1" title="egc:laboratoare:07">Laboratorul 07</a></div>
</li>
</ul>

</div>
<!-- EDIT3 SECTION "Laboratoare" [124-421] -->
<h1 class="sectionedit4" id="teme">Teme</h1>
<div class="level1">

<div><div id="nojs_indexmenu_136674034858355a909ff40" data-jsajax="" class="indexmenu_nojs">

<ul class="idx">
<li class="level1"><div class="li"><a href="../teme/01.html" class="wikilink1" title="egc:teme:01">Tema 1: Geometry Wars</a></div></li>
<li class="level1"><div class="li"><a href="../teme/02.html" class="wikilink1" title="egc:teme:02">Tema 2: Build and Survive</a></div></li>
</ul>
</div></div>

</div>
<!-- EDIT4 SECTION "Teme" [422-464] -->
<h1 class="sectionedit5" id="resurse">Resurse</h1>
<div class="level1">
<ul>
<li class="level1"><div class="li"> <a href="../resurse.html" class="wikilink1" title="egc:resurse">Resurse Utile</a></div>
</li>
</ul>

</div>
<!-- EDIT5 SECTION "Resurse" [465-] -->
</div>
<div class="toc_sidebar sidebar_box">
<!-- TOC START -->
<div id="sb__right__dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="03.html#laboratorul_03">Laboratorul 03</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="03.html#transformari_2d">Transformari 2D</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="03.html#translatia">Translatia</a></div></li>
<li class="level3"><div class="li"><a href="03.html#rotatia">Rotatia</a></div>
<ul class="toc">
<li class="level4"><div class="li"><a href="03.html#rotatia_fata_de_origine">Rotatia fata de origine</a></div></li>
<li class="level4"><div class="li"><a href="03.html#rotatia_fata_de_un_punct_oarecare">Rotatia fata de un punct oarecare</a></div></li>
</ul>
</li>
<li class="level3"><div class="li"><a href="03.html#scalarea">Scalarea</a></div>
<ul class="toc">
<li class="level4"><div class="li"><a href="03.html#scalarea_fata_de_origine">Scalarea fata de origine</a></div></li>
<li class="level4"><div class="li"><a href="03.html#scalarea_fata_de_un_punct_oarecare">Scalarea fata de un punct oarecare</a></div></li>
</ul>
</li>
</ul>
</li>
<li class="level2"><div class="li"><a href="03.html#utilizarea_bibliotecii_glm">Utilizarea bibliotecii GLM</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="03.html#transformari_compuse">Transformari compuse</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="03.html#transformarea_fereastra-poarta">Transformarea fereastra-poarta</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="03.html#definitia_matematica">Definitia matematica:</a></div></li>
<li class="level3"><div class="li"><a href="03.html#efectele_transformarii">Efectele transformarii</a></div></li>
<li class="level3"><div class="li"><a href="03.html#matricea_transformarii_fereastra-poarta">Matricea transformarii fereastra-poarta</a></div></li>
<li class="level3"><div class="li"><a href="03.html#utilizare">Utilizare</a></div></li>
</ul>
</li>
<li class="level2"><div class="li"><a href="03.html#laboratorul_3">Laboratorul 3</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="03.html#descriere_laborator">Descriere laborator</a></div></li>
<li class="level3"><div class="li"><a href="03.html#cerinte_laborator">Cerinte laborator</a></div></li>
</ul></li>
</ul></li>
</ul>
</div>
</div>
<!-- TOC END -->
</div>
        </div>
      
    
      <div class="stylefoot">
        <div class="meta">
          <div class="user">
                    </div>
          <div class="doc">
          egc/laboratoare/03.txt · Last modified: 2016/11/10 16:21 by gabriel.ivanica          </div>
        </div>
      </div>

    <div class="clearer"></div>

    
                <div class="bar" id="bar__bottom">
      <div class="bar-left">
              </div>
      <div class="bar-right">
        <a href="03%3Fdo=media&amp;ns=egc%253Alaboratoare.html"  class="action media" rel="nofollow" title="Media Manager">Media Manager</a><a href="03.html#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Back to top [T]">Back to top</a>      </div>
    </div>
    <div class="clearer"></div>
            
    <div align="center" class="footerinc">
  <div class="license"><a href="http://creativecommons.org/licenses/by-sa/3.0/" rel="license"><img src="../../lib/images/license/button/cc-by-sa.png" alt="CC Attribution-Share Alike 3.0 Unported" /></a></div>
  <a target="_blank" href="http://www.chimeric.de" title="www.chimeric.de"><img src="../../lib/tpl/arctic/images/button-chimeric-de.png" width="80" height="15" alt="www.chimeric.de" border="0" /></a>

  <a target="_blank" href="http://jigsaw.w3.org/css-validator/check/referer" title="Valid CSS"><img src="../../lib/tpl/arctic/images/button-css.png" width="80" height="15" alt="Valid CSS" border="0" /></a>

  <a target="_blank" href="http://wiki.splitbrain.org/wiki:dokuwiki" title="Driven by DokuWiki"><img src="../../lib/tpl/arctic/images/button-dw.png" width="80" height="15" alt="Driven by DokuWiki" border="0" /></a>

  <a target="_blank" href="http://www.firefox-browser.de" title="do yourself a favour and use a real browser - get firefox"><img src="../../lib/tpl/arctic/images/button-firefox.png" width="80" height="15" alt="do yourself a favour and use a real browser - get firefox!!" border="0" /></a>
  
  <a target="_blank" href="../../feed.php" title="Recent changes RSS feed"><img src="../../lib/tpl/arctic/images/button-rss.png" width="80" height="15" alt="Recent changes RSS feed" border="0" /></a>

  <a target="_blank" href="http://validator.w3.org/check/referer" title="Valid XHTML 1.0"><img src="../../lib/tpl/arctic/images/button-xhtml.png" width="80" height="15" alt="Valid XHTML 1.0" border="0" /></a>
</div>

  </div>
</div>

<div class="no"><img src="../../lib/exe/indexer.php%3Fid=egc%253Alaboratoare%253A03&amp;1479891600" width="2" height="1" alt="" /></div>
</body>
</html>

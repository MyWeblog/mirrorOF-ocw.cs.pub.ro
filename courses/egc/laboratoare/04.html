    
    

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
 "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
 lang="en" dir="ltr">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>
    Laboratorul 04    [CS Open CourseWare]
  </title>

  <meta name="generator" content="DokuWiki"/>
<meta name="robots" content="index,follow"/>
<meta name="date" content="2016-11-10T16:31:24+0200"/>
<meta name="keywords" content="egc,laboratoare,04"/>
<link rel="search" type="application/opensearchdescription+xml" href="../../lib/exe/opensearch.php" title="CS Open CourseWare"/>
<link rel="start" href="../../../courses.1.html"/>
<link rel="alternate" type="application/rss+xml" title="Recent Changes" href="../../feed.php"/>
<link rel="alternate" type="application/rss+xml" title="Current Namespace" href="../../feed.php%3Fmode=list&amp;ns=egc:laboratoare"/>
<link rel="alternate" type="text/html" title="Plain HTML" href="../../_export/xhtml/egc/laboratoare/04.html"/>
<link rel="canonical" href="04.html"/>
<link rel="stylesheet" type="text/css" href="../../lib/exe/css.php%3Ft=arctic&amp;tseed=1476798676.css"/>
<script type="text/javascript">/*<![CDATA[*/var NS='egc:laboratoare';var JSINFO = {"id":"egc:laboratoare:04","namespace":"egc:laboratoare","isadmin":0,"isauth":0};
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="../../lib/exe/js.php%3Ftseed=1476798676"></script>
<script type="text/x-mathjax-config">/*<![CDATA[*/MathJax.Hub.Config({
    tex2jax: {
        inlineMath: [ ["$","$"], ["\\(","\\)"] ],
        displayMath: [ ["$$","$$"], ["\\[","\\]"] ],
        processEscapes: true
    }
});
/*!]]>*/</script>
<script type="text/javascript" charset="utf-8" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
<script type="text/javascript">/*<![CDATA[*/
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
		  
/*!]]>*/</script>
<script type="text/javascript">/*<![CDATA[*/
var pageTracker = _gat._getTracker("UA-38383934-1");
pageTracker._initData();
pageTracker._trackPageview();
		  
/*!]]>*/</script>

  <link rel="shortcut icon" href="../../lib/tpl/arctic/images/favicon.ico" />

  
</head>
<body>
<div id="wrapper" class='show'>
  <div class="dokuwiki">

    
    <div class="stylehead">
      <div class="header">
        <div class="pagename">
          <a href="../index.html"><img height="70" src="../../res/sigla_cs.png"/> </a>        </div>
        <div class="logo">
          <a style="color: #AAA !important;" href="../../../courses.1.html"/>Open CourseWare</a>        </div>
      </div>
    
       
      <div class="breadcrumbs">
              </div>
      
            </div>

                  <div class="bar" id="bar__top">
        <div class="bar-left">
                  </div>
        <div class="bar-right">
          <a href="04%3Fdo=recent.html"  class="action recent" accesskey="r" rel="nofollow" title="Recent changes [R]">Recent changes</a><a href="04%3Fdo=login&amp;sectok=f62420cf5b01253da4b50505d148181b.html"  class="action login" rel="nofollow" title="Login">Login</a>        </div>
    </div>
        
    
    
    
              <div class="left_page">
          
<h1 class="sectionedit1" id="laboratorul_04">Laboratorul 04</h1>
<div class="level1">

</div>

<h2 class="sectionedit2" id="transformari_3d">Transformari 3D</h2>
<div class="level2">

<p>
Obiectele 3D sunt definite intr-un sistem de coordonate 3D, de exemplu XYZ.
In cadrul acestui laborator vom implementa diferite tipuri de transformari ce pot fi aplicate obiectelor: translatii, rotatii si scalari. Aceastea sunt definite in format matriceal, in coordonate omgene, asa cum ati invatat deja la curs. Matricile acestor transformari sunt urmatoarele:
</p>

</div>

<h3 class="sectionedit3" id="translatia">Translatia</h3>
<div class="level3">

<p>
$$
\begin{bmatrix}
{x}&#039;\\ 
{y}&#039;\\
{z}&#039;\\ 
1
\end{bmatrix} = \begin{bmatrix}
1 &amp; 0 &amp; 0 &amp; t_x\\ 
0 &amp; 1 &amp; 0 &amp; t_y\\ 
0 &amp; 0 &amp; 1 &amp; t_z\\ 
0 &amp; 0 &amp; 0 &amp;1
\end{bmatrix}

\begin{bmatrix}
x\\ 
y\\ 
z\\ 
1
\end{bmatrix} 
$$
</p>

</div>

<h3 class="sectionedit4" id="rotatia">Rotatia</h3>
<div class="level3">

</div>

<h4 id="rotatia_fata_de_axa_ox">Rotatia fata de axa OX</h4>
<div class="level4">

<p>
$$
\begin{bmatrix}
{x}&#039;\\ 
{y}&#039;\\ 
{z}&#039;\\ 
1
\end{bmatrix} = \begin{bmatrix}
1 &amp; 0 &amp; 0 &amp; 0 \\
0 &amp; cos(u) &amp; -sin(u) &amp; 0 \\ 
0 &amp; sin(u) &amp; cos(u) &amp; 0 \\ 
0 &amp; 0 &amp; 0 &amp; 1
\end{bmatrix}

\begin{bmatrix}
x\\ 
y\\ 
z\\ 
1
\end{bmatrix} 
$$
</p>

</div>

<h4 id="rotatia_fata_de_axa_oy">Rotatia fata de axa OY</h4>
<div class="level4">

<p>
$$
\begin{bmatrix}
{x}&#039;\\ 
{y}&#039;\\ 
{z}&#039;\\ 
1
\end{bmatrix} = \begin{bmatrix}
cos(u) &amp; 0 &amp; sin(u) &amp; 0\\ 
0 &amp; 1 &amp; 0 &amp; 0 \\
-sin(u) &amp; 0 &amp; cos(u) &amp; 0\\ 
0 &amp; 0 &amp; 0 &amp; 1
\end{bmatrix}

\begin{bmatrix}
x\\ 
y\\ 
z\\ 
1
\end{bmatrix} 
$$
</p>

</div>

<h4 id="rotatia_fata_de_axa_oz">Rotatia fata de axa OZ</h4>
<div class="level4">

<p>
$$
\begin{bmatrix}
{x}&#039;\\ 
{y}&#039;\\ 
{z}&#039;\\ 
1
\end{bmatrix} = \begin{bmatrix}
cos(u) &amp; -sin(u) &amp; 0 &amp; 0\\ 
sin(u) &amp; cos(u) &amp; 0 &amp; 0\\ 
0 &amp; 0 &amp; 1 &amp; 0 \\
0 &amp; 0 &amp; 0 &amp; 1
\end{bmatrix}

\begin{bmatrix}
x\\ 
y\\ 
z\\ 
1
\end{bmatrix} 
$$
</p>

</div>

<h4 id="rotatia_fata_o_axa_paralela_cu_axa_ox">Rotatia fata o axa paralela cu axa OX</h4>
<div class="level4">

<p>
Rotatia relativa la o axa paralela cu axa OX se rezolva in cel mai simplu mod prin:
</p>
<ol>
<li class="level1"><div class="li"> translatarea atat a punctului asupra carui se aplica rotatia cat si a punctului in jurul caruia se face rotatia a.i. cel din urma sa se afle pe axa OX.</div>
</li>
<li class="level1"><div class="li"> rotatia normala (in jurul axei OX),</div>
</li>
<li class="level1"><div class="li"> translatarea rezultatului a.i. punctul in jurul caruia s-a facut rotatia sa ajunga in pozitia sa initiala</div>
</li>
</ol>

<p>
Similar se procedeaza si pentru axele paralele cu OY si OZ.
</p>

<p>
La curs veti invata cum puteti realiza rotatii fata de axe oarecare (care nu sunt paralele cu OX, OY sau OZ).
</p>

</div>

<h3 class="sectionedit5" id="scalarea">Scalarea</h3>
<div class="level3">

</div>

<h4 id="scalarea_fata_de_origine">Scalarea fata de origine</h4>
<div class="level4">

<p>
$$
\begin{bmatrix}
{x}&#039;\\ 
{y}&#039;\\
{z}&#039;\\ 
1
\end{bmatrix} = \begin{bmatrix}
s_x &amp; 0 &amp; 0 &amp;0 \\ 
0 &amp; s_y &amp; 0 &amp;0 \\ 
0 &amp; 0 &amp; s_z &amp;0 \\
0 &amp; 0 &amp; 0 &amp;1 
\end{bmatrix}

\begin{bmatrix}
x\\ 
y\\ 
z\\ 
1
\end{bmatrix} 
$$
</p>

<p>
Daca $sx = sy = sz$ atunci avem scalare uniforma, altfel avem scalare neuniforma.
</p>

</div>

<h4 id="scalarea_fata_de_un_punct_oarecare">Scalarea fata de un punct oarecare</h4>
<div class="level4">

<p>
Scalarea relativa la un punct oarecare se rezolva in cel mai simplu mod prin:
</p>
<ol>
<li class="level1"><div class="li"> translatarea atat a punctului asupra caruia se aplica scalarea cat si a punctului fata de care se face scalarea a.i. cel din urma sa fie originea sistemului de coordonate.</div>
</li>
<li class="level1"><div class="li"> scalarea normala (fata de origine),</div>
</li>
<li class="level1"><div class="li"> translatarea rezultatului a.i. punctul fata de care s-a facut scalarea sa ajunga in pozitia sa initiala</div>
</li>
</ol>

</div>

<h2 class="sectionedit6" id="utilizarea_bibliotecii_glm">Utilizarea bibliotecii GLM</h2>
<div class="level2">

<p>
In cadrul laboratorului folosim biblioteca GLM care este o biblioteca implementata cu matrici in forma coloana, exact acelasi format ca OpenGL. Forma coloana difera de forma linie prin ordinea de stocare a elementelor maricei in memorie, Matricea de translatie arata in modul urmator in memorie:
</p>
<pre class="code cpp">glm<span class="sy4">::</span><span class="me2">mat4</span> Translate<span class="br0">&#40;</span><span class="kw4">float</span> tx, <span class="kw4">float</span> ty, <span class="kw4">float</span> tz<span class="br0">&#41;</span>
<span class="br0">&#123;</span>
	<span class="kw1">return</span> glm<span class="sy4">::</span><span class="me2">mat4</span><span class="br0">&#40;</span> 
        	 <span class="nu0">1</span>,  <span class="nu0">0</span>, <span class="nu0">0</span>,  <span class="nu0">0</span>,     <span class="co1">// coloana 1 in memorie </span>
		 <span class="nu0">0</span>,  <span class="nu0">1</span>, <span class="nu0">0</span>,  <span class="nu0">0</span>,     <span class="co1">// coloana 2 in memorie </span>
		 <span class="nu0">0</span>,  <span class="nu0">0</span>, <span class="nu0">1</span>,  <span class="nu0">0</span>,     <span class="co1">// coloana 3 in memorie </span>
		tx, ty, tz, <span class="nu0">1</span><span class="br0">&#41;</span><span class="sy4">;</span>    <span class="co1">// coloana 4 in memorie </span>
&nbsp;
<span class="br0">&#125;</span></pre>

<p>
Din aceasta cauza, este convenabil ca matricile sa fie scrise manual in forma aceasta:
</p>
<pre class="code cpp">glm<span class="sy4">::</span><span class="me2">mat3</span> Translate<span class="br0">&#40;</span><span class="kw4">float</span> tx, <span class="kw4">float</span> ty, <span class="kw4">float</span> tz<span class="br0">&#41;</span>
<span class="br0">&#123;</span>
	<span class="kw1">return</span> glm<span class="sy4">::</span><span class="me2">transpose</span><span class="br0">&#40;</span>
		glm<span class="sy4">::</span><span class="me2">mat4</span><span class="br0">&#40;</span> <span class="nu0">1</span>, <span class="nu0">0</span>, <span class="nu0">0</span>, tx, 
			   <span class="nu0">0</span>, <span class="nu0">1</span>, <span class="nu0">0</span>, ty, 
			   <span class="nu0">0</span>, <span class="nu0">0</span>, <span class="nu0">1</span>, tz,
                           <span class="nu0">0</span>, <span class="nu0">0</span>, <span class="nu0">0</span>, <span class="nu0">1</span><span class="br0">&#41;</span>
	<span class="br0">&#41;</span><span class="sy4">;</span> 
<span class="br0">&#125;</span></pre>

<p>
<p><div class="noteclassic">
In framework-ul de laborator, in fisierul <code>Transform3D.h</code> sunt definite functiile pentru calculul matricilor de translatie, rotatie si scalare. In momentul acesta toate functiile intorc matricea identitate. In cadrul laboratorului va trebui sa modificati codul pentru a calcula matricile respective. 

</div></p>
</p>

<p>
<p><div class="noteclassic">
In cadrul laboratorului, in fisierul <code>Laborator4.cpp</code>, exista o serie de obiecte (cuburi) pentru care, in functia <code>Update()</code>, inainte de desenare, se definesc matricile de transformari. Comanda de desenare se da prin functia <code>RenderMesh()</code>, care are ca parametru si matricea de transformari.
</p>
<pre class="code cpp">   modelMatrix <span class="sy1">=</span> glm<span class="sy4">::</span><span class="me2">mat4</span><span class="br0">&#40;</span><span class="nu0">1</span><span class="br0">&#41;</span><span class="sy4">;</span>
   modelMatrix <span class="sy2">*</span><span class="sy1">=</span> Transform2D<span class="sy4">::</span><span class="me2">Translate</span><span class="br0">&#40;</span><span class="nu0">1</span>, <span class="nu0">2</span>, <span class="nu0">1</span><span class="br0">&#41;</span><span class="sy4">;</span>
   RenderMesh<span class="br0">&#40;</span>meshes<span class="br0">&#91;</span><span class="st0">&quot;box&quot;</span><span class="br0">&#93;</span>, modelMatrix<span class="br0">&#41;</span><span class="sy4">;</span></pre>

<p>
Pentru exemplul anterior, matricea de translatie creata va avea ca efect translatarea cubului curent cu (1, 2, 1). Pentru efecte de animatie continua, pasii de translatie ar trebui sa se modifice in timp.

</div></p>
</p>

</div>

<h3 class="sectionedit7" id="cerinte_laborator">Cerinte laborator</h3>
<div class="level3">
<ol>
<li class="level1"><div class="li"> Descarcati <a href="https://github.com/UPB-Graphics/Framework-EGC/archive/master.zip" class="urlextern" title="https://github.com/UPB-Graphics/Framework-EGC/archive/master.zip"  rel="nofollow">framework-ul de laborator</a></div>
</li>
<li class="level1"><div class="li"> Completati functiile de translatie, rotatie, scalare din <code>/Laborator4/Transform3D.h</code></div>
</li>
<li class="level1"><div class="li"> Asteptati restul task-urilor oferite de asistent</div>
</li>
<li class="level1"><div class="li"> Sa se realizeze animatii la apasarea tastelor (in <code>OnInputUpdate</code>) pentru cele 3 cuburi, astfel:</div>
</li>
</ol>
<ul>
<li class="level1"><div class="li"> cu tastele W A S D R F sa deplaseze primul cub in scena</div>
</li>
<li class="level1"><div class="li"> cu tastele 1 si 2 sa scaleze al doilea cub (sa se mareasca si sa se micsoreze) fata de centrul propriu</div>
</li>
<li class="level1"><div class="li"> cu tastele 3,4,5,6,7,8 sa roteasca al treilea cub fata de axele globale OX, OY, OZ</div>
</li>
</ul>

</div>

        </div>
        <div class="right_sidebar">
          <form action="../../start.html" accept-charset="utf-8" class="search" id="dw__search" method="get"><div class="no"><input type="hidden" name="do" value="search" /><input type="text" id="qsearch__in" accesskey="f" name="id" class="edit" title="[F]" /><input type="submit" value="Search" class="button" title="Search" /><div id="qsearch__out" class="ajax_qsearch JSpopup"></div></div></form>          <div class="namespace_sidebar sidebar_box">

<h1 class="sectionedit1" id="info_curs">Info curs</h1>
<div class="level1">
<ul>
<li class="level1"><div class="li"> <a href="../index.html" class="wikilink1" title="egc">Elemente de Grafică pe Calculator</a></div>
</li>
</ul>

</div>
<!-- EDIT1 SECTION "Info curs" [1-38] -->
<h1 class="sectionedit2" id="egc">EGC</h1>
<div class="level1">
<ul>
<li class="level1"><div class="li"> <a href="../seria_ca.html" class="wikilink1" title="egc:seria_ca">Seria CA</a></div>
</li>
<li class="level1"><div class="li"> <a href="../seria_cb.html" class="wikilink1" title="egc:seria_cb">Seria CB</a></div>
</li>
<li class="level1"><div class="li"> <a href="../seria_cc.html" class="wikilink1" title="egc:seria_cc">Seria CC</a></div>
</li>
</ul>

</div>
<!-- EDIT2 SECTION "EGC" [39-123] -->
<h1 class="sectionedit3" id="laboratoare">Laboratoare</h1>
<div class="level1">
<ul>
<li class="level1"><div class="li"> <a href="01.html" class="wikilink1" title="egc:laboratoare:01">Laboratorul 01</a></div>
</li>
<li class="level1"><div class="li"> <a href="02.html" class="wikilink1" title="egc:laboratoare:02">Laboratorul 02</a></div>
</li>
<li class="level1"><div class="li"> <a href="03.html" class="wikilink1" title="egc:laboratoare:03">Laboratorul 03</a></div>
</li>
<li class="level1"><div class="li"> <span class="curid"><a href="04.html" class="wikilink1" title="egc:laboratoare:04">Laboratorul 04</a></span></div>
</li>
<li class="level1"><div class="li"> <a href="05.html" class="wikilink1" title="egc:laboratoare:05">Laboratorul 05</a></div>
</li>
<li class="level1"><div class="li"> <a href="06.html" class="wikilink1" title="egc:laboratoare:06">Laboratorul 06</a></div>
</li>
<li class="level1"><div class="li"> <a href="07.html" class="wikilink1" title="egc:laboratoare:07">Laboratorul 07</a></div>
</li>
</ul>

</div>
<!-- EDIT3 SECTION "Laboratoare" [124-421] -->
<h1 class="sectionedit4" id="teme">Teme</h1>
<div class="level1">

<div><div id="nojs_indexmenu_166053107058355a91079c3" data-jsajax="" class="indexmenu_nojs">

<ul class="idx">
<li class="level1"><div class="li"><a href="../teme/01.html" class="wikilink1" title="egc:teme:01">Tema 1: Geometry Wars</a></div></li>
<li class="level1"><div class="li"><a href="../teme/02.html" class="wikilink1" title="egc:teme:02">Tema 2: Build and Survive</a></div></li>
</ul>
</div></div>

</div>
<!-- EDIT4 SECTION "Teme" [422-464] -->
<h1 class="sectionedit5" id="resurse">Resurse</h1>
<div class="level1">
<ul>
<li class="level1"><div class="li"> <a href="../resurse.html" class="wikilink1" title="egc:resurse">Resurse Utile</a></div>
</li>
</ul>

</div>
<!-- EDIT5 SECTION "Resurse" [465-] -->
</div>
<div class="toc_sidebar sidebar_box">
<!-- TOC START -->
<div id="sb__right__dw__toc">
<h3 class="toggle">Table of Contents</h3>
<div>

<ul class="toc">
<li class="level1"><div class="li"><a href="04.html#laboratorul_04">Laboratorul 04</a></div>
<ul class="toc">
<li class="level2"><div class="li"><a href="04.html#transformari_3d">Transformari 3D</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="04.html#translatia">Translatia</a></div></li>
<li class="level3"><div class="li"><a href="04.html#rotatia">Rotatia</a></div>
<ul class="toc">
<li class="level4"><div class="li"><a href="04.html#rotatia_fata_de_axa_ox">Rotatia fata de axa OX</a></div></li>
<li class="level4"><div class="li"><a href="04.html#rotatia_fata_de_axa_oy">Rotatia fata de axa OY</a></div></li>
<li class="level4"><div class="li"><a href="04.html#rotatia_fata_de_axa_oz">Rotatia fata de axa OZ</a></div></li>
<li class="level4"><div class="li"><a href="04.html#rotatia_fata_o_axa_paralela_cu_axa_ox">Rotatia fata o axa paralela cu axa OX</a></div></li>
</ul>
</li>
<li class="level3"><div class="li"><a href="04.html#scalarea">Scalarea</a></div>
<ul class="toc">
<li class="level4"><div class="li"><a href="04.html#scalarea_fata_de_origine">Scalarea fata de origine</a></div></li>
<li class="level4"><div class="li"><a href="04.html#scalarea_fata_de_un_punct_oarecare">Scalarea fata de un punct oarecare</a></div></li>
</ul>
</li>
</ul>
</li>
<li class="level2"><div class="li"><a href="04.html#utilizarea_bibliotecii_glm">Utilizarea bibliotecii GLM</a></div>
<ul class="toc">
<li class="level3"><div class="li"><a href="04.html#cerinte_laborator">Cerinte laborator</a></div></li>
</ul></li>
</ul></li>
</ul>
</div>
</div>
<!-- TOC END -->
</div>
        </div>
      
    
      <div class="stylefoot">
        <div class="meta">
          <div class="user">
                    </div>
          <div class="doc">
          egc/laboratoare/04.txt · Last modified: 2016/11/10 16:31 by gabriel.ivanica          </div>
        </div>
      </div>

    <div class="clearer"></div>

    
                <div class="bar" id="bar__bottom">
      <div class="bar-left">
              </div>
      <div class="bar-right">
        <a href="04%3Fdo=media&amp;ns=egc%253Alaboratoare.html"  class="action media" rel="nofollow" title="Media Manager">Media Manager</a><a href="04.html#dokuwiki__top"  class="action top" accesskey="t" rel="nofollow" title="Back to top [T]">Back to top</a>      </div>
    </div>
    <div class="clearer"></div>
            
    <div align="center" class="footerinc">
  <div class="license"><a href="http://creativecommons.org/licenses/by-sa/3.0/" rel="license"><img src="../../lib/images/license/button/cc-by-sa.png" alt="CC Attribution-Share Alike 3.0 Unported" /></a></div>
  <a target="_blank" href="http://www.chimeric.de" title="www.chimeric.de"><img src="../../lib/tpl/arctic/images/button-chimeric-de.png" width="80" height="15" alt="www.chimeric.de" border="0" /></a>

  <a target="_blank" href="http://jigsaw.w3.org/css-validator/check/referer" title="Valid CSS"><img src="../../lib/tpl/arctic/images/button-css.png" width="80" height="15" alt="Valid CSS" border="0" /></a>

  <a target="_blank" href="http://wiki.splitbrain.org/wiki:dokuwiki" title="Driven by DokuWiki"><img src="../../lib/tpl/arctic/images/button-dw.png" width="80" height="15" alt="Driven by DokuWiki" border="0" /></a>

  <a target="_blank" href="http://www.firefox-browser.de" title="do yourself a favour and use a real browser - get firefox"><img src="../../lib/tpl/arctic/images/button-firefox.png" width="80" height="15" alt="do yourself a favour and use a real browser - get firefox!!" border="0" /></a>
  
  <a target="_blank" href="../../feed.php" title="Recent changes RSS feed"><img src="../../lib/tpl/arctic/images/button-rss.png" width="80" height="15" alt="Recent changes RSS feed" border="0" /></a>

  <a target="_blank" href="http://validator.w3.org/check/referer" title="Valid XHTML 1.0"><img src="../../lib/tpl/arctic/images/button-xhtml.png" width="80" height="15" alt="Valid XHTML 1.0" border="0" /></a>
</div>

  </div>
</div>

<div class="no"><img src="../../lib/exe/indexer.php%3Fid=egc%253Alaboratoare%253A04&amp;1479891601" width="2" height="1" alt="" /></div>
</body>
</html>
